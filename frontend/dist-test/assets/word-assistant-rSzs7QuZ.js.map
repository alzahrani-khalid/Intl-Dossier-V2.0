{"version":3,"file":"word-assistant-rSzs7QuZ.js","sources":["../../src/pages/word-assistant/WordAssistantPage.tsx","../../src/routes/_protected/word-assistant.tsx?tsr-split=component"],"sourcesContent":["import { useState, useRef, useEffect } from 'react'\nimport { useTranslation } from 'react-i18next'\nimport { useMutation } from '@tanstack/react-query'\nimport { Send, Bot, User, Copy, ThumbsUp, ThumbsDown, RefreshCw, FileText, Sparkles } from 'lucide-react'\nimport { Button } from '@/components/ui/button'\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Input } from '@/components/ui/input'\nimport { supabase } from '@/lib/supabase'\nimport { format } from 'date-fns'\n\ninterface Message {\n id: string\n role: 'user' | 'assistant'\n content: string\n timestamp: Date\n isTyping?: boolean\n}\n\ninterface SuggestedPrompt {\n icon: React.ReactNode\n title: string\n prompt: string\n}\n\ntype AssistantAction =\n | 'complete'\n | 'translate'\n | 'summarize'\n | 'expand'\n | 'rephrase'\n | 'check_grammar'\n | 'generate_embeddings'\n\ninterface SendMessagePayload {\n text: string\n action?: AssistantAction\n targetLanguage?: 'en' | 'ar'\n}\n\ninterface WordAssistantResponse {\n result: string\n tokens_used?: number\n model?: string\n session_id?: string\n embeddings?: number[]\n error?: string\n}\n\ninterface MutationContext {\n typingMessageId: string\n}\n\nexport function WordAssistantPage() {\n const { t } = useTranslation()\n const [messages, setMessages] = useState<Message[]>([])\n const [input, setInput] = useState('')\n const [isConnected, setIsConnected] = useState(true)\n const messagesEndRef = useRef<HTMLDivElement>(null)\n const messagesRef = useRef<Message[]>([])\n\n const suggestedPrompts: SuggestedPrompt[] = [\n {\n icon: <FileText className=\"h-5 w-5\" />,\n title: t('wordAssistant.prompts.briefTitle'),\n prompt: t('wordAssistant.prompts.briefPrompt')\n },\n {\n icon: <Sparkles className=\"h-5 w-5\" />,\n title: t('wordAssistant.prompts.analysisTitle'),\n prompt: t('wordAssistant.prompts.analysisPrompt')\n },\n {\n icon: <FileText className=\"h-5 w-5\" />,\n title: t('wordAssistant.prompts.summaryTitle'),\n prompt: t('wordAssistant.prompts.summaryPrompt')\n },\n {\n icon: <Bot className=\"h-5 w-5\" />,\n title: t('wordAssistant.prompts.recommendationTitle'),\n prompt: t('wordAssistant.prompts.recommendationPrompt')\n }\n ]\n\n useEffect(() => {\n messagesRef.current = messages\n }, [messages])\n\nconst assistantMode = (import.meta.env.VITE_WORD_ASSISTANT_MODE || 'fallback') as\n | 'supabase'\n | 'fallback'\n\nfunction generateLocalAssistantResponse(message: string, history: string): WordAssistantResponse {\n const parts = [\n 'üìù *Draft Response*',\n `You asked: ${message}`,\n history\n ? `Context considered (${Math.min(history.length, 120)} chars shown): ${history.slice(-120)}`\n : 'No prior context provided.',\n 'Suggested next steps:',\n '- Refine the prompt with specific objectives or data points.',\n '- Add any constraints such as audience, tone, or deadline.',\n '- When the AI service is available, re-run for a full draft.'\n ]\n\n return {\n result: parts.join('\\n\\n'),\n model: 'local-fallback'\n }\n}\n\nconst sendMessageMutation = useMutation<WordAssistantResponse, Error, SendMessagePayload, MutationContext>({\n mutationFn: async ({ text, action = 'complete', targetLanguage }): Promise<WordAssistantResponse> => {\n const conversationHistory = messagesRef.current\n .filter(message => !message.isTyping)\n .map(message => `${message.role.toUpperCase()}: ${message.content}`)\n .join('\\n')\n\n if (assistantMode !== 'supabase') {\n return generateLocalAssistantResponse(text, conversationHistory)\n }\n\n const payload: Record<string, unknown> = {\n action,\n text,\n max_length: 400\n }\n\n if (conversationHistory) {\n payload.context = conversationHistory\n }\n\n if (targetLanguage) {\n payload.target_language = targetLanguage\n }\n\n const { data, error } = await supabase.functions.invoke<WordAssistantResponse>('word-assistant', {\n body: payload\n })\n\n if (error) {\n throw error\n }\n\n if (!data) {\n throw new Error(t('wordAssistant.errorMessage'))\n }\n\n return data\n },\n onMutate: async ({ text }) => {\n const userMessage: Message = {\n id: crypto.randomUUID(),\n role: 'user',\n content: text,\n timestamp: new Date()\n }\n\n const typingMessage: Message = {\n id: crypto.randomUUID(),\n role: 'assistant',\n content: '',\n timestamp: new Date(),\n isTyping: true\n }\n\n setMessages(prev => {\n const next = [...prev, userMessage, typingMessage]\n messagesRef.current = next\n return next\n })\n\n return { typingMessageId: typingMessage.id }\n },\n onSuccess: (data, _variables, context) => {\n setIsConnected(true)\n setMessages(prev => {\n const withoutTyping = context\n ? prev.filter(message => message.id !== context.typingMessageId)\n : prev.filter(message => !message.isTyping)\n\n const assistantMessage: Message = {\n id: crypto.randomUUID(),\n role: 'assistant',\n content: data.result || t('wordAssistant.fallbackContent'),\n timestamp: new Date()\n }\n\n const next = [...withoutTyping, assistantMessage]\n messagesRef.current = next\n return next\n })\n },\n onError: (error, _variables, context) => {\n setIsConnected(false)\n setMessages(prev => {\n const withoutTyping = context\n ? prev.filter(message => message.id !== context.typingMessageId)\n : prev.filter(message => !message.isTyping)\n\n const assistantMessage: Message = {\n id: crypto.randomUUID(),\n role: 'assistant',\n content: t('wordAssistant.errorMessage'),\n timestamp: new Date()\n }\n\n const next = [...withoutTyping, assistantMessage]\n messagesRef.current = next\n return next\n })\n console.error('Word assistant error:', error)\n }\n })\n\n const handleSend = () => {\n if (!input.trim()) return\n sendMessageMutation.mutate({ text: input.trim(), action: 'complete' })\n setInput('')\n }\n\n const handlePromptClick = (prompt: string) => {\n setInput(prompt)\n }\n\n const copyToClipboard = (text: string) => {\n navigator.clipboard.writeText(text)\n }\n\n const scrollToBottom = () => {\n messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' })\n }\n\n useEffect(() => {\n scrollToBottom()\n }, [messages])\n\n // Lightweight connectivity check on mount\n useEffect(() => {\n let isMounted = true\n\n const checkConnection = async () => {\n if (assistantMode !== 'supabase') {\n if (isMounted) setIsConnected(true)\n return\n }\n\n try {\n const { error } = await supabase.functions.invoke<WordAssistantResponse>('word-assistant', {\n body: {\n action: 'check_grammar',\n text: 'health check'\n }\n })\n if (isMounted) {\n setIsConnected(!error)\n }\n } catch (err) {\n console.warn('Word assistant connectivity check failed:', err)\n if (isMounted) {\n setIsConnected(false)\n }\n }\n }\n\n checkConnection()\n\n return () => {\n isMounted = false\n }\n }, [assistantMode])\n\n return (\n <div className=\"container mx-auto py-6 h-[calc(100vh-8rem)]\">\n <div className=\"flex justify-between items-center mb-6\">\n <div>\n <h1 className=\"text-3xl font-bold\">{t('navigation.wordAssistant')}</h1>\n <p className=\"text-muted-foreground mt-1\">{t('wordAssistant.description')}</p>\n </div>\n <div className=\"flex items-center gap-2\">\n <div className={`flex items-center gap-2 px-3 py-1 rounded-full text-sm ${\n isConnected ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'\n }`}>\n <div className={`w-2 h-2 rounded-full ${\n isConnected ? 'bg-green-600' : 'bg-red-600'\n }`} />\n {isConnected ? t('wordAssistant.connected') : t('wordAssistant.disconnected')}\n </div>\n <Button\n variant=\"outline\"\n size=\"sm\"\n onClick={() => setMessages([])}\n >\n <RefreshCw className=\"h-4 w-4 me-2\" />\n {t('wordAssistant.clearChat')}\n </Button>\n </div>\n </div>\n\n <div className=\"grid gap-6 md:grid-cols-4 h-[calc(100%-5rem)]\">\n <div className=\"md:col-span-3\">\n <Card className=\"h-full flex flex-col\">\n <CardContent className=\"flex-1 overflow-y-auto p-6\">\n {messages.length === 0 ? (\n <div className=\"flex flex-col items-center justify-center h-full text-center\">\n <Bot className=\"h-16 w-16 text-muted-foreground mb-4\" />\n <h2 className=\"text-xl font-semibold mb-2\">{t('wordAssistant.welcomeTitle')}</h2>\n <p className=\"text-muted-foreground max-w-md\">\n {t('wordAssistant.welcomeMessage')}\n </p>\n <div className=\"grid gap-3 mt-6 md:grid-cols-2 w-full max-w-2xl\">\n {suggestedPrompts.map((prompt, i) => (\n <Card\n key={i}\n className=\"cursor-pointer hover:shadow-md transition-shadow\"\n onClick={() => handlePromptClick(prompt.prompt)}\n >\n <CardContent className=\"p-4\">\n <div className=\"flex items-center gap-3\">\n <div className=\"text-primary\">{prompt.icon}</div>\n <div className=\"text-start\">\n <p className=\"font-medium text-sm\">{prompt.title}</p>\n <p className=\"text-xs text-muted-foreground line-clamp-2\">\n {prompt.prompt}\n </p>\n </div>\n </div>\n </CardContent>\n </Card>\n ))}\n </div>\n </div>\n ) : (\n <div className=\"space-y-4\">\n {messages.map(message => (\n <div\n key={message.id}\n className={`flex gap-3 ${\n message.role === 'user' ? 'justify-end' : 'justify-start'\n }`}\n >\n {message.role === 'assistant' && (\n <div className=\"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center\">\n <Bot className=\"h-5 w-5 text-primary\" />\n </div>\n )}\n <div className={`max-w-[70%] ${\n message.role === 'user' ? 'order-1' : 'order-2'\n }`}>\n <Card className={`${\n message.role === 'user' ? 'bg-primary text-primary-foreground' : ''\n }`}>\n <CardContent className=\"p-4\">\n {message.isTyping ? (\n <div className=\"flex gap-1\">\n <span className=\"w-2 h-2 rounded-full bg-current animate-bounce\" />\n <span className=\"w-2 h-2 rounded-full bg-current animate-bounce delay-100\" />\n <span className=\"w-2 h-2 rounded-full bg-current animate-bounce delay-200\" />\n </div>\n ) : (\n <>\n <p className=\"whitespace-pre-wrap\">{message.content}</p>\n <div className=\"flex items-center gap-2 mt-3 pt-3 border-t border-current/10\">\n <span className=\"text-xs opacity-70\">\n {format(message.timestamp, 'HH:mm')}\n </span>\n {message.role === 'assistant' && (\n <div className=\"flex gap-1 ms-auto\">\n <Button\n size=\"sm\"\n variant=\"ghost\"\n className=\"h-6 w-6 p-0\"\n onClick={() => copyToClipboard(message.content)}\n >\n <Copy className=\"h-3 w-3\" />\n </Button>\n <Button\n size=\"sm\"\n variant=\"ghost\"\n className=\"h-6 w-6 p-0\"\n >\n <ThumbsUp className=\"h-3 w-3\" />\n </Button>\n <Button\n size=\"sm\"\n variant=\"ghost\"\n className=\"h-6 w-6 p-0\"\n >\n <ThumbsDown className=\"h-3 w-3\" />\n </Button>\n </div>\n )}\n </div>\n </>\n )}\n </CardContent>\n </Card>\n </div>\n {message.role === 'user' && (\n <div className=\"w-8 h-8 rounded-full bg-primary flex items-center justify-center order-2\">\n <User className=\"h-5 w-5 text-primary-foreground\" />\n </div>\n )}\n </div>\n ))}\n <div ref={messagesEndRef} />\n </div>\n )}\n </CardContent>\n <div className=\"border-t p-4\">\n <div className=\"flex gap-2\">\n <Input\n placeholder={t('wordAssistant.inputPlaceholder')}\n value={input}\n onChange={(e) => setInput(e.target.value)}\n onKeyPress={(e) => e.key === 'Enter' && handleSend()}\n disabled={sendMessageMutation.isPending}\n />\n <Button\n onClick={handleSend}\n disabled={!input.trim() || sendMessageMutation.isPending}\n >\n <Send className=\"h-4 w-4\" />\n </Button>\n </div>\n </div>\n </Card>\n </div>\n\n <div>\n <Card className=\"mb-4\">\n <CardHeader>\n <CardTitle className=\"text-sm\">{t('wordAssistant.capabilities')}</CardTitle>\n </CardHeader>\n <CardContent>\n <ul className=\"text-sm space-y-2 text-muted-foreground\">\n <li>‚Ä¢ {t('wordAssistant.capability1')}</li>\n <li>‚Ä¢ {t('wordAssistant.capability2')}</li>\n <li>‚Ä¢ {t('wordAssistant.capability3')}</li>\n <li>‚Ä¢ {t('wordAssistant.capability4')}</li>\n <li>‚Ä¢ {t('wordAssistant.capability5')}</li>\n <li>‚Ä¢ {t('wordAssistant.capability6')}</li>\n </ul>\n </CardContent>\n </Card>\n\n <Card>\n <CardHeader>\n <CardTitle className=\"text-sm\">{t('wordAssistant.tips')}</CardTitle>\n </CardHeader>\n <CardContent>\n <ul className=\"text-sm space-y-2 text-muted-foreground\">\n <li>‚Ä¢ {t('wordAssistant.tip1')}</li>\n <li>‚Ä¢ {t('wordAssistant.tip2')}</li>\n <li>‚Ä¢ {t('wordAssistant.tip3')}</li>\n <li>‚Ä¢ {t('wordAssistant.tip4')}</li>\n </ul>\n </CardContent>\n </Card>\n </div>\n </div>\n </div>\n )\n}\n","import { createFileRoute } from '@tanstack/react-router'\nimport { WordAssistantPage } from '@/pages/word-assistant/WordAssistantPage'\n\nexport const Route = createFileRoute('/_protected/word-assistant')({\n component: WordAssistantPage\n})"],"names":["WordAssistantPage","useTranslation","messages","setMessages","useState","input","setInput","isConnected","setIsConnected","messagesEndRef","useRef","messagesRef","suggestedPrompts","jsx","FileText","Sparkles","Bot","useEffect","assistantMode","generateLocalAssistantResponse","message","history","sendMessageMutation","useMutation","text","action","targetLanguage","conversationHistory","userMessage","typingMessage","prev","next","data","_variables","context","withoutTyping","assistantMessage","error","handleSend","handlePromptClick","prompt","copyToClipboard","scrollToBottom","isMounted","jsxs","Button","RefreshCw","Card","CardContent","i","Fragment","Copy","ThumbsUp","ThumbsDown","User","Input","Send","CardHeader","CardTitle","SplitComponent"],"mappings":"4gBAoDO,SAASA,GAAoB,CACnC,KAAM,CAAE,CAAA,EAAMC,EAAA,EACR,CAACC,EAAUC,CAAW,EAAIC,EAAAA,SAAoB,CAAA,CAAE,EAChD,CAACC,EAAOC,CAAQ,EAAIF,EAAAA,SAAS,EAAE,EAC/B,CAACG,EAAaC,CAAc,EAAIJ,EAAAA,SAAS,EAAI,EAC7CK,EAAiBC,EAAAA,OAAuB,IAAI,EAC5CC,EAAcD,EAAAA,OAAkB,EAAE,EAElCE,EAAsC,CAC5C,CACA,KAAMC,EAAAA,IAACC,EAAA,CAAS,UAAU,UAAU,EACpC,MAAO,EAAE,kCAAkC,EAC3C,OAAQ,EAAE,mCAAmC,CAAA,EAE7C,CACA,KAAMD,EAAAA,IAACE,EAAA,CAAS,UAAU,UAAU,EACpC,MAAO,EAAE,qCAAqC,EAC9C,OAAQ,EAAE,sCAAsC,CAAA,EAEhD,CACA,KAAMF,EAAAA,IAACC,EAAA,CAAS,UAAU,UAAU,EACpC,MAAO,EAAE,oCAAoC,EAC7C,OAAQ,EAAE,qCAAqC,CAAA,EAE/C,CACA,KAAMD,EAAAA,IAACG,EAAA,CAAI,UAAU,UAAU,EAC/B,MAAO,EAAE,2CAA2C,EACpD,OAAQ,EAAE,4CAA4C,CAAA,CACtD,EAGAC,EAAAA,UAAU,IAAM,CAChBN,EAAY,QAAUT,CACtB,EAAG,CAACA,CAAQ,CAAC,EAEd,MAAMgB,EAA6D,WAInE,SAASC,EAA+BC,EAAiBC,EAAwC,CAahG,MAAO,CACP,OAbc,CACd,sBACA,cAAcD,CAAO,GACrBC,EACE,uBAAuB,KAAK,IAAIA,EAAQ,OAAQ,GAAG,CAAC,kBAAkBA,EAAQ,MAAM,IAAI,CAAC,GACzF,6BACF,wBACA,+DACA,6DACA,8DAAA,EAIc,KAAK;AAAA;AAAA,CAAM,EACzB,MAAO,gBAAA,CAER,CAEA,MAAMC,EAAsBC,EAA+E,CAC1G,WAAY,MAAO,CAAE,KAAAC,EAAM,OAAAC,EAAS,WAAY,eAAAC,KAAqD,CACrG,MAAMC,EAAsBhB,EAAY,QACvC,UAAkB,CAACS,EAAQ,QAAQ,EACnC,IAAIA,GAAW,GAAGA,EAAQ,KAAK,YAAA,CAAa,KAAKA,EAAQ,OAAO,EAAE,EAClE,KAAK;AAAA,CAAI,EAGV,OAAOD,EAA+BK,EAAMG,CAAmB,CA8B/D,EACA,SAAU,MAAO,CAAE,KAAAH,KAAW,CAC9B,MAAMI,EAAuB,CAC7B,GAAI,OAAO,WAAA,EACX,KAAM,OACN,QAASJ,EACT,cAAe,IAAK,EAGdK,EAAyB,CAC/B,GAAI,OAAO,WAAA,EACX,KAAM,YACN,QAAS,GACT,cAAe,KACf,SAAU,EAAA,EAGV,OAAA1B,EAAY2B,GAAQ,CACpB,MAAMC,EAAO,CAAC,GAAGD,EAAMF,EAAaC,CAAa,EACjD,OAAAlB,EAAY,QAAUoB,EACfA,CACP,CAAC,EAEM,CAAE,gBAAiBF,EAAc,EAAA,CACxC,EACA,UAAW,CAACG,EAAMC,EAAYC,IAAY,CAC1C1B,EAAe,EAAI,EACnBL,EAAY2B,GAAQ,CACpB,MAAMK,EAAgBD,EACpBJ,EAAK,UAAkBV,EAAQ,KAAOc,EAAQ,eAAe,EAC7DJ,EAAK,OAAOV,GAAW,CAACA,EAAQ,QAAQ,EAEpCgB,EAA4B,CAClC,GAAI,OAAO,WAAA,EACX,KAAM,YACN,QAASJ,EAAK,QAAU,EAAE,+BAA+B,EACzD,cAAe,IAAK,EAGdD,EAAO,CAAC,GAAGI,EAAeC,CAAgB,EAChD,OAAAzB,EAAY,QAAUoB,EACfA,CACP,CAAC,CACD,EACA,QAAS,CAACM,EAAOJ,EAAYC,IAAY,CACzC1B,EAAe,EAAK,EACpBL,EAAY2B,GAAQ,CACpB,MAAMK,EAAgBD,EACpBJ,EAAK,UAAkBV,EAAQ,KAAOc,EAAQ,eAAe,EAC7DJ,EAAK,OAAOV,GAAW,CAACA,EAAQ,QAAQ,EAEpCgB,EAA4B,CAClC,GAAI,OAAO,WAAA,EACX,KAAM,YACN,QAAS,EAAE,4BAA4B,EACvC,cAAe,IAAK,EAGdL,EAAO,CAAC,GAAGI,EAAeC,CAAgB,EAChD,OAAAzB,EAAY,QAAUoB,EACfA,CACP,CAAC,EACD,QAAQ,MAAM,wBAAyBM,CAAK,CAC5C,CAAA,CACC,EAEKC,EAAa,IAAM,CACpBjC,EAAM,SACXiB,EAAoB,OAAO,CAAE,KAAMjB,EAAM,OAAQ,OAAQ,WAAY,EACrEC,EAAS,EAAE,EACX,EAEMiC,EAAqBC,GAAmB,CAC9ClC,EAASkC,CAAM,CACf,EAEMC,EAAmBjB,GAAiB,CAC1C,UAAU,UAAU,UAAUA,CAAI,CAClC,EAEMkB,EAAiB,IAAM,CAC7BjC,EAAe,SAAS,eAAe,CAAE,SAAU,SAAU,CAC7D,EAEAQ,OAAAA,EAAAA,UAAU,IAAM,CAChByB,EAAA,CACA,EAAG,CAACxC,CAAQ,CAAC,EAGbe,EAAAA,UAAU,IAAM,CAChB,IAAI0B,EAAY,GA0BhB,OAxBwB,SAAY,CACF,CAC9BA,KAA0B,EAAI,EAClC,MACA,CAkBA,GAEA,EAEO,IAAM,CACbA,EAAY,EACZ,CACA,EAAG,CAACzB,CAAa,CAAC,EAGlB0B,EAAAA,KAAC,MAAA,CAAI,UAAU,8CACf,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACf,SAAA,CAAAA,OAAC,MAAA,CACD,SAAA,CAAA/B,MAAC,KAAA,CAAG,UAAU,qBAAsB,SAAA,EAAE,0BAA0B,EAAE,QACjE,IAAA,CAAE,UAAU,6BAA8B,SAAA,EAAE,2BAA2B,CAAA,CAAE,CAAA,EAC1E,EACA+B,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACf,SAAA,CAAAA,OAAC,OAAI,UAAW,0DAChBrC,EAAc,8BAAgC,yBAC9C,GACA,SAAA,CAAAM,MAAC,OAAI,UAAW,wBAChBN,EAAc,eAAiB,YAC/B,GAAI,EACW,EAAdA,EAAgB,0BAA+B,4BAAN,CAAkC,EAC5E,EACAqC,EAAAA,KAACC,EAAA,CACD,QAAQ,UACR,KAAK,KACL,QAAS,IAAM1C,EAAY,EAAE,EAE7B,SAAA,CAAAU,EAAAA,IAACiC,EAAA,CAAU,UAAU,eAAe,EACnC,EAAE,yBAAyB,CAAA,CAAA,CAAA,CAC5B,EACA,CAAA,EACA,EAEAF,EAAAA,KAAC,MAAA,CAAI,UAAU,gDACf,SAAA,CAAA/B,EAAAA,IAAC,OAAI,UAAU,gBACf,SAAA+B,EAAAA,KAACG,EAAA,CAAK,UAAU,uBAChB,SAAA,CAAAlC,EAAAA,IAACmC,EAAA,CAAY,UAAU,6BACtB,SAAA9C,EAAS,SAAW,EACrB0C,EAAAA,KAAC,MAAA,CAAI,UAAU,+DACf,SAAA,CAAA/B,EAAAA,IAACG,EAAA,CAAI,UAAU,uCAAuC,QACrD,KAAA,CAAG,UAAU,6BAA8B,SAAA,EAAE,4BAA4B,EAAE,QAC3E,IAAA,CAAE,UAAU,iCACZ,SAAA,EAAE,8BAA8B,EACjC,EACAH,EAAAA,IAAC,OAAI,UAAU,kDACd,WAAiB,IAAI,CAAC2B,EAAQS,IAC/BpC,EAAAA,IAACkC,EAAA,CAED,UAAU,mDACV,QAAS,IAAMR,EAAkBC,EAAO,MAAM,EAE9C,eAACQ,EAAA,CAAY,UAAU,MACvB,SAAAJ,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACf,SAAA,CAAA/B,EAAAA,IAAC,MAAA,CAAI,UAAU,eAAgB,SAAA2B,EAAO,KAAK,EAC3CI,EAAAA,KAAC,MAAA,CAAI,UAAU,aACf,SAAA,CAAA/B,EAAAA,IAAC,IAAA,CAAE,UAAU,sBAAuB,SAAA2B,EAAO,MAAM,EACjD3B,EAAAA,IAAC,IAAA,CAAE,UAAU,6CACZ,WAAO,OACR,CAAA,EACA,CAAA,CAAA,CACA,CAAA,CACA,CAAA,EAdKoC,CAAA,CAgBJ,EACD,CAAA,CAAA,CACA,EAEAL,EAAAA,KAAC,MAAA,CAAI,UAAU,YACd,SAAA,CAAA1C,EAAS,IAAIkB,GACdwB,EAAAA,KAAC,MAAA,CAED,UAAW,cACXxB,EAAQ,OAAS,OAAS,cAAgB,eAC1C,GAEC,SAAA,CAAAA,EAAQ,OAAS,aAClBP,EAAAA,IAAC,MAAA,CAAI,UAAU,sEACf,SAAAA,EAAAA,IAACG,EAAA,CAAI,UAAU,sBAAA,CAAuB,EACtC,QAEC,MAAA,CAAI,UAAW,eAChBI,EAAQ,OAAS,OAAS,UAAY,SACtC,GACA,SAAAP,EAAAA,IAACkC,EAAA,CAAK,UAAW,GACjB3B,EAAQ,OAAS,OAAS,qCAAuC,EACjE,GACA,SAAAP,MAACmC,EAAA,CAAY,UAAU,MACtB,SAAA5B,EAAQ,SACTwB,EAAAA,KAAC,MAAA,CAAI,UAAU,aACf,SAAA,CAAA/B,EAAAA,IAAC,OAAA,CAAK,UAAU,iDAAiD,EACjEA,EAAAA,IAAC,OAAA,CAAK,UAAU,2DAA2D,EAC3EA,EAAAA,IAAC,OAAA,CAAK,UAAU,2DAA2D,CAAA,EAC3E,EAEA+B,EAAAA,KAAAM,EAAAA,SAAA,CACA,SAAA,CAAArC,EAAAA,IAAC,IAAA,CAAE,UAAU,sBAAuB,SAAAO,EAAQ,QAAQ,EACpDwB,EAAAA,KAAC,MAAA,CAAI,UAAU,+DACf,SAAA,CAAA/B,EAAAA,IAAC,QAAK,UAAU,qBACf,WAAOO,EAAQ,UAAW,OAAO,EAClC,EACCA,EAAQ,OAAS,aAClBwB,EAAAA,KAAC,MAAA,CAAI,UAAU,qBACf,SAAA,CAAA/B,EAAAA,IAACgC,EAAA,CACD,KAAK,KACL,QAAQ,QACR,UAAU,cACV,QAAS,IAAMJ,EAAgBrB,EAAQ,OAAO,EAE9C,SAAAP,EAAAA,IAACsC,EAAA,CAAK,UAAU,UAAU,CAAA,CAAA,EAE1BtC,EAAAA,IAACgC,EAAA,CACD,KAAK,KACL,QAAQ,QACR,UAAU,cAEV,SAAAhC,EAAAA,IAACuC,EAAA,CAAS,UAAU,UAAU,CAAA,CAAA,EAE9BvC,EAAAA,IAACgC,EAAA,CACD,KAAK,KACL,QAAQ,QACR,UAAU,cAEV,SAAAhC,EAAAA,IAACwC,EAAA,CAAW,UAAU,UAAU,CAAA,CAAA,CAChC,EACA,CAAA,EAEA,CAAA,EACA,CAAA,CAEA,CAAA,CACA,EACA,EACCjC,EAAQ,OAAS,QAClBP,EAAAA,IAAC,MAAA,CAAI,UAAU,2EACf,SAAAA,EAAAA,IAACyC,EAAA,CAAK,UAAU,iCAAA,CAAkC,EAClD,CAAA,CAAA,EAjEKlC,EAAQ,EAAA,CAoEZ,EACDP,EAAAA,IAAC,MAAA,CAAI,IAAKJ,EAAgB,CAAA,CAAA,CAC1B,CAAA,CAEA,QACC,MAAA,CAAI,UAAU,eACf,SAAAmC,EAAAA,KAAC,MAAA,CAAI,UAAU,aACf,SAAA,CAAA/B,EAAAA,IAAC0C,EAAA,CACD,YAAa,EAAE,gCAAgC,EAC/C,MAAOlD,EACP,SAAW,GAAMC,EAAS,EAAE,OAAO,KAAK,EACxC,WAAa,GAAM,EAAE,MAAQ,SAAWgC,EAAA,EACxC,SAAUhB,EAAoB,SAAA,CAAA,EAE9BT,EAAAA,IAACgC,EAAA,CACD,QAASP,EACT,SAAU,CAACjC,EAAM,KAAA,GAAUiB,EAAoB,UAE/C,SAAAT,EAAAA,IAAC2C,EAAA,CAAK,UAAU,UAAU,CAAA,CAAA,CAC1B,CAAA,CACA,CAAA,CACA,CAAA,CAAA,CACA,CAAA,CACA,SAEC,MAAA,CACD,SAAA,CAAAZ,EAAAA,KAACG,EAAA,CAAK,UAAU,OAChB,SAAA,CAAAlC,EAAAA,IAAC4C,EAAA,CACD,eAACC,EAAA,CAAU,UAAU,UAAW,SAAA,EAAE,4BAA4B,CAAA,CAAE,EAChE,EACA7C,MAACmC,EAAA,CACD,gBAAC,KAAA,CAAG,UAAU,0CACd,SAAA,CAAAJ,OAAC,KAAA,CAAG,SAAA,CAAA,KAAG,EAAE,2BAA2B,CAAA,EAAE,SACrC,KAAA,CAAG,SAAA,CAAA,KAAG,EAAE,2BAA2B,CAAA,EAAE,SACrC,KAAA,CAAG,SAAA,CAAA,KAAG,EAAE,2BAA2B,CAAA,EAAE,SACrC,KAAA,CAAG,SAAA,CAAA,KAAG,EAAE,2BAA2B,CAAA,EAAE,SACrC,KAAA,CAAG,SAAA,CAAA,KAAG,EAAE,2BAA2B,CAAA,EAAE,SACrC,KAAA,CAAG,SAAA,CAAA,KAAG,EAAE,2BAA2B,CAAA,EAAE,CAAA,CAAA,CACtC,CAAA,CACA,CAAA,EACA,SAECG,EAAA,CACD,SAAA,CAAAlC,EAAAA,IAAC4C,EAAA,CACD,eAACC,EAAA,CAAU,UAAU,UAAW,SAAA,EAAE,oBAAoB,CAAA,CAAE,EACxD,EACA7C,MAACmC,EAAA,CACD,gBAAC,KAAA,CAAG,UAAU,0CACd,SAAA,CAAAJ,OAAC,KAAA,CAAG,SAAA,CAAA,KAAG,EAAE,oBAAoB,CAAA,EAAE,SAC9B,KAAA,CAAG,SAAA,CAAA,KAAG,EAAE,oBAAoB,CAAA,EAAE,SAC9B,KAAA,CAAG,SAAA,CAAA,KAAG,EAAE,oBAAoB,CAAA,EAAE,SAC9B,KAAA,CAAG,SAAA,CAAA,KAAG,EAAE,oBAAoB,CAAA,EAAE,CAAA,CAAA,CAC/B,CAAA,CACA,CAAA,EACA,CAAA,EACA,CAAA,EACA,CAAA,EACA,CAED,CC7c4E,MAAAe,GAAnE3D"}