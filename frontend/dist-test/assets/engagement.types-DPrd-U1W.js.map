{"version":3,"file":"engagement.types-DPrd-U1W.js","sources":["../../src/hooks/useEngagements.ts","../../src/types/engagement.types.ts"],"sourcesContent":["/**\n * Engagements Hook\n * Feature: engagements-entity-management\n *\n * Comprehensive TanStack Query hooks for engagement dossier management:\n * - List engagements with search/filters\n * - Get single engagement with full profile\n * - Create/update/archive engagements\n * - Manage participants and agenda items\n */\n\nimport { useMutation, useQuery, useQueryClient, type UseQueryOptions } from '@tanstack/react-query'\nimport { useTranslation } from 'react-i18next'\nimport { toast } from 'sonner'\nimport { supabase } from '@/lib/supabase'\nimport type {\n  EngagementFullProfile,\n  EngagementCreate,\n  EngagementUpdate,\n  EngagementSearchParams,\n  EngagementListResponse,\n  EngagementParticipant,\n  EngagementParticipantCreate,\n  EngagementAgendaItem,\n  EngagementAgendaItemCreate,\n  EngagementAgendaItemUpdate,\n} from '@/types/engagement.types'\n\n// API Base URL\nconst API_BASE_URL = import.meta.env.VITE_SUPABASE_URL + '/functions/v1'\n\n// ============================================================================\n// Query Keys\n// ============================================================================\n\nexport const engagementKeys = {\n  all: ['engagements'] as const,\n  lists: () => [...engagementKeys.all, 'list'] as const,\n  list: (params?: EngagementSearchParams) => [...engagementKeys.lists(), params] as const,\n  details: () => [...engagementKeys.all, 'detail'] as const,\n  detail: (id: string) => [...engagementKeys.details(), id] as const,\n  participants: (engagementId: string) => [...engagementKeys.all, 'participants', engagementId] as const,\n  agenda: (engagementId: string) => [...engagementKeys.all, 'agenda', engagementId] as const,\n}\n\n// ============================================================================\n// Auth Helper\n// ============================================================================\n\nconst getAuthHeaders = async () => {\n  const { data: { session } } = await supabase.auth.getSession()\n  return {\n    'Content-Type': 'application/json',\n    Authorization: `Bearer ${session?.access_token}`,\n  }\n}\n\n// ============================================================================\n// List Engagements Hook\n// ============================================================================\n\n/**\n * Hook to list engagements with search and filters\n */\nexport function useEngagements(\n  params?: EngagementSearchParams,\n  options?: Omit<UseQueryOptions<EngagementListResponse, Error>, 'queryKey' | 'queryFn'>\n) {\n  return useQuery({\n    queryKey: engagementKeys.list(params),\n    queryFn: async (): Promise<EngagementListResponse> => {\n      const headers = await getAuthHeaders()\n      const searchParams = new URLSearchParams()\n\n      if (params?.search) searchParams.set('search', params.search)\n      if (params?.engagement_type) searchParams.set('engagement_type', params.engagement_type)\n      if (params?.engagement_category) searchParams.set('engagement_category', params.engagement_category)\n      if (params?.engagement_status) searchParams.set('engagement_status', params.engagement_status)\n      if (params?.host_country_id) searchParams.set('host_country_id', params.host_country_id)\n      if (params?.start_date) searchParams.set('start_date', params.start_date)\n      if (params?.end_date) searchParams.set('end_date', params.end_date)\n      if (params?.page) searchParams.set('page', String(params.page))\n      if (params?.limit) searchParams.set('limit', String(params.limit))\n\n      const response = await fetch(`${API_BASE_URL}/engagement-dossiers?${searchParams}`, { headers })\n\n      if (!response.ok) {\n        const error = await response.json()\n        throw new Error(error.error?.message_en || 'Failed to fetch engagements')\n      }\n\n      return response.json()\n    },\n    staleTime: 30_000,\n    gcTime: 5 * 60_000,\n    ...options,\n  })\n}\n\n// ============================================================================\n// Get Engagement Hook\n// ============================================================================\n\n/**\n * Hook to get a single engagement with full profile\n */\nexport function useEngagement(\n  id: string,\n  options?: Omit<UseQueryOptions<EngagementFullProfile, Error>, 'queryKey' | 'queryFn'>\n) {\n  return useQuery({\n    queryKey: engagementKeys.detail(id),\n    queryFn: async (): Promise<EngagementFullProfile> => {\n      const headers = await getAuthHeaders()\n      const response = await fetch(`${API_BASE_URL}/engagement-dossiers/${id}`, { headers })\n\n      if (!response.ok) {\n        const error = await response.json()\n        throw new Error(error.error?.message_en || 'Failed to fetch engagement')\n      }\n\n      return response.json()\n    },\n    enabled: !!id,\n    staleTime: 60_000,\n    gcTime: 10 * 60_000,\n    ...options,\n  })\n}\n\n// ============================================================================\n// Create Engagement Hook\n// ============================================================================\n\n/**\n * Hook to create a new engagement\n */\nexport function useCreateEngagement() {\n  const queryClient = useQueryClient()\n  const { t } = useTranslation('engagements')\n\n  return useMutation({\n    mutationFn: async (data: EngagementCreate): Promise<EngagementFullProfile> => {\n      const headers = await getAuthHeaders()\n      const response = await fetch(`${API_BASE_URL}/engagement-dossiers`, {\n        method: 'POST',\n        headers,\n        body: JSON.stringify(data),\n      })\n\n      if (!response.ok) {\n        const error = await response.json()\n        throw new Error(error.error?.message_en || 'Failed to create engagement')\n      }\n\n      return response.json()\n    },\n    onSuccess: (data) => {\n      queryClient.invalidateQueries({ queryKey: engagementKeys.lists() })\n      if (data.engagement?.id) {\n        queryClient.setQueryData(engagementKeys.detail(data.engagement.id), data)\n      }\n      toast.success(t('messages.created', { name: data.engagement?.name_en }))\n    },\n    onError: (error: Error) => {\n      toast.error(t('messages.createError', { error: error.message }))\n    },\n  })\n}\n\n// ============================================================================\n// Update Engagement Hook\n// ============================================================================\n\n/**\n * Hook to update an engagement\n */\nexport function useUpdateEngagement() {\n  const queryClient = useQueryClient()\n  const { t } = useTranslation('engagements')\n\n  return useMutation({\n    mutationFn: async ({ id, updates }: { id: string; updates: EngagementUpdate }): Promise<EngagementFullProfile> => {\n      const headers = await getAuthHeaders()\n      const response = await fetch(`${API_BASE_URL}/engagement-dossiers/${id}`, {\n        method: 'PATCH',\n        headers,\n        body: JSON.stringify(updates),\n      })\n\n      if (!response.ok) {\n        const error = await response.json()\n        throw new Error(error.error?.message_en || 'Failed to update engagement')\n      }\n\n      return response.json()\n    },\n    onMutate: async ({ id }) => {\n      await queryClient.cancelQueries({ queryKey: engagementKeys.detail(id) })\n      const previousEngagement = queryClient.getQueryData<EngagementFullProfile>(engagementKeys.detail(id))\n      return { previousEngagement }\n    },\n    onSuccess: (data, { id }) => {\n      queryClient.setQueryData(engagementKeys.detail(id), data)\n      queryClient.invalidateQueries({ queryKey: engagementKeys.lists() })\n      toast.success(t('messages.updated'))\n    },\n    onError: (error: Error, { id }, context) => {\n      if (context?.previousEngagement) {\n        queryClient.setQueryData(engagementKeys.detail(id), context.previousEngagement)\n      }\n      toast.error(t('messages.updateError', { error: error.message }))\n    },\n  })\n}\n\n// ============================================================================\n// Archive Engagement Hook\n// ============================================================================\n\n/**\n * Hook to archive (soft delete) an engagement\n */\nexport function useArchiveEngagement() {\n  const queryClient = useQueryClient()\n  const { t } = useTranslation('engagements')\n\n  return useMutation({\n    mutationFn: async (id: string): Promise<{ success: boolean }> => {\n      const headers = await getAuthHeaders()\n      const response = await fetch(`${API_BASE_URL}/engagement-dossiers/${id}`, {\n        method: 'DELETE',\n        headers,\n      })\n\n      if (!response.ok) {\n        const error = await response.json()\n        throw new Error(error.error?.message_en || 'Failed to archive engagement')\n      }\n\n      return response.json()\n    },\n    onSuccess: (_, id) => {\n      queryClient.removeQueries({ queryKey: engagementKeys.detail(id) })\n      queryClient.invalidateQueries({ queryKey: engagementKeys.lists() })\n      toast.success(t('messages.archived'))\n    },\n    onError: (error: Error) => {\n      toast.error(t('messages.archiveError', { error: error.message }))\n    },\n  })\n}\n\n// ============================================================================\n// Participants Hooks\n// ============================================================================\n\n/**\n * Hook to get participants for an engagement\n */\nexport function useEngagementParticipants(\n  engagementId: string,\n  options?: Omit<UseQueryOptions<{ data: EngagementParticipant[] }, Error>, 'queryKey' | 'queryFn'>\n) {\n  return useQuery({\n    queryKey: engagementKeys.participants(engagementId),\n    queryFn: async (): Promise<{ data: EngagementParticipant[] }> => {\n      const headers = await getAuthHeaders()\n      const response = await fetch(`${API_BASE_URL}/engagement-dossiers/${engagementId}/participants`, { headers })\n\n      if (!response.ok) {\n        const error = await response.json()\n        throw new Error(error.error?.message_en || 'Failed to fetch participants')\n      }\n\n      return response.json()\n    },\n    enabled: !!engagementId,\n    ...options,\n  })\n}\n\n/**\n * Hook to add a participant to an engagement\n */\nexport function useAddEngagementParticipant() {\n  const queryClient = useQueryClient()\n  const { t } = useTranslation('engagements')\n\n  return useMutation({\n    mutationFn: async ({ engagementId, participant }: { engagementId: string; participant: EngagementParticipantCreate }): Promise<EngagementParticipant> => {\n      const headers = await getAuthHeaders()\n      const response = await fetch(`${API_BASE_URL}/engagement-dossiers/${engagementId}/participants`, {\n        method: 'POST',\n        headers,\n        body: JSON.stringify(participant),\n      })\n\n      if (!response.ok) {\n        const error = await response.json()\n        throw new Error(error.error?.message_en || 'Failed to add participant')\n      }\n\n      return response.json()\n    },\n    onSuccess: (_, { engagementId }) => {\n      queryClient.invalidateQueries({ queryKey: engagementKeys.detail(engagementId) })\n      queryClient.invalidateQueries({ queryKey: engagementKeys.participants(engagementId) })\n      toast.success(t('messages.participantAdded'))\n    },\n    onError: (error: Error) => {\n      toast.error(t('messages.participantAddError', { error: error.message }))\n    },\n  })\n}\n\n/**\n * Hook to remove a participant from an engagement\n */\nexport function useRemoveEngagementParticipant() {\n  const queryClient = useQueryClient()\n  const { t } = useTranslation('engagements')\n\n  return useMutation({\n    mutationFn: async ({ engagementId, participantId }: { engagementId: string; participantId: string }): Promise<{ success: boolean }> => {\n      const headers = await getAuthHeaders()\n      const response = await fetch(`${API_BASE_URL}/engagement-dossiers/${engagementId}/participants?participant_id=${participantId}`, {\n        method: 'DELETE',\n        headers,\n      })\n\n      if (!response.ok) {\n        const error = await response.json()\n        throw new Error(error.error?.message_en || 'Failed to remove participant')\n      }\n\n      return response.json()\n    },\n    onSuccess: (_, { engagementId }) => {\n      queryClient.invalidateQueries({ queryKey: engagementKeys.detail(engagementId) })\n      queryClient.invalidateQueries({ queryKey: engagementKeys.participants(engagementId) })\n      toast.success(t('messages.participantRemoved'))\n    },\n    onError: (error: Error) => {\n      toast.error(t('messages.participantRemoveError', { error: error.message }))\n    },\n  })\n}\n\n// ============================================================================\n// Agenda Hooks\n// ============================================================================\n\n/**\n * Hook to get agenda items for an engagement\n */\nexport function useEngagementAgenda(\n  engagementId: string,\n  options?: Omit<UseQueryOptions<{ data: EngagementAgendaItem[] }, Error>, 'queryKey' | 'queryFn'>\n) {\n  return useQuery({\n    queryKey: engagementKeys.agenda(engagementId),\n    queryFn: async (): Promise<{ data: EngagementAgendaItem[] }> => {\n      const headers = await getAuthHeaders()\n      const response = await fetch(`${API_BASE_URL}/engagement-dossiers/${engagementId}/agenda`, { headers })\n\n      if (!response.ok) {\n        const error = await response.json()\n        throw new Error(error.error?.message_en || 'Failed to fetch agenda')\n      }\n\n      return response.json()\n    },\n    enabled: !!engagementId,\n    ...options,\n  })\n}\n\n/**\n * Hook to add an agenda item to an engagement\n */\nexport function useAddEngagementAgendaItem() {\n  const queryClient = useQueryClient()\n  const { t } = useTranslation('engagements')\n\n  return useMutation({\n    mutationFn: async ({ engagementId, item }: { engagementId: string; item: EngagementAgendaItemCreate }): Promise<EngagementAgendaItem> => {\n      const headers = await getAuthHeaders()\n      const response = await fetch(`${API_BASE_URL}/engagement-dossiers/${engagementId}/agenda`, {\n        method: 'POST',\n        headers,\n        body: JSON.stringify(item),\n      })\n\n      if (!response.ok) {\n        const error = await response.json()\n        throw new Error(error.error?.message_en || 'Failed to add agenda item')\n      }\n\n      return response.json()\n    },\n    onSuccess: (_, { engagementId }) => {\n      queryClient.invalidateQueries({ queryKey: engagementKeys.detail(engagementId) })\n      queryClient.invalidateQueries({ queryKey: engagementKeys.agenda(engagementId) })\n      toast.success(t('messages.agendaItemAdded'))\n    },\n    onError: (error: Error) => {\n      toast.error(t('messages.agendaItemAddError', { error: error.message }))\n    },\n  })\n}\n\n/**\n * Hook to update an agenda item\n */\nexport function useUpdateEngagementAgendaItem() {\n  const queryClient = useQueryClient()\n  const { t } = useTranslation('engagements')\n\n  return useMutation({\n    mutationFn: async ({ engagementId, agendaId, updates }: { engagementId: string; agendaId: string; updates: EngagementAgendaItemUpdate }): Promise<EngagementAgendaItem> => {\n      const headers = await getAuthHeaders()\n      const response = await fetch(`${API_BASE_URL}/engagement-dossiers/${engagementId}/agenda?agenda_id=${agendaId}`, {\n        method: 'PATCH',\n        headers,\n        body: JSON.stringify(updates),\n      })\n\n      if (!response.ok) {\n        const error = await response.json()\n        throw new Error(error.error?.message_en || 'Failed to update agenda item')\n      }\n\n      return response.json()\n    },\n    onSuccess: (_, { engagementId }) => {\n      queryClient.invalidateQueries({ queryKey: engagementKeys.detail(engagementId) })\n      queryClient.invalidateQueries({ queryKey: engagementKeys.agenda(engagementId) })\n      toast.success(t('messages.agendaItemUpdated'))\n    },\n    onError: (error: Error) => {\n      toast.error(t('messages.agendaItemUpdateError', { error: error.message }))\n    },\n  })\n}\n\n/**\n * Hook to remove an agenda item from an engagement\n */\nexport function useRemoveEngagementAgendaItem() {\n  const queryClient = useQueryClient()\n  const { t } = useTranslation('engagements')\n\n  return useMutation({\n    mutationFn: async ({ engagementId, agendaId }: { engagementId: string; agendaId: string }): Promise<{ success: boolean }> => {\n      const headers = await getAuthHeaders()\n      const response = await fetch(`${API_BASE_URL}/engagement-dossiers/${engagementId}/agenda?agenda_id=${agendaId}`, {\n        method: 'DELETE',\n        headers,\n      })\n\n      if (!response.ok) {\n        const error = await response.json()\n        throw new Error(error.error?.message_en || 'Failed to remove agenda item')\n      }\n\n      return response.json()\n    },\n    onSuccess: (_, { engagementId }) => {\n      queryClient.invalidateQueries({ queryKey: engagementKeys.detail(engagementId) })\n      queryClient.invalidateQueries({ queryKey: engagementKeys.agenda(engagementId) })\n      toast.success(t('messages.agendaItemRemoved'))\n    },\n    onError: (error: Error) => {\n      toast.error(t('messages.agendaItemRemoveError', { error: error.message }))\n    },\n  })\n}\n\n// ============================================================================\n// Cache Invalidation Helper\n// ============================================================================\n\n/**\n * Hook to invalidate all engagement queries\n */\nexport function useInvalidateEngagements() {\n  const queryClient = useQueryClient()\n\n  return () => {\n    queryClient.invalidateQueries({ queryKey: engagementKeys.all })\n  }\n}\n","/**\n * Engagement Dossier Entity Types\n * Feature: engagements-entity-management\n *\n * Comprehensive type definitions for engagement dossiers including:\n * - Bilateral meetings, missions, delegations\n * - Participants and attendance tracking\n * - Agenda items and outcomes\n */\n\n// ============================================================================\n// Engagement Classification Types\n// ============================================================================\n\n/**\n * Types of engagement events\n */\nexport type EngagementType =\n  | 'bilateral_meeting'\n  | 'mission'\n  | 'delegation'\n  | 'summit'\n  | 'working_group'\n  | 'roundtable'\n  | 'official_visit'\n  | 'consultation'\n  | 'other'\n\n/**\n * Categories of engagement purpose\n */\nexport type EngagementCategory =\n  | 'diplomatic'\n  | 'statistical'\n  | 'technical'\n  | 'economic'\n  | 'cultural'\n  | 'educational'\n  | 'research'\n  | 'other'\n\n/**\n * Status of the engagement\n */\nexport type EngagementStatus =\n  | 'planned'\n  | 'confirmed'\n  | 'in_progress'\n  | 'completed'\n  | 'postponed'\n  | 'cancelled'\n\n/**\n * Level of the delegation\n */\nexport type DelegationLevel =\n  | 'head_of_state'\n  | 'ministerial'\n  | 'senior_official'\n  | 'director'\n  | 'expert'\n  | 'technical'\n\n// ============================================================================\n// Participant Types\n// ============================================================================\n\n/**\n * Type of participant in the engagement\n */\nexport type ParticipantType = 'person' | 'organization' | 'country' | 'external'\n\n/**\n * Role of participant in the engagement\n */\nexport type ParticipantRole =\n  | 'host'\n  | 'guest'\n  | 'delegate'\n  | 'head_of_delegation'\n  | 'speaker'\n  | 'observer'\n  | 'organizer'\n  | 'support_staff'\n  | 'interpreter'\n  | 'other'\n\n/**\n * Attendance status of participant\n */\nexport type AttendanceStatus =\n  | 'expected'\n  | 'confirmed'\n  | 'attended'\n  | 'no_show'\n  | 'cancelled'\n  | 'tentative'\n\n/**\n * Engagement participant record\n */\nexport interface EngagementParticipant {\n  id: string\n  engagement_id: string\n  participant_type: ParticipantType\n  participant_dossier_id?: string\n  external_name_en?: string\n  external_name_ar?: string\n  external_title_en?: string\n  external_title_ar?: string\n  external_organization_en?: string\n  external_organization_ar?: string\n  role: ParticipantRole\n  attendance_status: AttendanceStatus\n  notes?: string\n  created_at: string\n  created_by?: string\n  // Joined dossier info\n  dossier?: {\n    id: string\n    name_en: string\n    name_ar: string\n    type: string\n  }\n}\n\n/**\n * Input for adding a participant\n */\nexport interface EngagementParticipantCreate {\n  participant_type: ParticipantType\n  participant_dossier_id?: string\n  external_name_en?: string\n  external_name_ar?: string\n  external_title_en?: string\n  external_title_ar?: string\n  external_organization_en?: string\n  external_organization_ar?: string\n  role: ParticipantRole\n  attendance_status?: AttendanceStatus\n  notes?: string\n}\n\n// ============================================================================\n// Agenda Types\n// ============================================================================\n\n/**\n * Status of an agenda item\n */\nexport type AgendaItemStatus =\n  | 'planned'\n  | 'in_progress'\n  | 'completed'\n  | 'skipped'\n  | 'postponed'\n\n/**\n * Agenda item record\n */\nexport interface EngagementAgendaItem {\n  id: string\n  engagement_id: string\n  order_number: number\n  title_en: string\n  title_ar?: string\n  description_en?: string\n  description_ar?: string\n  start_time?: string\n  end_time?: string\n  duration_minutes?: number\n  item_status: AgendaItemStatus\n  notes_en?: string\n  notes_ar?: string\n  outcome_en?: string\n  outcome_ar?: string\n  created_at: string\n  updated_at: string\n  created_by?: string\n}\n\n/**\n * Input for adding an agenda item\n */\nexport interface EngagementAgendaItemCreate {\n  order_number?: number\n  title_en: string\n  title_ar?: string\n  description_en?: string\n  description_ar?: string\n  start_time?: string\n  end_time?: string\n  duration_minutes?: number\n  item_status?: AgendaItemStatus\n  notes_en?: string\n  notes_ar?: string\n  outcome_en?: string\n  outcome_ar?: string\n}\n\n/**\n * Input for updating an agenda item\n */\nexport interface EngagementAgendaItemUpdate {\n  order_number?: number\n  title_en?: string\n  title_ar?: string\n  description_en?: string\n  description_ar?: string\n  start_time?: string\n  end_time?: string\n  duration_minutes?: number\n  item_status?: AgendaItemStatus\n  notes_en?: string\n  notes_ar?: string\n  outcome_en?: string\n  outcome_ar?: string\n}\n\n// ============================================================================\n// Engagement Extension Types\n// ============================================================================\n\n/**\n * Engagement extension data stored in engagement_dossiers table\n */\nexport interface EngagementExtension {\n  id?: string\n  engagement_type: EngagementType\n  engagement_category: EngagementCategory\n  start_date: string\n  end_date: string\n  timezone?: string\n  location_en?: string\n  location_ar?: string\n  venue_en?: string\n  venue_ar?: string\n  is_virtual?: boolean\n  virtual_link?: string\n  host_country_id?: string\n  host_organization_id?: string\n  delegation_size?: number\n  delegation_level?: DelegationLevel\n  objectives_en?: string\n  objectives_ar?: string\n  outcomes_en?: string\n  outcomes_ar?: string\n  notes_en?: string\n  notes_ar?: string\n  engagement_status: EngagementStatus\n  created_at?: string\n  updated_at?: string\n}\n\n// ============================================================================\n// Full Engagement Types\n// ============================================================================\n\n/**\n * Full engagement dossier combining base dossier and extension\n */\nexport interface EngagementDossier {\n  id: string\n  type: 'engagement_dossier'\n  name_en: string\n  name_ar: string\n  description_en?: string\n  description_ar?: string\n  status: 'active' | 'inactive' | 'archived'\n  sensitivity_level: number\n  tags: string[]\n  created_at: string\n  updated_at: string\n  created_by?: string\n  updated_by?: string\n  // Extension fields (flattened from engagement_dossiers)\n  engagement_type: EngagementType\n  engagement_category: EngagementCategory\n  start_date: string\n  end_date: string\n  timezone: string\n  location_en?: string\n  location_ar?: string\n  venue_en?: string\n  venue_ar?: string\n  is_virtual: boolean\n  virtual_link?: string\n  host_country_id?: string\n  host_organization_id?: string\n  delegation_size?: number\n  delegation_level?: DelegationLevel\n  objectives_en?: string\n  objectives_ar?: string\n  outcomes_en?: string\n  outcomes_ar?: string\n  notes_en?: string\n  notes_ar?: string\n  engagement_status: EngagementStatus\n}\n\n/**\n * Full engagement profile returned by get_engagement_full RPC\n */\nexport interface EngagementFullProfile {\n  engagement: EngagementDossier\n  participants: Array<{\n    participant: EngagementParticipant\n    dossier_info?: {\n      id: string\n      name_en: string\n      name_ar: string\n      type: string\n    }\n  }>\n  agenda: EngagementAgendaItem[]\n  host_country?: {\n    id: string\n    name_en: string\n    name_ar: string\n  }\n  host_organization?: {\n    id: string\n    name_en: string\n    name_ar: string\n  }\n}\n\n// ============================================================================\n// API Request/Response Types\n// ============================================================================\n\n/**\n * Input for creating a new engagement\n */\nexport interface EngagementCreate {\n  name_en: string\n  name_ar: string\n  description_en?: string\n  description_ar?: string\n  status?: 'active' | 'inactive' | 'archived'\n  sensitivity_level?: number\n  tags?: string[]\n  metadata?: Record<string, unknown>\n  extension: {\n    engagement_type: EngagementType\n    engagement_category: EngagementCategory\n    start_date: string\n    end_date: string\n    timezone?: string\n    location_en?: string\n    location_ar?: string\n    venue_en?: string\n    venue_ar?: string\n    is_virtual?: boolean\n    virtual_link?: string\n    host_country_id?: string\n    host_organization_id?: string\n    delegation_size?: number\n    delegation_level?: DelegationLevel\n    objectives_en?: string\n    objectives_ar?: string\n    outcomes_en?: string\n    outcomes_ar?: string\n    notes_en?: string\n    notes_ar?: string\n    engagement_status?: EngagementStatus\n  }\n}\n\n/**\n * Input for updating an engagement\n */\nexport interface EngagementUpdate {\n  name_en?: string\n  name_ar?: string\n  description_en?: string\n  description_ar?: string\n  status?: 'active' | 'inactive' | 'archived'\n  sensitivity_level?: number\n  tags?: string[]\n  extension?: Partial<EngagementExtension>\n}\n\n/**\n * Search parameters for engagements\n */\nexport interface EngagementSearchParams {\n  search?: string\n  engagement_type?: EngagementType\n  engagement_category?: EngagementCategory\n  engagement_status?: EngagementStatus\n  host_country_id?: string\n  start_date?: string\n  end_date?: string\n  page?: number\n  limit?: number\n}\n\n/**\n * Engagement list item (compact version for lists)\n */\nexport interface EngagementListItem {\n  id: string\n  name_en: string\n  name_ar: string\n  engagement_type: EngagementType\n  engagement_category: EngagementCategory\n  engagement_status: EngagementStatus\n  start_date: string\n  end_date: string\n  location_en?: string\n  location_ar?: string\n  is_virtual: boolean\n  host_country_id?: string\n  host_country_name_en?: string\n  host_country_name_ar?: string\n  participant_count: number\n}\n\n/**\n * Engagement list response\n */\nexport interface EngagementListResponse {\n  data: EngagementListItem[]\n  pagination: {\n    page: number\n    limit: number\n    total: number\n    totalPages: number\n    has_more: boolean\n  }\n}\n\n// ============================================================================\n// Helper Labels\n// ============================================================================\n\n/**\n * Labels for engagement types\n */\nexport const ENGAGEMENT_TYPE_LABELS: Record<EngagementType, { en: string; ar: string }> = {\n  bilateral_meeting: { en: 'Bilateral Meeting', ar: 'اجتماع ثنائي' },\n  mission: { en: 'Mission', ar: 'بعثة' },\n  delegation: { en: 'Delegation', ar: 'وفد' },\n  summit: { en: 'Summit', ar: 'قمة' },\n  working_group: { en: 'Working Group', ar: 'مجموعة عمل' },\n  roundtable: { en: 'Roundtable', ar: 'طاولة مستديرة' },\n  official_visit: { en: 'Official Visit', ar: 'زيارة رسمية' },\n  consultation: { en: 'Consultation', ar: 'استشارة' },\n  other: { en: 'Other', ar: 'أخرى' },\n}\n\n/**\n * Labels for engagement categories\n */\nexport const ENGAGEMENT_CATEGORY_LABELS: Record<EngagementCategory, { en: string; ar: string }> = {\n  diplomatic: { en: 'Diplomatic', ar: 'دبلوماسي' },\n  statistical: { en: 'Statistical', ar: 'إحصائي' },\n  technical: { en: 'Technical', ar: 'فني' },\n  economic: { en: 'Economic', ar: 'اقتصادي' },\n  cultural: { en: 'Cultural', ar: 'ثقافي' },\n  educational: { en: 'Educational', ar: 'تعليمي' },\n  research: { en: 'Research', ar: 'بحثي' },\n  other: { en: 'Other', ar: 'أخرى' },\n}\n\n/**\n * Labels for engagement status\n */\nexport const ENGAGEMENT_STATUS_LABELS: Record<EngagementStatus, { en: string; ar: string }> = {\n  planned: { en: 'Planned', ar: 'مخطط' },\n  confirmed: { en: 'Confirmed', ar: 'مؤكد' },\n  in_progress: { en: 'In Progress', ar: 'جاري' },\n  completed: { en: 'Completed', ar: 'مكتمل' },\n  postponed: { en: 'Postponed', ar: 'مؤجل' },\n  cancelled: { en: 'Cancelled', ar: 'ملغي' },\n}\n\n/**\n * Labels for delegation levels\n */\nexport const DELEGATION_LEVEL_LABELS: Record<DelegationLevel, { en: string; ar: string }> = {\n  head_of_state: { en: 'Head of State', ar: 'رئيس دولة' },\n  ministerial: { en: 'Ministerial', ar: 'وزاري' },\n  senior_official: { en: 'Senior Official', ar: 'مسؤول رفيع' },\n  director: { en: 'Director', ar: 'مدير' },\n  expert: { en: 'Expert', ar: 'خبير' },\n  technical: { en: 'Technical', ar: 'فني' },\n}\n\n/**\n * Labels for participant roles\n */\nexport const PARTICIPANT_ROLE_LABELS: Record<ParticipantRole, { en: string; ar: string }> = {\n  host: { en: 'Host', ar: 'مضيف' },\n  guest: { en: 'Guest', ar: 'ضيف' },\n  delegate: { en: 'Delegate', ar: 'مندوب' },\n  head_of_delegation: { en: 'Head of Delegation', ar: 'رئيس الوفد' },\n  speaker: { en: 'Speaker', ar: 'متحدث' },\n  observer: { en: 'Observer', ar: 'مراقب' },\n  organizer: { en: 'Organizer', ar: 'منظم' },\n  support_staff: { en: 'Support Staff', ar: 'طاقم دعم' },\n  interpreter: { en: 'Interpreter', ar: 'مترجم' },\n  other: { en: 'Other', ar: 'أخرى' },\n}\n\n/**\n * Labels for attendance status\n */\nexport const ATTENDANCE_STATUS_LABELS: Record<AttendanceStatus, { en: string; ar: string }> = {\n  expected: { en: 'Expected', ar: 'متوقع' },\n  confirmed: { en: 'Confirmed', ar: 'مؤكد' },\n  attended: { en: 'Attended', ar: 'حضر' },\n  no_show: { en: 'No Show', ar: 'لم يحضر' },\n  cancelled: { en: 'Cancelled', ar: 'ملغي' },\n  tentative: { en: 'Tentative', ar: 'غير مؤكد' },\n}\n\n/**\n * Labels for agenda item status\n */\nexport const AGENDA_ITEM_STATUS_LABELS: Record<AgendaItemStatus, { en: string; ar: string }> = {\n  planned: { en: 'Planned', ar: 'مخطط' },\n  in_progress: { en: 'In Progress', ar: 'جاري' },\n  completed: { en: 'Completed', ar: 'مكتمل' },\n  skipped: { en: 'Skipped', ar: 'تم تخطيه' },\n  postponed: { en: 'Postponed', ar: 'مؤجل' },\n}\n"],"names":["API_BASE_URL","engagementKeys","params","id","engagementId","getAuthHeaders","session","supabase","useEngagements","options","useQuery","headers","searchParams","response","error","useEngagement","useArchiveEngagement","queryClient","useQueryClient","t","useTranslation","useMutation","_","toast","ENGAGEMENT_TYPE_LABELS","ENGAGEMENT_CATEGORY_LABELS","ENGAGEMENT_STATUS_LABELS","DELEGATION_LEVEL_LABELS","PARTICIPANT_ROLE_LABELS","ATTENDANCE_STATUS_LABELS","AGENDA_ITEM_STATUS_LABELS"],"mappings":"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"}