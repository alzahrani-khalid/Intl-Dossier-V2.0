{"version":3,"file":"RefreshButton-B7MWE9Ka.js","sources":["../../src/components/intelligence/RefreshButton.tsx"],"sourcesContent":["/**\n * RefreshButton Component\n * Feature: 029-dynamic-country-intelligence\n *\n * Manual refresh button with loading states and intelligence type selection.\n * Supports selective refresh for individual intelligence types.\n */\n\nimport React from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { RefreshCw, ChevronDown } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n  DropdownMenuSeparator,\n} from '@/components/ui/dropdown-menu';\nimport type { IntelligenceType } from '@/types/intelligence-reports.types';\n\nexport interface RefreshButtonProps {\n  /** Current intelligence types to refresh */\n  intelligenceTypes?: IntelligenceType[];\n\n  /** Callback when refresh is triggered */\n  onRefresh: (types: IntelligenceType[]) => void;\n\n  /** Loading state */\n  isLoading?: boolean;\n\n  /** Disabled state */\n  disabled?: boolean;\n\n  /** Show dropdown for selective refresh */\n  showTypeSelection?: boolean;\n\n  /** Additional CSS classes */\n  className?: string;\n}\n\nconst INTELLIGENCE_TYPE_LABELS: Record<IntelligenceType, { en: string; ar: string }> = {\n  economic: { en: 'Economic', ar: 'اقتصادي' },\n  political: { en: 'Political', ar: 'سياسي' },\n  security: { en: 'Security', ar: 'أمني' },\n  bilateral: { en: 'Bilateral', ar: 'ثنائي' },\n  general: { en: 'General', ar: 'عام' },\n};\n\nexport function RefreshButton({\n  intelligenceTypes = ['economic', 'political', 'security', 'bilateral'],\n  onRefresh,\n  isLoading = false,\n  disabled = false,\n  showTypeSelection = true,\n  className,\n}: RefreshButtonProps) {\n  const { t, i18n } = useTranslation('dossier');\n  const isRTL = i18n.language === 'ar';\n\n  const handleRefreshAll = () => {\n    onRefresh(intelligenceTypes);\n  };\n\n  const handleRefreshType = (type: IntelligenceType) => {\n    onRefresh([type]);\n  };\n\n  if (!showTypeSelection) {\n    // Simple refresh button without dropdown\n    return (\n      <Button\n        onClick={handleRefreshAll}\n        disabled={disabled || isLoading}\n        variant=\"outline\"\n        size=\"sm\"\n        className={`min-h-11 min-w-11 gap-2 ${className || ''}`}\n        dir={isRTL ? 'rtl' : 'ltr'}\n        aria-label={t('intelligence.refreshButtonLabel', 'Refresh intelligence data')}\n        aria-busy={isLoading}\n      >\n        <RefreshCw\n          className={`h-4 w-4 ${isLoading ? 'animate-spin' : ''}`}\n        />\n        <span className=\"text-sm sm:text-base\">\n          {isLoading ? t('intelligence.refreshing') : t('intelligence.refresh')}\n        </span>\n      </Button>\n    );\n  }\n\n  return (\n    <div className=\"flex flex-row gap-0\" dir={isRTL ? 'rtl' : 'ltr'}>\n      {/* Main refresh button */}\n      <Button\n        onClick={handleRefreshAll}\n        disabled={disabled || isLoading}\n        variant=\"outline\"\n        size=\"sm\"\n        className=\"min-h-11 gap-2 rounded-e-none border-e-0\"\n        aria-label={t('intelligence.refreshAllLabel', 'Refresh all intelligence types')}\n        aria-busy={isLoading}\n      >\n        <RefreshCw\n          className={`h-4 w-4 ${isLoading ? 'animate-spin' : ''}`}\n        />\n        <span className=\"hidden text-sm sm:inline sm:text-base\">\n          {isLoading ? t('intelligence.refreshing') : t('intelligence.refreshAll')}\n        </span>\n        <span className=\"text-sm sm:hidden sm:text-base\">\n          {isLoading ? t('intelligence.refreshing') : t('intelligence.refresh')}\n        </span>\n      </Button>\n\n      {/* Dropdown for selective refresh */}\n      <DropdownMenu>\n        <DropdownMenuTrigger asChild>\n          <Button\n            variant=\"outline\"\n            size=\"sm\"\n            className=\"min-h-11 min-w-11 rounded-s-none px-2\"\n            disabled={disabled || isLoading}\n            aria-label={t('intelligence.selectType')}\n          >\n            <ChevronDown className={`h-4 w-4 ${isRTL ? 'rotate-180' : ''}`} />\n          </Button>\n        </DropdownMenuTrigger>\n        <DropdownMenuContent align={isRTL ? 'start' : 'end'} className=\"w-48\">\n          <DropdownMenuItem\n            onClick={handleRefreshAll}\n            disabled={isLoading}\n            className=\"gap-2\"\n          >\n            <RefreshCw className=\"h-4 w-4\" />\n            <span>{t('intelligence.refreshAll')}</span>\n          </DropdownMenuItem>\n          <DropdownMenuSeparator />\n          {intelligenceTypes.map((type) => (\n            <DropdownMenuItem\n              key={type}\n              onClick={() => handleRefreshType(type)}\n              disabled={isLoading}\n              className=\"gap-2\"\n            >\n              <RefreshCw className=\"h-4 w-4\" />\n              <span>\n                {isRTL\n                  ? INTELLIGENCE_TYPE_LABELS[type].ar\n                  : INTELLIGENCE_TYPE_LABELS[type].en}\n              </span>\n            </DropdownMenuItem>\n          ))}\n        </DropdownMenuContent>\n      </DropdownMenu>\n    </div>\n  );\n}\n"],"names":["INTELLIGENCE_TYPE_LABELS","RefreshButton","intelligenceTypes","onRefresh","isLoading","disabled","showTypeSelection","className","t","i18n","useTranslation","isRTL","handleRefreshAll","handleRefreshType","type","jsxs","Button","jsx","RefreshCw","DropdownMenu","DropdownMenuTrigger","ChevronDown","DropdownMenuContent","DropdownMenuItem","DropdownMenuSeparator"],"mappings":"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"}