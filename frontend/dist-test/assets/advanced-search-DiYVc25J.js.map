{"version":3,"file":"advanced-search-DiYVc25J.js","sources":["../../src/types/advanced-search.types.ts","../../src/components/advanced-search/DateRangeFilter.tsx","../../src/components/advanced-search/BooleanLogicBuilder.tsx","../../src/hooks/useSavedSearchTemplates.ts","../../src/components/advanced-search/SavedSearchTemplates.tsx","../../src/hooks/useAdvancedSearch.ts","../../src/components/advanced-search/AdvancedSearchFilters.tsx","../../src/pages/advanced-search/AdvancedSearchPage.tsx","../../src/routes/_protected/advanced-search.tsx?tsr-split=component"],"sourcesContent":["/**\n * Advanced Search Types\n * Feature: advanced-search-filters\n * Description: Type definitions for complex multi-criteria search\n */\n\n// Filter operators for conditions\nexport type FilterOperator =\n  | 'equals'\n  | 'not_equals'\n  | 'contains'\n  | 'not_contains'\n  | 'starts_with'\n  | 'ends_with'\n  | 'greater_than'\n  | 'less_than'\n  | 'greater_equal'\n  | 'less_equal'\n  | 'between'\n  | 'not_between'\n  | 'in'\n  | 'not_in'\n  | 'is_null'\n  | 'is_not_null'\n  | 'matches_regex';\n\n// Boolean logic operators\nexport type LogicOperator = 'AND' | 'OR';\n\n// Entity types that can be searched\nexport type SearchableEntityType =\n  | 'dossier'\n  | 'engagement'\n  | 'position'\n  | 'document'\n  | 'person'\n  | 'organization'\n  | 'forum'\n  | 'country'\n  | 'theme';\n\n// Relationship types for cross-entity queries\nexport type RelationshipType =\n  | 'parent_of'\n  | 'child_of'\n  | 'linked_to'\n  | 'related_to'\n  | 'member_of'\n  | 'has_member'\n  | 'assigned_to'\n  | 'owned_by'\n  | 'created_by'\n  | 'updated_by'\n  | 'mentions'\n  | 'mentioned_by';\n\n// Date presets for quick filtering\nexport type DatePreset =\n  | 'today'\n  | 'yesterday'\n  | 'last_7_days'\n  | 'last_30_days'\n  | 'last_90_days'\n  | 'this_month'\n  | 'this_year'\n  | 'next_7_days'\n  | 'next_30_days';\n\n// Sort options\nexport type SortBy = 'relevance' | 'date' | 'title';\nexport type SortOrder = 'asc' | 'desc';\n\n// Template categories\nexport type TemplateCategory = 'quick' | 'recent' | 'popular' | 'custom' | 'system';\n\n// Template colors\nexport type TemplateColor =\n  | 'blue'\n  | 'green'\n  | 'red'\n  | 'purple'\n  | 'orange'\n  | 'yellow'\n  | 'gray'\n  | 'pink'\n  | 'indigo'\n  | 'teal';\n\n// Individual filter condition\nexport interface FilterCondition {\n  id?: string;\n  field_name: string;\n  operator: FilterOperator;\n  value: unknown;\n  is_negated?: boolean;\n}\n\n// Group of conditions with boolean logic\nexport interface FilterGroup {\n  id?: string;\n  operator: LogicOperator;\n  conditions: FilterCondition[];\n}\n\n// Relationship-based query\nexport interface RelationshipQuery {\n  id?: string;\n  source_entity_type: SearchableEntityType;\n  target_entity_type: SearchableEntityType;\n  relationship_type: RelationshipType;\n  target_conditions?: FilterCondition[];\n  include_depth?: number;\n}\n\n// Date range filter\nexport interface DateRange {\n  from?: string | null;\n  to?: string | null;\n  preset?: DatePreset | null;\n}\n\n// Advanced search request payload\nexport interface AdvancedSearchRequest {\n  query?: string;\n  entity_types: SearchableEntityType[];\n  conditions?: FilterCondition[];\n  condition_groups?: FilterGroup[];\n  relationships?: RelationshipQuery[];\n  date_range?: DateRange;\n  status?: string[];\n  tags?: string[];\n  sensitivity_levels?: string[];\n  filter_logic?: LogicOperator;\n  include_archived?: boolean;\n  sort_by?: SortBy;\n  sort_order?: SortOrder;\n  limit?: number;\n  offset?: number;\n  saved_filter_id?: string;\n}\n\n// Search result item\nexport interface SearchResult {\n  entity_id: string;\n  entity_type: SearchableEntityType;\n  title_en: string;\n  title_ar: string;\n  snippet_en: string;\n  snippet_ar: string;\n  rank_score: number;\n  status: string;\n  created_at: string;\n  updated_at: string;\n  metadata: Record<string, unknown>;\n  matched_conditions?: string[];\n}\n\n// Search response\nexport interface AdvancedSearchResponse {\n  data: SearchResult[];\n  count: number;\n  limit: number;\n  offset: number;\n  query: {\n    original: string;\n    entity_types: SearchableEntityType[];\n    filter_logic: LogicOperator;\n    conditions_count: number;\n    date_range: DateRange | null;\n  };\n  took_ms: number;\n  warnings: string[];\n  metadata: {\n    has_more: boolean;\n    next_offset: number | null;\n    saved_filter_id: string | null;\n  };\n}\n\n// Search template definition\nexport interface TemplateDefinition {\n  entity_types?: SearchableEntityType[];\n  query?: string;\n  conditions?: FilterCondition[];\n  condition_groups?: FilterGroup[];\n  relationships?: RelationshipQuery[];\n  date_range?: DateRange;\n  status?: string[];\n  tags?: string[];\n  filter_logic?: LogicOperator;\n  include_archived?: boolean;\n  sort_by?: SortBy;\n  sort_order?: SortOrder;\n  show_recent?: boolean;\n  limit?: number;\n}\n\n// Search template\nexport interface SearchTemplate {\n  id: string;\n  name_en: string;\n  name_ar: string;\n  description_en: string | null;\n  description_ar: string | null;\n  icon: string;\n  color: TemplateColor;\n  category: TemplateCategory;\n  template_definition: TemplateDefinition;\n  is_system: boolean;\n  is_public: boolean;\n  created_by: string | null;\n  use_count: number;\n  created_at: string;\n  updated_at: string;\n}\n\n// Template list response\nexport interface TemplateListResponse {\n  data: SearchTemplate[];\n  count: number;\n  limit: number;\n  offset: number;\n  metadata: {\n    has_more: boolean;\n    next_offset: number | null;\n  };\n}\n\n// Create template request\nexport interface CreateTemplateRequest {\n  name_en: string;\n  name_ar: string;\n  description_en?: string;\n  description_ar?: string;\n  icon?: string;\n  color?: TemplateColor;\n  category?: TemplateCategory;\n  template_definition: TemplateDefinition;\n  is_public?: boolean;\n}\n\n// Update template request\nexport interface UpdateTemplateRequest {\n  name_en?: string;\n  name_ar?: string;\n  description_en?: string;\n  description_ar?: string;\n  icon?: string;\n  color?: TemplateColor;\n  category?: TemplateCategory;\n  template_definition?: TemplateDefinition;\n  is_public?: boolean;\n}\n\n// Saved filter (from database)\nexport interface SavedFilter {\n  id: string;\n  user_id: string;\n  name: string;\n  description?: string;\n  search_entities: SearchableEntityType[];\n  full_text_query?: string;\n  date_range?: DateRange;\n  status_filter: string[];\n  priority_filter: string[];\n  custom_tags: string[];\n  filter_logic: LogicOperator;\n  page_size: number;\n  timeout_behavior: 'partial' | 'fail' | 'cached';\n  max_timeout_ms: number;\n  is_default: boolean;\n  is_shared: boolean;\n  shared_with: string[];\n  use_count: number;\n  last_used_at: string | null;\n  created_at: string;\n  updated_at: string;\n}\n\n// Filter condition with database fields\nexport interface SearchFilterCondition {\n  id: string;\n  filter_id: string;\n  group_operator: LogicOperator;\n  group_order: number;\n  field_name: string;\n  operator: FilterOperator;\n  field_value: unknown;\n  is_negated: boolean;\n  condition_order: number;\n  created_at: string;\n}\n\n// Relationship filter with database fields\nexport interface SearchFilterRelationship {\n  id: string;\n  filter_id: string;\n  source_entity_type: SearchableEntityType;\n  target_entity_type: SearchableEntityType;\n  relationship_type: RelationshipType;\n  target_entity_conditions: Record<string, unknown>;\n  include_depth: number;\n  created_at: string;\n}\n\n// Field metadata for UI rendering\nexport interface SearchableField {\n  name: string;\n  label_en: string;\n  label_ar: string;\n  type: 'text' | 'number' | 'date' | 'boolean' | 'select' | 'multi-select';\n  entity_types: SearchableEntityType[];\n  operators: FilterOperator[];\n  options?: { value: string; label_en: string; label_ar: string }[];\n}\n\n// Searchable fields configuration\nexport const SEARCHABLE_FIELDS: SearchableField[] = [\n  {\n    name: 'title_en',\n    label_en: 'Title (English)',\n    label_ar: 'العنوان (إنجليزي)',\n    type: 'text',\n    entity_types: ['dossier', 'engagement', 'position', 'document'],\n    operators: ['equals', 'not_equals', 'contains', 'not_contains', 'starts_with', 'ends_with'],\n  },\n  {\n    name: 'title_ar',\n    label_en: 'Title (Arabic)',\n    label_ar: 'العنوان (عربي)',\n    type: 'text',\n    entity_types: ['dossier', 'engagement', 'position', 'document'],\n    operators: ['equals', 'not_equals', 'contains', 'not_contains', 'starts_with', 'ends_with'],\n  },\n  {\n    name: 'status',\n    label_en: 'Status',\n    label_ar: 'الحالة',\n    type: 'select',\n    entity_types: ['dossier', 'engagement', 'position'],\n    operators: ['equals', 'not_equals', 'in', 'not_in'],\n    options: [\n      { value: 'active', label_en: 'Active', label_ar: 'نشط' },\n      { value: 'inactive', label_en: 'Inactive', label_ar: 'غير نشط' },\n      { value: 'archived', label_en: 'Archived', label_ar: 'مؤرشف' },\n      { value: 'draft', label_en: 'Draft', label_ar: 'مسودة' },\n      { value: 'published', label_en: 'Published', label_ar: 'منشور' },\n    ],\n  },\n  {\n    name: 'type',\n    label_en: 'Dossier Type',\n    label_ar: 'نوع الملف',\n    type: 'select',\n    entity_types: ['dossier'],\n    operators: ['equals', 'not_equals', 'in', 'not_in'],\n    options: [\n      { value: 'country', label_en: 'Country', label_ar: 'دولة' },\n      { value: 'organization', label_en: 'Organization', label_ar: 'منظمة' },\n      { value: 'forum', label_en: 'Forum', label_ar: 'منتدى' },\n      { value: 'engagement', label_en: 'Engagement', label_ar: 'مشاركة' },\n      { value: 'theme', label_en: 'Theme', label_ar: 'موضوع' },\n    ],\n  },\n  {\n    name: 'sensitivity_level',\n    label_en: 'Sensitivity Level',\n    label_ar: 'مستوى الحساسية',\n    type: 'select',\n    entity_types: ['dossier', 'document'],\n    operators: ['equals', 'not_equals', 'greater_than', 'less_than', 'greater_equal', 'less_equal'],\n    options: [\n      { value: 'low', label_en: 'Low', label_ar: 'منخفض' },\n      { value: 'medium', label_en: 'Medium', label_ar: 'متوسط' },\n      { value: 'high', label_en: 'High', label_ar: 'عالي' },\n    ],\n  },\n  {\n    name: 'tags',\n    label_en: 'Tags',\n    label_ar: 'الوسوم',\n    type: 'multi-select',\n    entity_types: ['dossier'],\n    operators: ['contains', 'not_contains'],\n  },\n  {\n    name: 'created_at',\n    label_en: 'Created Date',\n    label_ar: 'تاريخ الإنشاء',\n    type: 'date',\n    entity_types: ['dossier', 'engagement', 'position', 'document', 'person'],\n    operators: ['equals', 'not_equals', 'greater_than', 'less_than', 'greater_equal', 'less_equal', 'between'],\n  },\n  {\n    name: 'updated_at',\n    label_en: 'Updated Date',\n    label_ar: 'تاريخ التحديث',\n    type: 'date',\n    entity_types: ['dossier', 'engagement', 'position', 'document', 'person'],\n    operators: ['equals', 'not_equals', 'greater_than', 'less_than', 'greater_equal', 'less_equal', 'between'],\n  },\n  {\n    name: 'start_date',\n    label_en: 'Start Date',\n    label_ar: 'تاريخ البدء',\n    type: 'date',\n    entity_types: ['engagement'],\n    operators: ['equals', 'not_equals', 'greater_than', 'less_than', 'greater_equal', 'less_equal', 'between'],\n  },\n  {\n    name: 'end_date',\n    label_en: 'End Date',\n    label_ar: 'تاريخ الانتهاء',\n    type: 'date',\n    entity_types: ['engagement'],\n    operators: ['equals', 'not_equals', 'greater_than', 'less_than', 'greater_equal', 'less_equal', 'between'],\n  },\n  {\n    name: 'location',\n    label_en: 'Location',\n    label_ar: 'الموقع',\n    type: 'text',\n    entity_types: ['engagement'],\n    operators: ['equals', 'not_equals', 'contains', 'not_contains', 'starts_with'],\n  },\n  {\n    name: 'file_type',\n    label_en: 'File Type',\n    label_ar: 'نوع الملف',\n    type: 'select',\n    entity_types: ['document'],\n    operators: ['equals', 'not_equals', 'in', 'not_in'],\n    options: [\n      { value: 'pdf', label_en: 'PDF', label_ar: 'PDF' },\n      { value: 'doc', label_en: 'Word Document', label_ar: 'مستند وورد' },\n      { value: 'docx', label_en: 'Word Document', label_ar: 'مستند وورد' },\n      { value: 'xls', label_en: 'Excel Spreadsheet', label_ar: 'جدول إكسل' },\n      { value: 'xlsx', label_en: 'Excel Spreadsheet', label_ar: 'جدول إكسل' },\n      { value: 'ppt', label_en: 'PowerPoint', label_ar: 'باوربوينت' },\n      { value: 'pptx', label_en: 'PowerPoint', label_ar: 'باوربوينت' },\n      { value: 'txt', label_en: 'Text File', label_ar: 'ملف نصي' },\n      { value: 'csv', label_en: 'CSV', label_ar: 'CSV' },\n    ],\n  },\n  {\n    name: 'file_size',\n    label_en: 'File Size (bytes)',\n    label_ar: 'حجم الملف (بايت)',\n    type: 'number',\n    entity_types: ['document'],\n    operators: ['equals', 'not_equals', 'greater_than', 'less_than', 'greater_equal', 'less_equal', 'between'],\n  },\n  {\n    name: 'email',\n    label_en: 'Email',\n    label_ar: 'البريد الإلكتروني',\n    type: 'text',\n    entity_types: ['person'],\n    operators: ['equals', 'not_equals', 'contains', 'not_contains', 'ends_with'],\n  },\n  {\n    name: 'department',\n    label_en: 'Department',\n    label_ar: 'القسم',\n    type: 'text',\n    entity_types: ['person'],\n    operators: ['equals', 'not_equals', 'contains', 'not_contains'],\n  },\n];\n\n// Helper function to get fields for specific entity types\nexport function getFieldsForEntityTypes(entityTypes: SearchableEntityType[]): SearchableField[] {\n  return SEARCHABLE_FIELDS.filter((field) =>\n    field.entity_types.some((type) => entityTypes.includes(type))\n  );\n}\n\n// Helper function to get operators for a field type\nexport function getOperatorsForFieldType(\n  fieldType: SearchableField['type']\n): { value: FilterOperator; label_en: string; label_ar: string }[] {\n  const operatorLabels: Record<FilterOperator, { label_en: string; label_ar: string }> = {\n    equals: { label_en: 'Equals', label_ar: 'يساوي' },\n    not_equals: { label_en: 'Not Equals', label_ar: 'لا يساوي' },\n    contains: { label_en: 'Contains', label_ar: 'يحتوي على' },\n    not_contains: { label_en: 'Does Not Contain', label_ar: 'لا يحتوي على' },\n    starts_with: { label_en: 'Starts With', label_ar: 'يبدأ بـ' },\n    ends_with: { label_en: 'Ends With', label_ar: 'ينتهي بـ' },\n    greater_than: { label_en: 'Greater Than', label_ar: 'أكبر من' },\n    less_than: { label_en: 'Less Than', label_ar: 'أصغر من' },\n    greater_equal: { label_en: 'Greater or Equal', label_ar: 'أكبر أو يساوي' },\n    less_equal: { label_en: 'Less or Equal', label_ar: 'أصغر أو يساوي' },\n    between: { label_en: 'Between', label_ar: 'بين' },\n    not_between: { label_en: 'Not Between', label_ar: 'ليس بين' },\n    in: { label_en: 'In List', label_ar: 'في القائمة' },\n    not_in: { label_en: 'Not In List', label_ar: 'ليس في القائمة' },\n    is_null: { label_en: 'Is Empty', label_ar: 'فارغ' },\n    is_not_null: { label_en: 'Is Not Empty', label_ar: 'غير فارغ' },\n    matches_regex: { label_en: 'Matches Pattern', label_ar: 'يطابق النمط' },\n  };\n\n  const typeOperators: Record<SearchableField['type'], FilterOperator[]> = {\n    text: ['equals', 'not_equals', 'contains', 'not_contains', 'starts_with', 'ends_with', 'is_null', 'is_not_null'],\n    number: ['equals', 'not_equals', 'greater_than', 'less_than', 'greater_equal', 'less_equal', 'between', 'is_null', 'is_not_null'],\n    date: ['equals', 'not_equals', 'greater_than', 'less_than', 'greater_equal', 'less_equal', 'between', 'is_null', 'is_not_null'],\n    boolean: ['equals', 'not_equals'],\n    select: ['equals', 'not_equals', 'in', 'not_in', 'is_null', 'is_not_null'],\n    'multi-select': ['contains', 'not_contains', 'is_null', 'is_not_null'],\n  };\n\n  return typeOperators[fieldType].map((op) => ({\n    value: op,\n    ...operatorLabels[op],\n  }));\n}\n\n// Date preset labels\nexport const DATE_PRESET_LABELS: Record<DatePreset, { label_en: string; label_ar: string }> = {\n  today: { label_en: 'Today', label_ar: 'اليوم' },\n  yesterday: { label_en: 'Yesterday', label_ar: 'أمس' },\n  last_7_days: { label_en: 'Last 7 Days', label_ar: 'آخر 7 أيام' },\n  last_30_days: { label_en: 'Last 30 Days', label_ar: 'آخر 30 يوماً' },\n  last_90_days: { label_en: 'Last 90 Days', label_ar: 'آخر 90 يوماً' },\n  this_month: { label_en: 'This Month', label_ar: 'هذا الشهر' },\n  this_year: { label_en: 'This Year', label_ar: 'هذه السنة' },\n  next_7_days: { label_en: 'Next 7 Days', label_ar: 'الأيام السبعة القادمة' },\n  next_30_days: { label_en: 'Next 30 Days', label_ar: 'الثلاثون يوماً القادمة' },\n};\n\n// Entity type labels\nexport const ENTITY_TYPE_LABELS: Record<SearchableEntityType, { label_en: string; label_ar: string; icon: string }> = {\n  dossier: { label_en: 'Dossier', label_ar: 'ملف', icon: 'folder' },\n  engagement: { label_en: 'Engagement', label_ar: 'مشاركة', icon: 'calendar' },\n  position: { label_en: 'Position', label_ar: 'موقف', icon: 'file-text' },\n  document: { label_en: 'Document', label_ar: 'مستند', icon: 'file' },\n  person: { label_en: 'Person', label_ar: 'شخص', icon: 'user' },\n  organization: { label_en: 'Organization', label_ar: 'منظمة', icon: 'building' },\n  forum: { label_en: 'Forum', label_ar: 'منتدى', icon: 'users' },\n  country: { label_en: 'Country', label_ar: 'دولة', icon: 'globe' },\n  theme: { label_en: 'Theme', label_ar: 'موضوع', icon: 'tag' },\n};\n","/**\n * DateRangeFilter Component\n * Feature: advanced-search-filters\n * Description: Date range picker with presets for advanced search\n */\n\nimport { useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Calendar, ChevronDown, X } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport { Popover, PopoverContent, PopoverTrigger } from '@/components/ui/popover';\nimport { Calendar as CalendarComponent } from '@/components/ui/calendar';\nimport { cn } from '@/lib/utils';\nimport type { DateRange, DatePreset } from '@/types/advanced-search.types';\nimport { DATE_PRESET_LABELS } from '@/types/advanced-search.types';\n\ninterface DateRangeFilterProps {\n  value: DateRange | null;\n  onChange: (value: DateRange | null) => void;\n  className?: string;\n}\n\nexport function DateRangeFilter({ value, onChange, className }: DateRangeFilterProps) {\n  const { t, i18n } = useTranslation('advanced-search');\n  const isRTL = i18n.language === 'ar';\n  const [isOpen, setIsOpen] = useState(false);\n  const [mode, setMode] = useState<'preset' | 'custom'>(value?.preset ? 'preset' : 'custom');\n\n  const presets: DatePreset[] = [\n    'today',\n    'yesterday',\n    'last_7_days',\n    'last_30_days',\n    'last_90_days',\n    'this_month',\n    'this_year',\n    'next_7_days',\n    'next_30_days',\n  ];\n\n  const handlePresetClick = (preset: DatePreset) => {\n    onChange({ preset, from: null, to: null });\n    setIsOpen(false);\n  };\n\n  const handleDateSelect = (type: 'from' | 'to', date: Date | undefined) => {\n    if (date) {\n      onChange({\n        preset: null,\n        from: type === 'from' ? date.toISOString() : (value?.from || null),\n        to: type === 'to' ? date.toISOString() : (value?.to || null),\n      });\n    }\n  };\n\n  const handleClear = () => {\n    onChange(null);\n    setIsOpen(false);\n  };\n\n  const getDisplayText = () => {\n    if (!value) return t('dateRange.preset');\n    if (value.preset) {\n      return isRTL\n        ? DATE_PRESET_LABELS[value.preset].label_ar\n        : DATE_PRESET_LABELS[value.preset].label_en;\n    }\n    if (value.from || value.to) {\n      const from = value.from ? new Date(value.from).toLocaleDateString() : '...';\n      const to = value.to ? new Date(value.to).toLocaleDateString() : '...';\n      return `${from} - ${to}`;\n    }\n    return t('dateRange.preset');\n  };\n\n  return (\n    <div className={cn('flex flex-col gap-2', className)} dir={isRTL ? 'rtl' : 'ltr'}>\n      <label className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">\n        {t('dateRange.title')}\n      </label>\n\n      <Popover open={isOpen} onOpenChange={setIsOpen}>\n        <PopoverTrigger asChild>\n          <Button\n            variant=\"outline\"\n            className={cn(\n              'w-full justify-between min-h-11 px-3',\n              value && 'text-foreground'\n            )}\n          >\n            <span className=\"flex items-center gap-2\">\n              <Calendar className=\"h-4 w-4 text-muted-foreground\" />\n              <span className=\"truncate\">{getDisplayText()}</span>\n            </span>\n            <div className=\"flex items-center gap-1\">\n              {value && (\n                <button\n                  type=\"button\"\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    handleClear();\n                  }}\n                  className=\"p-1 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700\"\n                  aria-label={t('dateRange.clear')}\n                >\n                  <X className=\"h-3 w-3\" />\n                </button>\n              )}\n              <ChevronDown className={cn('h-4 w-4 transition-transform', isOpen && 'rotate-180')} />\n            </div>\n          </Button>\n        </PopoverTrigger>\n\n        <PopoverContent\n          className=\"w-auto p-0\"\n          align={isRTL ? 'end' : 'start'}\n          side=\"bottom\"\n        >\n          <div className=\"flex flex-col sm:flex-row\">\n            {/* Presets Column */}\n            <div className=\"border-b sm:border-b-0 sm:border-e p-2 sm:p-3\">\n              <div className=\"flex gap-2 mb-2\">\n                <Button\n                  variant={mode === 'preset' ? 'default' : 'ghost'}\n                  size=\"sm\"\n                  onClick={() => setMode('preset')}\n                  className=\"flex-1\"\n                >\n                  {t('dateRange.preset')}\n                </Button>\n                <Button\n                  variant={mode === 'custom' ? 'default' : 'ghost'}\n                  size=\"sm\"\n                  onClick={() => setMode('custom')}\n                  className=\"flex-1\"\n                >\n                  {t('dateRange.custom')}\n                </Button>\n              </div>\n\n              {mode === 'preset' && (\n                <div className=\"flex flex-col gap-1 max-h-64 overflow-y-auto\">\n                  {presets.map((preset) => {\n                    const label = isRTL\n                      ? DATE_PRESET_LABELS[preset].label_ar\n                      : DATE_PRESET_LABELS[preset].label_en;\n                    const isSelected = value?.preset === preset;\n\n                    return (\n                      <button\n                        key={preset}\n                        type=\"button\"\n                        onClick={() => handlePresetClick(preset)}\n                        className={cn(\n                          'w-full text-start px-3 py-2 rounded-md text-sm transition-colors min-h-10',\n                          isSelected\n                            ? 'bg-primary text-primary-foreground'\n                            : 'hover:bg-gray-100 dark:hover:bg-gray-800'\n                        )}\n                      >\n                        {label}\n                      </button>\n                    );\n                  })}\n                </div>\n              )}\n\n              {mode === 'custom' && (\n                <div className=\"flex flex-col gap-3 mt-3\">\n                  <div>\n                    <label className=\"text-xs font-medium text-gray-500 mb-1 block\">\n                      {t('dateRange.from')}\n                    </label>\n                    <CalendarComponent\n                      mode=\"single\"\n                      selected={value?.from ? new Date(value.from) : undefined}\n                      onSelect={(date) => handleDateSelect('from', date)}\n                      className=\"rounded-md border\"\n                    />\n                  </div>\n                  <div>\n                    <label className=\"text-xs font-medium text-gray-500 mb-1 block\">\n                      {t('dateRange.to')}\n                    </label>\n                    <CalendarComponent\n                      mode=\"single\"\n                      selected={value?.to ? new Date(value.to) : undefined}\n                      onSelect={(date) => handleDateSelect('to', date)}\n                      className=\"rounded-md border\"\n                      disabled={(date) =>\n                        value?.from ? date < new Date(value.from) : false\n                      }\n                    />\n                  </div>\n                </div>\n              )}\n            </div>\n          </div>\n        </PopoverContent>\n      </Popover>\n    </div>\n  );\n}\n\nexport default DateRangeFilter;\n","/**\n * BooleanLogicBuilder Component\n * Feature: advanced-search-filters\n * Description: Build complex filter conditions with AND/OR/NOT logic\n */\n\nimport { useTranslation } from 'react-i18next';\nimport { Plus, X, ToggleLeft, ToggleRight, Trash2 } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Badge } from '@/components/ui/badge';\nimport { cn } from '@/lib/utils';\nimport type {\n  FilterCondition,\n  FilterOperator,\n  SearchableEntityType,\n  LogicOperator,\n} from '@/types/advanced-search.types';\nimport {\n  SEARCHABLE_FIELDS,\n  getFieldsForEntityTypes,\n  getOperatorsForFieldType,\n} from '@/types/advanced-search.types';\n\ninterface BooleanLogicBuilderProps {\n  conditions: FilterCondition[];\n  entityTypes: SearchableEntityType[];\n  logic: LogicOperator;\n  onConditionAdd: (condition: FilterCondition) => void;\n  onConditionUpdate: (index: number, condition: FilterCondition) => void;\n  onConditionRemove: (index: number) => void;\n  onLogicChange: (logic: LogicOperator) => void;\n  onClear: () => void;\n  className?: string;\n}\n\nexport function BooleanLogicBuilder({\n  conditions,\n  entityTypes,\n  logic,\n  onConditionAdd,\n  onConditionUpdate,\n  onConditionRemove,\n  onLogicChange,\n  onClear,\n  className,\n}: BooleanLogicBuilderProps) {\n  const { t, i18n } = useTranslation('advanced-search');\n  const isRTL = i18n.language === 'ar';\n\n  const availableFields = getFieldsForEntityTypes(entityTypes);\n\n  const handleAddCondition = () => {\n    if (availableFields.length === 0) return;\n\n    const firstField = availableFields[0];\n    const operators = getOperatorsForFieldType(firstField.type);\n\n    onConditionAdd({\n      field_name: firstField.name,\n      operator: operators[0]?.value || 'equals',\n      value: '',\n      is_negated: false,\n    });\n  };\n\n  const handleFieldChange = (index: number, fieldName: string) => {\n    const field = availableFields.find((f) => f.name === fieldName);\n    if (!field) return;\n\n    const operators = getOperatorsForFieldType(field.type);\n    const currentCondition = conditions[index];\n\n    onConditionUpdate(index, {\n      ...currentCondition,\n      field_name: fieldName,\n      operator: operators[0]?.value || 'equals',\n      value: field.type === 'boolean' ? false : '',\n    });\n  };\n\n  const handleOperatorChange = (index: number, operator: FilterOperator) => {\n    onConditionUpdate(index, {\n      ...conditions[index],\n      operator,\n    });\n  };\n\n  const handleValueChange = (index: number, value: unknown) => {\n    onConditionUpdate(index, {\n      ...conditions[index],\n      value,\n    });\n  };\n\n  const handleToggleNegate = (index: number) => {\n    onConditionUpdate(index, {\n      ...conditions[index],\n      is_negated: !conditions[index].is_negated,\n    });\n  };\n\n  const renderValueInput = (condition: FilterCondition, index: number) => {\n    const field = availableFields.find((f) => f.name === condition.field_name);\n    if (!field) return null;\n\n    // Null operators don't need a value\n    if (condition.operator === 'is_null' || condition.operator === 'is_not_null') {\n      return null;\n    }\n\n    switch (field.type) {\n      case 'select':\n        return (\n          <Select\n            value={condition.value as string}\n            onValueChange={(value) => handleValueChange(index, value)}\n          >\n            <SelectTrigger className=\"flex-1 min-h-10\">\n              <SelectValue placeholder={t('conditions.placeholder')} />\n            </SelectTrigger>\n            <SelectContent>\n              {field.options?.map((option) => (\n                <SelectItem key={option.value} value={option.value}>\n                  {isRTL ? option.label_ar : option.label_en}\n                </SelectItem>\n              ))}\n            </SelectContent>\n          </Select>\n        );\n\n      case 'multi-select':\n        return (\n          <Input\n            type=\"text\"\n            value={\n              Array.isArray(condition.value)\n                ? (condition.value as string[]).join(', ')\n                : (condition.value as string) || ''\n            }\n            onChange={(e) =>\n              handleValueChange(\n                index,\n                e.target.value.split(',').map((v) => v.trim()).filter(Boolean)\n              )\n            }\n            placeholder={t('conditions.placeholder')}\n            className=\"flex-1 min-h-10\"\n          />\n        );\n\n      case 'number':\n        return (\n          <Input\n            type=\"number\"\n            value={(condition.value as number) || ''}\n            onChange={(e) => handleValueChange(index, e.target.value ? Number(e.target.value) : '')}\n            placeholder={t('conditions.placeholder')}\n            className=\"flex-1 min-h-10\"\n          />\n        );\n\n      case 'date':\n        return (\n          <Input\n            type=\"date\"\n            value={(condition.value as string) || ''}\n            onChange={(e) => handleValueChange(index, e.target.value)}\n            className=\"flex-1 min-h-10\"\n          />\n        );\n\n      case 'boolean':\n        return (\n          <Select\n            value={String(condition.value)}\n            onValueChange={(value) => handleValueChange(index, value === 'true')}\n          >\n            <SelectTrigger className=\"flex-1 min-h-10\">\n              <SelectValue />\n            </SelectTrigger>\n            <SelectContent>\n              <SelectItem value=\"true\">Yes</SelectItem>\n              <SelectItem value=\"false\">No</SelectItem>\n            </SelectContent>\n          </Select>\n        );\n\n      default:\n        return (\n          <Input\n            type=\"text\"\n            value={(condition.value as string) || ''}\n            onChange={(e) => handleValueChange(index, e.target.value)}\n            placeholder={t('conditions.placeholder')}\n            className=\"flex-1 min-h-10\"\n          />\n        );\n    }\n  };\n\n  return (\n    <div className={cn('flex flex-col gap-4', className)} dir={isRTL ? 'rtl' : 'ltr'}>\n      {/* Header with Logic Toggle */}\n      <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3\">\n        <h3 className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">\n          {t('conditions.title')}\n        </h3>\n\n        <div className=\"flex items-center gap-2\">\n          {/* Logic Toggle */}\n          <div className=\"flex items-center gap-1 bg-gray-100 dark:bg-gray-800 rounded-lg p-1\">\n            <button\n              type=\"button\"\n              onClick={() => onLogicChange('AND')}\n              className={cn(\n                'px-3 py-1 rounded text-sm font-medium transition-colors',\n                logic === 'AND'\n                  ? 'bg-primary text-primary-foreground'\n                  : 'text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100'\n              )}\n            >\n              {t('logic.and')}\n            </button>\n            <button\n              type=\"button\"\n              onClick={() => onLogicChange('OR')}\n              className={cn(\n                'px-3 py-1 rounded text-sm font-medium transition-colors',\n                logic === 'OR'\n                  ? 'bg-primary text-primary-foreground'\n                  : 'text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100'\n              )}\n            >\n              {t('logic.or')}\n            </button>\n          </div>\n\n          {conditions.length > 0 && (\n            <Button variant=\"ghost\" size=\"sm\" onClick={onClear}>\n              <Trash2 className=\"h-4 w-4 me-1\" />\n              {t('filters.clear')}\n            </Button>\n          )}\n        </div>\n      </div>\n\n      {/* Logic Description */}\n      <p className=\"text-xs text-gray-500 dark:text-gray-400\">\n        {logic === 'AND' ? t('logic.andDescription') : t('logic.orDescription')}\n      </p>\n\n      {/* Conditions List */}\n      <div className=\"flex flex-col gap-3\">\n        {conditions.map((condition, index) => {\n          const field = availableFields.find((f) => f.name === condition.field_name);\n          const operators = field ? getOperatorsForFieldType(field.type) : [];\n\n          return (\n            <div\n              key={index}\n              className={cn(\n                'flex flex-col sm:flex-row items-start sm:items-center gap-2 p-3 rounded-lg border',\n                condition.is_negated\n                  ? 'border-red-200 bg-red-50 dark:border-red-900 dark:bg-red-950'\n                  : 'border-gray-200 bg-gray-50 dark:border-gray-700 dark:bg-gray-800'\n              )}\n            >\n              {/* Negate Toggle */}\n              <button\n                type=\"button\"\n                onClick={() => handleToggleNegate(index)}\n                className={cn(\n                  'flex items-center gap-1 px-2 py-1 rounded text-xs font-medium transition-colors',\n                  condition.is_negated\n                    ? 'bg-red-200 text-red-800 dark:bg-red-900 dark:text-red-200'\n                    : 'bg-gray-200 text-gray-600 dark:bg-gray-700 dark:text-gray-400'\n                )}\n                aria-label={t('a11y.toggleNegate')}\n              >\n                {condition.is_negated ? (\n                  <ToggleRight className=\"h-4 w-4\" />\n                ) : (\n                  <ToggleLeft className=\"h-4 w-4\" />\n                )}\n                {t('logic.not')}\n              </button>\n\n              {/* Field Select */}\n              <Select\n                value={condition.field_name}\n                onValueChange={(value) => handleFieldChange(index, value)}\n              >\n                <SelectTrigger className=\"w-full sm:w-40 min-h-10\">\n                  <SelectValue placeholder={t('conditions.field')} />\n                </SelectTrigger>\n                <SelectContent>\n                  {availableFields.map((field) => (\n                    <SelectItem key={field.name} value={field.name}>\n                      {isRTL ? field.label_ar : field.label_en}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n\n              {/* Operator Select */}\n              <Select\n                value={condition.operator}\n                onValueChange={(value) => handleOperatorChange(index, value as FilterOperator)}\n              >\n                <SelectTrigger className=\"w-full sm:w-40 min-h-10\">\n                  <SelectValue placeholder={t('conditions.operator')} />\n                </SelectTrigger>\n                <SelectContent>\n                  {operators.map((op) => (\n                    <SelectItem key={op.value} value={op.value}>\n                      {isRTL ? op.label_ar : op.label_en}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n\n              {/* Value Input */}\n              {renderValueInput(condition, index)}\n\n              {/* Remove Button */}\n              <Button\n                variant=\"ghost\"\n                size=\"icon\"\n                onClick={() => onConditionRemove(index)}\n                className=\"shrink-0 min-h-10 min-w-10\"\n                aria-label={t('a11y.removeCondition')}\n              >\n                <X className=\"h-4 w-4\" />\n              </Button>\n            </div>\n          );\n        })}\n\n        {/* Add Condition Button */}\n        <Button\n          variant=\"outline\"\n          onClick={handleAddCondition}\n          className=\"min-h-11 border-dashed\"\n          disabled={availableFields.length === 0}\n        >\n          <Plus className=\"h-4 w-4 me-2\" />\n          {t('conditions.add')}\n        </Button>\n      </div>\n\n      {/* Active Filters Summary */}\n      {conditions.length > 0 && (\n        <div className=\"flex flex-wrap gap-2 pt-2 border-t\">\n          <span className=\"text-xs text-gray-500 dark:text-gray-400 self-center\">\n            {t('filters.activeCount', { count: conditions.length })}:\n          </span>\n          {conditions.map((condition, index) => {\n            const field = availableFields.find((f) => f.name === condition.field_name);\n            const fieldLabel = field\n              ? isRTL\n                ? field.label_ar\n                : field.label_en\n              : condition.field_name;\n\n            return (\n              <Badge\n                key={index}\n                variant={condition.is_negated ? 'destructive' : 'secondary'}\n                className=\"text-xs\"\n              >\n                {condition.is_negated && `${t('logic.not')} `}\n                {fieldLabel}\n              </Badge>\n            );\n          })}\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default BooleanLogicBuilder;\n","/**\n * Saved Search Templates Hook\n * Feature: advanced-search-filters\n * Description: TanStack Query hooks for managing search templates and presets\n */\n\nimport { useMutation, useQuery, useQueryClient } from '@tanstack/react-query';\nimport { supabase } from '@/lib/supabase';\nimport type {\n  SearchTemplate,\n  TemplateListResponse,\n  CreateTemplateRequest,\n  UpdateTemplateRequest,\n  TemplateCategory,\n} from '@/types/advanced-search.types';\n\n// Query key factory\nexport const templateKeys = {\n  all: ['search-templates'] as const,\n  lists: () => [...templateKeys.all, 'list'] as const,\n  list: (filters: { category?: TemplateCategory; limit?: number; offset?: number }) =>\n    [...templateKeys.lists(), filters] as const,\n  details: () => [...templateKeys.all, 'detail'] as const,\n  detail: (id: string) => [...templateKeys.details(), id] as const,\n  popular: () => [...templateKeys.all, 'popular'] as const,\n  recent: () => [...templateKeys.all, 'recent'] as const,\n  system: () => [...templateKeys.all, 'system'] as const,\n};\n\n// API base URL\nconst getApiUrl = () => `${import.meta.env.VITE_SUPABASE_URL}/functions/v1/search-templates`;\n\n// Get auth headers\nasync function getAuthHeaders(): Promise<HeadersInit> {\n  const { data: session } = await supabase.auth.getSession();\n  if (!session?.session?.access_token) {\n    throw new Error('Not authenticated');\n  }\n  return {\n    'Content-Type': 'application/json',\n    Authorization: `Bearer ${session.session.access_token}`,\n    apikey: import.meta.env.VITE_SUPABASE_ANON_KEY,\n  };\n}\n\n// Fetch templates list\nasync function fetchTemplates(params: {\n  category?: TemplateCategory;\n  limit?: number;\n  offset?: number;\n  sortBy?: string;\n  sortOrder?: string;\n}): Promise<TemplateListResponse> {\n  const headers = await getAuthHeaders();\n  const url = new URL(getApiUrl());\n\n  if (params.category) url.searchParams.set('category', params.category);\n  if (params.limit) url.searchParams.set('limit', params.limit.toString());\n  if (params.offset) url.searchParams.set('offset', params.offset.toString());\n  if (params.sortBy) url.searchParams.set('sort_by', params.sortBy);\n  if (params.sortOrder) url.searchParams.set('sort_order', params.sortOrder);\n\n  const response = await fetch(url.toString(), {\n    method: 'GET',\n    headers,\n  });\n\n  if (!response.ok) {\n    const error = await response.json();\n    throw new Error(error.message || 'Failed to fetch templates');\n  }\n\n  return response.json();\n}\n\n// Fetch single template\nasync function fetchTemplate(id: string): Promise<{ data: SearchTemplate }> {\n  const headers = await getAuthHeaders();\n  const response = await fetch(`${getApiUrl()}/${id}`, {\n    method: 'GET',\n    headers,\n  });\n\n  if (!response.ok) {\n    const error = await response.json();\n    throw new Error(error.message || 'Failed to fetch template');\n  }\n\n  return response.json();\n}\n\n// Create template\nasync function createTemplate(data: CreateTemplateRequest): Promise<{ data: SearchTemplate }> {\n  const headers = await getAuthHeaders();\n  const response = await fetch(getApiUrl(), {\n    method: 'POST',\n    headers,\n    body: JSON.stringify(data),\n  });\n\n  if (!response.ok) {\n    const error = await response.json();\n    throw new Error(error.message || 'Failed to create template');\n  }\n\n  return response.json();\n}\n\n// Update template\nasync function updateTemplate(params: {\n  id: string;\n  data: UpdateTemplateRequest;\n}): Promise<{ data: SearchTemplate }> {\n  const headers = await getAuthHeaders();\n  const response = await fetch(`${getApiUrl()}/${params.id}`, {\n    method: 'PUT',\n    headers,\n    body: JSON.stringify(params.data),\n  });\n\n  if (!response.ok) {\n    const error = await response.json();\n    throw new Error(error.message || 'Failed to update template');\n  }\n\n  return response.json();\n}\n\n// Delete template\nasync function deleteTemplate(id: string): Promise<{ success: boolean }> {\n  const headers = await getAuthHeaders();\n  const response = await fetch(`${getApiUrl()}/${id}`, {\n    method: 'DELETE',\n    headers,\n  });\n\n  if (!response.ok) {\n    const error = await response.json();\n    throw new Error(error.message || 'Failed to delete template');\n  }\n\n  return response.json();\n}\n\n// Hook: List templates\nexport function useSearchTemplates(params?: {\n  category?: TemplateCategory;\n  limit?: number;\n  offset?: number;\n  enabled?: boolean;\n}) {\n  return useQuery({\n    queryKey: templateKeys.list({\n      category: params?.category,\n      limit: params?.limit,\n      offset: params?.offset,\n    }),\n    queryFn: () =>\n      fetchTemplates({\n        category: params?.category,\n        limit: params?.limit ?? 50,\n        offset: params?.offset ?? 0,\n      }),\n    enabled: params?.enabled !== false,\n    staleTime: 5 * 60 * 1000, // 5 minutes\n    gcTime: 10 * 60 * 1000, // 10 minutes\n  });\n}\n\n// Hook: Get popular templates\nexport function usePopularTemplates(limit = 5) {\n  return useQuery({\n    queryKey: templateKeys.popular(),\n    queryFn: () =>\n      fetchTemplates({\n        limit,\n        sortBy: 'use_count',\n        sortOrder: 'desc',\n      }),\n    staleTime: 5 * 60 * 1000,\n  });\n}\n\n// Hook: Get recent templates (user's recent)\nexport function useRecentTemplates(limit = 5) {\n  return useQuery({\n    queryKey: templateKeys.recent(),\n    queryFn: () =>\n      fetchTemplates({\n        category: 'recent',\n        limit,\n        sortBy: 'updated_at',\n        sortOrder: 'desc',\n      }),\n    staleTime: 60 * 1000, // 1 minute (more dynamic)\n  });\n}\n\n// Hook: Get system templates (quick access)\nexport function useSystemTemplates() {\n  return useQuery({\n    queryKey: templateKeys.system(),\n    queryFn: () =>\n      fetchTemplates({\n        category: 'system',\n        limit: 20,\n      }),\n    staleTime: 30 * 60 * 1000, // 30 minutes (system templates rarely change)\n  });\n}\n\n// Hook: Get quick templates (quick category for fast access)\nexport function useQuickTemplates() {\n  return useQuery({\n    queryKey: templateKeys.list({ category: 'quick' }),\n    queryFn: () =>\n      fetchTemplates({\n        category: 'quick',\n        limit: 10,\n      }),\n    staleTime: 5 * 60 * 1000,\n  });\n}\n\n// Hook: Get single template\nexport function useSearchTemplate(id: string | null, options?: { enabled?: boolean }) {\n  return useQuery({\n    queryKey: id ? templateKeys.detail(id) : ['search-templates', 'disabled'],\n    queryFn: () => (id ? fetchTemplate(id) : Promise.resolve(null)),\n    enabled: options?.enabled !== false && id !== null,\n    staleTime: 5 * 60 * 1000,\n  });\n}\n\n// Mutation: Create template\nexport function useCreateTemplate() {\n  const queryClient = useQueryClient();\n\n  return useMutation({\n    mutationFn: createTemplate,\n    onSuccess: (data) => {\n      // Invalidate all template lists to refresh\n      queryClient.invalidateQueries({ queryKey: templateKeys.lists() });\n\n      // Add the new template to cache\n      queryClient.setQueryData(templateKeys.detail(data.data.id), data);\n    },\n  });\n}\n\n// Mutation: Update template\nexport function useUpdateTemplate() {\n  const queryClient = useQueryClient();\n\n  return useMutation({\n    mutationFn: updateTemplate,\n    onSuccess: (data, variables) => {\n      // Update the cached template\n      queryClient.setQueryData(templateKeys.detail(variables.id), data);\n\n      // Invalidate lists to refresh ordering\n      queryClient.invalidateQueries({ queryKey: templateKeys.lists() });\n    },\n  });\n}\n\n// Mutation: Delete template\nexport function useDeleteTemplate() {\n  const queryClient = useQueryClient();\n\n  return useMutation({\n    mutationFn: deleteTemplate,\n    onSuccess: (_, id) => {\n      // Remove from cache\n      queryClient.removeQueries({ queryKey: templateKeys.detail(id) });\n\n      // Invalidate lists\n      queryClient.invalidateQueries({ queryKey: templateKeys.lists() });\n    },\n  });\n}\n\n// Hook: Prefetch template for hover state\nexport function usePrefetchTemplate() {\n  const queryClient = useQueryClient();\n\n  return (id: string) => {\n    queryClient.prefetchQuery({\n      queryKey: templateKeys.detail(id),\n      queryFn: () => fetchTemplate(id),\n      staleTime: 5 * 60 * 1000,\n    });\n  };\n}\n\n// Helper: Get template color classes\nexport function getTemplateColorClasses(color: string): {\n  bg: string;\n  text: string;\n  border: string;\n  hover: string;\n} {\n  const colorMap: Record<\n    string,\n    { bg: string; text: string; border: string; hover: string }\n  > = {\n    blue: {\n      bg: 'bg-blue-50 dark:bg-blue-950',\n      text: 'text-blue-700 dark:text-blue-300',\n      border: 'border-blue-200 dark:border-blue-800',\n      hover: 'hover:bg-blue-100 dark:hover:bg-blue-900',\n    },\n    green: {\n      bg: 'bg-green-50 dark:bg-green-950',\n      text: 'text-green-700 dark:text-green-300',\n      border: 'border-green-200 dark:border-green-800',\n      hover: 'hover:bg-green-100 dark:hover:bg-green-900',\n    },\n    red: {\n      bg: 'bg-red-50 dark:bg-red-950',\n      text: 'text-red-700 dark:text-red-300',\n      border: 'border-red-200 dark:border-red-800',\n      hover: 'hover:bg-red-100 dark:hover:bg-red-900',\n    },\n    purple: {\n      bg: 'bg-purple-50 dark:bg-purple-950',\n      text: 'text-purple-700 dark:text-purple-300',\n      border: 'border-purple-200 dark:border-purple-800',\n      hover: 'hover:bg-purple-100 dark:hover:bg-purple-900',\n    },\n    orange: {\n      bg: 'bg-orange-50 dark:bg-orange-950',\n      text: 'text-orange-700 dark:text-orange-300',\n      border: 'border-orange-200 dark:border-orange-800',\n      hover: 'hover:bg-orange-100 dark:hover:bg-orange-900',\n    },\n    yellow: {\n      bg: 'bg-yellow-50 dark:bg-yellow-950',\n      text: 'text-yellow-700 dark:text-yellow-300',\n      border: 'border-yellow-200 dark:border-yellow-800',\n      hover: 'hover:bg-yellow-100 dark:hover:bg-yellow-900',\n    },\n    gray: {\n      bg: 'bg-gray-50 dark:bg-gray-900',\n      text: 'text-gray-700 dark:text-gray-300',\n      border: 'border-gray-200 dark:border-gray-700',\n      hover: 'hover:bg-gray-100 dark:hover:bg-gray-800',\n    },\n    pink: {\n      bg: 'bg-pink-50 dark:bg-pink-950',\n      text: 'text-pink-700 dark:text-pink-300',\n      border: 'border-pink-200 dark:border-pink-800',\n      hover: 'hover:bg-pink-100 dark:hover:bg-pink-900',\n    },\n    indigo: {\n      bg: 'bg-indigo-50 dark:bg-indigo-950',\n      text: 'text-indigo-700 dark:text-indigo-300',\n      border: 'border-indigo-200 dark:border-indigo-800',\n      hover: 'hover:bg-indigo-100 dark:hover:bg-indigo-900',\n    },\n    teal: {\n      bg: 'bg-teal-50 dark:bg-teal-950',\n      text: 'text-teal-700 dark:text-teal-300',\n      border: 'border-teal-200 dark:border-teal-800',\n      hover: 'hover:bg-teal-100 dark:hover:bg-teal-900',\n    },\n  };\n\n  return colorMap[color] || colorMap.gray;\n}\n\n// Helper: Get icon component name for template\nexport function getTemplateIconName(icon: string): string {\n  const iconMap: Record<string, string> = {\n    search: 'Search',\n    'file-text': 'FileText',\n    'folder-open': 'FolderOpen',\n    shield: 'Shield',\n    calendar: 'Calendar',\n    history: 'History',\n    file: 'File',\n    folder: 'Folder',\n    users: 'Users',\n    user: 'User',\n    globe: 'Globe',\n    building: 'Building',\n    tag: 'Tag',\n    star: 'Star',\n    bookmark: 'Bookmark',\n    filter: 'Filter',\n    clock: 'Clock',\n  };\n\n  return iconMap[icon] || 'Search';\n}\n","/**\n * SavedSearchTemplates Component\n * Feature: advanced-search-filters\n * Description: Display and manage saved search templates\n */\n\nimport { useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport {\n  Search,\n  FileText,\n  FolderOpen,\n  Shield,\n  Calendar,\n  History,\n  Star,\n  Trash2,\n  Edit,\n  Check,\n  X,\n  ChevronRight,\n  Users,\n  User,\n  Globe,\n  Building,\n  Tag,\n  File,\n  Bookmark,\n  Filter,\n  Clock,\n} from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { ScrollArea } from '@/components/ui/scroll-area';\nimport { Skeleton } from '@/components/ui/skeleton';\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogFooter,\n} from '@/components/ui/dialog';\nimport {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n} from '@/components/ui/alert-dialog';\nimport { cn } from '@/lib/utils';\nimport {\n  useQuickTemplates,\n  usePopularTemplates,\n  useDeleteTemplate,\n  getTemplateColorClasses,\n} from '@/hooks/useSavedSearchTemplates';\nimport type { SearchTemplate, TemplateDefinition } from '@/types/advanced-search.types';\n\n// Icon mapping\nconst iconMap: Record<string, React.ComponentType<{ className?: string }>> = {\n  search: Search,\n  'file-text': FileText,\n  'folder-open': FolderOpen,\n  shield: Shield,\n  calendar: Calendar,\n  history: History,\n  file: File,\n  folder: FolderOpen,\n  users: Users,\n  user: User,\n  globe: Globe,\n  building: Building,\n  tag: Tag,\n  star: Star,\n  bookmark: Bookmark,\n  filter: Filter,\n  clock: Clock,\n};\n\ninterface SavedSearchTemplatesProps {\n  onApply: (template: TemplateDefinition) => void;\n  className?: string;\n}\n\nexport function SavedSearchTemplates({ onApply, className }: SavedSearchTemplatesProps) {\n  const { t, i18n } = useTranslation('advanced-search');\n  const isRTL = i18n.language === 'ar';\n\n  const [deleteTemplateId, setDeleteTemplateId] = useState<string | null>(null);\n\n  const { data: quickTemplates, isLoading: loadingQuick } = useQuickTemplates();\n  const { data: popularTemplates, isLoading: loadingPopular } = usePopularTemplates();\n  const deleteTemplate = useDeleteTemplate();\n\n  const handleApply = (template: SearchTemplate) => {\n    onApply(template.template_definition);\n  };\n\n  const handleDelete = async () => {\n    if (deleteTemplateId) {\n      await deleteTemplate.mutateAsync(deleteTemplateId);\n      setDeleteTemplateId(null);\n    }\n  };\n\n  const renderTemplateCard = (template: SearchTemplate) => {\n    const IconComponent = iconMap[template.icon] || Search;\n    const colorClasses = getTemplateColorClasses(template.color);\n\n    return (\n      <button\n        key={template.id}\n        type=\"button\"\n        onClick={() => handleApply(template)}\n        className={cn(\n          'flex items-start gap-3 p-3 rounded-lg border text-start w-full min-h-16 transition-all',\n          colorClasses.border,\n          colorClasses.bg,\n          colorClasses.hover\n        )}\n      >\n        <div className={cn('p-2 rounded-lg shrink-0', colorClasses.bg)}>\n          <IconComponent className={cn('h-4 w-4', colorClasses.text)} />\n        </div>\n\n        <div className=\"flex-1 min-w-0\">\n          <h4 className=\"text-sm font-medium text-gray-900 dark:text-gray-100 truncate\">\n            {isRTL ? template.name_ar : template.name_en}\n          </h4>\n          {(template.description_en || template.description_ar) && (\n            <p className=\"text-xs text-gray-500 dark:text-gray-400 truncate mt-0.5\">\n              {isRTL ? template.description_ar : template.description_en}\n            </p>\n          )}\n          {template.use_count > 0 && (\n            <p className=\"text-xs text-gray-400 dark:text-gray-500 mt-1\">\n              {t('templates.useCount', { count: template.use_count })}\n            </p>\n          )}\n        </div>\n\n        <ChevronRight\n          className={cn('h-4 w-4 text-gray-400 shrink-0 self-center', isRTL && 'rotate-180')}\n        />\n      </button>\n    );\n  };\n\n  const renderSkeletons = (count: number) => (\n    <>\n      {Array.from({ length: count }).map((_, i) => (\n        <Skeleton key={i} className=\"h-16 w-full rounded-lg\" />\n      ))}\n    </>\n  );\n\n  return (\n    <div className={cn('flex flex-col gap-6', className)} dir={isRTL ? 'rtl' : 'ltr'}>\n      {/* Quick Templates */}\n      <section>\n        <h3 className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3 flex items-center gap-2\">\n          <Star className=\"h-4 w-4 text-yellow-500\" />\n          {t('templates.quick')}\n        </h3>\n\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-3\">\n          {loadingQuick ? (\n            renderSkeletons(4)\n          ) : quickTemplates?.data && quickTemplates.data.length > 0 ? (\n            quickTemplates.data.map(renderTemplateCard)\n          ) : (\n            <p className=\"text-sm text-gray-500 dark:text-gray-400 col-span-2\">\n              {t('templates.noTemplates')}\n            </p>\n          )}\n        </div>\n      </section>\n\n      {/* Popular Templates */}\n      <section>\n        <h3 className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3 flex items-center gap-2\">\n          <Users className=\"h-4 w-4 text-blue-500\" />\n          {t('templates.popular')}\n        </h3>\n\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-3\">\n          {loadingPopular ? (\n            renderSkeletons(4)\n          ) : popularTemplates?.data && popularTemplates.data.length > 0 ? (\n            popularTemplates.data.map(renderTemplateCard)\n          ) : (\n            <p className=\"text-sm text-gray-500 dark:text-gray-400 col-span-2\">\n              {t('templates.noTemplates')}\n            </p>\n          )}\n        </div>\n      </section>\n\n      {/* Delete Confirmation Dialog */}\n      <AlertDialog open={!!deleteTemplateId} onOpenChange={() => setDeleteTemplateId(null)}>\n        <AlertDialogContent>\n          <AlertDialogHeader>\n            <AlertDialogTitle>{t('templates.delete')}</AlertDialogTitle>\n            <AlertDialogDescription>{t('templates.deleteConfirm')}</AlertDialogDescription>\n          </AlertDialogHeader>\n          <AlertDialogFooter>\n            <AlertDialogCancel>{t('actions.cancel')}</AlertDialogCancel>\n            <AlertDialogAction\n              onClick={handleDelete}\n              className=\"bg-red-600 hover:bg-red-700\"\n            >\n              {t('templates.delete')}\n            </AlertDialogAction>\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n    </div>\n  );\n}\n\nexport default SavedSearchTemplates;\n","/**\n * Advanced Search Hook\n * Feature: advanced-search-filters\n * Description: TanStack Query hook for complex multi-criteria search\n */\n\nimport { useMutation, useQuery, useQueryClient } from '@tanstack/react-query';\nimport { supabase } from '@/lib/supabase';\nimport type {\n  AdvancedSearchRequest,\n  AdvancedSearchResponse,\n  SearchResult,\n  FilterCondition,\n  FilterGroup,\n  RelationshipQuery,\n  DateRange,\n  SearchableEntityType,\n  LogicOperator,\n  SortBy,\n  SortOrder,\n} from '@/types/advanced-search.types';\n\n// Query key factory\nexport const advancedSearchKeys = {\n  all: ['advanced-search'] as const,\n  search: (params: AdvancedSearchRequest) => [...advancedSearchKeys.all, 'results', params] as const,\n  history: () => [...advancedSearchKeys.all, 'history'] as const,\n};\n\n// API function to execute advanced search\nasync function executeAdvancedSearch(\n  request: AdvancedSearchRequest\n): Promise<AdvancedSearchResponse> {\n  const { data: session } = await supabase.auth.getSession();\n  if (!session?.session?.access_token) {\n    throw new Error('Not authenticated');\n  }\n\n  const response = await fetch(\n    `${import.meta.env.VITE_SUPABASE_URL}/functions/v1/advanced-search`,\n    {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${session.session.access_token}`,\n        apikey: import.meta.env.VITE_SUPABASE_ANON_KEY,\n      },\n      body: JSON.stringify(request),\n    }\n  );\n\n  if (!response.ok) {\n    const error = await response.json();\n    throw new Error(error.message || 'Search failed');\n  }\n\n  return response.json();\n}\n\n// Main search hook with caching\nexport function useAdvancedSearch(\n  request: AdvancedSearchRequest | null,\n  options?: {\n    enabled?: boolean;\n    staleTime?: number;\n    refetchOnWindowFocus?: boolean;\n  }\n) {\n  return useQuery({\n    queryKey: request ? advancedSearchKeys.search(request) : ['advanced-search', 'disabled'],\n    queryFn: () => (request ? executeAdvancedSearch(request) : Promise.resolve(null)),\n    enabled: options?.enabled !== false && request !== null,\n    staleTime: options?.staleTime ?? 60 * 1000, // 1 minute\n    gcTime: 5 * 60 * 1000, // 5 minutes\n    refetchOnWindowFocus: options?.refetchOnWindowFocus ?? false,\n    retry: 2,\n    retryDelay: (attemptIndex) => Math.min(1000 * 2 ** attemptIndex, 10000),\n  });\n}\n\n// Mutation-based search for on-demand execution\nexport function useAdvancedSearchMutation() {\n  const queryClient = useQueryClient();\n\n  return useMutation({\n    mutationFn: executeAdvancedSearch,\n    onSuccess: (data, variables) => {\n      // Cache the results\n      queryClient.setQueryData(advancedSearchKeys.search(variables), data);\n\n      // Add to search history\n      addToSearchHistory(variables);\n    },\n  });\n}\n\n// Search history management\nconst SEARCH_HISTORY_KEY = 'advanced-search-history';\nconst MAX_HISTORY_ITEMS = 10;\n\ninterface SearchHistoryItem {\n  id: string;\n  request: AdvancedSearchRequest;\n  timestamp: string;\n  resultCount: number;\n}\n\nfunction addToSearchHistory(request: AdvancedSearchRequest): void {\n  try {\n    const history = getSearchHistory();\n    const newItem: SearchHistoryItem = {\n      id: crypto.randomUUID(),\n      request,\n      timestamp: new Date().toISOString(),\n      resultCount: 0,\n    };\n\n    // Remove duplicate searches\n    const filteredHistory = history.filter(\n      (item) => JSON.stringify(item.request) !== JSON.stringify(request)\n    );\n\n    // Add new item at the beginning\n    const updatedHistory = [newItem, ...filteredHistory].slice(0, MAX_HISTORY_ITEMS);\n\n    localStorage.setItem(SEARCH_HISTORY_KEY, JSON.stringify(updatedHistory));\n  } catch {\n    console.warn('Failed to save search history');\n  }\n}\n\nexport function getSearchHistory(): SearchHistoryItem[] {\n  try {\n    const stored = localStorage.getItem(SEARCH_HISTORY_KEY);\n    return stored ? JSON.parse(stored) : [];\n  } catch {\n    return [];\n  }\n}\n\nexport function clearSearchHistory(): void {\n  localStorage.removeItem(SEARCH_HISTORY_KEY);\n}\n\n// Hook for search history\nexport function useSearchHistory() {\n  return useQuery({\n    queryKey: advancedSearchKeys.history(),\n    queryFn: getSearchHistory,\n    staleTime: Infinity,\n  });\n}\n\n// Search state builder helper\nexport interface SearchState {\n  query: string;\n  entityTypes: SearchableEntityType[];\n  conditions: FilterCondition[];\n  conditionGroups: FilterGroup[];\n  relationships: RelationshipQuery[];\n  dateRange: DateRange | null;\n  status: string[];\n  tags: string[];\n  filterLogic: LogicOperator;\n  includeArchived: boolean;\n  sortBy: SortBy;\n  sortOrder: SortOrder;\n  limit: number;\n  offset: number;\n  savedFilterId: string | null;\n}\n\nexport const defaultSearchState: SearchState = {\n  query: '',\n  entityTypes: ['dossier'],\n  conditions: [],\n  conditionGroups: [],\n  relationships: [],\n  dateRange: null,\n  status: [],\n  tags: [],\n  filterLogic: 'AND',\n  includeArchived: false,\n  sortBy: 'relevance',\n  sortOrder: 'desc',\n  limit: 50,\n  offset: 0,\n  savedFilterId: null,\n};\n\n// Convert SearchState to AdvancedSearchRequest\nexport function buildSearchRequest(state: SearchState): AdvancedSearchRequest {\n  const request: AdvancedSearchRequest = {\n    entity_types: state.entityTypes,\n    filter_logic: state.filterLogic,\n    include_archived: state.includeArchived,\n    sort_by: state.sortBy,\n    sort_order: state.sortOrder,\n    limit: state.limit,\n    offset: state.offset,\n  };\n\n  if (state.query.trim()) {\n    request.query = state.query.trim();\n  }\n\n  if (state.conditions.length > 0) {\n    request.conditions = state.conditions;\n  }\n\n  if (state.conditionGroups.length > 0) {\n    request.condition_groups = state.conditionGroups;\n  }\n\n  if (state.relationships.length > 0) {\n    request.relationships = state.relationships;\n  }\n\n  if (state.dateRange && (state.dateRange.from || state.dateRange.to || state.dateRange.preset)) {\n    request.date_range = state.dateRange;\n  }\n\n  if (state.status.length > 0) {\n    request.status = state.status;\n  }\n\n  if (state.tags.length > 0) {\n    request.tags = state.tags;\n  }\n\n  if (state.savedFilterId) {\n    request.saved_filter_id = state.savedFilterId;\n  }\n\n  return request;\n}\n\n// Search state reducer actions\nexport type SearchAction =\n  | { type: 'SET_QUERY'; payload: string }\n  | { type: 'SET_ENTITY_TYPES'; payload: SearchableEntityType[] }\n  | { type: 'TOGGLE_ENTITY_TYPE'; payload: SearchableEntityType }\n  | { type: 'ADD_CONDITION'; payload: FilterCondition }\n  | { type: 'UPDATE_CONDITION'; payload: { index: number; condition: FilterCondition } }\n  | { type: 'REMOVE_CONDITION'; payload: number }\n  | { type: 'CLEAR_CONDITIONS' }\n  | { type: 'ADD_CONDITION_GROUP'; payload: FilterGroup }\n  | { type: 'REMOVE_CONDITION_GROUP'; payload: number }\n  | { type: 'ADD_RELATIONSHIP'; payload: RelationshipQuery }\n  | { type: 'REMOVE_RELATIONSHIP'; payload: number }\n  | { type: 'SET_DATE_RANGE'; payload: DateRange | null }\n  | { type: 'SET_STATUS'; payload: string[] }\n  | { type: 'TOGGLE_STATUS'; payload: string }\n  | { type: 'SET_TAGS'; payload: string[] }\n  | { type: 'SET_FILTER_LOGIC'; payload: LogicOperator }\n  | { type: 'SET_INCLUDE_ARCHIVED'; payload: boolean }\n  | { type: 'SET_SORT'; payload: { sortBy: SortBy; sortOrder: SortOrder } }\n  | { type: 'SET_PAGINATION'; payload: { limit?: number; offset?: number } }\n  | { type: 'SET_SAVED_FILTER_ID'; payload: string | null }\n  | { type: 'LOAD_STATE'; payload: Partial<SearchState> }\n  | { type: 'RESET' };\n\n// Search state reducer\nexport function searchReducer(state: SearchState, action: SearchAction): SearchState {\n  switch (action.type) {\n    case 'SET_QUERY':\n      return { ...state, query: action.payload, offset: 0 };\n\n    case 'SET_ENTITY_TYPES':\n      return { ...state, entityTypes: action.payload, offset: 0 };\n\n    case 'TOGGLE_ENTITY_TYPE': {\n      const types = state.entityTypes.includes(action.payload)\n        ? state.entityTypes.filter((t) => t !== action.payload)\n        : [...state.entityTypes, action.payload];\n      return { ...state, entityTypes: types.length > 0 ? types : state.entityTypes, offset: 0 };\n    }\n\n    case 'ADD_CONDITION':\n      return { ...state, conditions: [...state.conditions, action.payload], offset: 0 };\n\n    case 'UPDATE_CONDITION':\n      return {\n        ...state,\n        conditions: state.conditions.map((c, i) =>\n          i === action.payload.index ? action.payload.condition : c\n        ),\n        offset: 0,\n      };\n\n    case 'REMOVE_CONDITION':\n      return {\n        ...state,\n        conditions: state.conditions.filter((_, i) => i !== action.payload),\n        offset: 0,\n      };\n\n    case 'CLEAR_CONDITIONS':\n      return { ...state, conditions: [], conditionGroups: [], offset: 0 };\n\n    case 'ADD_CONDITION_GROUP':\n      return { ...state, conditionGroups: [...state.conditionGroups, action.payload], offset: 0 };\n\n    case 'REMOVE_CONDITION_GROUP':\n      return {\n        ...state,\n        conditionGroups: state.conditionGroups.filter((_, i) => i !== action.payload),\n        offset: 0,\n      };\n\n    case 'ADD_RELATIONSHIP':\n      return { ...state, relationships: [...state.relationships, action.payload], offset: 0 };\n\n    case 'REMOVE_RELATIONSHIP':\n      return {\n        ...state,\n        relationships: state.relationships.filter((_, i) => i !== action.payload),\n        offset: 0,\n      };\n\n    case 'SET_DATE_RANGE':\n      return { ...state, dateRange: action.payload, offset: 0 };\n\n    case 'SET_STATUS':\n      return { ...state, status: action.payload, offset: 0 };\n\n    case 'TOGGLE_STATUS': {\n      const newStatus = state.status.includes(action.payload)\n        ? state.status.filter((s) => s !== action.payload)\n        : [...state.status, action.payload];\n      return { ...state, status: newStatus, offset: 0 };\n    }\n\n    case 'SET_TAGS':\n      return { ...state, tags: action.payload, offset: 0 };\n\n    case 'SET_FILTER_LOGIC':\n      return { ...state, filterLogic: action.payload, offset: 0 };\n\n    case 'SET_INCLUDE_ARCHIVED':\n      return { ...state, includeArchived: action.payload, offset: 0 };\n\n    case 'SET_SORT':\n      return { ...state, sortBy: action.payload.sortBy, sortOrder: action.payload.sortOrder, offset: 0 };\n\n    case 'SET_PAGINATION':\n      return {\n        ...state,\n        limit: action.payload.limit ?? state.limit,\n        offset: action.payload.offset ?? state.offset,\n      };\n\n    case 'SET_SAVED_FILTER_ID':\n      return { ...state, savedFilterId: action.payload };\n\n    case 'LOAD_STATE':\n      return { ...state, ...action.payload, offset: 0 };\n\n    case 'RESET':\n      return { ...defaultSearchState };\n\n    default:\n      return state;\n  }\n}\n\n// Hook to check if search has any active filters\nexport function hasActiveFilters(state: SearchState): boolean {\n  return (\n    state.query.trim().length > 0 ||\n    state.conditions.length > 0 ||\n    state.conditionGroups.length > 0 ||\n    state.relationships.length > 0 ||\n    state.dateRange !== null ||\n    state.status.length > 0 ||\n    state.tags.length > 0 ||\n    state.includeArchived\n  );\n}\n\n// Count active filters\nexport function countActiveFilters(state: SearchState): number {\n  let count = 0;\n  if (state.query.trim()) count++;\n  count += state.conditions.length;\n  count += state.conditionGroups.length;\n  count += state.relationships.length;\n  if (state.dateRange) count++;\n  count += state.status.length;\n  count += state.tags.length;\n  if (state.includeArchived) count++;\n  return count;\n}\n","/**\n * AdvancedSearchFilters Component\n * Feature: advanced-search-filters\n * Description: Main filter panel for advanced search with all filter options\n */\n\nimport { useReducer, useState, useCallback } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport {\n  Search,\n  Filter,\n  ChevronDown,\n  ChevronUp,\n  X,\n  Save,\n  RotateCcw,\n  Folder,\n  Calendar,\n  FileText,\n  Users,\n  Building,\n  Globe,\n  Tag,\n  User,\n} from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Badge } from '@/components/ui/badge';\nimport { Checkbox } from '@/components/ui/checkbox';\nimport { ScrollArea } from '@/components/ui/scroll-area';\nimport {\n  Collapsible,\n  CollapsibleContent,\n  CollapsibleTrigger,\n} from '@/components/ui/collapsible';\nimport { cn } from '@/lib/utils';\nimport { DateRangeFilter } from './DateRangeFilter';\nimport { BooleanLogicBuilder } from './BooleanLogicBuilder';\nimport { SavedSearchTemplates } from './SavedSearchTemplates';\nimport {\n  searchReducer,\n  defaultSearchState,\n  buildSearchRequest,\n  hasActiveFilters,\n  countActiveFilters,\n  type SearchState,\n  type SearchAction,\n} from '@/hooks/useAdvancedSearch';\nimport type {\n  SearchableEntityType,\n  TemplateDefinition,\n} from '@/types/advanced-search.types';\nimport { ENTITY_TYPE_LABELS } from '@/types/advanced-search.types';\n\n// Icon mapping for entity types\nconst entityIcons: Record<SearchableEntityType, React.ComponentType<{ className?: string }>> = {\n  dossier: Folder,\n  engagement: Calendar,\n  position: FileText,\n  document: FileText,\n  person: User,\n  organization: Building,\n  forum: Users,\n  country: Globe,\n  theme: Tag,\n};\n\ninterface AdvancedSearchFiltersProps {\n  onSearch: (state: SearchState) => void;\n  onSaveTemplate?: (state: SearchState) => void;\n  className?: string;\n  initialState?: Partial<SearchState>;\n}\n\nexport function AdvancedSearchFilters({\n  onSearch,\n  onSaveTemplate,\n  className,\n  initialState,\n}: AdvancedSearchFiltersProps) {\n  const { t, i18n } = useTranslation('advanced-search');\n  const isRTL = i18n.language === 'ar';\n\n  const [state, dispatch] = useReducer(\n    searchReducer,\n    initialState ? { ...defaultSearchState, ...initialState } : defaultSearchState\n  );\n\n  const [isFiltersExpanded, setIsFiltersExpanded] = useState(true);\n  const [isTemplatesExpanded, setIsTemplatesExpanded] = useState(false);\n\n  const activeFilterCount = countActiveFilters(state);\n  const hasFilters = hasActiveFilters(state);\n\n  const handleSearch = useCallback(() => {\n    onSearch(state);\n  }, [state, onSearch]);\n\n  const handleReset = useCallback(() => {\n    dispatch({ type: 'RESET' });\n  }, []);\n\n  const handleEntityTypeToggle = useCallback((entityType: SearchableEntityType) => {\n    dispatch({ type: 'TOGGLE_ENTITY_TYPE', payload: entityType });\n  }, []);\n\n  const handleApplyTemplate = useCallback((template: TemplateDefinition) => {\n    dispatch({\n      type: 'LOAD_STATE',\n      payload: {\n        entityTypes: template.entity_types || ['dossier'],\n        query: template.query || '',\n        conditions: template.conditions || [],\n        conditionGroups: template.condition_groups || [],\n        relationships: template.relationships || [],\n        dateRange: template.date_range || null,\n        status: template.status || [],\n        tags: template.tags || [],\n        filterLogic: template.filter_logic || 'AND',\n        includeArchived: template.include_archived || false,\n        sortBy: template.sort_by || 'relevance',\n        sortOrder: template.sort_order || 'desc',\n      },\n    });\n    setIsTemplatesExpanded(false);\n  }, []);\n\n  const statusOptions = [\n    { value: 'active', label: t('status.active') },\n    { value: 'inactive', label: t('status.inactive') },\n    { value: 'archived', label: t('status.archived') },\n    { value: 'draft', label: t('status.draft') },\n    { value: 'published', label: t('status.published') },\n  ];\n\n  return (\n    <div\n      className={cn('flex flex-col gap-4 bg-background', className)}\n      dir={isRTL ? 'rtl' : 'ltr'}\n      role=\"search\"\n      aria-label={t('a11y.searchForm')}\n    >\n      {/* Search Input */}\n      <div className=\"relative\">\n        <Search className=\"absolute start-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n        <Input\n          type=\"text\"\n          value={state.query}\n          onChange={(e) => dispatch({ type: 'SET_QUERY', payload: e.target.value })}\n          onKeyDown={(e) => e.key === 'Enter' && handleSearch()}\n          placeholder={t('search.placeholder')}\n          className=\"ps-10 pe-4 min-h-12 text-base\"\n        />\n        {state.query && (\n          <button\n            type=\"button\"\n            onClick={() => dispatch({ type: 'SET_QUERY', payload: '' })}\n            className=\"absolute end-3 top-1/2 -translate-y-1/2 p-1 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700\"\n            aria-label={t('search.clear')}\n          >\n            <X className=\"h-4 w-4\" />\n          </button>\n        )}\n      </div>\n\n      {/* Quick Templates */}\n      <Collapsible open={isTemplatesExpanded} onOpenChange={setIsTemplatesExpanded}>\n        <CollapsibleTrigger asChild>\n          <Button variant=\"ghost\" className=\"w-full justify-between px-3 min-h-10\">\n            <span className=\"flex items-center gap-2\">\n              <Filter className=\"h-4 w-4\" />\n              {t('templates.title')}\n            </span>\n            {isTemplatesExpanded ? (\n              <ChevronUp className=\"h-4 w-4\" />\n            ) : (\n              <ChevronDown className=\"h-4 w-4\" />\n            )}\n          </Button>\n        </CollapsibleTrigger>\n        <CollapsibleContent className=\"pt-3\">\n          <SavedSearchTemplates onApply={handleApplyTemplate} />\n        </CollapsibleContent>\n      </Collapsible>\n\n      {/* Entity Types */}\n      <div className=\"space-y-3\">\n        <h3 className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">\n          {t('entityTypes.label')}\n        </h3>\n        <div className=\"flex flex-wrap gap-2\">\n          {(Object.keys(ENTITY_TYPE_LABELS) as SearchableEntityType[]).map((entityType) => {\n            const IconComponent = entityIcons[entityType];\n            const isSelected = state.entityTypes.includes(entityType);\n            const labels = ENTITY_TYPE_LABELS[entityType];\n\n            return (\n              <button\n                key={entityType}\n                type=\"button\"\n                onClick={() => handleEntityTypeToggle(entityType)}\n                className={cn(\n                  'flex items-center gap-2 px-3 py-2 rounded-lg border text-sm font-medium transition-all min-h-10',\n                  isSelected\n                    ? 'bg-primary text-primary-foreground border-primary'\n                    : 'bg-gray-50 dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:border-primary'\n                )}\n              >\n                <IconComponent className=\"h-4 w-4\" />\n                {isRTL ? labels.label_ar : labels.label_en}\n              </button>\n            );\n          })}\n        </div>\n      </div>\n\n      {/* Filters Section */}\n      <Collapsible open={isFiltersExpanded} onOpenChange={setIsFiltersExpanded}>\n        <CollapsibleTrigger asChild>\n          <Button variant=\"ghost\" className=\"w-full justify-between px-3 min-h-10\">\n            <span className=\"flex items-center gap-2\">\n              <Filter className=\"h-4 w-4\" />\n              {t('filters.title')}\n              {activeFilterCount > 0 && (\n                <Badge variant=\"secondary\" className=\"ms-2\">\n                  {activeFilterCount}\n                </Badge>\n              )}\n            </span>\n            {isFiltersExpanded ? (\n              <ChevronUp className=\"h-4 w-4\" />\n            ) : (\n              <ChevronDown className=\"h-4 w-4\" />\n            )}\n          </Button>\n        </CollapsibleTrigger>\n\n        <CollapsibleContent className=\"pt-4 space-y-6\" aria-label={t('a11y.filterSection')}>\n          {/* Boolean Logic Builder */}\n          <BooleanLogicBuilder\n            conditions={state.conditions}\n            entityTypes={state.entityTypes}\n            logic={state.filterLogic}\n            onConditionAdd={(condition) => dispatch({ type: 'ADD_CONDITION', payload: condition })}\n            onConditionUpdate={(index, condition) =>\n              dispatch({ type: 'UPDATE_CONDITION', payload: { index, condition } })\n            }\n            onConditionRemove={(index) => dispatch({ type: 'REMOVE_CONDITION', payload: index })}\n            onLogicChange={(logic) => dispatch({ type: 'SET_FILTER_LOGIC', payload: logic })}\n            onClear={() => dispatch({ type: 'CLEAR_CONDITIONS' })}\n          />\n\n          {/* Date Range */}\n          <DateRangeFilter\n            value={state.dateRange}\n            onChange={(dateRange) => dispatch({ type: 'SET_DATE_RANGE', payload: dateRange })}\n          />\n\n          {/* Status Filter */}\n          <div className=\"space-y-3\">\n            <h3 className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">\n              {t('status.title')}\n            </h3>\n            <div className=\"flex flex-wrap gap-2\">\n              {statusOptions.map((option) => {\n                const isSelected = state.status.includes(option.value);\n                return (\n                  <button\n                    key={option.value}\n                    type=\"button\"\n                    onClick={() => dispatch({ type: 'TOGGLE_STATUS', payload: option.value })}\n                    className={cn(\n                      'px-3 py-1.5 rounded-full border text-sm transition-all min-h-8',\n                      isSelected\n                        ? 'bg-primary text-primary-foreground border-primary'\n                        : 'bg-gray-50 dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:border-primary'\n                    )}\n                  >\n                    {option.label}\n                  </button>\n                );\n              })}\n            </div>\n          </div>\n\n          {/* Include Archived */}\n          <div className=\"flex items-center gap-3 py-2\">\n            <Checkbox\n              id=\"include-archived\"\n              checked={state.includeArchived}\n              onCheckedChange={(checked) =>\n                dispatch({ type: 'SET_INCLUDE_ARCHIVED', payload: checked === true })\n              }\n            />\n            <label\n              htmlFor=\"include-archived\"\n              className=\"text-sm text-gray-700 dark:text-gray-300 cursor-pointer\"\n            >\n              {t('options.includeArchived')}\n            </label>\n          </div>\n\n          {/* Sorting */}\n          <div className=\"space-y-3\">\n            <h3 className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">\n              {t('sorting.title')}\n            </h3>\n            <div className=\"flex flex-wrap gap-2\">\n              {(['relevance', 'date', 'title'] as const).map((sortOption) => (\n                <button\n                  key={sortOption}\n                  type=\"button\"\n                  onClick={() =>\n                    dispatch({\n                      type: 'SET_SORT',\n                      payload: { sortBy: sortOption, sortOrder: state.sortOrder },\n                    })\n                  }\n                  className={cn(\n                    'px-3 py-1.5 rounded-full border text-sm transition-all min-h-8',\n                    state.sortBy === sortOption\n                      ? 'bg-primary text-primary-foreground border-primary'\n                      : 'bg-gray-50 dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:border-primary'\n                  )}\n                >\n                  {t(`sorting.${sortOption === 'title' ? 'title_sort' : sortOption}`)}\n                </button>\n              ))}\n              <button\n                type=\"button\"\n                onClick={() =>\n                  dispatch({\n                    type: 'SET_SORT',\n                    payload: {\n                      sortBy: state.sortBy,\n                      sortOrder: state.sortOrder === 'asc' ? 'desc' : 'asc',\n                    },\n                  })\n                }\n                className=\"px-3 py-1.5 rounded-full border text-sm bg-gray-50 dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:border-primary transition-all min-h-8\"\n              >\n                {state.sortOrder === 'asc' ? t('sorting.ascending') : t('sorting.descending')}\n              </button>\n            </div>\n          </div>\n        </CollapsibleContent>\n      </Collapsible>\n\n      {/* Action Buttons */}\n      <div className=\"flex flex-col sm:flex-row gap-3 pt-4 border-t\">\n        <Button\n          onClick={handleSearch}\n          className=\"flex-1 min-h-11\"\n          disabled={state.entityTypes.length === 0}\n        >\n          <Search className=\"h-4 w-4 me-2\" />\n          {t('actions.search')}\n        </Button>\n\n        {hasFilters && (\n          <Button variant=\"outline\" onClick={handleReset} className=\"min-h-11\">\n            <RotateCcw className=\"h-4 w-4 me-2\" />\n            {t('actions.reset')}\n          </Button>\n        )}\n\n        {onSaveTemplate && hasFilters && (\n          <Button\n            variant=\"outline\"\n            onClick={() => onSaveTemplate(state)}\n            className=\"min-h-11\"\n          >\n            <Save className=\"h-4 w-4 me-2\" />\n            {t('templates.create')}\n          </Button>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default AdvancedSearchFilters;\n","/**\n * AdvancedSearchPage\n * Feature: advanced-search-filters\n * Description: Main page for complex multi-criteria search\n */\n\nimport { useState, useCallback } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Link } from '@tanstack/react-router';\nimport {\n  Search,\n  Loader2,\n  FileText,\n  Folder,\n  Calendar,\n  User,\n  Building,\n  Users,\n  Globe,\n  Tag,\n  ExternalLink,\n  AlertCircle,\n  Clock,\n} from 'lucide-react';\nimport { Badge } from '@/components/ui/badge';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { ScrollArea } from '@/components/ui/scroll-area';\nimport { Skeleton } from '@/components/ui/skeleton';\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogFooter,\n} from '@/components/ui/dialog';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Switch } from '@/components/ui/switch';\nimport { cn } from '@/lib/utils';\nimport { AdvancedSearchFilters } from '@/components/advanced-search';\nimport {\n  useAdvancedSearchMutation,\n  buildSearchRequest,\n  type SearchState,\n} from '@/hooks/useAdvancedSearch';\nimport { useCreateTemplate } from '@/hooks/useSavedSearchTemplates';\nimport type { SearchResult, SearchableEntityType } from '@/types/advanced-search.types';\nimport { ENTITY_TYPE_LABELS } from '@/types/advanced-search.types';\n\n// Icon mapping for entity types\nconst entityIcons: Record<SearchableEntityType, React.ComponentType<{ className?: string }>> = {\n  dossier: Folder,\n  engagement: Calendar,\n  position: FileText,\n  document: FileText,\n  person: User,\n  organization: Building,\n  forum: Users,\n  country: Globe,\n  theme: Tag,\n};\n\n// Status badge colors\nconst statusColors: Record<string, string> = {\n  active: 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200',\n  inactive: 'bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200',\n  archived: 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200',\n  draft: 'bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200',\n  published: 'bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200',\n};\n\nexport function AdvancedSearchPage() {\n  const { t, i18n } = useTranslation('advanced-search');\n  const isRTL = i18n.language === 'ar';\n\n  const [saveDialogOpen, setSaveDialogOpen] = useState(false);\n  const [templateState, setTemplateState] = useState<SearchState | null>(null);\n  const [templateName, setTemplateName] = useState({ en: '', ar: '' });\n  const [templateDescription, setTemplateDescription] = useState({ en: '', ar: '' });\n  const [templateIsPublic, setTemplateIsPublic] = useState(false);\n\n  const searchMutation = useAdvancedSearchMutation();\n  const createTemplate = useCreateTemplate();\n\n  const handleSearch = useCallback((state: SearchState) => {\n    const request = buildSearchRequest(state);\n    searchMutation.mutate(request);\n  }, [searchMutation]);\n\n  const handleSaveTemplate = useCallback((state: SearchState) => {\n    setTemplateState(state);\n    setTemplateName({ en: '', ar: '' });\n    setTemplateDescription({ en: '', ar: '' });\n    setTemplateIsPublic(false);\n    setSaveDialogOpen(true);\n  }, []);\n\n  const handleCreateTemplate = useCallback(async () => {\n    if (!templateState || !templateName.en || !templateName.ar) return;\n\n    try {\n      await createTemplate.mutateAsync({\n        name_en: templateName.en,\n        name_ar: templateName.ar,\n        description_en: templateDescription.en || undefined,\n        description_ar: templateDescription.ar || undefined,\n        template_definition: {\n          entity_types: templateState.entityTypes,\n          query: templateState.query || undefined,\n          conditions: templateState.conditions.length > 0 ? templateState.conditions : undefined,\n          condition_groups: templateState.conditionGroups.length > 0 ? templateState.conditionGroups : undefined,\n          relationships: templateState.relationships.length > 0 ? templateState.relationships : undefined,\n          date_range: templateState.dateRange || undefined,\n          status: templateState.status.length > 0 ? templateState.status : undefined,\n          tags: templateState.tags.length > 0 ? templateState.tags : undefined,\n          filter_logic: templateState.filterLogic,\n          include_archived: templateState.includeArchived,\n          sort_by: templateState.sortBy,\n          sort_order: templateState.sortOrder,\n        },\n        is_public: templateIsPublic,\n        category: 'custom',\n      });\n      setSaveDialogOpen(false);\n    } catch (error) {\n      console.error('Failed to create template:', error);\n    }\n  }, [templateState, templateName, templateDescription, templateIsPublic, createTemplate]);\n\n  const renderResultCard = (result: SearchResult) => {\n    const IconComponent = entityIcons[result.entity_type as SearchableEntityType] || FileText;\n    const entityLabel = ENTITY_TYPE_LABELS[result.entity_type as SearchableEntityType];\n\n    return (\n      <Card\n        key={result.entity_id}\n        className=\"hover:shadow-md transition-shadow cursor-pointer\"\n      >\n        <CardHeader className=\"pb-3\">\n          <div className=\"flex items-start justify-between gap-3\">\n            <div className=\"flex items-start gap-3 min-w-0\">\n              <div className=\"p-2 rounded-lg bg-gray-100 dark:bg-gray-800 shrink-0\">\n                <IconComponent className=\"h-5 w-5 text-gray-600 dark:text-gray-400\" />\n              </div>\n              <div className=\"min-w-0\">\n                <CardTitle className=\"text-base line-clamp-1\">\n                  {isRTL ? result.title_ar : result.title_en}\n                </CardTitle>\n                <CardDescription className=\"flex items-center gap-2 mt-1\">\n                  <span>{isRTL ? entityLabel?.label_ar : entityLabel?.label_en}</span>\n                  <Badge\n                    variant=\"secondary\"\n                    className={cn('text-xs', statusColors[result.status] || statusColors.active)}\n                  >\n                    {t(`status.${result.status}`)}\n                  </Badge>\n                </CardDescription>\n              </div>\n            </div>\n            <Button variant=\"ghost\" size=\"icon\" asChild className=\"shrink-0\">\n              <Link to={`/${result.entity_type}s/${result.entity_id}`}>\n                <ExternalLink className={cn('h-4 w-4', isRTL && 'rotate-180')} />\n              </Link>\n            </Button>\n          </div>\n        </CardHeader>\n\n        {(result.snippet_en || result.snippet_ar) && (\n          <CardContent className=\"pt-0\">\n            <p\n              className=\"text-sm text-gray-600 dark:text-gray-400 line-clamp-2\"\n              dangerouslySetInnerHTML={{\n                __html: isRTL ? result.snippet_ar : result.snippet_en,\n              }}\n            />\n            <div className=\"flex items-center gap-4 mt-3 text-xs text-gray-500\">\n              <span className=\"flex items-center gap-1\">\n                <Clock className=\"h-3 w-3\" />\n                {new Date(result.updated_at).toLocaleDateString()}\n              </span>\n              {result.rank_score && (\n                <span className=\"flex items-center gap-1\">\n                  <Search className=\"h-3 w-3\" />\n                  {Math.round(result.rank_score)}% {t('sorting.relevance').toLowerCase()}\n                </span>\n              )}\n            </div>\n          </CardContent>\n        )}\n      </Card>\n    );\n  };\n\n  const renderSkeletons = () => (\n    <>\n      {Array.from({ length: 5 }).map((_, i) => (\n        <Card key={i}>\n          <CardHeader className=\"pb-3\">\n            <div className=\"flex items-start gap-3\">\n              <Skeleton className=\"h-10 w-10 rounded-lg\" />\n              <div className=\"flex-1 space-y-2\">\n                <Skeleton className=\"h-5 w-3/4\" />\n                <Skeleton className=\"h-4 w-1/4\" />\n              </div>\n            </div>\n          </CardHeader>\n          <CardContent className=\"pt-0\">\n            <Skeleton className=\"h-4 w-full mb-2\" />\n            <Skeleton className=\"h-4 w-2/3\" />\n          </CardContent>\n        </Card>\n      ))}\n    </>\n  );\n\n  return (\n    <div\n      className=\"container mx-auto px-4 sm:px-6 lg:px-8 py-6\"\n      dir={isRTL ? 'rtl' : 'ltr'}\n    >\n      {/* Page Header */}\n      <div className=\"mb-6\">\n        <h1 className=\"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-gray-100\">\n          {t('title')}\n        </h1>\n        <p className=\"text-gray-600 dark:text-gray-400 mt-1\">\n          {t('description')}\n        </p>\n      </div>\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n        {/* Filters Panel */}\n        <div className=\"lg:col-span-1\">\n          <Card className=\"sticky top-20\">\n            <CardContent className=\"pt-6\">\n              <AdvancedSearchFilters\n                onSearch={handleSearch}\n                onSaveTemplate={handleSaveTemplate}\n              />\n            </CardContent>\n          </Card>\n        </div>\n\n        {/* Results Panel */}\n        <div className=\"lg:col-span-2\">\n          <Card>\n            <CardHeader className=\"pb-4\">\n              <div className=\"flex items-center justify-between\">\n                <CardTitle className=\"flex items-center gap-2\">\n                  <Search className=\"h-5 w-5\" />\n                  {t('results.title')}\n                </CardTitle>\n                {searchMutation.data && (\n                  <div className=\"flex items-center gap-2 text-sm text-gray-500\">\n                    <span>\n                      {t('results.found', { count: searchMutation.data.count })}\n                    </span>\n                    <span className=\"text-xs\">\n                      ({t('results.took', { ms: searchMutation.data.took_ms })})\n                    </span>\n                  </div>\n                )}\n              </div>\n            </CardHeader>\n\n            <CardContent>\n              {/* Loading State */}\n              {searchMutation.isPending && (\n                <div className=\"space-y-4\">\n                  <div className=\"flex items-center justify-center py-8\">\n                    <Loader2 className=\"h-8 w-8 animate-spin text-primary\" />\n                    <span className=\"ms-3 text-gray-600 dark:text-gray-400\">\n                      {t('results.loading')}\n                    </span>\n                  </div>\n                  {renderSkeletons()}\n                </div>\n              )}\n\n              {/* Error State */}\n              {searchMutation.isError && (\n                <div className=\"flex flex-col items-center justify-center py-12 text-center\">\n                  <AlertCircle className=\"h-12 w-12 text-red-500 mb-4\" />\n                  <h3 className=\"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2\">\n                    {t('errors.searchFailed')}\n                  </h3>\n                  <p className=\"text-gray-600 dark:text-gray-400 max-w-md\">\n                    {searchMutation.error?.message}\n                  </p>\n                  <Button\n                    variant=\"outline\"\n                    className=\"mt-4\"\n                    onClick={() => searchMutation.reset()}\n                  >\n                    {t('actions.reset')}\n                  </Button>\n                </div>\n              )}\n\n              {/* Empty State */}\n              {searchMutation.isSuccess && searchMutation.data.data.length === 0 && (\n                <div className=\"flex flex-col items-center justify-center py-12 text-center\">\n                  <Search className=\"h-12 w-12 text-gray-400 mb-4\" />\n                  <h3 className=\"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2\">\n                    {t('results.noResults')}\n                  </h3>\n                  <p className=\"text-gray-600 dark:text-gray-400 max-w-md\">\n                    {t('results.noResultsHint')}\n                  </p>\n                </div>\n              )}\n\n              {/* Results */}\n              {searchMutation.isSuccess && searchMutation.data.data.length > 0 && (\n                <ScrollArea className=\"h-[calc(100vh-400px)] pe-4\">\n                  <div className=\"space-y-4\">\n                    {searchMutation.data.data.map(renderResultCard)}\n\n                    {searchMutation.data.metadata.has_more && (\n                      <div className=\"flex justify-center pt-4\">\n                        <Button variant=\"outline\">\n                          {t('results.loadMore')}\n                        </Button>\n                      </div>\n                    )}\n                  </div>\n                </ScrollArea>\n              )}\n\n              {/* Initial State */}\n              {!searchMutation.isPending &&\n                !searchMutation.isError &&\n                !searchMutation.data && (\n                  <div className=\"flex flex-col items-center justify-center py-12 text-center\">\n                    <Search className=\"h-12 w-12 text-gray-400 mb-4\" />\n                    <h3 className=\"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2\">\n                      {t('search.noQuery')}\n                    </h3>\n                    <p className=\"text-gray-600 dark:text-gray-400 max-w-md\">\n                      {t('description')}\n                    </p>\n                  </div>\n                )}\n\n              {/* Warnings */}\n              {searchMutation.data?.warnings && searchMutation.data.warnings.length > 0 && (\n                <div className=\"mt-4 p-3 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg\">\n                  <div className=\"flex items-start gap-2\">\n                    <AlertCircle className=\"h-4 w-4 text-yellow-600 shrink-0 mt-0.5\" />\n                    <div className=\"text-sm text-yellow-800 dark:text-yellow-200\">\n                      {searchMutation.data.warnings.map((warning, i) => (\n                        <p key={i}>{warning}</p>\n                      ))}\n                    </div>\n                  </div>\n                </div>\n              )}\n            </CardContent>\n          </Card>\n        </div>\n      </div>\n\n      {/* Save Template Dialog */}\n      <Dialog open={saveDialogOpen} onOpenChange={setSaveDialogOpen}>\n        <DialogContent className=\"sm:max-w-md\">\n          <DialogHeader>\n            <DialogTitle>{t('templates.createTitle')}</DialogTitle>\n          </DialogHeader>\n\n          <div className=\"space-y-4 py-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"template-name-en\">{t('templates.nameEn')}</Label>\n              <Input\n                id=\"template-name-en\"\n                value={templateName.en}\n                onChange={(e) => setTemplateName({ ...templateName, en: e.target.value })}\n                placeholder=\"My Search Template\"\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"template-name-ar\">{t('templates.nameAr')}</Label>\n              <Input\n                id=\"template-name-ar\"\n                value={templateName.ar}\n                onChange={(e) => setTemplateName({ ...templateName, ar: e.target.value })}\n                placeholder=\"قالب البحث الخاص بي\"\n                dir=\"rtl\"\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"template-desc-en\">{t('templates.descriptionEn')}</Label>\n              <Input\n                id=\"template-desc-en\"\n                value={templateDescription.en}\n                onChange={(e) => setTemplateDescription({ ...templateDescription, en: e.target.value })}\n                placeholder=\"Optional description\"\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"template-desc-ar\">{t('templates.descriptionAr')}</Label>\n              <Input\n                id=\"template-desc-ar\"\n                value={templateDescription.ar}\n                onChange={(e) => setTemplateDescription({ ...templateDescription, ar: e.target.value })}\n                placeholder=\"وصف اختياري\"\n                dir=\"rtl\"\n              />\n            </div>\n\n            <div className=\"flex items-center justify-between py-2\">\n              <div className=\"space-y-0.5\">\n                <Label>{t('templates.makePublic')}</Label>\n                <p className=\"text-xs text-gray-500\">\n                  {t('templates.publicDescription')}\n                </p>\n              </div>\n              <Switch\n                checked={templateIsPublic}\n                onCheckedChange={setTemplateIsPublic}\n              />\n            </div>\n          </div>\n\n          <DialogFooter className=\"flex-col sm:flex-row gap-2\">\n            <Button variant=\"outline\" onClick={() => setSaveDialogOpen(false)}>\n              {t('actions.cancel')}\n            </Button>\n            <Button\n              onClick={handleCreateTemplate}\n              disabled={!templateName.en || !templateName.ar || createTemplate.isPending}\n            >\n              {createTemplate.isPending && <Loader2 className=\"h-4 w-4 me-2 animate-spin\" />}\n              {t('actions.save')}\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}\n\nexport default AdvancedSearchPage;\n","import { createFileRoute } from '@tanstack/react-router'\nimport { AdvancedSearchPage } from '@/pages/advanced-search'\n\nexport const Route = createFileRoute('/_protected/advanced-search')({\n  component: AdvancedSearchPage,\n})\n"],"names":["SEARCHABLE_FIELDS","getFieldsForEntityTypes","entityTypes","field","type","getOperatorsForFieldType","fieldType","operatorLabels","op","DATE_PRESET_LABELS","ENTITY_TYPE_LABELS","DateRangeFilter","value","onChange","className","t","i18n","useTranslation","isRTL","isOpen","setIsOpen","useState","mode","setMode","presets","handlePresetClick","preset","handleDateSelect","date","handleClear","getDisplayText","from","to","jsxs","cn","jsx","Popover","PopoverTrigger","Button","Calendar","e","X","ChevronDown","PopoverContent","label","isSelected","CalendarComponent","BooleanLogicBuilder","conditions","logic","onConditionAdd","onConditionUpdate","onConditionRemove","onLogicChange","onClear","availableFields","handleAddCondition","firstField","operators","handleFieldChange","index","fieldName","f","currentCondition","handleOperatorChange","operator","handleValueChange","handleToggleNegate","renderValueInput","condition","Select","SelectTrigger","SelectValue","SelectContent","option","SelectItem","Input","v","Trash2","ToggleRight","ToggleLeft","Plus","fieldLabel","Badge","templateKeys","filters","id","getApiUrl","getAuthHeaders","session","supabase","fetchTemplates","params","headers","url","response","error","createTemplate","data","deleteTemplate","usePopularTemplates","limit","useQuery","useQuickTemplates","useCreateTemplate","queryClient","useQueryClient","useMutation","useDeleteTemplate","_","getTemplateColorClasses","color","colorMap","iconMap","Search","FileText","FolderOpen","Shield","History","File","Users","User","Globe","Building","Tag","Star","Bookmark","Filter","Clock","SavedSearchTemplates","onApply","deleteTemplateId","setDeleteTemplateId","quickTemplates","loadingQuick","popularTemplates","loadingPopular","handleApply","template","handleDelete","renderTemplateCard","IconComponent","colorClasses","ChevronRight","renderSkeletons","count","Fragment","i","Skeleton","AlertDialog","AlertDialogContent","AlertDialogHeader","AlertDialogTitle","AlertDialogDescription","AlertDialogFooter","AlertDialogCancel","AlertDialogAction","advancedSearchKeys","executeAdvancedSearch","request","useAdvancedSearchMutation","variables","addToSearchHistory","SEARCH_HISTORY_KEY","MAX_HISTORY_ITEMS","history","getSearchHistory","newItem","filteredHistory","item","updatedHistory","stored","defaultSearchState","buildSearchRequest","state","searchReducer","action","types","c","newStatus","s","hasActiveFilters","countActiveFilters","entityIcons","Folder","AdvancedSearchFilters","onSearch","onSaveTemplate","initialState","dispatch","useReducer","isFiltersExpanded","setIsFiltersExpanded","isTemplatesExpanded","setIsTemplatesExpanded","activeFilterCount","hasFilters","handleSearch","useCallback","handleReset","handleEntityTypeToggle","entityType","handleApplyTemplate","statusOptions","Collapsible","CollapsibleTrigger","ChevronUp","CollapsibleContent","labels","dateRange","Checkbox","checked","sortOption","RotateCcw","Save","statusColors","AdvancedSearchPage","saveDialogOpen","setSaveDialogOpen","templateState","setTemplateState","templateName","setTemplateName","templateDescription","setTemplateDescription","templateIsPublic","setTemplateIsPublic","searchMutation","handleSaveTemplate","handleCreateTemplate","renderResultCard","result","entityLabel","Card","CardHeader","CardTitle","CardDescription","Link","ExternalLink","CardContent","Loader2","AlertCircle","ScrollArea","warning","Dialog","DialogContent","DialogHeader","DialogTitle","Label","Switch","DialogFooter","SplitComponent"],"mappings":"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"}