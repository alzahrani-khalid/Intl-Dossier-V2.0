{"version":3,"file":"working-groups-qzxQPV4G.js","sources":["../../src/hooks/useWorkingGroups.ts","../../src/pages/WorkingGroupsPage.tsx","../../src/routes/_protected/working-groups.tsx?tsr-split=component"],"sourcesContent":["/**\n * React Query hooks for Working Groups Entity Management\n *\n * Feature: working-groups-entity-management\n *\n * Provides hooks for listing, creating, updating, and deleting working groups\n * along with their members, deliverables, meetings, and decisions.\n */\n\nimport { useQuery, useMutation, useQueryClient, type UseQueryOptions } from '@tanstack/react-query';\nimport { useTranslation } from 'react-i18next';\nimport { toast } from 'sonner';\nimport { supabase } from '@/lib/supabase';\nimport type {\n  WorkingGroup,\n  WorkingGroupListResponse,\n  WorkingGroupFullResponse,\n  WorkingGroupSearchParams,\n  WorkingGroupCreateRequest,\n  WorkingGroupUpdateRequest,\n  WorkingGroupMember,\n  WorkingGroupMemberCreateRequest,\n  WorkingGroupMemberUpdateRequest,\n  WorkingGroupDeliverable,\n  WorkingGroupDeliverableCreateRequest,\n  WorkingGroupDeliverableUpdateRequest,\n  WorkingGroupMeeting,\n  WorkingGroupMeetingCreateRequest,\n  WorkingGroupMeetingUpdateRequest,\n  WorkingGroupFilters,\n} from '@/types/working-group.types';\n\n// ============================================================================\n// QUERY KEY FACTORY\n// ============================================================================\n\nexport const workingGroupKeys = {\n  all: ['working-groups'] as const,\n  lists: () => [...workingGroupKeys.all, 'list'] as const,\n  list: (params?: WorkingGroupSearchParams) => [...workingGroupKeys.lists(), params] as const,\n  details: () => [...workingGroupKeys.all, 'detail'] as const,\n  detail: (id: string) => [...workingGroupKeys.details(), id] as const,\n  full: (id: string) => [...workingGroupKeys.all, 'full', id] as const,\n  members: (id: string) => [...workingGroupKeys.all, 'members', id] as const,\n  deliverables: (id: string) => [...workingGroupKeys.all, 'deliverables', id] as const,\n  meetings: (id: string) => [...workingGroupKeys.all, 'meetings', id] as const,\n  decisions: (id: string) => [...workingGroupKeys.all, 'decisions', id] as const,\n  stats: () => [...workingGroupKeys.all, 'stats'] as const,\n};\n\n// ============================================================================\n// HELPER FUNCTIONS\n// ============================================================================\n\nasync function getAuthHeaders(): Promise<Record<string, string>> {\n  const { data: { session } } = await supabase.auth.getSession();\n  return {\n    'Content-Type': 'application/json',\n    'Authorization': `Bearer ${session?.access_token || ''}`,\n  };\n}\n\nconst API_BASE_URL = `${import.meta.env.VITE_SUPABASE_URL}/functions/v1`;\n\n// ============================================================================\n// WORKING GROUP HOOKS\n// ============================================================================\n\n/**\n * Hook to list working groups with optional filters\n */\nexport function useWorkingGroups(\n  filters: WorkingGroupFilters = {},\n  options?: Omit<UseQueryOptions<WorkingGroupListResponse, Error>, 'queryKey' | 'queryFn'>\n) {\n  return useQuery({\n    queryKey: workingGroupKeys.list(filters),\n    queryFn: async (): Promise<WorkingGroupListResponse> => {\n      const {\n        search,\n        status,\n        wg_status,\n        wg_type,\n        parent_forum_id,\n        lead_org_id,\n        page = 1,\n        limit = 20,\n      } = filters;\n      const offset = (page - 1) * limit;\n\n      // Use RPC function for advanced search\n      const { data, error } = await supabase.rpc('search_working_groups', {\n        p_search_term: search || null,\n        p_status: status && status !== 'all' ? status : null,\n        p_wg_type: wg_type && wg_type !== 'all' ? wg_type : null,\n        p_parent_forum_id: parent_forum_id || null,\n        p_lead_org_id: lead_org_id || null,\n        p_limit: limit,\n        p_offset: offset,\n      });\n\n      if (error) throw new Error(error.message);\n\n      // Get total count for pagination\n      let countQuery = supabase\n        .from('dossiers')\n        .select('*', { count: 'exact', head: true })\n        .eq('type', 'working_group')\n        .neq('archived', true);\n\n      if (status && status !== 'all') {\n        countQuery = countQuery.eq('status', status);\n      }\n      if (search) {\n        countQuery = countQuery.or(`name_en.ilike.%${search}%,name_ar.ilike.%${search}%`);\n      }\n\n      const { count } = await countQuery;\n\n      return {\n        data: (data || []) as WorkingGroup[],\n        pagination: {\n          page,\n          limit,\n          total: count || 0,\n          totalPages: Math.ceil((count || 0) / limit),\n          has_more: (data?.length || 0) === limit,\n        },\n      };\n    },\n    staleTime: 30_000,\n    gcTime: 5 * 60_000,\n    ...options,\n  });\n}\n\n/**\n * Hook to get a single working group with full details\n */\nexport function useWorkingGroup(\n  id: string | undefined,\n  options?: Omit<UseQueryOptions<WorkingGroupFullResponse | null, Error>, 'queryKey' | 'queryFn'>\n) {\n  return useQuery({\n    queryKey: workingGroupKeys.full(id || ''),\n    queryFn: async (): Promise<WorkingGroupFullResponse | null> => {\n      if (!id) return null;\n\n      const { data, error } = await supabase.rpc('get_working_group_full', {\n        p_working_group_id: id,\n      });\n\n      if (error) throw new Error(error.message);\n      if (!data) return null;\n\n      return data as WorkingGroupFullResponse;\n    },\n    enabled: !!id,\n    staleTime: 30_000,\n    ...options,\n  });\n}\n\n/**\n * Hook to create a new working group\n */\nexport function useCreateWorkingGroup() {\n  const queryClient = useQueryClient();\n  const { t } = useTranslation('working-groups');\n\n  return useMutation({\n    mutationFn: async (data: WorkingGroupCreateRequest): Promise<WorkingGroup> => {\n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) throw new Error('Not authenticated');\n\n      // Create dossier first\n      // Map sensitivity_level string to integer (1=low, 2=medium, 3=high, 4=critical)\n      const sensitivityMap: Record<string, number> = { low: 1, medium: 2, high: 3, critical: 4 };\n      const sensitivityInt = typeof data.sensitivity_level === 'string'\n        ? sensitivityMap[data.sensitivity_level] || 1\n        : data.sensitivity_level || 1;\n\n      const { data: dossier, error: dossierError } = await supabase\n        .from('dossiers')\n        .insert({\n          type: 'working_group',\n          name_en: data.name_en,\n          name_ar: data.name_ar || data.name_en,\n          description_en: data.summary_en,\n          description_ar: data.summary_ar,\n          status: 'active',\n          sensitivity_level: sensitivityInt,\n          tags: data.tags || [],\n        })\n        .select()\n        .single();\n\n      if (dossierError) throw new Error(dossierError.message);\n\n      // Create working_groups extension\n      const { data: workingGroup, error: wgError } = await supabase\n        .from('working_groups')\n        .insert({\n          id: dossier.id,\n          wg_type: data.wg_type,\n          wg_status: data.wg_status || 'active',\n          mandate_en: data.mandate_en,\n          mandate_ar: data.mandate_ar,\n          description_en: data.description_en,\n          description_ar: data.description_ar,\n          meeting_frequency: data.meeting_frequency,\n          established_date: data.established_date,\n          parent_forum_id: data.parent_forum_id,\n          lead_org_id: data.lead_org_id,\n          chair_person_id: data.chair_person_id,\n          secretary_person_id: data.secretary_person_id,\n          objectives: data.objectives,\n          created_by: user.id,\n          updated_by: user.id,\n        })\n        .select()\n        .single();\n\n      if (wgError) {\n        // Rollback dossier creation\n        await supabase.from('dossiers').delete().eq('id', dossier.id);\n        throw new Error(wgError.message);\n      }\n\n      // Auto-assign creator as owner\n      await supabase.from('dossier_owners').insert({\n        dossier_id: dossier.id,\n        user_id: user.id,\n        role_type: 'owner',\n      });\n\n      return {\n        ...dossier,\n        ...workingGroup,\n      } as WorkingGroup;\n    },\n    onSuccess: (newWorkingGroup) => {\n      queryClient.invalidateQueries({ queryKey: workingGroupKeys.lists() });\n      queryClient.invalidateQueries({ queryKey: workingGroupKeys.stats() });\n      toast.success(t('messages.created', { name: newWorkingGroup.name_en }));\n    },\n    onError: (error) => {\n      toast.error(t('messages.createError', { error: error.message }));\n    },\n  });\n}\n\n/**\n * Hook to update a working group\n */\nexport function useUpdateWorkingGroup() {\n  const queryClient = useQueryClient();\n  const { t } = useTranslation('working-groups');\n\n  return useMutation({\n    mutationFn: async ({ id, data }: { id: string; data: WorkingGroupUpdateRequest }): Promise<WorkingGroup> => {\n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) throw new Error('Not authenticated');\n\n      // Update dossier fields\n      const dossierUpdates: Record<string, unknown> = { updated_at: new Date().toISOString() };\n      if (data.name_en !== undefined) dossierUpdates.name_en = data.name_en;\n      if (data.name_ar !== undefined) dossierUpdates.name_ar = data.name_ar;\n      if (data.summary_en !== undefined) dossierUpdates.summary_en = data.summary_en;\n      if (data.summary_ar !== undefined) dossierUpdates.summary_ar = data.summary_ar;\n      if (data.status !== undefined) dossierUpdates.status = data.status;\n      if (data.sensitivity_level !== undefined) dossierUpdates.sensitivity_level = data.sensitivity_level;\n      if (data.tags !== undefined) dossierUpdates.tags = data.tags;\n\n      const { error: dossierError } = await supabase\n        .from('dossiers')\n        .update(dossierUpdates)\n        .eq('id', id);\n\n      if (dossierError) throw new Error(dossierError.message);\n\n      // Update working_groups extension fields\n      const wgUpdates: Record<string, unknown> = { updated_by: user.id };\n      if (data.wg_type !== undefined) wgUpdates.wg_type = data.wg_type;\n      if (data.wg_status !== undefined) wgUpdates.wg_status = data.wg_status;\n      if (data.mandate_en !== undefined) wgUpdates.mandate_en = data.mandate_en;\n      if (data.mandate_ar !== undefined) wgUpdates.mandate_ar = data.mandate_ar;\n      if (data.description_en !== undefined) wgUpdates.description_en = data.description_en;\n      if (data.description_ar !== undefined) wgUpdates.description_ar = data.description_ar;\n      if (data.meeting_frequency !== undefined) wgUpdates.meeting_frequency = data.meeting_frequency;\n      if (data.next_meeting_date !== undefined) wgUpdates.next_meeting_date = data.next_meeting_date;\n      if (data.disbandment_date !== undefined) wgUpdates.disbandment_date = data.disbandment_date;\n      if (data.parent_forum_id !== undefined) wgUpdates.parent_forum_id = data.parent_forum_id;\n      if (data.lead_org_id !== undefined) wgUpdates.lead_org_id = data.lead_org_id;\n      if (data.chair_person_id !== undefined) wgUpdates.chair_person_id = data.chair_person_id;\n      if (data.secretary_person_id !== undefined) wgUpdates.secretary_person_id = data.secretary_person_id;\n      if (data.objectives !== undefined) wgUpdates.objectives = data.objectives;\n\n      const { error: wgError } = await supabase\n        .from('working_groups')\n        .update(wgUpdates)\n        .eq('id', id);\n\n      if (wgError) throw new Error(wgError.message);\n\n      // Fetch updated record\n      const { data: result } = await supabase.rpc('get_working_group_full', {\n        p_working_group_id: id,\n      });\n\n      return result?.working_group as WorkingGroup;\n    },\n    onSuccess: (updatedWorkingGroup) => {\n      queryClient.invalidateQueries({ queryKey: workingGroupKeys.lists() });\n      queryClient.invalidateQueries({ queryKey: workingGroupKeys.full(updatedWorkingGroup.id) });\n      toast.success(t('messages.updated'));\n    },\n    onError: (error) => {\n      toast.error(t('messages.updateError', { error: error.message }));\n    },\n  });\n}\n\n/**\n * Hook to archive/delete a working group\n */\nexport function useDeleteWorkingGroup() {\n  const queryClient = useQueryClient();\n  const { t } = useTranslation('working-groups');\n\n  return useMutation({\n    mutationFn: async (id: string): Promise<string> => {\n      // Soft delete by archiving\n      const { error } = await supabase\n        .from('dossiers')\n        .update({ archived: true, status: 'archived' })\n        .eq('id', id)\n        .eq('type', 'working_group');\n\n      if (error) throw new Error(error.message);\n      return id;\n    },\n    onSuccess: (deletedId) => {\n      queryClient.invalidateQueries({ queryKey: workingGroupKeys.lists() });\n      queryClient.removeQueries({ queryKey: workingGroupKeys.full(deletedId) });\n      queryClient.invalidateQueries({ queryKey: workingGroupKeys.stats() });\n      toast.success(t('messages.archived'));\n    },\n    onError: (error) => {\n      toast.error(t('messages.archiveError', { error: error.message }));\n    },\n  });\n}\n\n// ============================================================================\n// MEMBER HOOKS\n// ============================================================================\n\n/**\n * Hook to list members of a working group\n */\nexport function useWorkingGroupMembers(workingGroupId: string | undefined) {\n  return useQuery({\n    queryKey: workingGroupKeys.members(workingGroupId || ''),\n    queryFn: async (): Promise<WorkingGroupMember[]> => {\n      if (!workingGroupId) return [];\n\n      const { data, error } = await supabase\n        .from('working_group_members')\n        .select(`\n          *,\n          organizations:organization_id (\n            id,\n            dossiers:id (name_en, name_ar)\n          ),\n          countries:representing_country_id (\n            id,\n            dossiers:id (name_en, name_ar)\n          )\n        `)\n        .eq('working_group_id', workingGroupId)\n        .order('role', { ascending: true })\n        .order('joined_date', { ascending: true });\n\n      if (error) throw new Error(error.message);\n\n      return (data || []).map((m) => ({\n        ...m,\n        organization_name_en: m.organizations?.dossiers?.name_en,\n        organization_name_ar: m.organizations?.dossiers?.name_ar,\n        country_name_en: m.countries?.dossiers?.name_en,\n        country_name_ar: m.countries?.dossiers?.name_ar,\n      })) as WorkingGroupMember[];\n    },\n    enabled: !!workingGroupId,\n    staleTime: 30_000,\n  });\n}\n\n/**\n * Hook to add a member to a working group\n */\nexport function useAddWorkingGroupMember() {\n  const queryClient = useQueryClient();\n  const { t } = useTranslation('working-groups');\n\n  return useMutation({\n    mutationFn: async ({\n      workingGroupId,\n      member,\n    }: {\n      workingGroupId: string;\n      member: WorkingGroupMemberCreateRequest;\n    }): Promise<WorkingGroupMember> => {\n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) throw new Error('Not authenticated');\n\n      const { data, error } = await supabase\n        .from('working_group_members')\n        .insert({\n          working_group_id: workingGroupId,\n          ...member,\n          created_by: user.id,\n        })\n        .select()\n        .single();\n\n      if (error) throw new Error(error.message);\n      return data as WorkingGroupMember;\n    },\n    onSuccess: (_, { workingGroupId }) => {\n      queryClient.invalidateQueries({ queryKey: workingGroupKeys.members(workingGroupId) });\n      queryClient.invalidateQueries({ queryKey: workingGroupKeys.full(workingGroupId) });\n      toast.success(t('messages.memberAdded'));\n    },\n    onError: (error) => {\n      toast.error(t('messages.memberAddError', { error: error.message }));\n    },\n  });\n}\n\n/**\n * Hook to update a working group member\n */\nexport function useUpdateWorkingGroupMember() {\n  const queryClient = useQueryClient();\n  const { t } = useTranslation('working-groups');\n\n  return useMutation({\n    mutationFn: async ({\n      workingGroupId,\n      memberId,\n      data,\n    }: {\n      workingGroupId: string;\n      memberId: string;\n      data: WorkingGroupMemberUpdateRequest;\n    }): Promise<WorkingGroupMember> => {\n      const { data: result, error } = await supabase\n        .from('working_group_members')\n        .update(data)\n        .eq('id', memberId)\n        .eq('working_group_id', workingGroupId)\n        .select()\n        .single();\n\n      if (error) throw new Error(error.message);\n      return result as WorkingGroupMember;\n    },\n    onSuccess: (_, { workingGroupId }) => {\n      queryClient.invalidateQueries({ queryKey: workingGroupKeys.members(workingGroupId) });\n      queryClient.invalidateQueries({ queryKey: workingGroupKeys.full(workingGroupId) });\n      toast.success(t('messages.memberUpdated'));\n    },\n  });\n}\n\n/**\n * Hook to remove a member from a working group\n */\nexport function useRemoveWorkingGroupMember() {\n  const queryClient = useQueryClient();\n  const { t } = useTranslation('working-groups');\n\n  return useMutation({\n    mutationFn: async ({\n      workingGroupId,\n      memberId,\n    }: {\n      workingGroupId: string;\n      memberId: string;\n    }): Promise<void> => {\n      const { error } = await supabase\n        .from('working_group_members')\n        .delete()\n        .eq('id', memberId)\n        .eq('working_group_id', workingGroupId);\n\n      if (error) throw new Error(error.message);\n    },\n    onSuccess: (_, { workingGroupId }) => {\n      queryClient.invalidateQueries({ queryKey: workingGroupKeys.members(workingGroupId) });\n      queryClient.invalidateQueries({ queryKey: workingGroupKeys.full(workingGroupId) });\n      toast.success(t('messages.memberRemoved'));\n    },\n  });\n}\n\n// ============================================================================\n// DELIVERABLE HOOKS\n// ============================================================================\n\n/**\n * Hook to list deliverables of a working group\n */\nexport function useWorkingGroupDeliverables(workingGroupId: string | undefined) {\n  return useQuery({\n    queryKey: workingGroupKeys.deliverables(workingGroupId || ''),\n    queryFn: async (): Promise<WorkingGroupDeliverable[]> => {\n      if (!workingGroupId) return [];\n\n      const { data, error } = await supabase\n        .from('working_group_deliverables')\n        .select('*')\n        .eq('working_group_id', workingGroupId)\n        .order('due_date', { ascending: true, nullsFirst: false })\n        .order('priority', { ascending: false });\n\n      if (error) throw new Error(error.message);\n      return (data || []) as WorkingGroupDeliverable[];\n    },\n    enabled: !!workingGroupId,\n    staleTime: 30_000,\n  });\n}\n\n/**\n * Hook to add a deliverable to a working group\n */\nexport function useAddWorkingGroupDeliverable() {\n  const queryClient = useQueryClient();\n  const { t } = useTranslation('working-groups');\n\n  return useMutation({\n    mutationFn: async ({\n      workingGroupId,\n      deliverable,\n    }: {\n      workingGroupId: string;\n      deliverable: WorkingGroupDeliverableCreateRequest;\n    }): Promise<WorkingGroupDeliverable> => {\n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) throw new Error('Not authenticated');\n\n      const { data, error } = await supabase\n        .from('working_group_deliverables')\n        .insert({\n          working_group_id: workingGroupId,\n          ...deliverable,\n          created_by: user.id,\n          updated_by: user.id,\n        })\n        .select()\n        .single();\n\n      if (error) throw new Error(error.message);\n      return data as WorkingGroupDeliverable;\n    },\n    onSuccess: (_, { workingGroupId }) => {\n      queryClient.invalidateQueries({ queryKey: workingGroupKeys.deliverables(workingGroupId) });\n      queryClient.invalidateQueries({ queryKey: workingGroupKeys.full(workingGroupId) });\n      toast.success(t('messages.deliverableAdded'));\n    },\n  });\n}\n\n/**\n * Hook to update a deliverable\n */\nexport function useUpdateWorkingGroupDeliverable() {\n  const queryClient = useQueryClient();\n  const { t } = useTranslation('working-groups');\n\n  return useMutation({\n    mutationFn: async ({\n      workingGroupId,\n      deliverableId,\n      data,\n    }: {\n      workingGroupId: string;\n      deliverableId: string;\n      data: WorkingGroupDeliverableUpdateRequest;\n    }): Promise<WorkingGroupDeliverable> => {\n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) throw new Error('Not authenticated');\n\n      const { data: result, error } = await supabase\n        .from('working_group_deliverables')\n        .update({ ...data, updated_by: user.id })\n        .eq('id', deliverableId)\n        .eq('working_group_id', workingGroupId)\n        .select()\n        .single();\n\n      if (error) throw new Error(error.message);\n      return result as WorkingGroupDeliverable;\n    },\n    onSuccess: (_, { workingGroupId }) => {\n      queryClient.invalidateQueries({ queryKey: workingGroupKeys.deliverables(workingGroupId) });\n      queryClient.invalidateQueries({ queryKey: workingGroupKeys.full(workingGroupId) });\n      toast.success(t('messages.deliverableUpdated'));\n    },\n  });\n}\n\n/**\n * Hook to delete a deliverable\n */\nexport function useDeleteWorkingGroupDeliverable() {\n  const queryClient = useQueryClient();\n  const { t } = useTranslation('working-groups');\n\n  return useMutation({\n    mutationFn: async ({\n      workingGroupId,\n      deliverableId,\n    }: {\n      workingGroupId: string;\n      deliverableId: string;\n    }): Promise<void> => {\n      const { error } = await supabase\n        .from('working_group_deliverables')\n        .delete()\n        .eq('id', deliverableId)\n        .eq('working_group_id', workingGroupId);\n\n      if (error) throw new Error(error.message);\n    },\n    onSuccess: (_, { workingGroupId }) => {\n      queryClient.invalidateQueries({ queryKey: workingGroupKeys.deliverables(workingGroupId) });\n      queryClient.invalidateQueries({ queryKey: workingGroupKeys.full(workingGroupId) });\n      toast.success(t('messages.deliverableDeleted'));\n    },\n  });\n}\n\n// ============================================================================\n// MEETING HOOKS\n// ============================================================================\n\n/**\n * Hook to list meetings of a working group\n */\nexport function useWorkingGroupMeetings(workingGroupId: string | undefined) {\n  return useQuery({\n    queryKey: workingGroupKeys.meetings(workingGroupId || ''),\n    queryFn: async (): Promise<WorkingGroupMeeting[]> => {\n      if (!workingGroupId) return [];\n\n      const { data, error } = await supabase\n        .from('working_group_meetings')\n        .select('*')\n        .eq('working_group_id', workingGroupId)\n        .order('meeting_date', { ascending: false });\n\n      if (error) throw new Error(error.message);\n      return (data || []) as WorkingGroupMeeting[];\n    },\n    enabled: !!workingGroupId,\n    staleTime: 30_000,\n  });\n}\n\n/**\n * Hook to add a meeting to a working group\n */\nexport function useAddWorkingGroupMeeting() {\n  const queryClient = useQueryClient();\n  const { t } = useTranslation('working-groups');\n\n  return useMutation({\n    mutationFn: async ({\n      workingGroupId,\n      meeting,\n    }: {\n      workingGroupId: string;\n      meeting: WorkingGroupMeetingCreateRequest;\n    }): Promise<WorkingGroupMeeting> => {\n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) throw new Error('Not authenticated');\n\n      const { data, error } = await supabase\n        .from('working_group_meetings')\n        .insert({\n          working_group_id: workingGroupId,\n          ...meeting,\n          status: 'scheduled',\n          created_by: user.id,\n          updated_by: user.id,\n        })\n        .select()\n        .single();\n\n      if (error) throw new Error(error.message);\n      return data as WorkingGroupMeeting;\n    },\n    onSuccess: (_, { workingGroupId }) => {\n      queryClient.invalidateQueries({ queryKey: workingGroupKeys.meetings(workingGroupId) });\n      queryClient.invalidateQueries({ queryKey: workingGroupKeys.full(workingGroupId) });\n      toast.success(t('messages.meetingScheduled'));\n    },\n  });\n}\n\n/**\n * Hook to update a meeting\n */\nexport function useUpdateWorkingGroupMeeting() {\n  const queryClient = useQueryClient();\n  const { t } = useTranslation('working-groups');\n\n  return useMutation({\n    mutationFn: async ({\n      workingGroupId,\n      meetingId,\n      data,\n    }: {\n      workingGroupId: string;\n      meetingId: string;\n      data: WorkingGroupMeetingUpdateRequest;\n    }): Promise<WorkingGroupMeeting> => {\n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) throw new Error('Not authenticated');\n\n      const { data: result, error } = await supabase\n        .from('working_group_meetings')\n        .update({ ...data, updated_by: user.id })\n        .eq('id', meetingId)\n        .eq('working_group_id', workingGroupId)\n        .select()\n        .single();\n\n      if (error) throw new Error(error.message);\n      return result as WorkingGroupMeeting;\n    },\n    onSuccess: (_, { workingGroupId }) => {\n      queryClient.invalidateQueries({ queryKey: workingGroupKeys.meetings(workingGroupId) });\n      queryClient.invalidateQueries({ queryKey: workingGroupKeys.full(workingGroupId) });\n      toast.success(t('messages.meetingUpdated'));\n    },\n  });\n}\n\n// ============================================================================\n// STATS HOOK\n// ============================================================================\n\n/**\n * Hook to get aggregated stats for all working groups\n */\nexport function useWorkingGroupStats() {\n  return useQuery({\n    queryKey: workingGroupKeys.stats(),\n    queryFn: async () => {\n      const { data, error } = await supabase\n        .from('working_group_stats')\n        .select('*');\n\n      if (error) throw new Error(error.message);\n\n      const stats = {\n        total: data?.length || 0,\n        active: data?.filter((wg) => wg.wg_status === 'active').length || 0,\n        suspended: data?.filter((wg) => wg.wg_status === 'suspended').length || 0,\n        disbanded: data?.filter((wg) => wg.wg_status === 'disbanded').length || 0,\n        totalMembers: data?.reduce((acc, wg) => acc + (wg.active_member_count || 0), 0) || 0,\n        totalDeliverables: data?.reduce((acc, wg) => acc + (wg.total_deliverables || 0), 0) || 0,\n        completedDeliverables: data?.reduce((acc, wg) => acc + (wg.completed_deliverables || 0), 0) || 0,\n        totalMeetings: data?.reduce((acc, wg) => acc + (wg.total_meetings || 0), 0) || 0,\n      };\n\n      return stats;\n    },\n    staleTime: 60_000,\n  });\n}\n","/**\n * WorkingGroupsPage - Full CRUD management for working groups\n *\n * Feature: working-groups-entity-management\n *\n * Mobile-first, RTL-compatible page for managing committees,\n * task forces, and collaborative working groups.\n */\n\nimport { useState, useMemo } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { motion } from 'framer-motion';\nimport {\n  Plus,\n  Search,\n  Filter,\n  Users,\n  Target,\n  Calendar,\n  CheckCircle2,\n  Loader2,\n  AlertCircle,\n  MoreHorizontal,\n  Edit,\n  Archive,\n  Eye,\n  Building2,\n  Clock,\n  ChevronRight,\n} from 'lucide-react';\n\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Input } from '@/components/ui/input';\nimport { Badge } from '@/components/ui/badge';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select';\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from '@/components/ui/dialog';\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from '@/components/ui/dropdown-menu';\nimport { Label } from '@/components/ui/label';\nimport { Textarea } from '@/components/ui/textarea';\nimport {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n} from '@/components/ui/alert-dialog';\n\nimport {\n  useWorkingGroups,\n  useWorkingGroupStats,\n  useCreateWorkingGroup,\n  useUpdateWorkingGroup,\n  useDeleteWorkingGroup,\n} from '@/hooks/useWorkingGroups';\nimport type {\n  WorkingGroup,\n  WorkingGroupFilters,\n  WorkingGroupCreateRequest,\n  WorkingGroupUpdateRequest,\n  WorkingGroupType,\n  WorkingGroupStatus,\n  MeetingFrequency,\n} from '@/types/working-group.types';\nimport {\n  WORKING_GROUP_TYPE_LABELS,\n  MEETING_FREQUENCY_LABELS,\n} from '@/types/working-group.types';\n\nconst WORKING_GROUP_TYPES: WorkingGroupType[] = [\n  'committee',\n  'task_force',\n  'advisory_board',\n  'technical_group',\n  'steering_committee',\n];\n\nconst WORKING_GROUP_STATUSES: WorkingGroupStatus[] = ['active', 'suspended', 'disbanded'];\n\nconst MEETING_FREQUENCIES: MeetingFrequency[] = [\n  'weekly',\n  'biweekly',\n  'monthly',\n  'quarterly',\n  'biannually',\n  'annually',\n  'as_needed',\n];\n\nexport default function WorkingGroupsPage() {\n  const { t, i18n } = useTranslation('working-groups');\n  const isRTL = i18n.language === 'ar';\n\n  // State\n  const [filters, setFilters] = useState<WorkingGroupFilters>({\n    page: 1,\n    limit: 20,\n  });\n  const [searchTerm, setSearchTerm] = useState('');\n  const [createDialogOpen, setCreateDialogOpen] = useState(false);\n  const [editDialogOpen, setEditDialogOpen] = useState(false);\n  const [archiveDialogOpen, setArchiveDialogOpen] = useState(false);\n  const [selectedWorkingGroup, setSelectedWorkingGroup] = useState<WorkingGroup | null>(null);\n  const [formData, setFormData] = useState<WorkingGroupCreateRequest>({\n    name_en: '',\n    name_ar: '',\n    wg_type: 'committee',\n  });\n\n  // Queries\n  const { data, isLoading, isError, error } = useWorkingGroups({\n    ...filters,\n    search: searchTerm || undefined,\n  });\n  const { data: stats } = useWorkingGroupStats();\n\n  // Mutations\n  const createMutation = useCreateWorkingGroup();\n  const updateMutation = useUpdateWorkingGroup();\n  const deleteMutation = useDeleteWorkingGroup();\n\n  // Handlers\n  const handleCreateWorkingGroup = async () => {\n    if (!formData.name_en.trim()) return;\n\n    await createMutation.mutateAsync(formData);\n    setCreateDialogOpen(false);\n    resetFormData();\n  };\n\n  const handleUpdateWorkingGroup = async () => {\n    if (!selectedWorkingGroup || !formData.name_en.trim()) return;\n\n    await updateMutation.mutateAsync({\n      id: selectedWorkingGroup.id,\n      data: formData as WorkingGroupUpdateRequest,\n    });\n    setEditDialogOpen(false);\n    setSelectedWorkingGroup(null);\n    resetFormData();\n  };\n\n  const handleArchiveWorkingGroup = async () => {\n    if (!selectedWorkingGroup) return;\n\n    await deleteMutation.mutateAsync(selectedWorkingGroup.id);\n    setArchiveDialogOpen(false);\n    setSelectedWorkingGroup(null);\n  };\n\n  const openEditDialog = (wg: WorkingGroup) => {\n    setSelectedWorkingGroup(wg);\n    setFormData({\n      name_en: wg.name_en,\n      name_ar: wg.name_ar,\n      summary_en: wg.summary_en,\n      summary_ar: wg.summary_ar,\n      wg_type: wg.wg_type,\n      wg_status: wg.wg_status,\n      mandate_en: wg.mandate_en,\n      mandate_ar: wg.mandate_ar,\n      description_en: wg.description_en,\n      description_ar: wg.description_ar,\n      meeting_frequency: wg.meeting_frequency,\n      established_date: wg.established_date,\n    });\n    setEditDialogOpen(true);\n  };\n\n  const openArchiveDialog = (wg: WorkingGroup) => {\n    setSelectedWorkingGroup(wg);\n    setArchiveDialogOpen(true);\n  };\n\n  const resetFormData = () => {\n    setFormData({\n      name_en: '',\n      name_ar: '',\n      wg_type: 'committee',\n    });\n  };\n\n  const handleFilterChange = (key: keyof WorkingGroupFilters, value: string) => {\n    setFilters((prev) => ({\n      ...prev,\n      [key]: value === 'all' ? undefined : value,\n      page: 1, // Reset page on filter change\n    }));\n  };\n\n  // Computed values\n  const workingGroups = data?.data || [];\n  const pagination = data?.pagination;\n\n  // Status badge color\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case 'active':\n        return 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300';\n      case 'suspended':\n        return 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300';\n      case 'disbanded':\n        return 'bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300';\n      default:\n        return 'bg-gray-100 text-gray-800';\n    }\n  };\n\n  // Loading state\n  if (isLoading) {\n    return (\n      <div className=\"flex min-h-96 items-center justify-center\">\n        <Loader2 className=\"size-8 animate-spin text-primary\" />\n      </div>\n    );\n  }\n\n  // Error state\n  if (isError) {\n    return (\n      <div className=\"flex min-h-96 flex-col items-center justify-center gap-4\">\n        <AlertCircle className=\"size-12 text-destructive\" />\n        <div className=\"text-center\">\n          <h2 className=\"text-xl font-semibold\">{t('errors.loadFailed')}</h2>\n          <p className=\"text-sm text-muted-foreground\">{error?.message}</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div\n      className=\"container mx-auto px-4 sm:px-6 lg:px-8 py-4 sm:py-6 space-y-6\"\n      dir={isRTL ? 'rtl' : 'ltr'}\n    >\n      {/* Header */}\n      <header className=\"flex flex-col gap-2\">\n        <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 sm:gap-4\">\n          <div>\n            <h1 className=\"text-2xl sm:text-3xl font-bold\">{t('title')}</h1>\n            <p className=\"text-sm sm:text-base text-muted-foreground\">{t('subtitle')}</p>\n          </div>\n          <Button\n            className=\"w-full sm:w-auto min-h-11 gap-2\"\n            onClick={() => setCreateDialogOpen(true)}\n          >\n            <Plus className=\"size-4\" />\n            {t('actions.add')}\n          </Button>\n        </div>\n      </header>\n\n      {/* Metrics Cards */}\n      <section className=\"grid gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-4\">\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between pb-2\">\n            <CardTitle className=\"text-sm font-medium\">{t('metrics.activeGroups')}</CardTitle>\n            <Target className=\"size-5 text-primary\" />\n          </CardHeader>\n          <CardContent>\n            <p className=\"text-2xl font-bold\">{stats?.active || 0}</p>\n            <p className=\"text-xs text-muted-foreground\">\n              {t('metrics.totalGroups')}: {stats?.total || 0}\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between pb-2\">\n            <CardTitle className=\"text-sm font-medium\">{t('metrics.totalMembers')}</CardTitle>\n            <Users className=\"size-5 text-primary\" />\n          </CardHeader>\n          <CardContent>\n            <p className=\"text-2xl font-bold\">{stats?.totalMembers || 0}</p>\n            <p className=\"text-xs text-muted-foreground\">{t('metrics.totalMembersHint')}</p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between pb-2\">\n            <CardTitle className=\"text-sm font-medium\">{t('metrics.totalDeliverables')}</CardTitle>\n            <CheckCircle2 className=\"size-5 text-primary\" />\n          </CardHeader>\n          <CardContent>\n            <p className=\"text-2xl font-bold\">{stats?.totalDeliverables || 0}</p>\n            <p className=\"text-xs text-muted-foreground\">\n              {t('metrics.completedDeliverables')}: {stats?.completedDeliverables || 0}\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between pb-2\">\n            <CardTitle className=\"text-sm font-medium\">{t('metrics.upcomingMeetings')}</CardTitle>\n            <Calendar className=\"size-5 text-primary\" />\n          </CardHeader>\n          <CardContent>\n            <p className=\"text-2xl font-bold\">{stats?.totalMeetings || 0}</p>\n          </CardContent>\n        </Card>\n      </section>\n\n      {/* Search & Filters */}\n      <Card>\n        <CardContent className=\"pt-6\">\n          <div className=\"flex flex-col gap-4\">\n            {/* Search */}\n            <div className=\"relative\">\n              <Search className=\"absolute start-3 top-1/2 -translate-y-1/2 size-4 text-muted-foreground\" />\n              <Input\n                placeholder={t('filters.searchPlaceholder')}\n                value={searchTerm}\n                onChange={(e) => setSearchTerm(e.target.value)}\n                className=\"ps-10 min-h-11\"\n              />\n            </div>\n\n            {/* Filters */}\n            <div className=\"flex flex-col sm:flex-row gap-3\">\n              <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\n                <Filter className=\"size-4\" />\n                <span>{t('filters.title')}:</span>\n              </div>\n\n              {/* Status Filter */}\n              <Select\n                value={filters.status || 'all'}\n                onValueChange={(value) => handleFilterChange('status', value)}\n              >\n                <SelectTrigger className=\"w-full sm:w-40 min-h-11\">\n                  <SelectValue placeholder={t('filters.allStatuses')} />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"all\">{t('filters.allStatuses')}</SelectItem>\n                  <SelectItem value=\"active\">{t('status.active')}</SelectItem>\n                  <SelectItem value=\"inactive\">{t('status.inactive')}</SelectItem>\n                  <SelectItem value=\"archived\">{t('status.archived')}</SelectItem>\n                </SelectContent>\n              </Select>\n\n              {/* Type Filter */}\n              <Select\n                value={filters.wg_type || 'all'}\n                onValueChange={(value) => handleFilterChange('wg_type', value)}\n              >\n                <SelectTrigger className=\"w-full sm:w-44 min-h-11\">\n                  <SelectValue placeholder={t('filters.allTypes')} />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"all\">{t('filters.allTypes')}</SelectItem>\n                  {WORKING_GROUP_TYPES.map((type) => (\n                    <SelectItem key={type} value={type}>\n                      {t(`types.${type}`)}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Working Groups Grid */}\n      {workingGroups.length === 0 ? (\n        <Card>\n          <CardContent className=\"py-12\">\n            <div className=\"text-center\">\n              <Users className=\"mx-auto size-12 text-muted-foreground mb-4\" />\n              <h3 className=\"text-lg font-semibold\">{t('empty.title')}</h3>\n              <p className=\"text-sm text-muted-foreground mt-1\">{t('empty.description')}</p>\n              <Button className=\"mt-4\" onClick={() => setCreateDialogOpen(true)}>\n                <Plus className=\"size-4 me-2\" />\n                {t('actions.add')}\n              </Button>\n            </div>\n          </CardContent>\n        </Card>\n      ) : (\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4\">\n          {workingGroups.map((wg, index) => (\n            <motion.div\n              key={wg.id}\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ delay: index * 0.05 }}\n            >\n              <Card className=\"h-full hover:shadow-md transition-shadow cursor-pointer\">\n                <CardContent className=\"p-4\">\n                  <div className=\"flex items-start justify-between gap-2\">\n                    <div className=\"flex-1 min-w-0\">\n                      {/* Name */}\n                      <h3 className=\"font-semibold text-base truncate\">\n                        {isRTL ? wg.name_ar : wg.name_en}\n                      </h3>\n                      <p className=\"text-xs text-muted-foreground truncate\">\n                        {isRTL ? wg.name_en : wg.name_ar}\n                      </p>\n\n                      {/* Type Badge */}\n                      <div className=\"flex items-center gap-2 mt-2\">\n                        <Badge variant=\"outline\" className=\"text-xs\">\n                          {t(`types.${wg.wg_type}`)}\n                        </Badge>\n                        <Badge className={`text-xs ${getStatusColor(wg.wg_status)}`}>\n                          {t(`status.${wg.wg_status}`)}\n                        </Badge>\n                      </div>\n\n                      {/* Stats */}\n                      <div className=\"flex items-center gap-4 mt-3 text-sm text-muted-foreground\">\n                        <span className=\"flex items-center gap-1\">\n                          <Users className=\"size-3.5\" />\n                          {wg.active_member_count || 0}\n                        </span>\n                        <span className=\"flex items-center gap-1\">\n                          <CheckCircle2 className=\"size-3.5\" />\n                          {wg.total_deliverables || 0}\n                        </span>\n                        {wg.lead_org_name_en && (\n                          <span className=\"flex items-center gap-1 truncate\">\n                            <Building2 className=\"size-3.5 flex-shrink-0\" />\n                            <span className=\"truncate\">\n                              {isRTL ? wg.lead_org_name_ar : wg.lead_org_name_en}\n                            </span>\n                          </span>\n                        )}\n                      </div>\n\n                      {/* Next meeting / Updated */}\n                      <div className=\"flex items-center gap-1 mt-2 text-xs text-muted-foreground\">\n                        <Clock className=\"size-3\" />\n                        {new Date(wg.updated_at).toLocaleDateString(isRTL ? 'ar-SA' : 'en-US')}\n                      </div>\n                    </div>\n\n                    {/* Actions Menu */}\n                    <DropdownMenu>\n                      <DropdownMenuTrigger asChild>\n                        <Button variant=\"ghost\" size=\"icon\" className=\"size-8\">\n                          <MoreHorizontal className=\"size-4\" />\n                        </Button>\n                      </DropdownMenuTrigger>\n                      <DropdownMenuContent align={isRTL ? 'start' : 'end'}>\n                        <DropdownMenuItem onClick={() => openEditDialog(wg)}>\n                          <Edit className=\"size-4 me-2\" />\n                          {t('actions.edit')}\n                        </DropdownMenuItem>\n                        <DropdownMenuItem onClick={() => openArchiveDialog(wg)}>\n                          <Archive className=\"size-4 me-2\" />\n                          {t('actions.archive')}\n                        </DropdownMenuItem>\n                      </DropdownMenuContent>\n                    </DropdownMenu>\n                  </div>\n                </CardContent>\n              </Card>\n            </motion.div>\n          ))}\n        </div>\n      )}\n\n      {/* Pagination */}\n      {pagination && pagination.totalPages > 1 && (\n        <div className=\"flex items-center justify-center gap-2 mt-6\">\n          <Button\n            variant=\"outline\"\n            size=\"sm\"\n            onClick={() => setFilters((p) => ({ ...p, page: Math.max(1, (p.page || 1) - 1) }))}\n            disabled={filters.page === 1}\n            className=\"min-h-10\"\n          >\n            <ChevronRight className={`size-4 ${isRTL ? '' : 'rotate-180'}`} />\n          </Button>\n          <span className=\"text-sm px-4\">\n            {filters.page || 1} / {pagination.totalPages}\n          </span>\n          <Button\n            variant=\"outline\"\n            size=\"sm\"\n            onClick={() =>\n              setFilters((p) => ({\n                ...p,\n                page: Math.min(pagination.totalPages, (p.page || 1) + 1),\n              }))\n            }\n            disabled={filters.page === pagination.totalPages}\n            className=\"min-h-10\"\n          >\n            <ChevronRight className={`size-4 ${isRTL ? 'rotate-180' : ''}`} />\n          </Button>\n        </div>\n      )}\n\n      {/* Create Dialog */}\n      <Dialog open={createDialogOpen} onOpenChange={setCreateDialogOpen}>\n        <DialogContent className=\"max-w-lg max-h-[90vh] overflow-y-auto\">\n          <DialogHeader>\n            <DialogTitle>{t('createDialog.title')}</DialogTitle>\n            <DialogDescription>{t('createDialog.description')}</DialogDescription>\n          </DialogHeader>\n\n          <div className=\"space-y-4 py-4\">\n            {/* Name EN */}\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"name_en\">{t('form.nameEn')} *</Label>\n              <Input\n                id=\"name_en\"\n                placeholder={t('form.nameEnPlaceholder')}\n                value={formData.name_en}\n                onChange={(e) => setFormData((p) => ({ ...p, name_en: e.target.value }))}\n              />\n            </div>\n\n            {/* Name AR */}\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"name_ar\">{t('form.nameAr')}</Label>\n              <Input\n                id=\"name_ar\"\n                placeholder={t('form.nameArPlaceholder')}\n                value={formData.name_ar || ''}\n                onChange={(e) => setFormData((p) => ({ ...p, name_ar: e.target.value }))}\n                dir=\"rtl\"\n              />\n            </div>\n\n            {/* Type */}\n            <div className=\"space-y-2\">\n              <Label>{t('form.type')} *</Label>\n              <Select\n                value={formData.wg_type}\n                onValueChange={(value: WorkingGroupType) =>\n                  setFormData((p) => ({ ...p, wg_type: value }))\n                }\n              >\n                <SelectTrigger>\n                  <SelectValue placeholder={t('form.typePlaceholder')} />\n                </SelectTrigger>\n                <SelectContent>\n                  {WORKING_GROUP_TYPES.map((type) => (\n                    <SelectItem key={type} value={type}>\n                      {t(`types.${type}`)}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n\n            {/* Meeting Frequency */}\n            <div className=\"space-y-2\">\n              <Label>{t('form.meetingFrequency')}</Label>\n              <Select\n                value={formData.meeting_frequency || ''}\n                onValueChange={(value: MeetingFrequency) =>\n                  setFormData((p) => ({ ...p, meeting_frequency: value }))\n                }\n              >\n                <SelectTrigger>\n                  <SelectValue placeholder={t('form.meetingFrequencyPlaceholder')} />\n                </SelectTrigger>\n                <SelectContent>\n                  {MEETING_FREQUENCIES.map((freq) => (\n                    <SelectItem key={freq} value={freq}>\n                      {t(`meetingFrequency.${freq}`)}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n\n            {/* Summary EN */}\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"summary_en\">{t('form.summaryEn')}</Label>\n              <Textarea\n                id=\"summary_en\"\n                value={formData.summary_en || ''}\n                onChange={(e) => setFormData((p) => ({ ...p, summary_en: e.target.value }))}\n                rows={2}\n              />\n            </div>\n\n            {/* Mandate EN */}\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"mandate_en\">{t('form.mandateEn')}</Label>\n              <Textarea\n                id=\"mandate_en\"\n                placeholder={t('form.mandateEnPlaceholder')}\n                value={formData.mandate_en || ''}\n                onChange={(e) => setFormData((p) => ({ ...p, mandate_en: e.target.value }))}\n                rows={3}\n              />\n            </div>\n\n            {/* Established Date */}\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"established_date\">{t('form.establishedDate')}</Label>\n              <Input\n                id=\"established_date\"\n                type=\"date\"\n                value={formData.established_date || ''}\n                onChange={(e) => setFormData((p) => ({ ...p, established_date: e.target.value }))}\n              />\n            </div>\n          </div>\n\n          <DialogFooter className=\"flex-col sm:flex-row gap-2\">\n            <Button\n              variant=\"outline\"\n              onClick={() => {\n                setCreateDialogOpen(false);\n                resetFormData();\n              }}\n            >\n              {t('form.cancel')}\n            </Button>\n            <Button\n              onClick={handleCreateWorkingGroup}\n              disabled={!formData.name_en.trim() || createMutation.isPending}\n            >\n              {createMutation.isPending && <Loader2 className=\"size-4 me-2 animate-spin\" />}\n              {t('form.create')}\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n\n      {/* Edit Dialog */}\n      <Dialog open={editDialogOpen} onOpenChange={setEditDialogOpen}>\n        <DialogContent className=\"max-w-lg max-h-[90vh] overflow-y-auto\">\n          <DialogHeader>\n            <DialogTitle>{t('editDialog.title')}</DialogTitle>\n            <DialogDescription>{t('editDialog.description')}</DialogDescription>\n          </DialogHeader>\n\n          <div className=\"space-y-4 py-4\">\n            {/* Name EN */}\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"edit_name_en\">{t('form.nameEn')} *</Label>\n              <Input\n                id=\"edit_name_en\"\n                value={formData.name_en}\n                onChange={(e) => setFormData((p) => ({ ...p, name_en: e.target.value }))}\n              />\n            </div>\n\n            {/* Name AR */}\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"edit_name_ar\">{t('form.nameAr')}</Label>\n              <Input\n                id=\"edit_name_ar\"\n                value={formData.name_ar || ''}\n                onChange={(e) => setFormData((p) => ({ ...p, name_ar: e.target.value }))}\n                dir=\"rtl\"\n              />\n            </div>\n\n            {/* Type */}\n            <div className=\"space-y-2\">\n              <Label>{t('form.type')} *</Label>\n              <Select\n                value={formData.wg_type}\n                onValueChange={(value: WorkingGroupType) =>\n                  setFormData((p) => ({ ...p, wg_type: value }))\n                }\n              >\n                <SelectTrigger>\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  {WORKING_GROUP_TYPES.map((type) => (\n                    <SelectItem key={type} value={type}>\n                      {t(`types.${type}`)}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n\n            {/* Status */}\n            <div className=\"space-y-2\">\n              <Label>{t('form.status')}</Label>\n              <Select\n                value={formData.wg_status || 'active'}\n                onValueChange={(value: WorkingGroupStatus) =>\n                  setFormData((p) => ({ ...p, wg_status: value }))\n                }\n              >\n                <SelectTrigger>\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  {WORKING_GROUP_STATUSES.map((status) => (\n                    <SelectItem key={status} value={status}>\n                      {t(`status.${status}`)}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n\n            {/* Meeting Frequency */}\n            <div className=\"space-y-2\">\n              <Label>{t('form.meetingFrequency')}</Label>\n              <Select\n                value={formData.meeting_frequency || ''}\n                onValueChange={(value: MeetingFrequency) =>\n                  setFormData((p) => ({ ...p, meeting_frequency: value }))\n                }\n              >\n                <SelectTrigger>\n                  <SelectValue placeholder={t('form.meetingFrequencyPlaceholder')} />\n                </SelectTrigger>\n                <SelectContent>\n                  {MEETING_FREQUENCIES.map((freq) => (\n                    <SelectItem key={freq} value={freq}>\n                      {t(`meetingFrequency.${freq}`)}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n\n            {/* Summary */}\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"edit_summary_en\">{t('form.summaryEn')}</Label>\n              <Textarea\n                id=\"edit_summary_en\"\n                value={formData.summary_en || ''}\n                onChange={(e) => setFormData((p) => ({ ...p, summary_en: e.target.value }))}\n                rows={2}\n              />\n            </div>\n\n            {/* Mandate */}\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"edit_mandate_en\">{t('form.mandateEn')}</Label>\n              <Textarea\n                id=\"edit_mandate_en\"\n                value={formData.mandate_en || ''}\n                onChange={(e) => setFormData((p) => ({ ...p, mandate_en: e.target.value }))}\n                rows={3}\n              />\n            </div>\n          </div>\n\n          <DialogFooter className=\"flex-col sm:flex-row gap-2\">\n            <Button\n              variant=\"outline\"\n              onClick={() => {\n                setEditDialogOpen(false);\n                setSelectedWorkingGroup(null);\n                resetFormData();\n              }}\n            >\n              {t('form.cancel')}\n            </Button>\n            <Button\n              onClick={handleUpdateWorkingGroup}\n              disabled={!formData.name_en.trim() || updateMutation.isPending}\n            >\n              {updateMutation.isPending && <Loader2 className=\"size-4 me-2 animate-spin\" />}\n              {t('form.update')}\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n\n      {/* Archive Confirmation Dialog */}\n      <AlertDialog open={archiveDialogOpen} onOpenChange={setArchiveDialogOpen}>\n        <AlertDialogContent>\n          <AlertDialogHeader>\n            <AlertDialogTitle>{t('confirmations.archive')}</AlertDialogTitle>\n            <AlertDialogDescription>{t('confirmations.archiveDescription')}</AlertDialogDescription>\n          </AlertDialogHeader>\n          <AlertDialogFooter className=\"flex-col sm:flex-row gap-2\">\n            <AlertDialogCancel>{t('form.cancel')}</AlertDialogCancel>\n            <AlertDialogAction\n              onClick={handleArchiveWorkingGroup}\n              className=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\"\n            >\n              {deleteMutation.isPending && <Loader2 className=\"size-4 me-2 animate-spin\" />}\n              {t('actions.archive')}\n            </AlertDialogAction>\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n    </div>\n  );\n}\n","import { createFileRoute } from '@tanstack/react-router'\nimport WorkingGroupsPage from '../../pages/WorkingGroupsPage'\n\nexport const Route = createFileRoute('/_protected/working-groups')({\n  component: WorkingGroupsPage,\n})\n"],"names":["workingGroupKeys","params","id","useWorkingGroups","filters","options","useQuery","search","status","wg_status","wg_type","parent_forum_id","lead_org_id","page","limit","offset","data","error","supabase","countQuery","count","useCreateWorkingGroup","queryClient","useQueryClient","t","useTranslation","useMutation","user","sensitivityMap","sensitivityInt","dossier","dossierError","workingGroup","wgError","newWorkingGroup","toast","useUpdateWorkingGroup","dossierUpdates","wgUpdates","result","updatedWorkingGroup","useDeleteWorkingGroup","deletedId","useWorkingGroupStats","wg","acc","WORKING_GROUP_TYPES","WORKING_GROUP_STATUSES","MEETING_FREQUENCIES","WorkingGroupsPage","i18n","isRTL","setFilters","useState","searchTerm","setSearchTerm","createDialogOpen","setCreateDialogOpen","editDialogOpen","setEditDialogOpen","archiveDialogOpen","setArchiveDialogOpen","selectedWorkingGroup","setSelectedWorkingGroup","formData","setFormData","isLoading","isError","stats","createMutation","updateMutation","deleteMutation","handleCreateWorkingGroup","resetFormData","handleUpdateWorkingGroup","handleArchiveWorkingGroup","openEditDialog","openArchiveDialog","handleFilterChange","key","value","prev","workingGroups","pagination","getStatusColor","jsx","Loader2","jsxs","AlertCircle","Button","Plus","Card","CardHeader","CardTitle","Target","CardContent","Users","CheckCircle2","Calendar","Search","Input","e","Filter","Select","SelectTrigger","SelectValue","SelectContent","SelectItem","type","index","motion","Badge","Building2","Clock","DropdownMenu","DropdownMenuTrigger","MoreHorizontal","DropdownMenuContent","DropdownMenuItem","Edit","Archive","p","ChevronRight","Dialog","DialogContent","DialogHeader","DialogTitle","DialogDescription","Label","freq","Textarea","DialogFooter","AlertDialog","AlertDialogContent","AlertDialogHeader","AlertDialogTitle","AlertDialogDescription","AlertDialogFooter","AlertDialogCancel","AlertDialogAction","SplitComponent"],"mappings":"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"}