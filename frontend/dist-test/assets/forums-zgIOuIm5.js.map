{"version":3,"file":"forums-zgIOuIm5.js","sources":["../../src/components/Table/AdvancedDataTable.tsx","../../src/components/forums/ForumDetailsDialog.tsx","../../src/hooks/useForums.ts","../../src/pages/forums/ForumsPage.tsx","../../src/routes/_protected/forums.tsx?tsr-split=component"],"sourcesContent":["import * as React from 'react'\nimport {\n ColumnDef,\n ColumnFiltersState,\n SortingState,\n VisibilityState,\n flexRender,\n getCoreRowModel,\n getFilteredRowModel,\n getPaginationRowModel,\n getSortedRowModel,\n useReactTable,\n} from '@tanstack/react-table'\nimport { useTranslation } from 'react-i18next'\nimport {\n ArrowUpDown,\n ChevronDown,\n ChevronLeft,\n ChevronRight,\n ChevronsLeft,\n ChevronsRight,\n Download,\n Search,\n X,\n} from 'lucide-react'\n\nimport { Button } from '@/components/ui/button'\nimport { Checkbox } from '@/components/ui/checkbox'\nimport {\n DropdownMenu,\n DropdownMenuCheckboxItem,\n DropdownMenuContent,\n DropdownMenuTrigger,\n} from '@/components/ui/dropdown-menu'\nimport { Input } from '@/components/ui/input'\nimport {\n Table,\n TableBody,\n TableCell,\n TableHead,\n TableHeader,\n TableRow,\n} from '@/components/ui/table'\nimport { cn } from '@/lib/utils'\n\ninterface AdvancedDataTableProps<TData, TValue> {\n columns: ColumnDef<TData, TValue>[]\n data: TData[]\n searchPlaceholder?: string\n onRowClick?: (row: TData) => void\n enableRowSelection?: boolean\n enableExport?: boolean\n exportFileName?: string\n}\n\nexport function AdvancedDataTable<TData, TValue>({\n columns,\n data,\n searchPlaceholder,\n onRowClick,\n enableRowSelection = false,\n enableExport = true,\n exportFileName = 'export',\n}: AdvancedDataTableProps<TData, TValue>) {\n const { t, i18n } = useTranslation()\n const isRTL = i18n.dir() === 'rtl'\n\n const [sorting, setSorting] = React.useState<SortingState>([])\n const [columnFilters, setColumnFilters] = React.useState<ColumnFiltersState>([])\n const [columnVisibility, setColumnVisibility] = React.useState<VisibilityState>({})\n const [rowSelection, setRowSelection] = React.useState({})\n const [globalFilter, setGlobalFilter] = React.useState('')\n\n // Add selection column if enabled\n const tableColumns = React.useMemo(() => {\n if (!enableRowSelection) return columns\n\n const selectionColumn: ColumnDef<TData> = {\n id: 'select',\n header: ({ table }) => (\n <Checkbox\n checked={\n table.getIsAllPageRowsSelected() ||\n (table.getIsSomePageRowsSelected() && 'indeterminate')\n }\n onCheckedChange={(value) => table.toggleAllPageRowsSelected(!!value)}\n aria-label={t('common:selectAll')}\n />\n ),\n cell: ({ row }) => (\n <Checkbox\n checked={row.getIsSelected()}\n onCheckedChange={(value) => row.toggleSelected(!!value)}\n aria-label={t('common:selectRow')}\n />\n ),\n enableSorting: false,\n enableHiding: false,\n }\n\n return [selectionColumn, ...columns]\n }, [columns, enableRowSelection, t])\n\n const table = useReactTable({\n data,\n columns: tableColumns,\n onSortingChange: setSorting,\n onColumnFiltersChange: setColumnFilters,\n getCoreRowModel: getCoreRowModel(),\n getPaginationRowModel: getPaginationRowModel(),\n getSortedRowModel: getSortedRowModel(),\n getFilteredRowModel: getFilteredRowModel(),\n onColumnVisibilityChange: setColumnVisibility,\n onRowSelectionChange: setRowSelection,\n onGlobalFilterChange: setGlobalFilter,\n globalFilterFn: 'includesString',\n state: {\n sorting,\n columnFilters,\n columnVisibility,\n rowSelection,\n globalFilter,\n },\n })\n\n // Export to CSV\n const exportToCSV = () => {\n const rows = table.getFilteredRowModel().rows\n if (rows.length === 0) return\n\n // Get visible columns (excluding select column)\n const visibleColumns = table\n .getAllColumns()\n .filter((col) => col.getIsVisible() && col.id !== 'select' && col.id !== 'actions')\n\n // Create CSV header\n const headers = visibleColumns.map((col) => {\n const headerValue = col.columnDef.header\n if (typeof headerValue === 'string') return headerValue\n return col.id\n })\n\n // Create CSV rows\n const csvRows = rows.map((row) => {\n return visibleColumns.map((col) => {\n const cellValue = row.getValue(col.id)\n // Handle different value types\n if (cellValue === null || cellValue === undefined) return ''\n if (typeof cellValue === 'object') return JSON.stringify(cellValue)\n return String(cellValue).replace(/\"/g, '\"\"') // Escape quotes\n })\n })\n\n // Combine header and rows\n const csvContent = [\n headers.join(','),\n ...csvRows.map((row) => row.map((cell) => `\"${cell}\"`).join(',')),\n ].join('\\n')\n\n // Download file\n const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' })\n const link = document.createElement('a')\n const url = URL.createObjectURL(blob)\n link.setAttribute('href', url)\n link.setAttribute('download', `${exportFileName}.csv`)\n link.style.visibility = 'hidden'\n document.body.appendChild(link)\n link.click()\n document.body.removeChild(link)\n }\n\n return (\n <div className=\"w-full space-y-3 sm:space-y-4\">\n {/* Toolbar */}\n <div className=\"flex flex-col sm:flex-row gap-3 sm:gap-4\">\n {/* Global Search */}\n <div className=\"relative flex-1\">\n <Search className={cn(\n \"absolute top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground pointer-events-none\",\n isRTL ? \"right-3\" : \"left-3\"\n )} />\n <Input\n placeholder={searchPlaceholder || t('common:searchAll')}\n value={globalFilter ?? ''}\n onChange={(event) => setGlobalFilter(event.target.value)}\n className={cn(\n \"w-full\",\n isRTL ? \"pr-10 pl-10\" : \"pl-10 pr-10\"\n )}\n />\n {globalFilter && (\n <Button\n variant=\"ghost\"\n size=\"sm\"\n className={cn(\n \"absolute top-1/2 -translate-y-1/2 h-7 w-7 p-0\",\n isRTL ? \"left-1\" : \"right-1\"\n )}\n onClick={() => setGlobalFilter('')}\n >\n <X className=\"h-4 w-4\" />\n </Button>\n )}\n </div>\n\n {/* Column Visibility & Export */}\n <div className=\"flex gap-2\">\n {/* Column Visibility */}\n <DropdownMenu>\n <DropdownMenuTrigger asChild>\n <Button variant=\"outline\" className=\" sm:min-h-0\">\n <ChevronDown className=\"h-4 w-4 me-2\" />\n {t('common:columns')}\n </Button>\n </DropdownMenuTrigger>\n <DropdownMenuContent align=\"end\" className=\"w-48\">\n {table\n .getAllColumns()\n .filter((column) => column.getCanHide())\n .map((column) => {\n return (\n <DropdownMenuCheckboxItem\n key={column.id}\n className=\"capitalize\"\n checked={column.getIsVisible()}\n onCheckedChange={(value) => column.toggleVisibility(!!value)}\n >\n {column.id}\n </DropdownMenuCheckboxItem>\n )\n })}\n </DropdownMenuContent>\n </DropdownMenu>\n\n {/* Export */}\n {enableExport && (\n <Button\n variant=\"outline\"\n onClick={exportToCSV}\n disabled={data.length === 0}\n className=\" sm:min-h-0\"\n >\n <Download className=\"h-4 w-4 me-2\" />\n {t('common:export')}\n </Button>\n )}\n </div>\n </div>\n\n {/* Table */}\n <div className=\"rounded-lg border border-border overflow-hidden\">\n <div className=\"overflow-x-auto touch-pan-x\">\n <Table>\n <TableHeader>\n {table.getHeaderGroups().map((headerGroup) => (\n <TableRow key={headerGroup.id}>\n {headerGroup.headers.map((header) => {\n return (\n <TableHead\n key={header.id}\n className={cn(\n \"px-3 py-2 sm:px-4 sm:py-3 lg:px-6\",\n header.column.getCanSort() && \"cursor-pointer select-none\"\n )}\n onClick={header.column.getToggleSortingHandler()}\n >\n {header.isPlaceholder ? null : (\n <div className={cn(\n \"flex items-center gap-2\",\n header.column.getCanSort() && \"hover:text-foreground\"\n )}>\n {flexRender(\n header.column.columnDef.header,\n header.getContext()\n )}\n {header.column.getCanSort() && (\n <ArrowUpDown className=\"h-3 w-3\" />\n )}\n </div>\n )}\n </TableHead>\n )\n })}\n </TableRow>\n ))}\n </TableHeader>\n <TableBody>\n {table.getRowModel().rows?.length ? (\n table.getRowModel().rows.map((row) => (\n <TableRow\n key={row.id}\n data-state={row.getIsSelected() && 'selected'}\n className={cn(\n onRowClick && 'cursor-pointer hover:bg-accent/50',\n 'transition-colors'\n )}\n onClick={() => onRowClick?.(row.original)}\n >\n {row.getVisibleCells().map((cell) => (\n <TableCell\n key={cell.id}\n className=\"px-3 py-3 sm:px-4 sm:py-4 lg:px-6 text-xs sm:text-sm\"\n >\n {flexRender(cell.column.columnDef.cell, cell.getContext())}\n </TableCell>\n ))}\n </TableRow>\n ))\n ) : (\n <TableRow>\n <TableCell\n colSpan={tableColumns.length}\n className=\"h-24 text-center\"\n >\n {t('common:noData')}\n </TableCell>\n </TableRow>\n )}\n </TableBody>\n </Table>\n </div>\n </div>\n\n {/* Footer */}\n <div className=\"flex flex-col sm:flex-row items-center justify-between gap-3 sm:gap-4\">\n {/* Selection info */}\n {enableRowSelection && (\n <div className=\"text-xs sm:text-sm text-muted-foreground order-2 sm:order-1\">\n {table.getFilteredSelectedRowModel().rows.length} {t('common:of')}{' '}\n {table.getFilteredRowModel().rows.length} {t('common:selected')}\n </div>\n )}\n\n {/* Results count */}\n {!enableRowSelection && (\n <div className=\"text-xs sm:text-sm text-muted-foreground order-2 sm:order-1\">\n {t('common:showing')} {table.getState().pagination.pageIndex * table.getState().pagination.pageSize + 1} -{' '}\n {Math.min(\n (table.getState().pagination.pageIndex + 1) * table.getState().pagination.pageSize,\n data.length\n )}{' '}\n {t('common:of')} {data.length}\n </div>\n )}\n\n {/* Pagination */}\n <div className=\"flex items-center gap-1 sm:gap-2 order-1 sm:order-2\">\n <Button\n variant=\"outline\"\n size=\"sm\"\n onClick={() => table.setPageIndex(0)}\n disabled={!table.getCanPreviousPage()}\n className=\" min-w-[44px] sm:min-h-0 sm:min-w-0\"\n >\n {isRTL ? <ChevronsRight className=\"h-4 w-4\" /> : <ChevronsLeft className=\"h-4 w-4\" />}\n </Button>\n <Button\n variant=\"outline\"\n size=\"sm\"\n onClick={() => table.previousPage()}\n disabled={!table.getCanPreviousPage()}\n className=\" min-w-[44px] sm:min-h-0 sm:min-w-0\"\n >\n {isRTL ? <ChevronRight className=\"h-4 w-4\" /> : <ChevronLeft className=\"h-4 w-4\" />}\n </Button>\n\n <span className=\"text-xs sm:text-sm text-muted-foreground px-2 whitespace-nowrap\">\n {t('common:page')} {table.getState().pagination.pageIndex + 1} {t('common:of')}{' '}\n {table.getPageCount()}\n </span>\n\n <Button\n variant=\"outline\"\n size=\"sm\"\n onClick={() => table.nextPage()}\n disabled={!table.getCanNextPage()}\n className=\" min-w-[44px] sm:min-h-0 sm:min-w-0\"\n >\n {isRTL ? <ChevronLeft className=\"h-4 w-4\" /> : <ChevronRight className=\"h-4 w-4\" />}\n </Button>\n <Button\n variant=\"outline\"\n size=\"sm\"\n onClick={() => table.setPageIndex(table.getPageCount() - 1)}\n disabled={!table.getCanNextPage()}\n className=\" min-w-[44px] sm:min-h-0 sm:min-w-0\"\n >\n {isRTL ? <ChevronsLeft className=\"h-4 w-4\" /> : <ChevronsRight className=\"h-4 w-4\" />}\n </Button>\n </div>\n </div>\n </div>\n )\n}\n","import { useTranslation } from 'react-i18next'\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query'\nimport { toast } from 'sonner'\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n} from '@/components/ui/dialog'\nimport { Badge } from '@/components/ui/badge'\nimport { Button } from '@/components/ui/button'\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Separator } from '@/components/ui/separator'\nimport { ScrollArea } from '@/components/ui/scroll-area'\nimport {\n  Calendar,\n  CalendarPlus,\n  MapPin,\n  Users,\n  Globe2,\n  Building2,\n  Clock,\n  Video,\n  Info,\n  Edit,\n} from 'lucide-react'\nimport { supabase } from '@/lib/supabase'\nimport { format } from 'date-fns'\nimport { useAuth } from '@/contexts/auth.context'\n\ninterface Forum {\n  id: string\n  title_en: string\n  title_ar: string\n  description_en?: string\n  description_ar?: string\n  start_datetime: string\n  end_datetime: string\n  location_en?: string\n  location_ar?: string\n  venue_en: string\n  venue_ar: string\n  is_virtual: boolean\n  max_participants?: number\n  number_of_sessions: number\n  status: string\n  organizer: {\n    name_en: string\n    name_ar: string\n  }\n}\n\ninterface ForumParticipant {\n  entity_id: string\n  entity_type: string\n  participation_type: string\n}\n\ninterface Country {\n  id: string\n  name_en: string\n  name_ar: string\n}\n\ninterface Organization {\n  id: string\n  name_en: string\n  name_ar: string\n}\n\ninterface ForumDetailsDialogProps {\n  forumId: string | null\n  forum: Forum | null\n  open: boolean\n  onOpenChange: (open: boolean) => void\n}\n\nexport function ForumDetailsDialog({\n  forumId,\n  forum,\n  open,\n  onOpenChange,\n}: ForumDetailsDialogProps) {\n  const { t, i18n } = useTranslation('forums')\n  const { user } = useAuth()\n  const isRTL = i18n.language === 'ar'\n\n  // Check if user has edit permissions (admin or manager roles)\n  const canEdit = user?.role === 'admin' || user?.role === 'manager'\n\n  const handleEdit = () => {\n    // TODO: Implement edit functionality (open edit dialog or navigate to edit page)\n  }\n\n  const queryClient = useQueryClient()\n\n  // Mutation to add forum to calendar\n  const addToCalendarMutation = useMutation({\n    mutationFn: async () => {\n      if (!forum) throw new Error('Missing forum data')\n\n      // Get authenticated user from Supabase\n      const {\n        data: { user: authUser },\n        error: authError,\n      } = await supabase.auth.getUser()\n      if (authError || !authUser) throw new Error('Not authenticated')\n\n      const { data, error } = await supabase\n        .from('calendar_entries')\n        .insert({\n          title_en: forum.title_en,\n          title_ar: forum.title_ar,\n          description_en: forum.description_en,\n          description_ar: forum.description_ar,\n          entry_type: 'forum',\n          event_date: forum.start_datetime.split('T')[0],\n          event_time: forum.start_datetime.split('T')[1]?.split('.')[0] || '00:00:00',\n          all_day: false,\n          location: isRTL ? forum.location_ar : forum.location_en,\n          is_virtual: forum.is_virtual,\n          linked_item_type: 'forum',\n          linked_item_id: forum.id,\n          organizer_id: authUser.id,\n          status: 'scheduled',\n          created_by: authUser.id,\n        })\n        .select()\n        .single()\n\n      if (error) throw error\n      return data\n    },\n    onSuccess: () => {\n      toast.success(t('common:common.success', 'Success'), {\n        description: 'Forum added to calendar successfully',\n      })\n      queryClient.invalidateQueries({ queryKey: ['calendar-entries'] })\n    },\n    onError: (error) => {\n      toast.error(t('common:common.error', 'Error'), {\n        description: error.message || 'Failed to add forum to calendar',\n      })\n    },\n  })\n\n  const handleAddToCalendar = () => {\n    addToCalendarMutation.mutate()\n  }\n\n  const { data: participants } = useQuery({\n    queryKey: ['forum-participants', forumId],\n    queryFn: async () => {\n      if (!forumId) return { countries: [], organizations: [] }\n\n      // Get all participants\n      const { data: participantsData, error: participantsError } = await supabase\n        .from('forum_participants')\n        .select('entity_id, entity_type, participation_type')\n        .eq('forum_id', forumId)\n\n      if (participantsError) throw participantsError\n      if (!participantsData || participantsData.length === 0) {\n        return { countries: [], organizations: [] }\n      }\n\n      // Separate country and organization IDs\n      const countryIds = participantsData\n        .filter((p) => p.entity_type === 'country')\n        .map((p) => p.entity_id)\n      const orgIds = participantsData\n        .filter((p) => p.entity_type === 'organization')\n        .map((p) => p.entity_id)\n\n      // Fetch countries\n      let countries: Array<Country & { participation_type: string }> = []\n      if (countryIds.length > 0) {\n        const { data: countriesData, error: countriesError } = await supabase\n          .from('countries')\n          .select('id, name_en, name_ar')\n          .in('id', countryIds)\n\n        if (countriesError) throw countriesError\n        countries = (countriesData || []).map((country) => ({\n          ...country,\n          participation_type:\n            participantsData.find((p) => p.entity_id === country.id && p.entity_type === 'country')\n              ?.participation_type || 'member',\n        }))\n      }\n\n      // Fetch organizations\n      let organizations: Array<Organization & { participation_type: string }> = []\n      if (orgIds.length > 0) {\n        const { data: orgsData, error: orgsError } = await supabase\n          .from('organizations')\n          .select('id, name_en, name_ar')\n          .in('id', orgIds)\n\n        if (orgsError) throw orgsError\n        organizations = (orgsData || []).map((org) => ({\n          ...org,\n          participation_type:\n            participantsData.find((p) => p.entity_id === org.id && p.entity_type === 'organization')\n              ?.participation_type || 'member',\n        }))\n      }\n\n      return { countries, organizations }\n    },\n    enabled: !!forumId && open,\n  })\n\n  if (!forum) return null\n\n  const title = isRTL ? forum.title_ar : forum.title_en\n  const description = isRTL ? forum.description_ar : forum.description_en\n  const location = isRTL ? forum.location_ar : forum.location_en\n  const venue = isRTL ? forum.venue_ar : forum.venue_en\n  const organizerName = isRTL ? forum.organizer.name_ar : forum.organizer.name_en\n\n  const countries = participants?.countries || []\n  const organizations = participants?.organizations || []\n\n  const formatDate = (dateString: string) => {\n    const date = new Date(dateString)\n    return !isNaN(date.getTime()) ? format(date, 'dd MMM yyyy') : '-'\n  }\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case 'scheduled':\n        return 'bg-blue-100 text-blue-800'\n      case 'ongoing':\n        return 'bg-green-100 text-green-800'\n      case 'completed':\n        return 'bg-gray-100 text-gray-800'\n      case 'cancelled':\n        return 'bg-red-100 text-red-800'\n      default:\n        return 'bg-gray-100 text-gray-800'\n    }\n  }\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"max-w-4xl max-h-[90vh] p-0\">\n        <DialogHeader className=\"px-6 pt-6 pb-4\">\n          <div className=\"flex items-start justify-between gap-4\">\n            <DialogTitle className=\"text-xl sm:text-2xl flex items-start gap-3 flex-1\">\n              <Users className=\"h-6 w-6 mt-1 shrink-0\" />\n              <div className=\"flex-1\">\n                <div>{title}</div>\n                <Badge className={`mt-2 ${getStatusColor(forum.status)}`}>\n                  {t(`statuses.${forum.status}`)}\n                </Badge>\n              </div>\n            </DialogTitle>\n            <div className=\"flex items-center gap-2\">\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={handleAddToCalendar}\n                disabled={addToCalendarMutation.isPending}\n                className=\"shrink-0\"\n              >\n                <CalendarPlus className=\"h-4 w-4 me-2\" />\n                {addToCalendarMutation.isPending ? 'Adding...' : 'Add to Calendar'}\n              </Button>\n              {canEdit && (\n                <Button variant=\"outline\" size=\"sm\" onClick={handleEdit} className=\"shrink-0\">\n                  <Edit className=\"h-4 w-4 me-2\" />\n                  {t('common:common.edit')}\n                </Button>\n              )}\n            </div>\n          </div>\n          <DialogDescription className=\"sr-only\">\n            {t('common:common.view')} {title}\n          </DialogDescription>\n        </DialogHeader>\n\n        <Separator />\n\n        <ScrollArea className=\"px-6 pb-6\" style={{ maxHeight: 'calc(90vh - 120px)' }}>\n          <div className=\"space-y-6\">\n            {/* Basic Information */}\n            <Card>\n              <CardHeader className=\"pb-3\">\n                <CardTitle className=\"text-base flex items-center gap-2\">\n                  <Info className=\"h-4 w-4\" />\n                  {t('common:common.about')}\n                </CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-3\">\n                {description && (\n                  <div>\n                    <p className=\"text-sm text-muted-foreground mb-1\">{t('common:common.about')}</p>\n                    <p className=\"text-sm\">{description}</p>\n                  </div>\n                )}\n\n                <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n                  {/* Dates */}\n                  <div className=\"flex items-start gap-2\">\n                    <Calendar className=\"h-4 w-4 mt-0.5 text-muted-foreground shrink-0\" />\n                    <div>\n                      <p className=\"text-sm font-medium\">{t('dates')}</p>\n                      <p className=\"text-sm text-muted-foreground\">\n                        {formatDate(forum.start_datetime)}\n                        {forum.end_datetime && ` - ${formatDate(forum.end_datetime)}`}\n                      </p>\n                    </div>\n                  </div>\n\n                  {/* Location */}\n                  <div className=\"flex items-start gap-2\">\n                    <MapPin className=\"h-4 w-4 mt-0.5 text-muted-foreground shrink-0\" />\n                    <div>\n                      <p className=\"text-sm font-medium\">{t('location')}</p>\n                      <p className=\"text-sm text-muted-foreground\">{location || '-'}</p>\n                    </div>\n                  </div>\n\n                  {/* Venue */}\n                  <div className=\"flex items-start gap-2\">\n                    {forum.is_virtual ? (\n                      <Video className=\"h-4 w-4 mt-0.5 text-muted-foreground shrink-0\" />\n                    ) : (\n                      <Building2 className=\"h-4 w-4 mt-0.5 text-muted-foreground shrink-0\" />\n                    )}\n                    <div>\n                      <p className=\"text-sm font-medium\">{t('venue')}</p>\n                      <p className=\"text-sm text-muted-foreground\">\n                        {forum.is_virtual ? t('virtual') : venue}\n                      </p>\n                    </div>\n                  </div>\n\n                  {/* Sessions */}\n                  <div className=\"flex items-start gap-2\">\n                    <Clock className=\"h-4 w-4 mt-0.5 text-muted-foreground shrink-0\" />\n                    <div>\n                      <p className=\"text-sm font-medium\">{t('sessions')}</p>\n                      <p className=\"text-sm text-muted-foreground\">\n                        {forum.number_of_sessions} {t('sessions').toLowerCase()}\n                      </p>\n                    </div>\n                  </div>\n\n                  {/* Max Participants */}\n                  {forum.max_participants && (\n                    <div className=\"flex items-start gap-2\">\n                      <Users className=\"h-4 w-4 mt-0.5 text-muted-foreground shrink-0\" />\n                      <div>\n                        <p className=\"text-sm font-medium\">{t('participants')}</p>\n                        <p className=\"text-sm text-muted-foreground\">\n                          {forum.max_participants} max\n                        </p>\n                      </div>\n                    </div>\n                  )}\n\n                  {/* Organizer */}\n                  <div className=\"flex items-start gap-2\">\n                    <Building2 className=\"h-4 w-4 mt-0.5 text-muted-foreground shrink-0\" />\n                    <div>\n                      <p className=\"text-sm font-medium\">{t('organizer', 'Organizer')}</p>\n                      <p className=\"text-sm text-muted-foreground\">{organizerName}</p>\n                    </div>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n\n            {/* Participating Countries */}\n            <Card>\n              <CardHeader className=\"pb-3\">\n                <CardTitle className=\"text-base flex items-center gap-2\">\n                  <Globe2 className=\"h-4 w-4\" />\n                  {t('countries')} ({countries.length})\n                </CardTitle>\n              </CardHeader>\n              <CardContent>\n                {countries.length > 0 ? (\n                  <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-2\">\n                    {countries.map((country, idx) => (\n                      <div\n                        key={idx}\n                        className=\"flex items-center justify-between p-2 rounded-lg border\"\n                      >\n                        <span className=\"text-sm\">{isRTL ? country.name_ar : country.name_en}</span>\n                        <Badge variant=\"outline\" className=\"text-xs\">\n                          {t(`participationType.${country.participation_type}`)}\n                        </Badge>\n                      </div>\n                    ))}\n                  </div>\n                ) : (\n                  <p className=\"text-sm text-muted-foreground text-center py-4\">\n                    {t('noCountries')}\n                  </p>\n                )}\n              </CardContent>\n            </Card>\n\n            {/* Participating Organizations */}\n            <Card>\n              <CardHeader className=\"pb-3\">\n                <CardTitle className=\"text-base flex items-center gap-2\">\n                  <Building2 className=\"h-4 w-4\" />\n                  {t('organizations')} ({organizations.length})\n                </CardTitle>\n              </CardHeader>\n              <CardContent>\n                {organizations.length > 0 ? (\n                  <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-2\">\n                    {organizations.map((org, idx) => (\n                      <div\n                        key={idx}\n                        className=\"flex items-center justify-between p-2 rounded-lg border\"\n                      >\n                        <span className=\"text-sm\">{isRTL ? org.name_ar : org.name_en}</span>\n                        <Badge variant=\"outline\" className=\"text-xs\">\n                          {t(`participationType.${org.participation_type}`)}\n                        </Badge>\n                      </div>\n                    ))}\n                  </div>\n                ) : (\n                  <p className=\"text-sm text-muted-foreground text-center py-4\">\n                    {t('noOrganizations')}\n                  </p>\n                )}\n              </CardContent>\n            </Card>\n          </div>\n        </ScrollArea>\n      </DialogContent>\n    </Dialog>\n  )\n}\n","/**\n * useForums Hooks\n *\n * TanStack Query hooks for forum entity CRUD operations\n */\n\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { supabase } from '@/lib/supabase';\nimport { toast } from 'sonner';\nimport type {\n  Forum,\n  ForumListResponse,\n  ForumFilters,\n  ForumCreateRequest,\n  ForumUpdateRequest,\n  ForumExtension,\n} from '@/types/forum.types';\n\nconst FORUMS_QUERY_KEY = 'forums';\nconst FORUM_QUERY_KEY = 'forum';\n\n/**\n * Fetch paginated list of forums\n */\nexport function useForums(filters: ForumFilters = {}) {\n  return useQuery<ForumListResponse, Error>({\n    queryKey: [FORUMS_QUERY_KEY, filters],\n    queryFn: async () => {\n      const { search, status, page = 1, limit = 20 } = filters;\n      const offset = (page - 1) * limit;\n\n      // Query base dossier table with forum type\n      let query = supabase\n        .from('dossiers')\n        .select('*', { count: 'exact' })\n        .eq('type', 'forum')\n        .neq('status', 'deleted');\n\n      // Apply search filter\n      if (search) {\n        query = query.or(\n          `name_en.ilike.%${search}%,name_ar.ilike.%${search}%,description_en.ilike.%${search}%,description_ar.ilike.%${search}%`\n        );\n      }\n\n      // Apply status filter\n      if (status) {\n        query = query.eq('status', status);\n      }\n\n      // Apply pagination and ordering\n      query = query\n        .order('name_en', { ascending: true })\n        .range(offset, offset + limit - 1);\n\n      const { data: dossiers, error, count } = await query;\n\n      if (error) {\n        throw new Error(error.message);\n      }\n\n      // Get forum extension data for all dossiers\n      const forumIds = (dossiers || []).map((d) => d.id);\n      let extensions: Record<string, ForumExtension> = {};\n\n      if (forumIds.length > 0) {\n        const { data: forumExts } = await supabase\n          .from('forums')\n          .select('*')\n          .in('id', forumIds);\n\n        if (forumExts) {\n          extensions = forumExts.reduce(\n            (acc, ext) => {\n              acc[ext.id] = ext;\n              return acc;\n            },\n            {} as Record<string, ForumExtension>\n          );\n        }\n      }\n\n      // Combine dossier and extension data\n      const forums: Forum[] = (dossiers || []).map((d) => ({\n        ...d,\n        type: 'forum' as const,\n        extension: extensions[d.id] || {},\n      }));\n\n      return {\n        data: forums,\n        pagination: {\n          page,\n          limit,\n          total: count,\n          totalPages: Math.ceil((count || 0) / limit),\n        },\n      };\n    },\n    staleTime: 1000 * 60 * 5, // 5 minutes\n  });\n}\n\n/**\n * Fetch single forum by ID\n */\nexport function useForum(id: string | undefined) {\n  return useQuery<Forum | null, Error>({\n    queryKey: [FORUM_QUERY_KEY, id],\n    queryFn: async () => {\n      if (!id) return null;\n\n      // Get base dossier\n      const { data: dossier, error: dossierError } = await supabase\n        .from('dossiers')\n        .select('*')\n        .eq('id', id)\n        .eq('type', 'forum')\n        .single();\n\n      if (dossierError) {\n        throw new Error(dossierError.message);\n      }\n\n      if (!dossier) return null;\n\n      // Get forum extension data\n      const { data: forumExt } = await supabase\n        .from('forums')\n        .select('*')\n        .eq('id', id)\n        .single();\n\n      return {\n        ...dossier,\n        type: 'forum' as const,\n        extension: forumExt || {},\n      };\n    },\n    enabled: !!id,\n    staleTime: 1000 * 60 * 5, // 5 minutes\n  });\n}\n\n/**\n * Create new forum\n */\nexport function useCreateForum() {\n  const queryClient = useQueryClient();\n\n  return useMutation({\n    mutationFn: async (data: ForumCreateRequest) => {\n      // Get current user\n      const {\n        data: { user },\n      } = await supabase.auth.getUser();\n\n      // Create base dossier\n      const { data: dossier, error: dossierError } = await supabase\n        .from('dossiers')\n        .insert({\n          type: 'forum',\n          name_en: data.name_en,\n          name_ar: data.name_ar,\n          description_en: data.description_en || null,\n          description_ar: data.description_ar || null,\n          status: data.status || 'active',\n          sensitivity_level: data.sensitivity_level || 1,\n          tags: data.tags || [],\n          metadata: data.metadata || {},\n          created_by: user?.id,\n          updated_by: user?.id,\n        })\n        .select()\n        .single();\n\n      if (dossierError) {\n        throw new Error(dossierError.message);\n      }\n\n      // Create forum extension if provided\n      if (data.extension) {\n        const { error: extError } = await supabase.from('forums').insert({\n          id: dossier.id,\n          number_of_sessions: data.extension.number_of_sessions,\n          keynote_speakers: data.extension.keynote_speakers || [],\n          sponsors: data.extension.sponsors || [],\n          registration_fee: data.extension.registration_fee,\n          currency: data.extension.currency,\n          agenda_url: data.extension.agenda_url,\n          live_stream_url: data.extension.live_stream_url,\n        });\n\n        if (extError) {\n          console.error('Error creating forum extension:', extError);\n        }\n      }\n\n      return {\n        ...dossier,\n        type: 'forum' as const,\n        extension: data.extension || {},\n      } as Forum;\n    },\n    onSuccess: (newForum) => {\n      queryClient.invalidateQueries({ queryKey: [FORUMS_QUERY_KEY] });\n      queryClient.setQueryData([FORUM_QUERY_KEY, newForum.id], newForum);\n      toast.success('Forum created successfully');\n    },\n    onError: (error) => {\n      toast.error(error instanceof Error ? error.message : 'Failed to create forum');\n    },\n  });\n}\n\n/**\n * Update existing forum\n */\nexport function useUpdateForum() {\n  const queryClient = useQueryClient();\n\n  return useMutation({\n    mutationFn: async ({ id, data }: { id: string; data: ForumUpdateRequest }) => {\n      // Get current user\n      const {\n        data: { user },\n      } = await supabase.auth.getUser();\n\n      // Update base dossier fields\n      const dossierUpdate: Record<string, unknown> = {};\n      if (data.name_en !== undefined) dossierUpdate.name_en = data.name_en;\n      if (data.name_ar !== undefined) dossierUpdate.name_ar = data.name_ar;\n      if (data.description_en !== undefined) dossierUpdate.description_en = data.description_en;\n      if (data.description_ar !== undefined) dossierUpdate.description_ar = data.description_ar;\n      if (data.status !== undefined) dossierUpdate.status = data.status;\n      if (data.sensitivity_level !== undefined)\n        dossierUpdate.sensitivity_level = data.sensitivity_level;\n      if (data.tags !== undefined) dossierUpdate.tags = data.tags;\n      if (data.metadata !== undefined) dossierUpdate.metadata = data.metadata;\n      dossierUpdate.updated_by = user?.id;\n\n      const { data: dossier, error: dossierError } = await supabase\n        .from('dossiers')\n        .update(dossierUpdate)\n        .eq('id', id)\n        .eq('type', 'forum')\n        .select()\n        .single();\n\n      if (dossierError) {\n        throw new Error(dossierError.message);\n      }\n\n      // Update forum extension if provided\n      let forumExt = null;\n      if (data.extension) {\n        // Check if extension exists\n        const { data: existingExt } = await supabase\n          .from('forums')\n          .select('id')\n          .eq('id', id)\n          .single();\n\n        if (existingExt) {\n          // Update existing\n          const { data: updatedExt, error: extError } = await supabase\n            .from('forums')\n            .update({\n              number_of_sessions: data.extension.number_of_sessions,\n              keynote_speakers: data.extension.keynote_speakers,\n              sponsors: data.extension.sponsors,\n              registration_fee: data.extension.registration_fee,\n              currency: data.extension.currency,\n              agenda_url: data.extension.agenda_url,\n              live_stream_url: data.extension.live_stream_url,\n            })\n            .eq('id', id)\n            .select()\n            .single();\n\n          if (!extError) forumExt = updatedExt;\n        } else {\n          // Create new\n          const { data: newExt, error: extError } = await supabase\n            .from('forums')\n            .insert({\n              id: id,\n              number_of_sessions: data.extension.number_of_sessions,\n              keynote_speakers: data.extension.keynote_speakers || [],\n              sponsors: data.extension.sponsors || [],\n              registration_fee: data.extension.registration_fee,\n              currency: data.extension.currency,\n              agenda_url: data.extension.agenda_url,\n              live_stream_url: data.extension.live_stream_url,\n            })\n            .select()\n            .single();\n\n          if (!extError) forumExt = newExt;\n        }\n      } else {\n        // Fetch existing extension\n        const { data: existingExt } = await supabase\n          .from('forums')\n          .select('*')\n          .eq('id', id)\n          .single();\n        forumExt = existingExt;\n      }\n\n      return {\n        ...dossier,\n        type: 'forum' as const,\n        extension: forumExt || {},\n      } as Forum;\n    },\n    onSuccess: (updatedForum) => {\n      queryClient.invalidateQueries({ queryKey: [FORUMS_QUERY_KEY] });\n      queryClient.setQueryData([FORUM_QUERY_KEY, updatedForum.id], updatedForum);\n      toast.success('Forum updated successfully');\n    },\n    onError: (error) => {\n      toast.error(error instanceof Error ? error.message : 'Failed to update forum');\n    },\n  });\n}\n\n/**\n * Delete forum (soft delete by changing status)\n */\nexport function useDeleteForum() {\n  const queryClient = useQueryClient();\n\n  return useMutation({\n    mutationFn: async (id: string) => {\n      // Soft delete by updating status\n      const { error } = await supabase\n        .from('dossiers')\n        .update({ status: 'archived' })\n        .eq('id', id)\n        .eq('type', 'forum');\n\n      if (error) {\n        throw new Error(error.message);\n      }\n\n      return id;\n    },\n    onSuccess: (deletedId) => {\n      queryClient.invalidateQueries({ queryKey: [FORUMS_QUERY_KEY] });\n      queryClient.removeQueries({ queryKey: [FORUM_QUERY_KEY, deletedId] });\n      toast.success('Forum deleted successfully');\n    },\n    onError: (error) => {\n      toast.error(error instanceof Error ? error.message : 'Failed to delete forum');\n    },\n  });\n}\n","import { useState, useMemo } from 'react'\nimport { useTranslation } from 'react-i18next'\nimport { ColumnDef } from '@tanstack/react-table'\nimport { Plus, Calendar, Users, MapPin, Filter, Loader2, Search, MoreHorizontal, Eye, Pencil, Trash2 } from 'lucide-react'\nimport { Button } from '@/components/ui/button'\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Input } from '@/components/ui/input'\nimport { Badge } from '@/components/ui/badge'\nimport { Label } from '@/components/ui/label'\nimport { Textarea } from '@/components/ui/textarea'\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from '@/components/ui/dialog'\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from '@/components/ui/dropdown-menu'\nimport {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n} from '@/components/ui/alert-dialog'\nimport { AdvancedDataTable } from '@/components/Table/AdvancedDataTable'\nimport { ForumDetailsDialog } from '@/components/forums/ForumDetailsDialog'\nimport { useForums, useCreateForum, useDeleteForum } from '@/hooks/useForums'\nimport { format } from 'date-fns'\nimport type { Forum, ForumCreateRequest } from '@/types/forum.types'\nimport type { DossierStatus } from '@/types/dossier'\n\nexport function ForumsPage() {\n const { t, i18n } = useTranslation('forums')\n const [searchTerm, setSearchTerm] = useState('')\n const [filterStatus, setFilterStatus] = useState<DossierStatus | 'all'>('all')\n const [selectedForum, setSelectedForum] = useState<Forum | null>(null)\n const [dialogOpen, setDialogOpen] = useState(false)\n const [createDialogOpen, setCreateDialogOpen] = useState(false)\n const [deleteDialogOpen, setDeleteDialogOpen] = useState(false)\n const [page, setPage] = useState(1)\n const isRTL = i18n.language === 'ar'\n\n // Form state for create dialog\n const [formData, setFormData] = useState<ForumCreateRequest>({\n   name_en: '',\n   name_ar: '',\n   description_en: '',\n   description_ar: '',\n })\n\n // Fetch forums using new hook with extension data\n const { data, isLoading, error } = useForums({\n   search: searchTerm || undefined,\n   status: filterStatus !== 'all' ? filterStatus : undefined,\n   page,\n   limit: 20,\n })\n\n const createMutation = useCreateForum()\n const deleteMutation = useDeleteForum()\n\n // Get forums from response\n const forums = data?.data || []\n const pagination = data?.pagination\n\n // Compute active forums count\n const activeForumsCount = useMemo(() => {\n   return forums.filter((f) => f.status === 'active').length\n }, [forums])\n\n // Handlers\n const handleCreateForum = async () => {\n   if (!formData.name_en || !formData.name_ar) return\n   await createMutation.mutateAsync(formData)\n   setCreateDialogOpen(false)\n   setFormData({ name_en: '', name_ar: '', description_en: '', description_ar: '' })\n }\n\n const handleDeleteForum = async () => {\n   if (!selectedForum) return\n   await deleteMutation.mutateAsync(selectedForum.id)\n   setDeleteDialogOpen(false)\n   setSelectedForum(null)\n }\n\n const openDeleteDialog = (forum: Forum) => {\n   setSelectedForum(forum)\n   setDeleteDialogOpen(true)\n }\n\n const columns: ColumnDef<Forum>[] = [\n {\n accessorKey: 'name_en',\n header: t('table.name'),\n cell: ({ row }) => (\n <div className={`font-medium ${isRTL ? 'text-end' : 'text-start'}`}>\n <div>{isRTL ? row.original.name_ar : row.original.name_en}</div>\n {row.original.description_en && (\n   <div className=\"text-xs text-muted-foreground mt-1 line-clamp-1\">\n     {isRTL ? row.original.description_ar : row.original.description_en}\n   </div>\n )}\n </div>\n )\n },\n {\n accessorKey: 'created_at',\n header: t('table.created'),\n cell: ({ row }) => {\n const createdDate = row.original.created_at ? new Date(row.original.created_at) : null\n const isValidDate = createdDate && !isNaN(createdDate.getTime())\n\n return (\n <div className=\"flex items-center gap-1\">\n <Calendar className=\"h-4 w-4 text-muted-foreground\" />\n <span className=\"text-sm\">\n {isValidDate ? format(createdDate, 'dd MMM yyyy') : '-'}\n </span>\n </div>\n )\n }\n },\n {\n accessorKey: 'extension.number_of_sessions',\n header: t('table.sessions'),\n cell: ({ row }) => {\n const extension = row.original.extension\n return (\n <span className=\"text-sm\">{extension?.number_of_sessions || '-'}</span>\n )\n }\n },\n {\n accessorKey: 'status',\n header: t('table.status'),\n cell: ({ row }) => {\n if (!row.original.status) {\n return <span className=\"text-sm text-muted-foreground\">-</span>\n }\n\n const statusVariant = row.original.status === 'active' ? 'default'\n   : row.original.status === 'inactive' ? 'secondary'\n   : 'outline'\n\n return (\n <Badge variant={statusVariant}>\n   {t(`statuses.${row.original.status}`)}\n </Badge>\n )\n }\n },\n {\n   id: 'actions',\n   header: t('table.actions'),\n   cell: ({ row }) => (\n     <DropdownMenu>\n       <DropdownMenuTrigger asChild>\n         <Button variant=\"ghost\" size=\"icon\" className=\"min-h-11 min-w-11\">\n           <MoreHorizontal className=\"size-4\" />\n           <span className=\"sr-only\">{t('table.actions')}</span>\n         </Button>\n       </DropdownMenuTrigger>\n       <DropdownMenuContent align={isRTL ? 'start' : 'end'}>\n         <DropdownMenuItem onClick={() => {\n           setSelectedForum(row.original)\n           setDialogOpen(true)\n         }}>\n           <Eye className=\"size-4 me-2\" />\n           {t('viewDetails')}\n         </DropdownMenuItem>\n         <DropdownMenuItem onClick={() => console.log('Edit:', row.original.id)}>\n           <Pencil className=\"size-4 me-2\" />\n           {t('editForum')}\n         </DropdownMenuItem>\n         <DropdownMenuItem\n           onClick={() => openDeleteDialog(row.original)}\n           className=\"text-destructive focus:text-destructive\"\n         >\n           <Trash2 className=\"size-4 me-2\" />\n           {t('deleteForum')}\n         </DropdownMenuItem>\n       </DropdownMenuContent>\n     </DropdownMenu>\n   )\n }\n ]\n\n const statusOptions = [\n { value: 'all', label: t('allStatuses') },\n { value: 'active', label: t('statuses.active') },\n { value: 'inactive', label: t('statuses.inactive') },\n { value: 'archived', label: t('statuses.archived') }\n ]\n\n return (\n <div className=\"container mx-auto px-4 sm:px-6 lg:px-8 py-4 sm:py-6 space-y-6\">\n {/* Header - Mobile First */}\n <header className=\"flex flex-col gap-2\">\n   <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 sm:gap-4\">\n     <div>\n       <h1 className=\"text-2xl sm:text-3xl font-bold\">{t('pageTitle')}</h1>\n       <p className=\"text-sm sm:text-base text-muted-foreground\">{t('pageSubtitle')}</p>\n     </div>\n     <Button className=\"w-full sm:w-auto min-h-11\" onClick={() => setCreateDialogOpen(true)}>\n       <Plus className=\"h-4 w-4 me-2\" />\n       {t('addForum')}\n     </Button>\n   </div>\n </header>\n\n {/* Metrics Cards */}\n <section className=\"grid gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3\">\n   <Card>\n     <CardHeader className=\"flex flex-row items-center justify-between pb-2\">\n       <CardTitle className=\"text-sm font-semibold\">{t('metrics.totalForums')}</CardTitle>\n       <Users className=\"size-5 text-primary\" />\n     </CardHeader>\n     <CardContent>\n       <p className=\"text-2xl font-bold\">{pagination?.total || 0}</p>\n     </CardContent>\n   </Card>\n   <Card>\n     <CardHeader className=\"flex flex-row items-center justify-between pb-2\">\n       <CardTitle className=\"text-sm font-semibold\">{t('metrics.activeForums')}</CardTitle>\n       <Calendar className=\"size-5 text-primary\" />\n     </CardHeader>\n     <CardContent>\n       <p className=\"text-2xl font-bold\">{activeForumsCount}</p>\n     </CardContent>\n   </Card>\n   <Card className=\"sm:col-span-2 lg:col-span-1\">\n     <CardHeader className=\"flex flex-row items-center justify-between pb-2\">\n       <CardTitle className=\"text-sm font-semibold\">{t('sessions')}</CardTitle>\n       <Users className=\"size-5 text-primary\" />\n     </CardHeader>\n     <CardContent>\n       <p className=\"text-2xl font-bold\">\n         {forums.reduce((acc, f) => acc + (f.extension?.number_of_sessions || 0), 0)}\n       </p>\n     </CardContent>\n   </Card>\n </section>\n\n {/* Filters - Mobile First */}\n <Card>\n   <CardContent className=\"pt-6\">\n     <div className=\"flex flex-col sm:flex-row gap-4\">\n       <div className=\"flex-1\">\n         <div className=\"relative\">\n           <Search className=\"absolute start-3 top-1/2 -translate-y-1/2 size-4 text-muted-foreground\" />\n           <Input\n             placeholder={t('searchPlaceholder')}\n             value={searchTerm}\n             onChange={(e) => setSearchTerm(e.target.value)}\n             className=\"ps-10 min-h-11\"\n           />\n         </div>\n       </div>\n       <div className=\"flex flex-wrap items-center gap-2\">\n         <Filter className=\"h-4 w-4 text-muted-foreground flex-shrink-0\" />\n         {statusOptions.map(option => (\n           <Button\n             key={option.value}\n             variant={filterStatus === option.value ? 'default' : 'outline'}\n             size=\"sm\"\n             onClick={() => setFilterStatus(option.value as DossierStatus | 'all')}\n             className=\"min-h-11 text-xs sm:text-sm\"\n           >\n             {option.label}\n           </Button>\n         ))}\n       </div>\n     </div>\n   </CardContent>\n </Card>\n\n {/* Forums Table */}\n <Card>\n <CardContent className=\"p-0\">\n {isLoading ? (\n   <div className=\"flex items-center justify-center py-12\">\n     <Loader2 className=\"size-8 animate-spin text-muted-foreground\" />\n   </div>\n ) : error ? (\n   <div className=\"px-5 py-8 text-center text-sm text-destructive\">\n     {error.message || 'Error loading forums'}\n   </div>\n ) : forums && forums.length > 0 ? (\n <AdvancedDataTable\n data={forums}\n columns={columns}\n searchPlaceholder={t('searchPlaceholder')}\n onRowClick={(forum) => {\n setSelectedForum(forum)\n setDialogOpen(true)\n }}\n enableExport={true}\n exportFileName=\"forums\"\n />\n ) : (\n <div className=\"px-5 py-12 text-center\">\n   <Users className=\"mx-auto size-12 text-muted-foreground/50\" />\n   <h3 className=\"mt-4 text-lg font-semibold\">{t('noForumsFound')}</h3>\n   <p className=\"mt-2 text-sm text-muted-foreground\">{t('noForumsDescription')}</p>\n   <Button className=\"mt-6 gap-2\" onClick={() => setCreateDialogOpen(true)}>\n     <Plus className=\"size-4\" />\n     {t('addForum')}\n   </Button>\n </div>\n )}\n </CardContent>\n </Card>\n\n {/* Pagination */}\n {pagination && pagination.totalPages > 1 && (\n   <div className=\"flex items-center justify-center gap-2\">\n     <Button\n       variant=\"outline\"\n       size=\"sm\"\n       onClick={() => setPage((p) => Math.max(1, p - 1))}\n       disabled={page === 1}\n       className=\"min-h-11\"\n     >\n       {isRTL ? 'التالي' : 'Previous'}\n     </Button>\n     <span className=\"text-sm text-muted-foreground\">\n       {page} / {pagination.totalPages}\n     </span>\n     <Button\n       variant=\"outline\"\n       size=\"sm\"\n       onClick={() => setPage((p) => Math.min(pagination.totalPages, p + 1))}\n       disabled={page === pagination.totalPages}\n       className=\"min-h-11\"\n     >\n       {isRTL ? 'السابق' : 'Next'}\n     </Button>\n   </div>\n )}\n\n {/* Forum Details Dialog */}\n <ForumDetailsDialog\n forumId={selectedForum?.id || null}\n forum={selectedForum as any}\n open={dialogOpen}\n onOpenChange={setDialogOpen}\n />\n\n {/* Create Forum Dialog */}\n <Dialog open={createDialogOpen} onOpenChange={setCreateDialogOpen}>\n   <DialogContent className=\"max-w-lg\">\n     <DialogHeader>\n       <DialogTitle>{t('createDialog.title')}</DialogTitle>\n       <DialogDescription>{t('createDialog.description')}</DialogDescription>\n     </DialogHeader>\n     <div className=\"space-y-4 py-4\">\n       <div className=\"space-y-2\">\n         <Label htmlFor=\"name_en\">{t('form.nameEn')}</Label>\n         <Input\n           id=\"name_en\"\n           value={formData.name_en}\n           onChange={(e) => setFormData((prev) => ({ ...prev, name_en: e.target.value }))}\n           placeholder=\"e.g., UN Statistical Commission\"\n           className=\"min-h-11\"\n         />\n       </div>\n       <div className=\"space-y-2\">\n         <Label htmlFor=\"name_ar\">{t('form.nameAr')}</Label>\n         <Input\n           id=\"name_ar\"\n           value={formData.name_ar}\n           onChange={(e) => setFormData((prev) => ({ ...prev, name_ar: e.target.value }))}\n           placeholder=\"مثال: لجنة الأمم المتحدة الإحصائية\"\n           dir=\"rtl\"\n           className=\"min-h-11\"\n         />\n       </div>\n       <div className=\"space-y-2\">\n         <Label htmlFor=\"description_en\">{t('form.descriptionEn')}</Label>\n         <Textarea\n           id=\"description_en\"\n           value={formData.description_en}\n           onChange={(e) => setFormData((prev) => ({ ...prev, description_en: e.target.value }))}\n           placeholder=\"Enter forum description...\"\n           rows={3}\n         />\n       </div>\n       <div className=\"space-y-2\">\n         <Label htmlFor=\"description_ar\">{t('form.descriptionAr')}</Label>\n         <Textarea\n           id=\"description_ar\"\n           value={formData.description_ar}\n           onChange={(e) => setFormData((prev) => ({ ...prev, description_ar: e.target.value }))}\n           placeholder=\"أدخل وصف المنتدى...\"\n           dir=\"rtl\"\n           rows={3}\n         />\n       </div>\n     </div>\n     <DialogFooter className=\"flex-col sm:flex-row gap-2\">\n       <Button\n         variant=\"outline\"\n         onClick={() => setCreateDialogOpen(false)}\n         className=\"min-h-11 w-full sm:w-auto\"\n       >\n         {t('form.cancel')}\n       </Button>\n       <Button\n         onClick={handleCreateForum}\n         disabled={!formData.name_en || !formData.name_ar || createMutation.isPending}\n         className=\"min-h-11 w-full sm:w-auto\"\n       >\n         {createMutation.isPending && <Loader2 className=\"size-4 me-2 animate-spin\" />}\n         {t('form.save')}\n       </Button>\n     </DialogFooter>\n   </DialogContent>\n </Dialog>\n\n {/* Delete Confirmation Dialog */}\n <AlertDialog open={deleteDialogOpen} onOpenChange={setDeleteDialogOpen}>\n   <AlertDialogContent>\n     <AlertDialogHeader>\n       <AlertDialogTitle>{t('deleteDialog.title')}</AlertDialogTitle>\n       <AlertDialogDescription>{t('deleteDialog.description')}</AlertDialogDescription>\n     </AlertDialogHeader>\n     <AlertDialogFooter className=\"flex-col sm:flex-row gap-2\">\n       <AlertDialogCancel className=\"min-h-11\">{t('deleteDialog.cancel')}</AlertDialogCancel>\n       <AlertDialogAction\n         onClick={handleDeleteForum}\n         className=\"bg-destructive text-destructive-foreground hover:bg-destructive/90 min-h-11\"\n         disabled={deleteMutation.isPending}\n       >\n         {deleteMutation.isPending && <Loader2 className=\"size-4 me-2 animate-spin\" />}\n         {t('deleteDialog.confirm')}\n       </AlertDialogAction>\n     </AlertDialogFooter>\n   </AlertDialogContent>\n </AlertDialog>\n </div>\n )\n}\n","import { createFileRoute } from '@tanstack/react-router'\nimport { ForumsPage } from '@/pages/forums/ForumsPage'\n\nexport const Route = createFileRoute('/_protected/forums')({\n component: ForumsPage\n})"],"names":["AdvancedDataTable","columns","data","searchPlaceholder","onRowClick","enableRowSelection","enableExport","exportFileName","t","i18n","useTranslation","isRTL","sorting","setSorting","React.useState","columnFilters","setColumnFilters","columnVisibility","setColumnVisibility","rowSelection","setRowSelection","globalFilter","setGlobalFilter","tableColumns","React.useMemo","table","jsx","Checkbox","value","row","useReactTable","getCoreRowModel","getPaginationRowModel","getSortedRowModel","getFilteredRowModel","exportToCSV","rows","visibleColumns","col","headers","headerValue","csvRows","cellValue","csvContent","cell","blob","link","url","jsxs","Search","cn","Input","event","Button","X","DropdownMenu","DropdownMenuTrigger","ChevronDown","DropdownMenuContent","column","DropdownMenuCheckboxItem","Download","Table","TableHeader","headerGroup","TableRow","header","TableHead","flexRender","ArrowUpDown","TableBody","TableCell","ChevronsRight","ChevronsLeft","ChevronRight","ChevronLeft","ForumDetailsDialog","forumId","forum","open","onOpenChange","user","useAuth","canEdit","handleEdit","queryClient","useQueryClient","addToCalendarMutation","useMutation","authUser","authError","supabase","error","toast","handleAddToCalendar","participants","useQuery","participantsData","participantsError","countryIds","p","orgIds","countries","countriesData","countriesError","country","organizations","orgsData","orgsError","org","title","description","location","venue","organizerName","formatDate","dateString","date","format","getStatusColor","status","Dialog","DialogContent","DialogHeader","DialogTitle","Users","Badge","CalendarPlus","Edit","DialogDescription","Separator","ScrollArea","Card","CardHeader","CardTitle","Info","CardContent","Calendar","MapPin","Video","Building2","Clock","Globe2","idx","FORUMS_QUERY_KEY","FORUM_QUERY_KEY","useForums","filters","search","page","limit","offset","query","dossiers","count","forumIds","d","extensions","forumExts","acc","ext","useCreateForum","dossier","dossierError","extError","newForum","useDeleteForum","id","deletedId","ForumsPage","searchTerm","setSearchTerm","useState","filterStatus","setFilterStatus","selectedForum","setSelectedForum","dialogOpen","setDialogOpen","createDialogOpen","setCreateDialogOpen","deleteDialogOpen","setDeleteDialogOpen","setPage","formData","setFormData","isLoading","createMutation","deleteMutation","forums","pagination","activeForumsCount","useMemo","f","handleCreateForum","handleDeleteForum","openDeleteDialog","createdDate","isValidDate","extension","statusVariant","MoreHorizontal","DropdownMenuItem","Eye","Pencil","Trash2","statusOptions","Plus","e","Filter","option","Loader2","Label","prev","Textarea","DialogFooter","AlertDialog","AlertDialogContent","AlertDialogHeader","AlertDialogTitle","AlertDialogDescription","AlertDialogFooter","AlertDialogCancel","AlertDialogAction","SplitComponent"],"mappings":"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"}