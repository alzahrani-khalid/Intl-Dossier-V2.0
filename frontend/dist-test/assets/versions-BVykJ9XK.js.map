{"version":3,"file":"versions-BVykJ9XK.js","sources":["../../src/components/VersionHistoryViewer.tsx","../../src/routes/_protected/after-actions/$afterActionId/versions.tsx?tsr-split=component"],"sourcesContent":["import { useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport {\n Dialog,\n DialogContent,\n DialogDescription,\n DialogHeader,\n DialogTitle,\n DialogTrigger,\n} from '@/components/ui/dialog';\nimport {\n Table,\n TableBody,\n TableCell,\n TableHead,\n TableHeader,\n TableRow,\n} from '@/components/ui/table';\nimport { Alert, AlertDescription } from '@/components/ui/alert';\nimport { History, Eye, Loader2, AlertCircle } from 'lucide-react';\nimport { cn } from '@/lib/utils';\nimport { format } from 'date-fns';\nimport * as diff from 'deep-diff';\n\ninterface Version {\n id: string;\n version_number: number;\n content: Record<string, any>;\n change_summary?: string;\n changed_by: {\n id: string;\n name: string;\n email: string;\n };\n changed_at: Date;\n}\n\ninterface VersionHistoryViewerProps {\n afterActionId: string;\n currentVersion?: number;\n disabled?: boolean;\n className?: string;\n}\n\ntype DiffKind = 'N' | 'D' | 'E' | 'A';\n\ninterface DiffItem {\n kind: DiffKind;\n path: (string | number)[];\n lhs?: any;\n rhs?: any;\n index?: number;\n item?: any;\n}\n\nexport function VersionHistoryViewer({\n afterActionId,\n currentVersion,\n disabled = false,\n className,\n}: VersionHistoryViewerProps) {\n const { t, i18n } = useTranslation();\n const isRTL = i18n.language === 'ar';\n\n const [open, setOpen] = useState(false);\n const [loading, setLoading] = useState(false);\n const [error, setError] = useState<string | null>(null);\n const [versions, setVersions] = useState<Version[]>([]);\n const [selectedVersions, setSelectedVersions] = useState<[number, number] | null>(null);\n const [showDiff, setShowDiff] = useState(false);\n\n const loadVersions = async () => {\n setLoading(true);\n setError(null);\n\n try {\n const response = await fetch(`/api/after-actions/${afterActionId}/versions`);\n\n if (!response.ok) {\n throw new Error(t('afterActions.versions.loadFailed'));\n }\n\n const data = await response.json();\n setVersions(data.versions || []);\n } catch (err) {\n setError(err instanceof Error ? err.message : t('afterActions.versions.loadFailed'));\n } finally {\n setLoading(false);\n }\n };\n\n const handleViewDiff = (version1: number, version2: number) => {\n setSelectedVersions([version1, version2]);\n setShowDiff(true);\n };\n\n const getDiffChanges = (): DiffItem[] => {\n if (!selectedVersions) return [];\n\n const [v1, v2] = selectedVersions;\n const version1 = versions.find((v) => v.version_number === v1);\n const version2 = versions.find((v) => v.version_number === v2);\n\n if (!version1 || !version2) return [];\n\n return (diff.diff(version1.content, version2.content) || []) as DiffItem[];\n };\n\n const renderDiffValue = (value: any): string => {\n if (value === null || value === undefined) return 'null';\n if (typeof value === 'object') return JSON.stringify(value, null, 2);\n return String(value);\n };\n\n const getDiffColor = (kind: DiffKind) => {\n switch (kind) {\n case 'N':\n return 'text-green-600 bg-green-50';\n case 'D':\n return 'text-red-600 bg-red-50';\n case 'E':\n return 'text-yellow-600 bg-yellow-50';\n case 'A':\n return 'text-blue-600 bg-blue-50';\n default:\n return '';\n }\n };\n\n const getDiffLabel = (kind: DiffKind) => {\n switch (kind) {\n case 'N':\n return t('afterActions.versions.added');\n case 'D':\n return t('afterActions.versions.deleted');\n case 'E':\n return t('afterActions.versions.modified');\n case 'A':\n return t('afterActions.versions.arrayChange');\n default:\n return '';\n }\n };\n\n const formatPath = (path: (string | number)[]): string => {\n return path.join(' ï¿½ ');\n };\n\n const handleOpenChange = (isOpen: boolean) => {\n setOpen(isOpen);\n if (isOpen && versions.length === 0) {\n loadVersions();\n }\n if (!isOpen) {\n setShowDiff(false);\n setSelectedVersions(null);\n }\n };\n\n if (showDiff && selectedVersions) {\n const changes = getDiffChanges();\n const [v1, v2] = selectedVersions;\n\n return (\n <Dialog open={showDiff} onOpenChange={setShowDiff}>\n <DialogContent className=\"max-h-[80vh] max-w-4xl overflow-y-auto\" dir={isRTL ? 'rtl' : 'ltr'}>\n <DialogHeader>\n <DialogTitle>\n {t('afterActions.versions.diffTitle', { from: v1, to: v2 })}\n </DialogTitle>\n <DialogDescription>\n {t('afterActions.versions.diffDescription')}\n </DialogDescription>\n </DialogHeader>\n\n <div className=\"space-y-3\">\n {changes.length === 0 ? (\n <Alert>\n <AlertCircle className=\"size-4\" />\n <AlertDescription>\n {t('afterActions.versions.noChanges')}\n </AlertDescription>\n </Alert>\n ) : (\n changes.map((change, index) => (\n <Card key={index} className={cn('border-l-4', getDiffColor(change.kind))}>\n <CardHeader className=\"pb-3\">\n <div className=\"flex items-center justify-between\">\n <Badge className={getDiffColor(change.kind)}>\n {getDiffLabel(change.kind)}\n </Badge>\n <code className=\"text-xs text-muted-foreground\">\n {formatPath(change.path)}\n </code>\n </div>\n </CardHeader>\n <CardContent className=\"text-sm\">\n <div className=\"grid grid-cols-1 gap-4 md:grid-cols-2\">\n {change.kind !== 'N' && (\n <div>\n <p className=\"mb-1 font-semibold text-red-600\">\n {t('afterActions.versions.before')}:\n </p>\n <pre className=\"overflow-x-auto rounded bg-red-50 p-2 text-xs\">\n {renderDiffValue(change.lhs)}\n </pre>\n </div>\n )}\n {change.kind !== 'D' && (\n <div>\n <p className=\"mb-1 font-semibold text-green-600\">\n {t('afterActions.versions.after')}:\n </p>\n <pre className=\"overflow-x-auto rounded bg-green-50 p-2 text-xs\">\n {renderDiffValue(change.rhs)}\n </pre>\n </div>\n )}\n </div>\n </CardContent>\n </Card>\n ))\n )}\n </div>\n\n <div className={cn('flex gap-2', isRTL && 'flex-row-reverse')}>\n <Button\n variant=\"outline\"\n onClick={() => setShowDiff(false)}\n className=\"flex-1\"\n >\n {t('common.close')}\n </Button>\n </div>\n </DialogContent>\n </Dialog>\n );\n }\n\n return (\n <Dialog open={open} onOpenChange={handleOpenChange}>\n <DialogTrigger asChild>\n <Button\n type=\"button\"\n variant=\"outline\"\n disabled={disabled}\n className={cn('gap-2', className)}\n >\n <History className=\"size-4\" />\n {t('afterActions.versions.button')}\n </Button>\n </DialogTrigger>\n <DialogContent className=\"max-h-[80vh] max-w-3xl overflow-y-auto\" dir={isRTL ? 'rtl' : 'ltr'}>\n <DialogHeader>\n <DialogTitle className=\"flex items-center gap-2\">\n <History className=\"size-5\" />\n {t('afterActions.versions.title')}\n </DialogTitle>\n <DialogDescription>\n {t('afterActions.versions.description')}\n </DialogDescription>\n </DialogHeader>\n\n <div className=\"space-y-4\">\n {loading && (\n <div className=\"flex items-center justify-center py-8\">\n <Loader2 className=\"size-6 animate-spin\" />\n </div>\n )}\n\n {error && (\n <Alert variant=\"destructive\">\n <AlertCircle className=\"size-4\" />\n <AlertDescription>{error}</AlertDescription>\n </Alert>\n )}\n\n {!loading && !error && versions.length === 0 && (\n <Alert>\n <AlertCircle className=\"size-4\" />\n <AlertDescription>\n {t('afterActions.versions.noVersions')}\n </AlertDescription>\n </Alert>\n )}\n\n {!loading && !error && versions.length > 0 && (\n <div className=\"rounded-md border\">\n <Table>\n <TableHeader>\n <TableRow>\n <TableHead>{t('afterActions.versions.version')}</TableHead>\n <TableHead>{t('afterActions.versions.changedBy')}</TableHead>\n <TableHead>{t('afterActions.versions.changedAt')}</TableHead>\n <TableHead>{t('afterActions.versions.summary')}</TableHead>\n <TableHead className=\"text-end\">{t('common.actions')}</TableHead>\n </TableRow>\n </TableHeader>\n <TableBody>\n {versions.map((version, index) => (\n <TableRow key={version.id}>\n <TableCell className=\"font-medium\">\n v{version.version_number}\n {version.version_number === currentVersion && (\n <Badge variant=\"secondary\" className=\"ms-2\">\n {t('afterActions.versions.current')}\n </Badge>\n )}\n </TableCell>\n <TableCell>\n <div>\n <p className=\"font-medium\">{version.changed_by.name}</p>\n <p className=\"text-xs text-muted-foreground\">\n {version.changed_by.email}\n </p>\n </div>\n </TableCell>\n <TableCell>\n {format(new Date(version.changed_at), 'PPp')}\n </TableCell>\n <TableCell className=\"max-w-xs truncate\">\n {version.change_summary || t('afterActions.versions.noSummary')}\n </TableCell>\n <TableCell className=\"text-end\">\n {index < versions.length - 1 && (\n <Button\n variant=\"ghost\"\n size=\"sm\"\n onClick={() =>\n handleViewDiff(\n versions[index + 1].version_number,\n version.version_number\n )\n }\n >\n <Eye className=\"me-1 size-4\" />\n {t('afterActions.versions.viewDiff')}\n </Button>\n )}\n </TableCell>\n </TableRow>\n ))}\n </TableBody>\n </Table>\n </div>\n )}\n </div>\n\n <div className={cn('flex gap-2', isRTL && 'flex-row-reverse')}>\n <Button\n variant=\"outline\"\n onClick={() => handleOpenChange(false)}\n className=\"flex-1\"\n >\n {t('common.close')}\n </Button>\n </div>\n </DialogContent>\n </Dialog>\n );\n}\n","import { createFileRoute, Link } from '@tanstack/react-router';\nimport { useAfterActionVersions } from '@/hooks/useAfterAction';\nimport { useTranslation } from 'react-i18next';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Skeleton } from '@/components/ui/skeleton';\nimport { VersionHistoryViewer } from '@/components/VersionHistoryViewer';\nimport { ArrowLeft } from 'lucide-react';\n\nexport const Route = createFileRoute('/_protected/after-actions/$afterActionId/versions')({\n component: VersionHistoryPage,\n});\n\nfunction VersionHistoryPage() {\n const { afterActionId } = Route.useParams();\n const { t, i18n } = useTranslation();\n const isRTL = i18n.language === 'ar';\n\n const { data: versions, isLoading, error } = useAfterActionVersions(afterActionId);\n\n if (isLoading) {\n return (\n <div className=\"container mx-auto p-6 space-y-6\">\n <Skeleton className=\"h-8 w-64\" />\n <Skeleton className=\"h-96 w-full\" />\n </div>\n );\n }\n\n if (error) {\n return (\n <div className=\"container mx-auto p-6\">\n <Card className=\"border-destructive\">\n <CardHeader>\n <CardTitle className=\"text-destructive\">{t('common.error')}</CardTitle>\n <CardDescription>{t('afterActions.versions.loadError')}</CardDescription>\n </CardHeader>\n </Card>\n </div>\n );\n }\n\n return (\n <div className={`container mx-auto p-6 space-y-6 ${isRTL ? 'rtl' : 'ltr'}`}>\n {/* Header */}\n <div className=\"flex items-center gap-4\">\n <Button variant=\"ghost\" size=\"icon\" asChild>\n <Link\n to=\"/after-actions/$afterActionId\"\n params={{ afterActionId }}\n >\n <ArrowLeft className={`h-4 w-4 ${isRTL ? 'rotate-180' : ''}`} />\n </Link>\n </Button>\n <div>\n <h1 className=\"text-3xl font-bold\">{t('afterActions.versions.title')}</h1>\n <p className=\"text-muted-foreground\">\n {t('afterActions.versions.description')}\n </p>\n </div>\n </div>\n\n {/* Version History Card */}\n <Card>\n <CardHeader>\n <CardTitle>{t('afterActions.versions.history')}</CardTitle>\n <CardDescription>\n {versions && versions.length > 0\n ? t('afterActions.versions.count', { count: versions.length })\n : t('afterActions.versions.noVersions')\n }\n </CardDescription>\n </CardHeader>\n <CardContent>\n {versions && versions.length > 0 ? (\n <VersionHistoryViewer\n afterActionId={afterActionId}\n versions={versions}\n />\n ) : (\n <p className=\"text-center text-muted-foreground py-8\">\n {t('afterActions.versions.noVersionsDescription')}\n </p>\n )}\n </CardContent>\n </Card>\n </div>\n );\n}\n"],"names":["VersionHistoryViewer","afterActionId","currentVersion","disabled","className","t","i18n","useTranslation","isRTL","open","setOpen","useState","loading","setLoading","error","setError","versions","setVersions","selectedVersions","setSelectedVersions","showDiff","setShowDiff","loadVersions","response","data","err","handleViewDiff","version1","version2","getDiffChanges","v1","v2","v","diff.diff","renderDiffValue","value","getDiffColor","kind","getDiffLabel","formatPath","path","handleOpenChange","isOpen","changes","jsx","Dialog","jsxs","DialogContent","DialogHeader","DialogTitle","DialogDescription","Alert","AlertCircle","AlertDescription","change","index","Card","cn","CardHeader","Badge","CardContent","Button","DialogTrigger","History","Loader2","Table","TableHeader","TableRow","TableHead","TableBody","version","TableCell","format","Eye","VersionHistoryPage","Route","useParams","language","isLoading","useAfterActionVersions","Skeleton","CardTitle","CardDescription","Link","ArrowLeft","length","count"],"mappings":"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"}