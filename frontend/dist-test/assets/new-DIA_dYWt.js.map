{"version":3,"file":"new-DIA_dYWt.js","sources":["../../src/hooks/useCreateCalendarEvent.ts","../../src/hooks/useUpdateCalendarEvent.ts","../../src/hooks/useCalendarConflicts.ts","../../src/types/calendar-conflict.types.ts","../../src/components/Calendar/ConflictResolution/ConflictResolutionPanel.tsx","../../src/components/Calendar/ConflictResolution/ReschedulingSuggestions.tsx","../../src/components/Calendar/CalendarEntryForm.tsx","../../src/routes/_protected/calendar/new.tsx?tsr-split=component"],"sourcesContent":["// T071: useCreateCalendarEvent mutation hook\nimport { useMutation, useQueryClient } from '@tanstack/react-query';\nimport { supabase } from '@/lib/supabase';\n\nexport interface CreateCalendarEventInput {\n  entry_type: 'internal_meeting' | 'deadline' | 'reminder' | 'holiday' | 'training' | 'review' | 'other';\n  title_en?: string;\n  title_ar?: string;\n  description_en?: string;\n  description_ar?: string;\n  start_datetime: string;\n  end_datetime?: string;\n  all_day?: boolean;\n  location?: string;\n  recurrence_pattern?: string;\n  linked_item_type?: string;\n  linked_item_id?: string;\n  attendee_ids?: string[];\n  reminder_minutes?: number;\n}\n\nexport function useCreateCalendarEvent() {\n  const queryClient = useQueryClient();\n\n  return useMutation({\n    mutationFn: async (input: CreateCalendarEventInput) => {\n      const { data: { session } } = await supabase.auth.getSession();\n      if (!session) {\n        throw new Error('Not authenticated');\n      }\n\n      const response = await fetch(\n        `${supabase.supabaseUrl}/functions/v1/calendar-create`,\n        {\n          method: 'POST',\n          headers: {\n            'Authorization': `Bearer ${session.access_token}`,\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify(input),\n        }\n      );\n\n      if (!response.ok) {\n        const error = await response.json();\n        throw new Error(error.error || 'Failed to create calendar event');\n      }\n\n      return await response.json();\n    },\n    onSuccess: () => {\n      // Invalidate calendar events query to refetch\n      queryClient.invalidateQueries({ queryKey: ['calendar-events'] });\n    },\n  });\n}\n","// T072: useUpdateCalendarEvent mutation hook\nimport { useMutation, useQueryClient } from '@tanstack/react-query';\nimport { supabase } from '@/lib/supabase';\n\nexport interface UpdateCalendarEventInput {\n  entryId: string;\n  entry_type?: 'internal_meeting' | 'deadline' | 'reminder' | 'holiday' | 'training' | 'review' | 'other';\n  title_en?: string;\n  title_ar?: string;\n  description_en?: string;\n  description_ar?: string;\n  start_datetime?: string;\n  end_datetime?: string;\n  all_day?: boolean;\n  location?: string;\n  recurrence_pattern?: string;\n  linked_item_type?: string;\n  linked_item_id?: string;\n  attendee_ids?: string[];\n  reminder_minutes?: number;\n}\n\nexport function useUpdateCalendarEvent() {\n  const queryClient = useQueryClient();\n\n  return useMutation({\n    mutationFn: async ({ entryId, ...updates }: UpdateCalendarEventInput) => {\n      const { data: { session } } = await supabase.auth.getSession();\n      if (!session) {\n        throw new Error('Not authenticated');\n      }\n\n      const response = await fetch(\n        `${supabase.supabaseUrl}/functions/v1/calendar-update?entryId=${entryId}`,\n        {\n          method: 'PATCH',\n          headers: {\n            'Authorization': `Bearer ${session.access_token}`,\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify(updates),\n        }\n      );\n\n      if (!response.ok) {\n        const error = await response.json();\n        throw new Error(error.error || 'Failed to update calendar event');\n      }\n\n      return await response.json();\n    },\n    onSuccess: () => {\n      // Invalidate calendar events query to refetch\n      queryClient.invalidateQueries({ queryKey: ['calendar-events'] });\n    },\n  });\n}\n","/**\n * Calendar Conflicts Hook\n * Feature: event-conflict-resolution\n *\n * React Query hooks for calendar conflict detection and resolution\n */\n\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { supabase } from '@/lib/supabase';\nimport type {\n  ConflictCheckRequest,\n  ConflictCheckResponse,\n  ConflictsListResponse,\n  ConflictListFilters,\n  ReschedulingSuggestionRequest,\n  ReschedulingSuggestionResponse,\n  ReschedulingSuggestion,\n  CreateScenarioRequest,\n  WhatIfScenario,\n  BulkRescheduleRequest,\n  BulkRescheduleResponse,\n  ResolveConflictRequest,\n} from '@/types/calendar-conflict.types';\n\nconst CONFLICTS_BASE_URL = `${import.meta.env.VITE_SUPABASE_URL}/functions/v1/calendar-conflicts`;\n\n/**\n * Get auth headers for API requests\n */\nasync function getAuthHeaders(): Promise<Record<string, string>> {\n  const { data: { session } } = await supabase.auth.getSession();\n\n  if (!session) {\n    throw new Error('Not authenticated');\n  }\n\n  return {\n    'Content-Type': 'application/json',\n    'Authorization': `Bearer ${session.access_token}`,\n  };\n}\n\n/**\n * Handle API response\n */\nasync function handleResponse<T>(response: Response): Promise<T> {\n  if (!response.ok) {\n    const error = await response.json().catch(() => ({ error: response.statusText }));\n    throw new Error(error.error || 'API request failed');\n  }\n  return response.json();\n}\n\n// ============================================================================\n// Conflict Detection\n// ============================================================================\n\n/**\n * Check for conflicts for a given event configuration\n */\nexport function useCheckConflicts() {\n  return useMutation({\n    mutationFn: async (request: ConflictCheckRequest): Promise<ConflictCheckResponse> => {\n      const headers = await getAuthHeaders();\n      const response = await fetch(`${CONFLICTS_BASE_URL}/check`, {\n        method: 'POST',\n        headers,\n        body: JSON.stringify(request),\n      });\n      return handleResponse<ConflictCheckResponse>(response);\n    },\n  });\n}\n\n/**\n * Real-time conflict checking with debounce\n */\nexport function useConflictCheck(\n  request: ConflictCheckRequest | null,\n  options?: { enabled?: boolean; debounceMs?: number }\n) {\n  const { enabled = true, debounceMs = 500 } = options || {};\n\n  return useQuery({\n    queryKey: ['conflict-check', request],\n    queryFn: async (): Promise<ConflictCheckResponse> => {\n      if (!request?.start_datetime || !request?.end_datetime) {\n        return {\n          has_conflicts: false,\n          conflicts: [],\n          warnings: [],\n          severity_summary: { critical: 0, high: 0, medium: 0, low: 0 },\n          total_conflicts: 0,\n        };\n      }\n\n      const headers = await getAuthHeaders();\n      const response = await fetch(`${CONFLICTS_BASE_URL}/check`, {\n        method: 'POST',\n        headers,\n        body: JSON.stringify(request),\n      });\n      return handleResponse<ConflictCheckResponse>(response);\n    },\n    enabled: enabled && !!request?.start_datetime && !!request?.end_datetime,\n    staleTime: debounceMs,\n    gcTime: 30 * 1000, // 30 seconds\n  });\n}\n\n/**\n * Get existing conflicts with pagination\n */\nexport function useConflicts(filters?: ConflictListFilters) {\n  return useQuery({\n    queryKey: ['calendar-conflicts', filters],\n    queryFn: async (): Promise<ConflictsListResponse> => {\n      const headers = await getAuthHeaders();\n      const params = new URLSearchParams();\n\n      if (filters) {\n        Object.entries(filters).forEach(([key, value]) => {\n          if (value !== undefined && value !== null) {\n            params.append(key, String(value));\n          }\n        });\n      }\n\n      const response = await fetch(`${CONFLICTS_BASE_URL}?${params.toString()}`, {\n        headers,\n      });\n      return handleResponse<ConflictsListResponse>(response);\n    },\n    staleTime: 60 * 1000, // 1 minute\n  });\n}\n\n/**\n * Get conflicts for a specific event\n */\nexport function useEventConflicts(eventId: string | undefined, options?: { enabled?: boolean }) {\n  return useQuery({\n    queryKey: ['event-conflicts', eventId],\n    queryFn: async (): Promise<ConflictsListResponse> => {\n      if (!eventId) throw new Error('Event ID required');\n\n      const headers = await getAuthHeaders();\n      const response = await fetch(`${CONFLICTS_BASE_URL}?event_id=${eventId}`, {\n        headers,\n      });\n      return handleResponse<ConflictsListResponse>(response);\n    },\n    enabled: options?.enabled !== false && !!eventId,\n  });\n}\n\n// ============================================================================\n// Rescheduling Suggestions\n// ============================================================================\n\n/**\n * Generate rescheduling suggestions for an event\n */\nexport function useGenerateSuggestions() {\n  const queryClient = useQueryClient();\n\n  return useMutation({\n    mutationFn: async (request: ReschedulingSuggestionRequest): Promise<ReschedulingSuggestionResponse> => {\n      const headers = await getAuthHeaders();\n      const response = await fetch(`${CONFLICTS_BASE_URL}/suggest`, {\n        method: 'POST',\n        headers,\n        body: JSON.stringify(request),\n      });\n      return handleResponse<ReschedulingSuggestionResponse>(response);\n    },\n    onSuccess: (_, variables) => {\n      queryClient.invalidateQueries({ queryKey: ['rescheduling-suggestions', variables.event_id] });\n    },\n  });\n}\n\n/**\n * Get stored suggestions for an event or conflict\n */\nexport function useSuggestions(params: { event_id?: string; conflict_id?: string }, options?: { enabled?: boolean }) {\n  return useQuery({\n    queryKey: ['rescheduling-suggestions', params],\n    queryFn: async (): Promise<{ suggestions: ReschedulingSuggestion[] }> => {\n      const headers = await getAuthHeaders();\n      const searchParams = new URLSearchParams();\n\n      if (params.event_id) searchParams.append('event_id', params.event_id);\n      if (params.conflict_id) searchParams.append('conflict_id', params.conflict_id);\n\n      const response = await fetch(`${CONFLICTS_BASE_URL}/suggestions?${searchParams.toString()}`, {\n        headers,\n      });\n      return handleResponse<{ suggestions: ReschedulingSuggestion[] }>(response);\n    },\n    enabled: options?.enabled !== false && !!(params.event_id || params.conflict_id),\n  });\n}\n\n/**\n * Accept a rescheduling suggestion and resolve conflict\n */\nexport function useAcceptSuggestion() {\n  const queryClient = useQueryClient();\n\n  return useMutation({\n    mutationFn: async (params: { conflict_id: string; suggestion_id: string }): Promise<{ success: boolean }> => {\n      const headers = await getAuthHeaders();\n      const response = await fetch(`${CONFLICTS_BASE_URL}/resolve`, {\n        method: 'PUT',\n        headers,\n        body: JSON.stringify({\n          conflict_id: params.conflict_id,\n          resolution_status: 'auto_resolved',\n          accepted_suggestion_id: params.suggestion_id,\n        }),\n      });\n      return handleResponse<{ success: boolean }>(response);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['calendar-conflicts'] });\n      queryClient.invalidateQueries({ queryKey: ['event-conflicts'] });\n      queryClient.invalidateQueries({ queryKey: ['calendar-events'] });\n    },\n  });\n}\n\n// ============================================================================\n// Conflict Resolution\n// ============================================================================\n\n/**\n * Resolve a conflict manually\n */\nexport function useResolveConflict() {\n  const queryClient = useQueryClient();\n\n  return useMutation({\n    mutationFn: async (request: ResolveConflictRequest): Promise<{ success: boolean }> => {\n      const headers = await getAuthHeaders();\n      const response = await fetch(`${CONFLICTS_BASE_URL}/resolve`, {\n        method: 'PUT',\n        headers,\n        body: JSON.stringify(request),\n      });\n      return handleResponse<{ success: boolean }>(response);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['calendar-conflicts'] });\n      queryClient.invalidateQueries({ queryKey: ['event-conflicts'] });\n    },\n  });\n}\n\n// ============================================================================\n// What-If Scenarios\n// ============================================================================\n\n/**\n * Create a what-if scenario\n */\nexport function useCreateScenario() {\n  const queryClient = useQueryClient();\n\n  return useMutation({\n    mutationFn: async (request: CreateScenarioRequest): Promise<{ scenario: WhatIfScenario }> => {\n      const headers = await getAuthHeaders();\n      const response = await fetch(`${CONFLICTS_BASE_URL}/scenarios`, {\n        method: 'POST',\n        headers,\n        body: JSON.stringify(request),\n      });\n      return handleResponse<{ scenario: WhatIfScenario }>(response);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['what-if-scenarios'] });\n    },\n  });\n}\n\n/**\n * Get user's what-if scenarios\n */\nexport function useScenarios(status?: string) {\n  return useQuery({\n    queryKey: ['what-if-scenarios', status],\n    queryFn: async (): Promise<{ scenarios: WhatIfScenario[] }> => {\n      const headers = await getAuthHeaders();\n      const params = status ? `?status=${status}` : '';\n      const response = await fetch(`${CONFLICTS_BASE_URL}/scenarios${params}`, {\n        headers,\n      });\n      return handleResponse<{ scenarios: WhatIfScenario[] }>(response);\n    },\n  });\n}\n\n/**\n * Apply a what-if scenario\n */\nexport function useApplyScenario() {\n  const queryClient = useQueryClient();\n\n  return useMutation({\n    mutationFn: async (scenarioId: string): Promise<{ success: boolean; results: any[] }> => {\n      const headers = await getAuthHeaders();\n      const response = await fetch(`${CONFLICTS_BASE_URL}/apply-scenario`, {\n        method: 'POST',\n        headers,\n        body: JSON.stringify({ scenario_id: scenarioId }),\n      });\n      return handleResponse<{ success: boolean; results: any[] }>(response);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['what-if-scenarios'] });\n      queryClient.invalidateQueries({ queryKey: ['calendar-events'] });\n      queryClient.invalidateQueries({ queryKey: ['calendar-conflicts'] });\n    },\n  });\n}\n\n/**\n * Delete a what-if scenario\n */\nexport function useDeleteScenario() {\n  const queryClient = useQueryClient();\n\n  return useMutation({\n    mutationFn: async (scenarioId: string): Promise<{ success: boolean }> => {\n      const headers = await getAuthHeaders();\n      const response = await fetch(`${CONFLICTS_BASE_URL}/scenarios/${scenarioId}`, {\n        method: 'DELETE',\n        headers,\n      });\n      return handleResponse<{ success: boolean }>(response);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['what-if-scenarios'] });\n    },\n  });\n}\n\n// ============================================================================\n// Bulk Operations\n// ============================================================================\n\n/**\n * Generate bulk rescheduling plan\n */\nexport function useBulkReschedule() {\n  const queryClient = useQueryClient();\n\n  return useMutation({\n    mutationFn: async (request: BulkRescheduleRequest): Promise<BulkRescheduleResponse> => {\n      const headers = await getAuthHeaders();\n      const response = await fetch(`${CONFLICTS_BASE_URL}/bulk-reschedule`, {\n        method: 'POST',\n        headers,\n        body: JSON.stringify(request),\n      });\n      return handleResponse<BulkRescheduleResponse>(response);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['what-if-scenarios'] });\n    },\n  });\n}\n\n// ============================================================================\n// Export Combined Hook\n// ============================================================================\n\nexport function useCalendarConflicts() {\n  return {\n    // Conflict checking\n    useCheckConflicts,\n    useConflictCheck,\n    useConflicts,\n    useEventConflicts,\n\n    // Suggestions\n    useGenerateSuggestions,\n    useSuggestions,\n    useAcceptSuggestion,\n\n    // Resolution\n    useResolveConflict,\n\n    // Scenarios\n    useCreateScenario,\n    useScenarios,\n    useApplyScenario,\n    useDeleteScenario,\n\n    // Bulk operations\n    useBulkReschedule,\n  };\n}\n","/**\n * Calendar Conflict Types\n * Feature: event-conflict-resolution\n *\n * Type definitions for calendar conflict detection and resolution\n */\n\n// Conflict type categories\nexport type ConflictType =\n  | 'venue'\n  | 'participant'\n  | 'organizer'\n  | 'holiday'\n  | 'resource'\n  | 'travel_time';\n\n// Conflict severity levels\nexport type ConflictSeverity = 'low' | 'medium' | 'high' | 'critical';\n\n// Conflict resolution status\nexport type ConflictResolutionStatus =\n  | 'pending'\n  | 'auto_resolved'\n  | 'manually_resolved'\n  | 'ignored'\n  | 'escalated';\n\n// What-if scenario status\nexport type ScenarioStatus = 'draft' | 'analyzing' | 'ready' | 'applied' | 'discarded';\n\n/**\n * Conflict check request parameters\n */\nexport interface ConflictCheckRequest {\n  event_id?: string;\n  start_datetime: string;\n  end_datetime: string;\n  venue_en?: string;\n  venue_ar?: string;\n  participant_ids?: string[];\n  check_travel_time?: boolean;\n}\n\n/**\n * Individual conflict details\n */\nexport interface EventConflict {\n  id?: string;\n  conflict_type: ConflictType;\n  severity: ConflictSeverity;\n  conflicting_event_id?: string;\n  conflicting_event?: {\n    id: string;\n    title_en?: string;\n    title_ar?: string;\n    start_datetime: string;\n    end_datetime: string;\n  };\n  overlap_start?: string;\n  overlap_end?: string;\n  overlap_minutes?: number;\n  message_en: string;\n  message_ar?: string;\n  affected_participant_ids?: string[];\n  affected_resources?: string[];\n  resolution_status?: ConflictResolutionStatus;\n  resolved_by?: string;\n  resolved_at?: string;\n  resolution_notes?: string;\n  ai_suggestion?: AISuggestion;\n  ai_confidence_score?: number;\n  created_at?: string;\n}\n\n/**\n * Conflict check response\n */\nexport interface ConflictCheckResponse {\n  has_conflicts: boolean;\n  conflicts: EventConflict[];\n  warnings: string[];\n  severity_summary: {\n    critical: number;\n    high: number;\n    medium: number;\n    low: number;\n  };\n  total_conflicts: number;\n}\n\n/**\n * AI-generated suggestion\n */\nexport interface AISuggestion {\n  action: 'reschedule' | 'move_venue' | 'reduce_duration' | 'split_event';\n  confidence: number;\n  reason_en: string;\n  reason_ar?: string;\n}\n\n/**\n * Rescheduling suggestion\n */\nexport interface ReschedulingSuggestion {\n  id: string;\n  conflict_id: string;\n  event_id: string;\n  suggested_start: string;\n  suggested_end: string;\n  availability_score: number;\n  priority_score: number;\n  travel_feasibility_score: number;\n  overall_score: number;\n  reason_en?: string;\n  reason_ar?: string;\n  participant_availability?: Record<string, boolean>;\n  alternative_venue_en?: string;\n  alternative_venue_ar?: string;\n  is_accepted: boolean;\n  accepted_by?: string;\n  accepted_at?: string;\n  created_at: string;\n}\n\n/**\n * Request to generate rescheduling suggestions\n */\nexport interface ReschedulingSuggestionRequest {\n  event_id: string;\n  conflict_id?: string;\n  preferred_dates?: string[];\n  preferred_hours?: number[];\n  duration_minutes?: number;\n  must_include_participants?: string[];\n}\n\n/**\n * Response from suggestion generation\n */\nexport interface ReschedulingSuggestionResponse {\n  event_id: string;\n  suggestions: Omit<ReschedulingSuggestion, 'id' | 'conflict_id' | 'event_id' | 'is_accepted' | 'created_at'>[];\n  search_range: {\n    start: string;\n    end: string;\n  };\n  duration_minutes: number;\n}\n\n/**\n * What-if scenario proposed change\n */\nexport interface ProposedChange {\n  event_id: string;\n  new_start?: string;\n  new_end?: string;\n  new_venue_en?: string;\n  new_venue_ar?: string;\n  original_start?: string;\n  original_end?: string;\n}\n\n/**\n * What-if scenario\n */\nexport interface WhatIfScenario {\n  id: string;\n  created_by: string;\n  name_en: string;\n  name_ar?: string;\n  description_en?: string;\n  description_ar?: string;\n  affected_event_ids: string[];\n  proposed_changes: ProposedChange[];\n  status: ScenarioStatus;\n  conflicts_before: number;\n  conflicts_after: number;\n  impact_summary: {\n    events_affected: number;\n    conflicts_reduced: number;\n    recommendation: 'positive' | 'negative' | 'neutral';\n  };\n  ai_analysis?: Record<string, unknown>;\n  ai_recommendation_en?: string;\n  ai_recommendation_ar?: string;\n  analyzed_at?: string;\n  applied_at?: string;\n  created_at: string;\n  updated_at: string;\n}\n\n/**\n * Request to create a what-if scenario\n */\nexport interface CreateScenarioRequest {\n  name_en: string;\n  name_ar?: string;\n  description_en?: string;\n  description_ar?: string;\n  proposed_changes: ProposedChange[];\n}\n\n/**\n * Bulk reschedule request\n */\nexport interface BulkRescheduleRequest {\n  event_ids: string[];\n  target_date_range: {\n    start: string;\n    end: string;\n  };\n  constraints?: {\n    avoid_weekends?: boolean;\n    preferred_hours?: number[];\n    maintain_relative_order?: boolean;\n  };\n}\n\n/**\n * Bulk reschedule response\n */\nexport interface BulkRescheduleResponse {\n  scenario_id?: string;\n  proposed_changes: ProposedChange[];\n  events_count: number;\n}\n\n/**\n * Conflict resolution request\n */\nexport interface ResolveConflictRequest {\n  conflict_id: string;\n  resolution_status?: ConflictResolutionStatus;\n  resolution_notes?: string;\n  accepted_suggestion_id?: string;\n}\n\n/**\n * Participant availability\n */\nexport interface ParticipantAvailability {\n  id: string;\n  participant_id: string;\n  participant_type: 'user' | 'person_dossier' | 'external_contact';\n  available_from: string;\n  available_to: string;\n  availability_status: 'available' | 'busy' | 'tentative' | 'out_of_office';\n  location_en?: string;\n  location_ar?: string;\n  timezone: string;\n  source: 'manual' | 'calendar_sync' | 'ai_inferred';\n  confidence: number;\n}\n\n/**\n * Venue/resource information\n */\nexport interface VenueResource {\n  id: string;\n  name_en: string;\n  name_ar?: string;\n  resource_type: 'room' | 'equipment' | 'service' | 'venue';\n  capacity?: number;\n  features?: Record<string, unknown>;\n  building_en?: string;\n  building_ar?: string;\n  floor?: string;\n  is_active: boolean;\n  booking_lead_time_hours: number;\n}\n\n/**\n * Travel logistics between locations\n */\nexport interface TravelLogistics {\n  id: string;\n  from_location: string;\n  to_location: string;\n  estimated_travel_minutes: number;\n  travel_mode: 'walking' | 'driving' | 'public_transit' | 'flight';\n  recommended_buffer_minutes: number;\n  last_updated: string;\n  data_source: string;\n}\n\n/**\n * Conflict list query filters\n */\nexport interface ConflictListFilters {\n  event_id?: string;\n  status?: ConflictResolutionStatus;\n  severity?: ConflictSeverity;\n  page?: number;\n  page_size?: number;\n}\n\n/**\n * Paginated conflicts response\n */\nexport interface ConflictsListResponse {\n  conflicts: EventConflict[];\n  total_count: number;\n  page: number;\n  page_size: number;\n}\n\n/**\n * Severity badge color mapping\n */\nexport const SEVERITY_COLORS: Record<ConflictSeverity, { bg: string; text: string; border: string }> = {\n  critical: { bg: 'bg-red-100 dark:bg-red-900/30', text: 'text-red-700 dark:text-red-300', border: 'border-red-200 dark:border-red-800' },\n  high: { bg: 'bg-orange-100 dark:bg-orange-900/30', text: 'text-orange-700 dark:text-orange-300', border: 'border-orange-200 dark:border-orange-800' },\n  medium: { bg: 'bg-yellow-100 dark:bg-yellow-900/30', text: 'text-yellow-700 dark:text-yellow-300', border: 'border-yellow-200 dark:border-yellow-800' },\n  low: { bg: 'bg-blue-100 dark:bg-blue-900/30', text: 'text-blue-700 dark:text-blue-300', border: 'border-blue-200 dark:border-blue-800' },\n};\n\n/**\n * Conflict type icons mapping\n */\nexport const CONFLICT_TYPE_ICONS: Record<ConflictType, string> = {\n  venue: 'Building2',\n  participant: 'Users',\n  organizer: 'UserCog',\n  holiday: 'Calendar',\n  resource: 'Package',\n  travel_time: 'Clock',\n};\n","/**\n * ConflictResolutionPanel Component\n * Feature: event-conflict-resolution\n *\n * Displays detected conflicts and provides resolution options\n * Mobile-first, RTL-compatible design\n */\n\nimport { useTranslation } from 'react-i18next';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { AlertTriangle, AlertCircle, Info, X, Clock, Users, Building2, Calendar, Package, UserCog, ChevronRight, Sparkles } from 'lucide-react';\nimport { Card } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from '@/components/ui/tooltip';\nimport { cn } from '@/lib/utils';\nimport type { EventConflict, ConflictSeverity, ConflictType, ConflictCheckResponse } from '@/types/calendar-conflict.types';\nimport { SEVERITY_COLORS } from '@/types/calendar-conflict.types';\n\ninterface ConflictResolutionPanelProps {\n  conflicts: ConflictCheckResponse | null;\n  isLoading?: boolean;\n  onResolve?: (conflictId: string) => void;\n  onGenerateSuggestions?: (conflictId?: string) => void;\n  onDismiss?: () => void;\n  showWarnings?: boolean;\n  className?: string;\n}\n\nconst CONFLICT_TYPE_ICONS: Record<ConflictType, React.ElementType> = {\n  venue: Building2,\n  participant: Users,\n  organizer: UserCog,\n  holiday: Calendar,\n  resource: Package,\n  travel_time: Clock,\n};\n\nconst SEVERITY_ICONS: Record<ConflictSeverity, React.ElementType> = {\n  critical: AlertTriangle,\n  high: AlertTriangle,\n  medium: AlertCircle,\n  low: Info,\n};\n\nexport function ConflictResolutionPanel({\n  conflicts,\n  isLoading,\n  onResolve,\n  onGenerateSuggestions,\n  onDismiss,\n  showWarnings = true,\n  className,\n}: ConflictResolutionPanelProps) {\n  const { t, i18n } = useTranslation('calendar');\n  const isRTL = i18n.language === 'ar';\n\n  if (isLoading) {\n    return (\n      <Card className={cn('p-4', className)} dir={isRTL ? 'rtl' : 'ltr'}>\n        <div className=\"flex items-center gap-2 animate-pulse\">\n          <div className=\"h-5 w-5 bg-muted rounded-full\" />\n          <div className=\"h-4 w-32 bg-muted rounded\" />\n        </div>\n      </Card>\n    );\n  }\n\n  if (!conflicts || (!conflicts.has_conflicts && !conflicts.warnings?.length)) {\n    return null;\n  }\n\n  const hasHighSeverity = conflicts.severity_summary.critical > 0 || conflicts.severity_summary.high > 0;\n\n  return (\n    <Card\n      className={cn(\n        'overflow-hidden border-2 transition-colors',\n        hasHighSeverity ? 'border-destructive/50 bg-destructive/5' : 'border-warning/50 bg-warning/5',\n        className\n      )}\n      dir={isRTL ? 'rtl' : 'ltr'}\n    >\n      {/* Header */}\n      <div className=\"flex items-center justify-between p-3 sm:p-4 border-b bg-background/50\">\n        <div className=\"flex items-center gap-2\">\n          <AlertTriangle\n            className={cn(\n              'h-5 w-5 shrink-0',\n              hasHighSeverity ? 'text-destructive' : 'text-warning'\n            )}\n          />\n          <div>\n            <h3 className=\"text-sm sm:text-base font-semibold\">\n              {t('conflicts.title', { count: conflicts.total_conflicts })}\n            </h3>\n            <p className=\"text-xs text-muted-foreground\">\n              {t('conflicts.subtitle')}\n            </p>\n          </div>\n        </div>\n\n        <div className=\"flex items-center gap-2\">\n          {/* Severity summary badges */}\n          <div className=\"hidden sm:flex items-center gap-1\">\n            {conflicts.severity_summary.critical > 0 && (\n              <Badge variant=\"destructive\" className=\"text-xs\">\n                {conflicts.severity_summary.critical} {t('conflicts.severity.critical')}\n              </Badge>\n            )}\n            {conflicts.severity_summary.high > 0 && (\n              <Badge className=\"bg-orange-500 text-xs\">\n                {conflicts.severity_summary.high} {t('conflicts.severity.high')}\n              </Badge>\n            )}\n          </div>\n\n          {onDismiss && (\n            <Button\n              variant=\"ghost\"\n              size=\"icon\"\n              className=\"h-8 w-8\"\n              onClick={onDismiss}\n            >\n              <X className=\"h-4 w-4\" />\n            </Button>\n          )}\n        </div>\n      </div>\n\n      {/* Conflicts List */}\n      <div className=\"divide-y max-h-[300px] overflow-y-auto\">\n        <AnimatePresence>\n          {conflicts.conflicts.map((conflict, index) => (\n            <ConflictItem\n              key={conflict.id || index}\n              conflict={conflict}\n              onResolve={onResolve}\n              onGenerateSuggestions={onGenerateSuggestions}\n              isRTL={isRTL}\n              t={t}\n            />\n          ))}\n        </AnimatePresence>\n      </div>\n\n      {/* Warnings */}\n      {showWarnings && conflicts.warnings?.length > 0 && (\n        <div className=\"p-3 sm:p-4 bg-muted/30 border-t\">\n          <div className=\"flex items-start gap-2\">\n            <Info className=\"h-4 w-4 text-muted-foreground shrink-0 mt-0.5\" />\n            <div className=\"flex-1 min-w-0\">\n              <p className=\"text-xs font-medium text-muted-foreground mb-1\">\n                {t('conflicts.warnings')}\n              </p>\n              <ul className=\"text-xs text-muted-foreground space-y-0.5\">\n                {conflicts.warnings.map((warning, idx) => (\n                  <li key={idx} className=\"flex items-center gap-1\">\n                    <span className=\"h-1 w-1 rounded-full bg-muted-foreground shrink-0\" />\n                    {warning}\n                  </li>\n                ))}\n              </ul>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Actions Footer */}\n      {onGenerateSuggestions && conflicts.has_conflicts && (\n        <div className=\"p-3 sm:p-4 bg-background border-t\">\n          <Button\n            variant=\"outline\"\n            size=\"sm\"\n            className=\"w-full sm:w-auto\"\n            onClick={() => onGenerateSuggestions()}\n          >\n            <Sparkles className={cn('h-4 w-4', isRTL ? 'ms-2' : 'me-2')} />\n            {t('conflicts.generateSuggestions')}\n          </Button>\n        </div>\n      )}\n    </Card>\n  );\n}\n\ninterface ConflictItemProps {\n  conflict: EventConflict;\n  onResolve?: (conflictId: string) => void;\n  onGenerateSuggestions?: (conflictId?: string) => void;\n  isRTL: boolean;\n  t: (key: string, options?: any) => string;\n}\n\nfunction ConflictItem({\n  conflict,\n  onResolve,\n  onGenerateSuggestions,\n  isRTL,\n  t,\n}: ConflictItemProps) {\n  const TypeIcon = CONFLICT_TYPE_ICONS[conflict.conflict_type] || AlertCircle;\n  const SeverityIcon = SEVERITY_ICONS[conflict.severity] || Info;\n  const colors = SEVERITY_COLORS[conflict.severity];\n\n  const formatTime = (datetime: string) => {\n    const date = new Date(datetime);\n    return date.toLocaleTimeString(isRTL ? 'ar-SA' : 'en-US', {\n      hour: '2-digit',\n      minute: '2-digit',\n    });\n  };\n\n  const formatDate = (datetime: string) => {\n    const date = new Date(datetime);\n    return date.toLocaleDateString(isRTL ? 'ar-SA' : 'en-US', {\n      month: 'short',\n      day: 'numeric',\n    });\n  };\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: -10 }}\n      animate={{ opacity: 1, y: 0 }}\n      exit={{ opacity: 0, y: 10 }}\n      className=\"p-3 sm:p-4 hover:bg-muted/50 transition-colors\"\n    >\n      <div className=\"flex items-start gap-3\">\n        {/* Icon */}\n        <div\n          className={cn(\n            'p-2 rounded-lg shrink-0',\n            colors.bg,\n            colors.border,\n            'border'\n          )}\n        >\n          <TypeIcon className={cn('h-4 w-4', colors.text)} />\n        </div>\n\n        {/* Content */}\n        <div className=\"flex-1 min-w-0\">\n          <div className=\"flex items-center gap-2 flex-wrap mb-1\">\n            <Badge\n              variant=\"outline\"\n              className={cn('text-xs', colors.bg, colors.text, colors.border)}\n            >\n              <SeverityIcon className=\"h-3 w-3 me-1\" />\n              {t(`conflicts.severity.${conflict.severity}`)}\n            </Badge>\n            <Badge variant=\"secondary\" className=\"text-xs\">\n              {t(`conflicts.types.${conflict.conflict_type}`)}\n            </Badge>\n          </div>\n\n          <p className=\"text-sm font-medium text-foreground mb-1 line-clamp-2\">\n            {isRTL ? conflict.message_ar || conflict.message_en : conflict.message_en}\n          </p>\n\n          {/* Overlap details */}\n          {conflict.overlap_start && conflict.overlap_end && (\n            <div className=\"flex items-center gap-2 text-xs text-muted-foreground\">\n              <Clock className=\"h-3 w-3\" />\n              <span>\n                {formatDate(conflict.overlap_start)} {formatTime(conflict.overlap_start)} - {formatTime(conflict.overlap_end)}\n              </span>\n              {conflict.overlap_minutes && (\n                <span className=\"text-xs\">\n                  ({conflict.overlap_minutes} {t('conflicts.minutes')})\n                </span>\n              )}\n            </div>\n          )}\n\n          {/* Conflicting event */}\n          {conflict.conflicting_event && (\n            <div className=\"mt-2 p-2 bg-muted/50 rounded text-xs\">\n              <p className=\"font-medium\">\n                {isRTL\n                  ? conflict.conflicting_event.title_ar || conflict.conflicting_event.title_en\n                  : conflict.conflicting_event.title_en || conflict.conflicting_event.title_ar}\n              </p>\n              <p className=\"text-muted-foreground\">\n                {formatDate(conflict.conflicting_event.start_datetime)}{' '}\n                {formatTime(conflict.conflicting_event.start_datetime)} -{' '}\n                {formatTime(conflict.conflicting_event.end_datetime)}\n              </p>\n            </div>\n          )}\n\n          {/* Affected participants */}\n          {conflict.affected_participant_ids && conflict.affected_participant_ids.length > 0 && (\n            <div className=\"flex items-center gap-1 mt-2 text-xs text-muted-foreground\">\n              <Users className=\"h-3 w-3\" />\n              <span>\n                {t('conflicts.affectedParticipants', { count: conflict.affected_participant_ids.length })}\n              </span>\n            </div>\n          )}\n        </div>\n\n        {/* Actions */}\n        <div className=\"flex flex-col gap-1 shrink-0\">\n          <TooltipProvider>\n            {onGenerateSuggestions && (\n              <Tooltip>\n                <TooltipTrigger asChild>\n                  <Button\n                    variant=\"ghost\"\n                    size=\"icon\"\n                    className=\"h-8 w-8\"\n                    onClick={() => onGenerateSuggestions(conflict.id)}\n                  >\n                    <Sparkles className=\"h-4 w-4\" />\n                  </Button>\n                </TooltipTrigger>\n                <TooltipContent>\n                  {t('conflicts.getSuggestions')}\n                </TooltipContent>\n              </Tooltip>\n            )}\n\n            {onResolve && conflict.id && (\n              <Tooltip>\n                <TooltipTrigger asChild>\n                  <Button\n                    variant=\"ghost\"\n                    size=\"icon\"\n                    className=\"h-8 w-8\"\n                    onClick={() => onResolve(conflict.id!)}\n                  >\n                    <ChevronRight className={cn('h-4 w-4', isRTL && 'rotate-180')} />\n                  </Button>\n                </TooltipTrigger>\n                <TooltipContent>\n                  {t('conflicts.resolve')}\n                </TooltipContent>\n              </Tooltip>\n            )}\n          </TooltipProvider>\n        </div>\n      </div>\n    </motion.div>\n  );\n}\n\nexport default ConflictResolutionPanel;\n","/**\n * ReschedulingSuggestions Component\n * Feature: event-conflict-resolution\n *\n * Displays AI-generated rescheduling suggestions with scoring\n * Mobile-first, RTL-compatible design\n */\n\nimport { useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport {\n  Sparkles,\n  Calendar,\n  Clock,\n  CheckCircle2,\n  Users,\n  MapPin,\n  TrendingUp,\n  Car,\n  Loader2,\n  RefreshCw,\n  ChevronDown,\n  ChevronUp,\n} from 'lucide-react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Progress } from '@/components/ui/progress';\nimport { Collapsible, CollapsibleContent, CollapsibleTrigger } from '@/components/ui/collapsible';\nimport { cn } from '@/lib/utils';\nimport type { ReschedulingSuggestion, ReschedulingSuggestionResponse } from '@/types/calendar-conflict.types';\n\ninterface ReschedulingSuggestionsProps {\n  suggestions: ReschedulingSuggestion[] | ReschedulingSuggestionResponse['suggestions'];\n  isLoading?: boolean;\n  onAccept?: (suggestion: ReschedulingSuggestion | ReschedulingSuggestionResponse['suggestions'][0]) => void;\n  onRefresh?: () => void;\n  eventId?: string;\n  className?: string;\n}\n\nexport function ReschedulingSuggestions({\n  suggestions,\n  isLoading,\n  onAccept,\n  onRefresh,\n  eventId,\n  className,\n}: ReschedulingSuggestionsProps) {\n  const { t, i18n } = useTranslation('calendar');\n  const isRTL = i18n.language === 'ar';\n  const [expandedIndex, setExpandedIndex] = useState<number | null>(0);\n\n  const formatDateTime = (datetime: string) => {\n    const date = new Date(datetime);\n    return {\n      date: date.toLocaleDateString(isRTL ? 'ar-SA' : 'en-US', {\n        weekday: 'short',\n        month: 'short',\n        day: 'numeric',\n      }),\n      time: date.toLocaleTimeString(isRTL ? 'ar-SA' : 'en-US', {\n        hour: '2-digit',\n        minute: '2-digit',\n      }),\n    };\n  };\n\n  const getScoreColor = (score: number) => {\n    if (score >= 0.8) return 'text-green-600 dark:text-green-400';\n    if (score >= 0.6) return 'text-yellow-600 dark:text-yellow-400';\n    return 'text-red-600 dark:text-red-400';\n  };\n\n  const getScoreBg = (score: number) => {\n    if (score >= 0.8) return 'bg-green-100 dark:bg-green-900/30';\n    if (score >= 0.6) return 'bg-yellow-100 dark:bg-yellow-900/30';\n    return 'bg-red-100 dark:bg-red-900/30';\n  };\n\n  if (isLoading) {\n    return (\n      <Card className={cn('overflow-hidden', className)} dir={isRTL ? 'rtl' : 'ltr'}>\n        <CardContent className=\"p-6\">\n          <div className=\"flex flex-col items-center justify-center gap-3 py-8\">\n            <Loader2 className=\"h-8 w-8 animate-spin text-primary\" />\n            <p className=\"text-sm text-muted-foreground\">\n              {t('suggestions.generating')}\n            </p>\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  if (!suggestions || suggestions.length === 0) {\n    return (\n      <Card className={cn('overflow-hidden', className)} dir={isRTL ? 'rtl' : 'ltr'}>\n        <CardContent className=\"p-6\">\n          <div className=\"flex flex-col items-center justify-center gap-3 py-8 text-center\">\n            <Calendar className=\"h-12 w-12 text-muted-foreground/50\" />\n            <div>\n              <p className=\"text-sm font-medium\">{t('suggestions.noSuggestions')}</p>\n              <p className=\"text-xs text-muted-foreground mt-1\">\n                {t('suggestions.noSuggestionsDesc')}\n              </p>\n            </div>\n            {onRefresh && (\n              <Button variant=\"outline\" size=\"sm\" onClick={onRefresh} className=\"mt-2\">\n                <RefreshCw className={cn('h-4 w-4', isRTL ? 'ms-2' : 'me-2')} />\n                {t('suggestions.retry')}\n              </Button>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  return (\n    <Card className={cn('overflow-hidden', className)} dir={isRTL ? 'rtl' : 'ltr'}>\n      <CardHeader className=\"pb-2\">\n        <div className=\"flex items-center justify-between\">\n          <CardTitle className=\"flex items-center gap-2 text-base sm:text-lg\">\n            <Sparkles className=\"h-5 w-5 text-primary\" />\n            {t('suggestions.title')}\n          </CardTitle>\n          {onRefresh && (\n            <Button variant=\"ghost\" size=\"icon\" onClick={onRefresh} className=\"h-8 w-8\">\n              <RefreshCw className=\"h-4 w-4\" />\n            </Button>\n          )}\n        </div>\n        <p className=\"text-xs text-muted-foreground\">\n          {t('suggestions.subtitle', { count: suggestions.length })}\n        </p>\n      </CardHeader>\n\n      <CardContent className=\"p-0\">\n        <div className=\"divide-y\">\n          <AnimatePresence initial={false}>\n            {suggestions.map((suggestion, index) => {\n              const start = formatDateTime(suggestion.suggested_start);\n              const end = formatDateTime(suggestion.suggested_end);\n              const overallScore = 'overall_score' in suggestion\n                ? suggestion.overall_score\n                : ((suggestion.availability_score + suggestion.priority_score + suggestion.travel_feasibility_score) / 3);\n              const isExpanded = expandedIndex === index;\n              const isAccepted = 'is_accepted' in suggestion && suggestion.is_accepted;\n\n              return (\n                <motion.div\n                  key={'id' in suggestion ? suggestion.id : index}\n                  initial={{ opacity: 0 }}\n                  animate={{ opacity: 1 }}\n                  exit={{ opacity: 0 }}\n                >\n                  <Collapsible\n                    open={isExpanded}\n                    onOpenChange={() => setExpandedIndex(isExpanded ? null : index)}\n                  >\n                    <div\n                      className={cn(\n                        'p-3 sm:p-4 transition-colors',\n                        isExpanded && 'bg-muted/50',\n                        isAccepted && 'bg-green-50 dark:bg-green-900/20'\n                      )}\n                    >\n                      <CollapsibleTrigger asChild>\n                        <div className=\"flex items-start gap-3 cursor-pointer\">\n                          {/* Rank badge */}\n                          <div\n                            className={cn(\n                              'flex items-center justify-center h-8 w-8 rounded-full text-sm font-bold shrink-0',\n                              index === 0 ? 'bg-primary text-primary-foreground' : 'bg-muted text-muted-foreground'\n                            )}\n                          >\n                            {index + 1}\n                          </div>\n\n                          {/* Main content */}\n                          <div className=\"flex-1 min-w-0\">\n                            {/* Date and time */}\n                            <div className=\"flex items-center gap-2 flex-wrap mb-1\">\n                              <div className=\"flex items-center gap-1 text-sm font-medium\">\n                                <Calendar className=\"h-4 w-4 text-muted-foreground\" />\n                                <span>{start.date}</span>\n                              </div>\n                              <div className=\"flex items-center gap-1 text-sm\">\n                                <Clock className=\"h-4 w-4 text-muted-foreground\" />\n                                <span>\n                                  {start.time} - {end.time}\n                                </span>\n                              </div>\n                            </div>\n\n                            {/* Score indicator */}\n                            <div className=\"flex items-center gap-2 mt-2\">\n                              <Badge\n                                variant=\"secondary\"\n                                className={cn(\n                                  'text-xs',\n                                  getScoreBg(overallScore),\n                                  getScoreColor(overallScore)\n                                )}\n                              >\n                                <TrendingUp className=\"h-3 w-3 me-1\" />\n                                {Math.round(overallScore * 100)}% {t('suggestions.match')}\n                              </Badge>\n\n                              {index === 0 && (\n                                <Badge variant=\"default\" className=\"text-xs bg-primary\">\n                                  {t('suggestions.recommended')}\n                                </Badge>\n                              )}\n\n                              {isAccepted && (\n                                <Badge variant=\"secondary\" className=\"text-xs bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300\">\n                                  <CheckCircle2 className=\"h-3 w-3 me-1\" />\n                                  {t('suggestions.accepted')}\n                                </Badge>\n                              )}\n                            </div>\n                          </div>\n\n                          {/* Expand indicator */}\n                          <div className=\"shrink-0\">\n                            {isExpanded ? (\n                              <ChevronUp className=\"h-5 w-5 text-muted-foreground\" />\n                            ) : (\n                              <ChevronDown className=\"h-5 w-5 text-muted-foreground\" />\n                            )}\n                          </div>\n                        </div>\n                      </CollapsibleTrigger>\n\n                      <CollapsibleContent>\n                        <motion.div\n                          initial={{ opacity: 0, height: 0 }}\n                          animate={{ opacity: 1, height: 'auto' }}\n                          exit={{ opacity: 0, height: 0 }}\n                          className=\"mt-4 space-y-4 ps-11\"\n                        >\n                          {/* Score breakdown */}\n                          <div className=\"space-y-2\">\n                            <p className=\"text-xs font-medium text-muted-foreground\">\n                              {t('suggestions.scoreBreakdown')}\n                            </p>\n\n                            <div className=\"grid gap-2\">\n                              {/* Availability score */}\n                              <ScoreRow\n                                icon={Users}\n                                label={t('suggestions.availabilityScore')}\n                                score={suggestion.availability_score}\n                              />\n\n                              {/* Priority score */}\n                              <ScoreRow\n                                icon={TrendingUp}\n                                label={t('suggestions.priorityScore')}\n                                score={suggestion.priority_score}\n                              />\n\n                              {/* Travel feasibility */}\n                              <ScoreRow\n                                icon={Car}\n                                label={t('suggestions.travelScore')}\n                                score={suggestion.travel_feasibility_score}\n                              />\n                            </div>\n                          </div>\n\n                          {/* Reason */}\n                          {(suggestion.reason_en || suggestion.reason_ar) && (\n                            <div className=\"p-3 bg-muted/50 rounded-lg\">\n                              <p className=\"text-xs text-muted-foreground\">\n                                {isRTL\n                                  ? suggestion.reason_ar || suggestion.reason_en\n                                  : suggestion.reason_en || suggestion.reason_ar}\n                              </p>\n                            </div>\n                          )}\n\n                          {/* Alternative venue */}\n                          {(suggestion.alternative_venue_en || suggestion.alternative_venue_ar) && (\n                            <div className=\"flex items-center gap-2 text-sm\">\n                              <MapPin className=\"h-4 w-4 text-muted-foreground\" />\n                              <span>\n                                {t('suggestions.alternativeVenue')}:{' '}\n                                <span className=\"font-medium\">\n                                  {isRTL\n                                    ? suggestion.alternative_venue_ar || suggestion.alternative_venue_en\n                                    : suggestion.alternative_venue_en || suggestion.alternative_venue_ar}\n                                </span>\n                              </span>\n                            </div>\n                          )}\n\n                          {/* Accept button */}\n                          {onAccept && !isAccepted && (\n                            <Button\n                              className=\"w-full sm:w-auto\"\n                              onClick={() => onAccept(suggestion)}\n                            >\n                              <CheckCircle2 className={cn('h-4 w-4', isRTL ? 'ms-2' : 'me-2')} />\n                              {t('suggestions.accept')}\n                            </Button>\n                          )}\n                        </motion.div>\n                      </CollapsibleContent>\n                    </div>\n                  </Collapsible>\n                </motion.div>\n              );\n            })}\n          </AnimatePresence>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n\ninterface ScoreRowProps {\n  icon: React.ElementType;\n  label: string;\n  score: number;\n}\n\nfunction ScoreRow({ icon: Icon, label, score }: ScoreRowProps) {\n  const percentage = Math.round(score * 100);\n\n  return (\n    <div className=\"flex items-center gap-2\">\n      <Icon className=\"h-3.5 w-3.5 text-muted-foreground shrink-0\" />\n      <span className=\"text-xs text-muted-foreground flex-1 min-w-0 truncate\">{label}</span>\n      <div className=\"w-24 shrink-0\">\n        <Progress value={percentage} className=\"h-1.5\" />\n      </div>\n      <span className=\"text-xs font-medium w-10 text-end\">{percentage}%</span>\n    </div>\n  );\n}\n\nexport default ReschedulingSuggestions;\n","// T053: CalendarEntryForm component\n// T128: Added support for person_dossier participants (User Story 7)\n// Feature: event-conflict-resolution - Added real-time conflict detection\nimport { useState, useEffect, useMemo, useCallback } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { useCreateCalendarEvent } from '@/hooks/useCreateCalendarEvent';\nimport { useUpdateCalendarEvent } from '@/hooks/useUpdateCalendarEvent';\nimport { useDossiers } from '@/hooks/useDossier';\nimport { useConflictCheck, useGenerateSuggestions } from '@/hooks/useCalendarConflicts';\nimport { Card } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Checkbox } from '@/components/ui/checkbox';\nimport { Label } from '@/components/ui/label';\nimport { Badge } from '@/components/ui/badge';\nimport { Avatar, AvatarFallback, AvatarImage } from '@/components/ui/avatar';\nimport { CalendarIcon, Clock, Users, X, Building2, Check, AlertTriangle } from 'lucide-react';\nimport {\n Command,\n CommandEmpty,\n CommandGroup,\n CommandInput,\n CommandItem,\n} from '@/components/ui/command';\nimport { Popover, PopoverContent, PopoverTrigger } from '@/components/ui/popover';\nimport { ConflictResolutionPanel, ReschedulingSuggestions } from './ConflictResolution';\nimport type { ConflictCheckRequest } from '@/types/calendar-conflict.types';\n\ninterface CalendarEntryFormProps {\n entryId?: string;\n initialData?: {\n entry_type?: string;\n title_en?: string;\n title_ar?: string;\n description_en?: string;\n description_ar?: string;\n start_datetime?: string;\n end_datetime?: string;\n all_day?: boolean;\n location?: string;\n recurrence_pattern?: string;\n reminder_minutes?: number;\n participants?: Array<{\n participant_type: 'person_dossier' | 'organization_dossier';\n participant_id: string;\n participant_name?: string;\n participant_photo?: string;\n }>;\n };\n linkedItemType?: string;\n linkedItemId?: string;\n onSuccess?: () => void;\n onCancel?: () => void;\n}\n\n/**\n * Extract initials from name (handles both English and Arabic)\n */\nfunction getInitials(name: string): string {\n const words = name.trim().split(/\\s+/).filter(w => w.length > 0);\n if (words.length === 0) return '??';\n if (words.length === 1) {\n return words[0]!.slice(0, 2).toUpperCase();\n }\n return (words[0]!.charAt(0) + words[words.length - 1]!.charAt(0)).toUpperCase();\n}\n\nexport function CalendarEntryForm({\n entryId,\n initialData,\n linkedItemType,\n linkedItemId,\n onSuccess,\n onCancel,\n}: CalendarEntryFormProps) {\n const { t, i18n } = useTranslation();\n const isRTL = i18n.language === 'ar';\n\n const [entryType, setEntryType] = useState(initialData?.entry_type || 'internal_meeting');\n const [titleEn, setTitleEn] = useState(initialData?.title_en || '');\n const [titleAr, setTitleAr] = useState(initialData?.title_ar || '');\n const [descriptionEn, setDescriptionEn] = useState(initialData?.description_en || '');\n const [descriptionAr, setDescriptionAr] = useState(initialData?.description_ar || '');\n const [startDatetime, setStartDatetime] = useState(initialData?.start_datetime || '');\n const [endDatetime, setEndDatetime] = useState(initialData?.end_datetime || '');\n const [allDay, setAllDay] = useState(initialData?.all_day || false);\n const [location, setLocation] = useState(initialData?.location || '');\n const [reminderMinutes, setReminderMinutes] = useState(initialData?.reminder_minutes?.toString() || '15');\n const [participants, setParticipants] = useState<Array<{\n participant_type: 'person_dossier' | 'organization_dossier';\n participant_id: string;\n participant_name?: string;\n participant_photo?: string;\n }>>(initialData?.participants || []);\n const [participantPopoverOpen, setParticipantPopoverOpen] = useState(false);\n const [showConflicts, setShowConflicts] = useState(true);\n const [showSuggestions, setShowSuggestions] = useState(false);\n\n const createEvent = useCreateCalendarEvent();\n const updateEvent = useUpdateCalendarEvent();\n const generateSuggestions = useGenerateSuggestions();\n\n // Query for person and organization dossiers for participant selection\n const { data: personDossiers } = useDossiers({ type: 'person', status: 'active' });\n const { data: orgDossiers } = useDossiers({ type: 'organization', status: 'active' });\n\n const isEditing = !!entryId;\n\n // Build conflict check request - memoized to prevent unnecessary rerenders\n const conflictCheckRequest = useMemo<ConflictCheckRequest | null>(() => {\n   if (!startDatetime) return null;\n\n   // Convert datetime-local format to ISO string\n   const startIso = new Date(startDatetime).toISOString();\n   const endIso = endDatetime ? new Date(endDatetime).toISOString() : new Date(new Date(startDatetime).getTime() + 60 * 60 * 1000).toISOString();\n\n   return {\n     event_id: entryId,\n     start_datetime: startIso,\n     end_datetime: endIso,\n     venue_en: location || undefined,\n     participant_ids: participants.map(p => p.participant_id),\n     check_travel_time: true,\n   };\n }, [entryId, startDatetime, endDatetime, location, participants]);\n\n // Real-time conflict checking with debounce\n const {\n   data: conflictData,\n   isLoading: isCheckingConflicts,\n } = useConflictCheck(conflictCheckRequest, {\n   enabled: !!startDatetime && showConflicts,\n   debounceMs: 800,\n });\n\n // Handle generating suggestions\n const handleGenerateSuggestions = useCallback((conflictId?: string) => {\n   if (!entryId && !startDatetime) return;\n\n   const durationMinutes = startDatetime && endDatetime\n     ? Math.round((new Date(endDatetime).getTime() - new Date(startDatetime).getTime()) / 60000)\n     : 60;\n\n   generateSuggestions.mutate({\n     event_id: entryId || 'new-event',\n     conflict_id: conflictId,\n     duration_minutes: durationMinutes,\n     must_include_participants: participants.map(p => p.participant_id),\n   });\n\n   setShowSuggestions(true);\n }, [entryId, startDatetime, endDatetime, participants, generateSuggestions]);\n\n // Apply a suggestion to the form\n const handleAcceptSuggestion = useCallback((suggestion: any) => {\n   if (suggestion.suggested_start) {\n     // Convert ISO to datetime-local format\n     const startDate = new Date(suggestion.suggested_start);\n     const localStart = new Date(startDate.getTime() - startDate.getTimezoneOffset() * 60000)\n       .toISOString()\n       .slice(0, 16);\n     setStartDatetime(localStart);\n   }\n\n   if (suggestion.suggested_end) {\n     const endDate = new Date(suggestion.suggested_end);\n     const localEnd = new Date(endDate.getTime() - endDate.getTimezoneOffset() * 60000)\n       .toISOString()\n       .slice(0, 16);\n     setEndDatetime(localEnd);\n   }\n\n   if (suggestion.alternative_venue_en) {\n     setLocation(suggestion.alternative_venue_en);\n   }\n\n   setShowSuggestions(false);\n }, []);\n\n const handleSubmit = async (e: React.FormEvent) => {\n e.preventDefault();\n\n if (!startDatetime) {\n alert(t('calendar.form.start_datetime_required'));\n return;\n }\n\n const eventData = {\n entry_type: entryType as any,\n title_en: titleEn || undefined,\n title_ar: titleAr || undefined,\n description_en: descriptionEn || undefined,\n description_ar: descriptionAr || undefined,\n start_datetime: startDatetime,\n end_datetime: endDatetime || undefined,\n all_day: allDay,\n location: location || undefined,\n linked_item_type: linkedItemType,\n linked_item_id: linkedItemId,\n reminder_minutes: parseInt(reminderMinutes) || 15,\n participants: participants.map(p => ({\n participant_type: p.participant_type,\n participant_id: p.participant_id,\n })),\n };\n\n try {\n if (isEditing) {\n await updateEvent.mutateAsync({\n entryId,\n ...eventData,\n });\n } else {\n await createEvent.mutateAsync(eventData);\n }\n\n onSuccess?.();\n } catch (err) {\n console.error('Failed to save calendar entry:', err);\n alert(t('calendar.form.save_failed'));\n }\n };\n\n const isPending = createEvent.isPending || updateEvent.isPending;\n\n return (\n <Card className=\"p-4 sm:p-6\" dir={isRTL ? 'rtl' : 'ltr'}>\n <div className=\"flex items-center gap-2 mb-6\">\n <CalendarIcon className=\"h-5 w-5\" />\n <h2 className=\"text-lg sm:text-xl font-semibold\">\n {isEditing ? t('calendar.form.edit_event') : t('calendar.form.create_event')}\n </h2>\n </div>\n\n <form onSubmit={handleSubmit} className=\"flex flex-col gap-4\">\n {/* Event Type */}\n <div className=\"flex flex-col gap-2\">\n <Label htmlFor=\"entry-type\">{t('calendar.form.entry_type')}</Label>\n <Select value={entryType} onValueChange={setEntryType} disabled={isPending}>\n <SelectTrigger id=\"entry-type\">\n <SelectValue />\n </SelectTrigger>\n <SelectContent>\n <SelectItem value=\"internal_meeting\">{t('calendar.types.internal_meeting')}</SelectItem>\n <SelectItem value=\"deadline\">{t('calendar.types.deadline')}</SelectItem>\n <SelectItem value=\"reminder\">{t('calendar.types.reminder')}</SelectItem>\n <SelectItem value=\"holiday\">{t('calendar.types.holiday')}</SelectItem>\n <SelectItem value=\"training\">{t('calendar.types.training')}</SelectItem>\n <SelectItem value=\"review\">{t('calendar.types.review')}</SelectItem>\n <SelectItem value=\"other\">{t('calendar.types.other')}</SelectItem>\n </SelectContent>\n </Select>\n </div>\n\n {/* Titles */}\n <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n <div className=\"flex flex-col gap-2\">\n <Label htmlFor=\"title-en\">{t('calendar.form.title_en')}</Label>\n <Input\n id=\"title-en\"\n value={titleEn}\n onChange={(e) => setTitleEn(e.target.value)}\n placeholder={t('calendar.form.title_en_placeholder')}\n disabled={isPending}\n />\n </div>\n\n <div className=\"flex flex-col gap-2\">\n <Label htmlFor=\"title-ar\">{t('calendar.form.title_ar')}</Label>\n <Input\n id=\"title-ar\"\n value={titleAr}\n onChange={(e) => setTitleAr(e.target.value)}\n placeholder={t('calendar.form.title_ar_placeholder')}\n disabled={isPending}\n />\n </div>\n </div>\n\n {/* Descriptions */}\n <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n <div className=\"flex flex-col gap-2\">\n <Label htmlFor=\"desc-en\">{t('calendar.form.description_en')}</Label>\n <Textarea\n id=\"desc-en\"\n value={descriptionEn}\n onChange={(e) => setDescriptionEn(e.target.value)}\n placeholder={t('calendar.form.description_en_placeholder')}\n rows={3}\n disabled={isPending}\n />\n </div>\n\n <div className=\"flex flex-col gap-2\">\n <Label htmlFor=\"desc-ar\">{t('calendar.form.description_ar')}</Label>\n <Textarea\n id=\"desc-ar\"\n value={descriptionAr}\n onChange={(e) => setDescriptionAr(e.target.value)}\n placeholder={t('calendar.form.description_ar_placeholder')}\n rows={3}\n disabled={isPending}\n />\n </div>\n </div>\n\n {/* Date & Time */}\n <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n <div className=\"flex flex-col gap-2\">\n <Label htmlFor=\"start-datetime\" className=\"flex items-center gap-1\">\n <Clock className=\"h-4 w-4\" />\n {t('calendar.form.start_datetime')}\n <span className=\"text-destructive\">*</span>\n </Label>\n <Input\n id=\"start-datetime\"\n type=\"datetime-local\"\n value={startDatetime}\n onChange={(e) => setStartDatetime(e.target.value)}\n required\n disabled={isPending}\n />\n </div>\n\n <div className=\"flex flex-col gap-2\">\n <Label htmlFor=\"end-datetime\">{t('calendar.form.end_datetime')}</Label>\n <Input\n id=\"end-datetime\"\n type=\"datetime-local\"\n value={endDatetime}\n onChange={(e) => setEndDatetime(e.target.value)}\n disabled={isPending}\n />\n </div>\n </div>\n\n {/* All Day & Location */}\n <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n <div className=\"flex items-center gap-2\">\n <Checkbox\n id=\"all-day\"\n checked={allDay}\n onCheckedChange={(checked) => setAllDay(checked as boolean)}\n disabled={isPending}\n />\n <Label htmlFor=\"all-day\" className=\"cursor-pointer\">\n {t('calendar.form.all_day')}\n </Label>\n </div>\n\n <div className=\"flex flex-col gap-2\">\n <Label htmlFor=\"location\">{t('calendar.form.location')}</Label>\n <Input\n id=\"location\"\n value={location}\n onChange={(e) => setLocation(e.target.value)}\n placeholder={t('calendar.form.location_placeholder')}\n disabled={isPending}\n />\n </div>\n </div>\n\n {/* Participants (T128: Support for person_dossier and organization_dossier) */}\n <div className=\"flex flex-col gap-2\">\n <div className=\"flex items-center gap-2\">\n <Users className=\"h-4 w-4\" />\n <Label>{t('calendar.form.participants')}</Label>\n </div>\n\n {/* Selected participants */}\n {participants.length > 0 && (\n <div className=\"flex flex-wrap gap-2 mb-2\">\n {participants.map((participant) => (\n <Badge\n key={participant.participant_id}\n variant=\"secondary\"\n className=\"flex items-center gap-2 ps-2 pe-1 py-1\"\n >\n {participant.participant_type === 'person_dossier' && participant.participant_photo ? (\n <Avatar className=\"h-5 w-5\">\n <AvatarImage src={participant.participant_photo} alt={participant.participant_name || ''} />\n <AvatarFallback className=\"text-xs\">\n {getInitials(participant.participant_name || participant.participant_id)}\n </AvatarFallback>\n </Avatar>\n ) : (\n <div className=\"h-5 w-5 rounded-full bg-primary/10 flex items-center justify-center\">\n {participant.participant_type === 'person_dossier' ? (\n <Users className=\"h-3 w-3\" />\n ) : (\n <Building2 className=\"h-3 w-3\" />\n )}\n </div>\n )}\n <span className=\"text-xs\">{participant.participant_name || participant.participant_id}</span>\n <Button\n type=\"button\"\n variant=\"ghost\"\n size=\"sm\"\n className=\"h-5 w-5 p-0 hover:bg-transparent\"\n onClick={() => {\n setParticipants(participants.filter(p => p.participant_id !== participant.participant_id));\n }}\n disabled={isPending}\n >\n <X className=\"h-3 w-3\" />\n </Button>\n </Badge>\n ))}\n </div>\n )}\n\n {/* Add participant popover */}\n <Popover open={participantPopoverOpen} onOpenChange={setParticipantPopoverOpen}>\n <PopoverTrigger asChild>\n <Button\n type=\"button\"\n variant=\"outline\"\n className=\"w-full justify-start\"\n disabled={isPending}\n >\n <Users className=\"h-4 w-4 me-2\" />\n {t('calendar.form.add_participant')}\n </Button>\n </PopoverTrigger>\n <PopoverContent className=\"w-full sm:w-80 p-0\" align={isRTL ? 'end' : 'start'}>\n <Command>\n <CommandInput placeholder={t('calendar.form.search_participants')} />\n <CommandEmpty>{t('calendar.form.no_participants_found')}</CommandEmpty>\n\n {/* Person dossiers */}\n {personDossiers && personDossiers.length > 0 && (\n <CommandGroup heading={t('calendar.form.people')}>\n {personDossiers.map((person) => {\n const displayName = isRTL ? person.name_ar : person.name_en;\n const isSelected = participants.some(p => p.participant_id === person.id);\n\n return (\n <CommandItem\n key={person.id}\n value={displayName || person.id}\n onSelect={() => {\n if (!isSelected) {\n setParticipants([\n ...participants,\n {\n participant_type: 'person_dossier',\n participant_id: person.id,\n participant_name: displayName || person.id,\n participant_photo: (person.extension as any)?.photo_url,\n },\n ]);\n }\n setParticipantPopoverOpen(false);\n }}\n disabled={isSelected}\n >\n <div className=\"flex items-center gap-2 flex-1\">\n {(person.extension as any)?.photo_url ? (\n <Avatar className=\"h-6 w-6\">\n <AvatarImage src={(person.extension as any).photo_url} alt={displayName || ''} />\n <AvatarFallback className=\"text-xs\">\n {displayName ? getInitials(displayName) : 'VIP'}\n </AvatarFallback>\n </Avatar>\n ) : (\n <div className=\"h-6 w-6 rounded-full bg-teal-100 dark:bg-teal-900 flex items-center justify-center\">\n <Users className=\"h-3 w-3 text-teal-800 dark:text-teal-300\" />\n </div>\n )}\n <div className=\"flex flex-col\">\n <span className=\"text-sm\">{displayName}</span>\n {(person.extension as any)?.title && (\n <span className=\"text-xs text-muted-foreground\">\n {(person.extension as any).title}\n </span>\n )}\n </div>\n </div>\n {isSelected && <Check className=\"h-4 w-4\" />}\n </CommandItem>\n );\n })}\n </CommandGroup>\n )}\n\n {/* Organization dossiers */}\n {orgDossiers && orgDossiers.length > 0 && (\n <CommandGroup heading={t('calendar.form.organizations')}>\n {orgDossiers.map((org) => {\n const displayName = isRTL ? org.name_ar : org.name_en;\n const isSelected = participants.some(p => p.participant_id === org.id);\n\n return (\n <CommandItem\n key={org.id}\n value={displayName || org.id}\n onSelect={() => {\n if (!isSelected) {\n setParticipants([\n ...participants,\n {\n participant_type: 'organization_dossier',\n participant_id: org.id,\n participant_name: displayName || org.id,\n },\n ]);\n }\n setParticipantPopoverOpen(false);\n }}\n disabled={isSelected}\n >\n <div className=\"flex items-center gap-2 flex-1\">\n <div className=\"h-6 w-6 rounded-full bg-purple-100 dark:bg-purple-900 flex items-center justify-center\">\n <Building2 className=\"h-3 w-3 text-purple-800 dark:text-purple-300\" />\n </div>\n <span className=\"text-sm\">{displayName}</span>\n </div>\n {isSelected && <Check className=\"h-4 w-4\" />}\n </CommandItem>\n );\n })}\n </CommandGroup>\n )}\n </Command>\n </PopoverContent>\n </Popover>\n </div>\n\n {/* Reminder */}\n <div className=\"flex flex-col gap-2\">\n <Label htmlFor=\"reminder\">{t('calendar.form.reminder')}</Label>\n <Select value={reminderMinutes} onValueChange={setReminderMinutes} disabled={isPending}>\n <SelectTrigger id=\"reminder\">\n <SelectValue />\n </SelectTrigger>\n <SelectContent>\n <SelectItem value=\"0\">{t('calendar.form.no_reminder')}</SelectItem>\n <SelectItem value=\"5\">5 {t('calendar.form.minutes_before')}</SelectItem>\n <SelectItem value=\"15\">15 {t('calendar.form.minutes_before')}</SelectItem>\n <SelectItem value=\"30\">30 {t('calendar.form.minutes_before')}</SelectItem>\n <SelectItem value=\"60\">1 {t('calendar.form.hour_before')}</SelectItem>\n <SelectItem value=\"1440\">1 {t('calendar.form.day_before')}</SelectItem>\n </SelectContent>\n </Select>\n </div>\n\n {/* Conflict Detection Panel */}\n {showConflicts && (conflictData || isCheckingConflicts) && (\n   <ConflictResolutionPanel\n     conflicts={conflictData || null}\n     isLoading={isCheckingConflicts}\n     onGenerateSuggestions={handleGenerateSuggestions}\n     onDismiss={() => setShowConflicts(false)}\n     showWarnings={true}\n     className=\"mt-4\"\n   />\n )}\n\n {/* Rescheduling Suggestions Panel */}\n {showSuggestions && (\n   <ReschedulingSuggestions\n     suggestions={generateSuggestions.data?.suggestions || []}\n     isLoading={generateSuggestions.isPending}\n     onAccept={handleAcceptSuggestion}\n     onRefresh={() => handleGenerateSuggestions()}\n     eventId={entryId}\n     className=\"mt-4\"\n   />\n )}\n\n {/* Conflict Warning Badge - shown when conflicts exist but panel is dismissed */}\n {!showConflicts && conflictData?.has_conflicts && (\n   <Button\n     type=\"button\"\n     variant=\"outline\"\n     className=\"w-full justify-start border-warning/50 bg-warning/10 hover:bg-warning/20\"\n     onClick={() => setShowConflicts(true)}\n   >\n     <AlertTriangle className=\"h-4 w-4 text-warning me-2\" />\n     <span className=\"text-sm\">\n       {t('calendar.conflicts.hasConflicts', { count: conflictData.total_conflicts })}\n     </span>\n   </Button>\n )}\n\n {/* Action Buttons */}\n <div className=\"flex flex-col-reverse sm:flex-row gap-2 justify-end pt-4\">\n {onCancel && (\n <Button\n type=\"button\"\n variant=\"outline\"\n onClick={onCancel}\n disabled={isPending}\n className=\"w-full sm:w-auto\"\n >\n {t('common.cancel')}\n </Button>\n )}\n <Button\n type=\"submit\"\n disabled={isPending}\n className=\"w-full sm:w-auto\"\n >\n {isPending\n ? t('common.saving')\n : isEditing\n ? t('calendar.form.update_event')\n : t('calendar.form.create_event')}\n </Button>\n </div>\n </form>\n </Card>\n );\n}\n","import { useTranslation } from 'react-i18next';\nimport { createFileRoute, useNavigate } from '@tanstack/react-router';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { ArrowLeft } from 'lucide-react';\nimport { CalendarEntryForm } from '@/components/Calendar/CalendarEntryForm';\n\nexport const Route = createFileRoute('/_protected/calendar/new')({\n component: NewCalendarEntryPage,\n});\n\nfunction NewCalendarEntryPage() {\n const { t, i18n } = useTranslation();\n const isRTL = i18n.language === 'ar';\n const navigate = useNavigate();\n\n const handleSuccess = () => {\n navigate({ to: '/calendar' });\n };\n\n const handleCancel = () => {\n navigate({ to: '/calendar' });\n };\n\n return (\n <div className=\"container mx-auto px-4 sm:px-6 lg:px-8 py-6 max-w-4xl\" dir={isRTL ? 'rtl' : 'ltr'}>\n {/* Breadcrumb */}\n <div className=\"mb-6\">\n <Button\n variant=\"ghost\"\n size=\"sm\"\n onClick={handleCancel}\n className=\"mb-2\"\n >\n <ArrowLeft className={`h-4 w-4 ${isRTL ? 'rotate-180 ms-2' : 'me-2'}`} />\n {t('calendar.new_event.back_to_calendar')}\n </Button>\n <h1 className=\"text-2xl sm:text-3xl font-bold text-start\">\n {t('calendar.new_event.title')}\n </h1>\n <p className=\"text-sm sm:text-base text-muted-foreground mt-1 text-start\">\n {t('calendar.new_event.description')}\n </p>\n </div>\n\n {/* Form Card */}\n <Card>\n <CardHeader>\n <CardTitle className=\"text-base sm:text-lg text-start\">\n {t('calendar.new_event.form_title')}\n </CardTitle>\n </CardHeader>\n <CardContent>\n <CalendarEntryForm\n onSuccess={handleSuccess}\n onCancel={handleCancel}\n />\n </CardContent>\n </Card>\n </div>\n );\n}\n"],"names":["useCreateCalendarEvent","queryClient","useQueryClient","useMutation","input","session","supabase","response","error","useUpdateCalendarEvent","entryId","updates","CONFLICTS_BASE_URL","getAuthHeaders","handleResponse","useConflictCheck","request","options","enabled","debounceMs","useQuery","headers","useGenerateSuggestions","_","variables","SEVERITY_COLORS","CONFLICT_TYPE_ICONS","Building2","Users","UserCog","Calendar","Package","Clock","SEVERITY_ICONS","AlertTriangle","AlertCircle","Info","ConflictResolutionPanel","conflicts","isLoading","onResolve","onGenerateSuggestions","onDismiss","showWarnings","className","t","i18n","useTranslation","isRTL","jsx","Card","cn","jsxs","hasHighSeverity","Badge","Button","X","AnimatePresence","conflict","index","ConflictItem","warning","idx","Sparkles","TypeIcon","SeverityIcon","colors","formatTime","datetime","formatDate","motion","TooltipProvider","Tooltip","TooltipTrigger","TooltipContent","ChevronRight","ReschedulingSuggestions","suggestions","onAccept","onRefresh","eventId","expandedIndex","setExpandedIndex","useState","formatDateTime","date","getScoreColor","score","getScoreBg","CardContent","Loader2","RefreshCw","CardHeader","CardTitle","suggestion","start","end","overallScore","isExpanded","isAccepted","Collapsible","CollapsibleTrigger","TrendingUp","CheckCircle2","ChevronUp","ChevronDown","CollapsibleContent","ScoreRow","Car","MapPin","Icon","label","percentage","Progress","getInitials","name","words","w","CalendarEntryForm","initialData","linkedItemType","linkedItemId","onSuccess","onCancel","entryType","setEntryType","titleEn","setTitleEn","titleAr","setTitleAr","descriptionEn","setDescriptionEn","descriptionAr","setDescriptionAr","startDatetime","setStartDatetime","endDatetime","setEndDatetime","allDay","setAllDay","location","setLocation","reminderMinutes","setReminderMinutes","participants","setParticipants","participantPopoverOpen","setParticipantPopoverOpen","showConflicts","setShowConflicts","showSuggestions","setShowSuggestions","createEvent","updateEvent","generateSuggestions","personDossiers","useDossiers","orgDossiers","isEditing","conflictCheckRequest","useMemo","startIso","endIso","p","conflictData","isCheckingConflicts","handleGenerateSuggestions","useCallback","conflictId","durationMinutes","handleAcceptSuggestion","startDate","localStart","endDate","localEnd","handleSubmit","e","eventData","err","isPending","CalendarIcon","Label","Select","SelectTrigger","SelectValue","SelectContent","SelectItem","Input","Textarea","Checkbox","checked","participant","Avatar","AvatarImage","AvatarFallback","Popover","PopoverTrigger","PopoverContent","Command","CommandInput","CommandEmpty","CommandGroup","person","displayName","isSelected","CommandItem","Check","org","NewCalendarEntryPage","language","navigate","useNavigate","handleSuccess","to","handleCancel","ArrowLeft"],"mappings":"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"}