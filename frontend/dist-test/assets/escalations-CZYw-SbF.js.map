{"version":3,"file":"escalations-CZYw-SbF.js","sources":["../../src/components/assignments/EscalationDashboard.tsx","../../src/pages/Escalations.tsx","../../src/routes/_protected/tasks/escalations.tsx?tsr-split=component"],"sourcesContent":["import { useState, useMemo } from 'react';\nimport { useQuery } from '@tanstack/react-query';\nimport { useTranslation } from 'react-i18next';\nimport { supabase } from '@/lib/supabase';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Calendar } from '@/components/ui/calendar';\nimport { Popover, PopoverContent, PopoverTrigger } from '@/components/ui/popover';\nimport { Button } from '@/components/ui/button';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { Alert, AlertDescription } from '@/components/ui/alert';\nimport { format } from 'date-fns';\nimport { CalendarIcon, TrendingUp, AlertTriangle, Users, FileText } from 'lucide-react';\nimport { cn } from '@/lib/utils';\n\n/**\n * EscalationDashboard Component - T083\n * Displays escalation statistics and reporting data\n *\n * Features:\n * - Summary statistics (total, avg/day, most common reason)\n * - Time series chart\n * - Breakdowns by unit, assignee, work type\n * - Date range filtering\n * - Bilingual support (AR/EN)\n * - Accessibility (ARIA labels, keyboard navigation)\n */\n\ninterface EscalationReport {\n summary: {\n total_escalations: number;\n avg_escalations_per_day: number;\n most_common_reason: string;\n affected_assignments: number;\n };\n time_series: Array<{\n date: string;\n count: number;\n reason_breakdown: { [reason: string]: number };\n }>;\n by_unit: Array<{\n unit_id: string;\n unit_name: string;\n escalation_count: number;\n percentage: number;\n }>;\n by_assignee: Array<{\n assignee_id: string;\n assignee_name: string;\n escalation_count: number;\n total_assignments: number;\n escalation_rate: number;\n }>;\n by_work_type: Array<{\n work_item_type: string;\n escalation_count: number;\n percentage: number;\n }>;\n metadata: {\n start_date: string;\n end_date: string;\n filters: {\n unit_id?: string;\n assignee_id?: string;\n work_item_type?: string;\n };\n group_by: string;\n };\n}\n\nexport function EscalationDashboard() {\n const { t, i18n } = useTranslation('assignments');\n const isRTL = i18n.language === 'ar';\n\n // State for filters\n const [dateRange, setDateRange] = useState<{ start: Date; end: Date }>({\n start: new Date(Date.now() - 30 * 24 * 60 * 60 * 1000), // 30 days ago\n end: new Date(),\n });\n const [groupBy, setGroupBy] = useState<'day' | 'week'>('day');\n const [unitFilter] = useState<string>('');\n const [workTypeFilter] = useState<string>('');\n\n // Fetch escalation report data\n const { data: report, isLoading, error } = useQuery<EscalationReport>({\n queryKey: ['escalation-report', dateRange, groupBy, unitFilter, workTypeFilter],\n queryFn: async () => {\n const params = new URLSearchParams({\n start_date: dateRange.start.toISOString(),\n end_date: dateRange.end.toISOString(),\n group_by: groupBy,\n });\n\n if (unitFilter) params.append('unit_id', unitFilter);\n if (workTypeFilter) params.append('work_item_type', workTypeFilter);\n\n const { data: { session } } = await supabase.auth.getSession();\n if (!session?.access_token) throw new Error('Not authenticated');\n\n const response = await fetch(\n `${import.meta.env.VITE_SUPABASE_URL}/functions/v1/escalations-report?${params}`,\n {\n headers: {\n 'Authorization': `Bearer ${session.access_token}`,\n },\n }\n );\n\n if (!response.ok) {\n throw new Error('Failed to fetch escalation report');\n }\n\n return response.json();\n },\n refetchInterval: 60000, // Refetch every minute\n });\n\n // Calculate trend (comparing first half vs second half of time series)\n const trend = useMemo(() => {\n if (!report?.time_series || report.time_series.length < 2) return null;\n\n const midpoint = Math.floor(report.time_series.length / 2);\n const firstHalf = report.time_series.slice(0, midpoint);\n const secondHalf = report.time_series.slice(midpoint);\n\n const firstAvg = firstHalf.reduce((sum, d) => sum + d.count, 0) / firstHalf.length;\n const secondAvg = secondHalf.reduce((sum, d) => sum + d.count, 0) / secondHalf.length;\n\n const change = ((secondAvg - firstAvg) / firstAvg) * 100;\n\n return {\n direction: change > 5 ? 'up' : change < -5 ? 'down' : 'stable',\n percentage: Math.abs(change).toFixed(1),\n };\n }, [report?.time_series]);\n\n if (error) {\n return (\n <Alert variant=\"destructive\">\n <AlertTriangle className=\"h-4 w-4\" />\n <AlertDescription>\n {t('escalation_dashboard.error_loading')}\n </AlertDescription>\n </Alert>\n );\n }\n\n return (\n <div className={cn('space-y-6', isRTL && 'rtl')}>\n {/* Header */}\n <div className=\"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between\">\n <div>\n <h1 className=\"text-3xl font-bold tracking-tight\">\n {t('escalation_dashboard.title')}\n </h1>\n <p className=\"text-muted-foreground\">\n {t('escalation_dashboard.description')}\n </p>\n </div>\n\n {/* Filters */}\n <div className=\"flex flex-wrap gap-2\">\n {/* Date Range Picker */}\n <Popover>\n <PopoverTrigger asChild>\n <Button\n variant=\"outline\"\n className={cn(\n 'justify-start text-start font-normal',\n !dateRange && 'text-muted-foreground'\n )}\n >\n <CalendarIcon className=\"me-2 h-4 w-4\" />\n {dateRange.start && dateRange.end ? (\n <>\n {format(dateRange.start, 'MMM dd')} - {format(dateRange.end, 'MMM dd, yyyy')}\n </>\n ) : (\n <span>{t('escalation_dashboard.select_date_range')}</span>\n )}\n </Button>\n </PopoverTrigger>\n <PopoverContent className=\"w-auto p-0\" align=\"start\">\n <Calendar\n mode=\"range\"\n selected={{ from: dateRange.start, to: dateRange.end }}\n onSelect={(range) => {\n if (range?.from && range?.to) {\n setDateRange({ start: range.from, end: range.to });\n }\n }}\n initialFocus\n />\n </PopoverContent>\n </Popover>\n\n {/* Group By */}\n <Select value={groupBy} onValueChange={(v) => setGroupBy(v as 'day' | 'week')}>\n <SelectTrigger className=\"w-32\">\n <SelectValue />\n </SelectTrigger>\n <SelectContent>\n <SelectItem value=\"day\">{t('escalation_dashboard.group_by_day')}</SelectItem>\n <SelectItem value=\"week\">{t('escalation_dashboard.group_by_week')}</SelectItem>\n </SelectContent>\n </Select>\n </div>\n </div>\n\n {/* Summary Cards */}\n <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-4\">\n <Card>\n <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n <CardTitle className=\"text-sm font-medium\">\n {t('escalation_dashboard.total_escalations')}\n </CardTitle>\n <AlertTriangle className=\"h-4 w-4 text-destructive\" />\n </CardHeader>\n <CardContent>\n <div className=\"text-2xl font-bold\">\n {isLoading ? '...' : report?.summary.total_escalations.toLocaleString()}\n </div>\n <p className=\"text-xs text-muted-foreground mt-1\">\n {!isLoading && trend && (\n <span className={cn(\n 'flex items-center gap-1',\n trend.direction === 'up' && 'text-destructive',\n trend.direction === 'down' && 'text-green-600'\n )}>\n {trend.direction === 'up' ? '↑' : trend.direction === 'down' ? '↓' : '→'}\n {trend.percentage}% {t('escalation_dashboard.from_previous_period')}\n </span>\n )}\n </p>\n </CardContent>\n </Card>\n\n <Card>\n <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n <CardTitle className=\"text-sm font-medium\">\n {t('escalation_dashboard.avg_per_day')}\n </CardTitle>\n <TrendingUp className=\"h-4 w-4 text-muted-foreground\" />\n </CardHeader>\n <CardContent>\n <div className=\"text-2xl font-bold\">\n {isLoading ? '...' : report?.summary.avg_escalations_per_day.toFixed(1)}\n </div>\n </CardContent>\n </Card>\n\n <Card>\n <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n <CardTitle className=\"text-sm font-medium\">\n {t('escalation_dashboard.most_common_reason')}\n </CardTitle>\n <FileText className=\"h-4 w-4 text-muted-foreground\" />\n </CardHeader>\n <CardContent>\n <div className=\"text-lg font-medium\">\n {isLoading ? '...' : t(`escalation_dashboard.reason.${report?.summary.most_common_reason}`)}\n </div>\n </CardContent>\n </Card>\n\n <Card>\n <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n <CardTitle className=\"text-sm font-medium\">\n {t('escalation_dashboard.affected_assignments')}\n </CardTitle>\n <Users className=\"h-4 w-4 text-muted-foreground\" />\n </CardHeader>\n <CardContent>\n <div className=\"text-2xl font-bold\">\n {isLoading ? '...' : report?.summary.affected_assignments.toLocaleString()}\n </div>\n </CardContent>\n </Card>\n </div>\n\n {/* Detailed Analytics */}\n <Tabs defaultValue=\"timeline\" className=\"space-y-4\">\n <TabsList>\n <TabsTrigger value=\"timeline\">{t('escalation_dashboard.timeline')}</TabsTrigger>\n <TabsTrigger value=\"units\">{t('escalation_dashboard.by_unit')}</TabsTrigger>\n <TabsTrigger value=\"staff\">{t('escalation_dashboard.by_staff')}</TabsTrigger>\n <TabsTrigger value=\"work_type\">{t('escalation_dashboard.by_work_type')}</TabsTrigger>\n </TabsList>\n\n <TabsContent value=\"timeline\" className=\"space-y-4\">\n <Card>\n <CardHeader>\n <CardTitle>{t('escalation_dashboard.escalation_timeline')}</CardTitle>\n <CardDescription>\n {t('escalation_dashboard.escalation_timeline_description')}\n </CardDescription>\n </CardHeader>\n <CardContent>\n {isLoading ? (\n <div className=\"h-64 flex items-center justify-center\">\n <p className=\"text-muted-foreground\">{t('common.loading')}</p>\n </div>\n ) : (\n <div className=\"space-y-2\">\n {report?.time_series.map((item) => (\n <div\n key={item.date}\n className=\"flex items-center gap-4 p-3 rounded-lg hover:bg-muted/50 transition-colors\"\n >\n <div className=\"w-24 text-sm font-medium\">\n {format(new Date(item.date), 'MMM dd')}\n </div>\n <div className=\"flex-1\">\n <div\n className=\"h-6 bg-destructive/20 rounded-full overflow-hidden\"\n style={{\n width: `${Math.min(100, (item.count / (report.summary.total_escalations / report.time_series.length)) * 100)}%`,\n }}\n >\n <div className=\"h-full bg-destructive rounded-full\" />\n </div>\n </div>\n <div className=\"w-12 text-end font-semibold\">\n {item.count}\n </div>\n </div>\n ))}\n </div>\n )}\n </CardContent>\n </Card>\n </TabsContent>\n\n <TabsContent value=\"units\" className=\"space-y-4\">\n <Card>\n <CardHeader>\n <CardTitle>{t('escalation_dashboard.by_unit')}</CardTitle>\n <CardDescription>\n {t('escalation_dashboard.by_unit_description')}\n </CardDescription>\n </CardHeader>\n <CardContent>\n <div className=\"space-y-3\">\n {isLoading ? (\n <p className=\"text-muted-foreground\">{t('common.loading')}</p>\n ) : (\n report?.by_unit.map((unit) => (\n <div key={unit.unit_id} className=\"flex items-center gap-4\">\n <div className=\"flex-1\">\n <div className=\"font-medium\">{unit.unit_name}</div>\n <div className=\"text-sm text-muted-foreground\">\n {unit.escalation_count} {t('escalation_dashboard.escalations')} ({unit.percentage.toFixed(1)}%)\n </div>\n </div>\n <div\n className=\"h-2 bg-destructive rounded-full\"\n style={{ width: `${unit.percentage}%`, minWidth: '20px' }}\n />\n </div>\n ))\n )}\n </div>\n </CardContent>\n </Card>\n </TabsContent>\n\n <TabsContent value=\"staff\" className=\"space-y-4\">\n <Card>\n <CardHeader>\n <CardTitle>{t('escalation_dashboard.by_staff')}</CardTitle>\n <CardDescription>\n {t('escalation_dashboard.by_staff_description')}\n </CardDescription>\n </CardHeader>\n <CardContent>\n <div className=\"space-y-3\">\n {isLoading ? (\n <p className=\"text-muted-foreground\">{t('common.loading')}</p>\n ) : (\n report?.by_assignee.slice(0, 10).map((assignee) => (\n <div key={assignee.assignee_id} className=\"flex items-center justify-between p-3 rounded-lg hover:bg-muted/50\">\n <div>\n <div className=\"font-medium\">{assignee.assignee_name}</div>\n <div className=\"text-sm text-muted-foreground\">\n {assignee.escalation_count} / {assignee.total_assignments} {t('escalation_dashboard.assignments')}\n </div>\n </div>\n <div className={cn(\n 'text-sm font-semibold px-2 py-1 rounded',\n assignee.escalation_rate > 20 && 'bg-destructive/20 text-destructive',\n assignee.escalation_rate <= 20 && assignee.escalation_rate > 10 && 'bg-yellow-500/20 text-yellow-700',\n assignee.escalation_rate <= 10 && 'bg-green-500/20 text-green-700'\n )}>\n {assignee.escalation_rate.toFixed(1)}%\n </div>\n </div>\n ))\n )}\n </div>\n </CardContent>\n </Card>\n </TabsContent>\n\n <TabsContent value=\"work_type\" className=\"space-y-4\">\n <Card>\n <CardHeader>\n <CardTitle>{t('escalation_dashboard.by_work_type')}</CardTitle>\n <CardDescription>\n {t('escalation_dashboard.by_work_type_description')}\n </CardDescription>\n </CardHeader>\n <CardContent>\n <div className=\"space-y-3\">\n {isLoading ? (\n <p className=\"text-muted-foreground\">{t('common.loading')}</p>\n ) : (\n report?.by_work_type.map((workType) => (\n <div key={workType.work_item_type} className=\"flex items-center gap-4\">\n <div className=\"flex-1\">\n <div className=\"font-medium capitalize\">{workType.work_item_type}</div>\n <div className=\"text-sm text-muted-foreground\">\n {workType.escalation_count} {t('escalation_dashboard.escalations')} ({workType.percentage.toFixed(1)}%)\n </div>\n </div>\n <div\n className=\"h-2 bg-destructive rounded-full\"\n style={{ width: `${workType.percentage}%`, minWidth: '20px' }}\n />\n </div>\n ))\n )}\n </div>\n </CardContent>\n </Card>\n </TabsContent>\n </Tabs>\n </div>\n );\n}\n","import React from 'react'\nimport { useTranslation } from 'react-i18next'\nimport { EscalationDashboard } from '../components/assignments/EscalationDashboard'\nimport { Alert, AlertDescription } from '../components/ui/alert'\nimport { Shield } from 'lucide-react'\n\nexport function EscalationsPage() {\n const { t } = useTranslation()\n\n return (\n <div className=\"container mx-auto space-y-6 p-6\">\n {/* Header */}\n <div className=\"flex items-center justify-between\">\n <div>\n <h1 className=\"text-3xl font-bold\">{t('assignments.escalations.title')}</h1>\n <p className=\"mt-1 text-muted-foreground\">\n {t('assignments.escalations.description')}\n </p>\n </div>\n </div>\n\n {/* Info Alert */}\n <Alert>\n <Shield className=\"size-4\" />\n <AlertDescription>\n {t('assignments.escalations.info')}\n </AlertDescription>\n </Alert>\n\n {/* Dashboard */}\n <EscalationDashboard />\n </div>\n )\n}\n","import { createFileRoute } from '@tanstack/react-router'\nimport { EscalationsPage } from '../../../pages/Escalations'\n\nexport const Route = createFileRoute('/_protected/tasks/escalations')({\n component: EscalationsPage,\n})\n"],"names":["EscalationDashboard","t","i18n","useTranslation","isRTL","dateRange","setDateRange","useState","groupBy","setGroupBy","unitFilter","workTypeFilter","report","isLoading","error","useQuery","params","session","supabase","response","trend","useMemo","midpoint","firstHalf","secondHalf","firstAvg","sum","d","change","jsxs","Alert","jsx","AlertTriangle","AlertDescription","cn","Popover","PopoverTrigger","Button","CalendarIcon","Fragment","format","PopoverContent","Calendar","range","Select","v","SelectTrigger","SelectValue","SelectContent","SelectItem","Card","CardHeader","CardTitle","CardContent","TrendingUp","FileText","Users","Tabs","TabsList","TabsTrigger","TabsContent","CardDescription","item","unit","assignee","workType","EscalationsPage","Shield","SplitComponent"],"mappings":"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"}