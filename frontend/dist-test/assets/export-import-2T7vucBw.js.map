{"version":3,"file":"export-import-2T7vucBw.js","sources":["../../src/hooks/useExportData.ts","../../src/components/export-import/ExportDialog.tsx","../../src/hooks/useImportData.ts","../../src/components/export-import/ImportValidationResults.tsx","../../src/components/export-import/ImportDialog.tsx","../../src/pages/export-import/ExportImportPage.tsx","../../src/routes/_protected/export-import.tsx?tsr-split=component"],"sourcesContent":["/**\n * useExportData Hook\n * Feature: export-import-templates\n *\n * Hook for exporting entity data to CSV, XLSX, or JSON formats.\n * Supports template generation and progress tracking.\n */\n\nimport { useState, useCallback } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { toast } from 'sonner';\nimport * as ExcelJS from 'exceljs';\nimport type {\n  ExportRequest,\n  ExportResponse,\n  ExportProgress,\n  TemplateDownloadRequest,\n  UseExportDataOptions,\n  UseExportDataReturn,\n  ExportableEntityType,\n} from '@/types/export-import.types';\n\nconst SUPABASE_URL = import.meta.env.VITE_SUPABASE_URL;\n\n// Entity templates for download template functionality\nconst ENTITY_TEMPLATES: Record<ExportableEntityType, { columns: Array<{ field: string; header: string; headerAr: string; required: boolean; example?: string }> }> = {\n  dossier: {\n    columns: [\n      { field: 'name_en', header: 'Name (English) *', headerAr: 'الاسم (إنجليزي) *', required: true, example: 'Ministry of Finance' },\n      { field: 'name_ar', header: 'Name (Arabic)', headerAr: 'الاسم (عربي)', required: false, example: 'وزارة المالية' },\n      { field: 'type', header: 'Type *', headerAr: 'النوع *', required: true, example: 'organization' },\n      { field: 'status', header: 'Status', headerAr: 'الحالة', required: false, example: 'active' },\n      { field: 'summary_en', header: 'Summary (English)', headerAr: 'الملخص (إنجليزي)', required: false },\n      { field: 'summary_ar', header: 'Summary (Arabic)', headerAr: 'الملخص (عربي)', required: false },\n      { field: 'sensitivity_level', header: 'Sensitivity Level', headerAr: 'مستوى الحساسية', required: false, example: 'low' },\n      { field: 'tags', header: 'Tags', headerAr: 'الوسوم', required: false, example: 'finance; government' },\n    ],\n  },\n  person: {\n    columns: [\n      { field: 'name_en', header: 'Name (English) *', headerAr: 'الاسم (إنجليزي) *', required: true, example: 'John Doe' },\n      { field: 'name_ar', header: 'Name (Arabic)', headerAr: 'الاسم (عربي)', required: false, example: 'جون دو' },\n      { field: 'title_en', header: 'Title (English)', headerAr: 'المسمى الوظيفي (إنجليزي)', required: false, example: 'Director' },\n      { field: 'title_ar', header: 'Title (Arabic)', headerAr: 'المسمى الوظيفي (عربي)', required: false },\n      { field: 'email', header: 'Email', headerAr: 'البريد الإلكتروني', required: false, example: 'john@example.com' },\n      { field: 'phone', header: 'Phone', headerAr: 'الهاتف', required: false, example: '+1234567890' },\n      { field: 'importance_level', header: 'Importance Level (1-5)', headerAr: 'مستوى الأهمية (1-5)', required: false, example: '3' },\n      { field: 'expertise_areas', header: 'Expertise Areas', headerAr: 'مجالات الخبرة', required: false, example: 'Finance; Policy' },\n      { field: 'languages', header: 'Languages', headerAr: 'اللغات', required: false, example: 'English; Arabic' },\n    ],\n  },\n  engagement: {\n    columns: [\n      { field: 'name_en', header: 'Name (English) *', headerAr: 'الاسم (إنجليزي) *', required: true, example: 'Bilateral Meeting' },\n      { field: 'name_ar', header: 'Name (Arabic)', headerAr: 'الاسم (عربي)', required: false },\n      { field: 'engagement_type', header: 'Type *', headerAr: 'النوع *', required: true, example: 'bilateral_meeting' },\n      { field: 'category', header: 'Category', headerAr: 'الفئة', required: false, example: 'diplomatic' },\n      { field: 'status', header: 'Status', headerAr: 'الحالة', required: false, example: 'planned' },\n      { field: 'start_date', header: 'Start Date (YYYY-MM-DD)', headerAr: 'تاريخ البدء', required: false, example: '2025-03-15' },\n      { field: 'end_date', header: 'End Date (YYYY-MM-DD)', headerAr: 'تاريخ الانتهاء', required: false, example: '2025-03-16' },\n      { field: 'location_en', header: 'Location (English)', headerAr: 'الموقع (إنجليزي)', required: false, example: 'Riyadh' },\n      { field: 'location_ar', header: 'Location (Arabic)', headerAr: 'الموقع (عربي)', required: false, example: 'الرياض' },\n      { field: 'is_virtual', header: 'Virtual (true/false)', headerAr: 'افتراضي', required: false, example: 'false' },\n      { field: 'delegation_size', header: 'Delegation Size', headerAr: 'حجم الوفد', required: false, example: '5' },\n    ],\n  },\n  'working-group': {\n    columns: [\n      { field: 'name_en', header: 'Name (English) *', headerAr: 'الاسم (إنجليزي) *', required: true, example: 'Statistics Committee' },\n      { field: 'name_ar', header: 'Name (Arabic)', headerAr: 'الاسم (عربي)', required: false },\n      { field: 'status', header: 'Status', headerAr: 'الحالة', required: false, example: 'active' },\n      { field: 'mandate_en', header: 'Mandate (English)', headerAr: 'التفويض (إنجليزي)', required: false },\n      { field: 'mandate_ar', header: 'Mandate (Arabic)', headerAr: 'التفويض (عربي)', required: false },\n      { field: 'formation_date', header: 'Formation Date (YYYY-MM-DD)', headerAr: 'تاريخ التشكيل', required: false, example: '2024-01-01' },\n      { field: 'dissolution_date', header: 'Dissolution Date (YYYY-MM-DD)', headerAr: 'تاريخ الحل', required: false },\n    ],\n  },\n  commitment: {\n    columns: [\n      { field: 'title_en', header: 'Title (English) *', headerAr: 'العنوان (إنجليزي) *', required: true, example: 'Deliver quarterly report' },\n      { field: 'title_ar', header: 'Title (Arabic)', headerAr: 'العنوان (عربي)', required: false },\n      { field: 'commitment_type', header: 'Type *', headerAr: 'النوع *', required: true, example: 'internal' },\n      { field: 'status', header: 'Status', headerAr: 'الحالة', required: false, example: 'pending' },\n      { field: 'priority', header: 'Priority', headerAr: 'الأولوية', required: false, example: 'medium' },\n      { field: 'deadline', header: 'Deadline (YYYY-MM-DD)', headerAr: 'الموعد النهائي', required: false, example: '2025-03-31' },\n      { field: 'completion_percentage', header: 'Completion %', headerAr: 'نسبة الإنجاز', required: false, example: '0' },\n    ],\n  },\n  deliverable: {\n    columns: [\n      { field: 'title_en', header: 'Title (English) *', headerAr: 'العنوان (إنجليزي) *', required: true, example: 'Project Report' },\n      { field: 'title_ar', header: 'Title (Arabic)', headerAr: 'العنوان (عربي)', required: false },\n      { field: 'status', header: 'Status', headerAr: 'الحالة', required: false, example: 'pending' },\n      { field: 'due_date', header: 'Due Date (YYYY-MM-DD)', headerAr: 'تاريخ الاستحقاق', required: false, example: '2025-04-15' },\n      { field: 'completion_date', header: 'Completion Date (YYYY-MM-DD)', headerAr: 'تاريخ الإنجاز', required: false },\n    ],\n  },\n};\n\nexport function useExportData(options: UseExportDataOptions = {}): UseExportDataReturn {\n  const { t, i18n } = useTranslation('export-import');\n  const [progress, setProgress] = useState<ExportProgress | null>(null);\n  const [isExporting, setIsExporting] = useState(false);\n  const [error, setError] = useState<Error | null>(null);\n\n  const getAuthToken = useCallback(() => {\n    const supabaseAuthKey = `sb-${new URL(SUPABASE_URL).hostname.split('.')[0]}-auth-token`;\n    const authData = localStorage.getItem(supabaseAuthKey);\n    if (authData) {\n      try {\n        const parsed = JSON.parse(authData);\n        return parsed.access_token || parsed;\n      } catch {\n        return authData;\n      }\n    }\n    return null;\n  }, []);\n\n  const exportData = useCallback(async (request: ExportRequest): Promise<ExportResponse> => {\n    setIsExporting(true);\n    setError(null);\n    setProgress({\n      stage: 'fetching',\n      progress: 0,\n      message_en: t('progress.fetching'),\n      message_ar: t('progress.fetching'),\n    });\n\n    try {\n      const token = getAuthToken();\n      if (!token) {\n        throw new Error('Not authenticated');\n      }\n\n      setProgress({\n        stage: 'fetching',\n        progress: 30,\n        message_en: t('progress.fetching'),\n        message_ar: t('progress.fetching'),\n      });\n\n      // Call export edge function\n      const response = await fetch(`${SUPABASE_URL}/functions/v1/data-export`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`,\n        },\n        body: JSON.stringify(request),\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json().catch(() => ({}));\n        throw new Error(errorData.error?.message_en || 'Export failed');\n      }\n\n      const result = await response.json();\n\n      setProgress({\n        stage: 'generating',\n        progress: 70,\n        message_en: t('progress.generating'),\n        message_ar: t('progress.generating'),\n      });\n\n      // Handle XLSX conversion if needed\n      if (request.format === 'xlsx' && result.content) {\n        const workbook = new ExcelJS.Workbook();\n        const worksheet = workbook.addWorksheet(request.entityType);\n\n        // Parse CSV content\n        const lines = result.content.replace(/^\\uFEFF/, '').split('\\r\\n');\n        const headers = lines[0].split(',').map((h: string) => h.replace(/^\"|\"$/g, ''));\n\n        // Add headers\n        worksheet.addRow(headers);\n\n        // Style header row\n        const headerRow = worksheet.getRow(1);\n        headerRow.font = { bold: true };\n        headerRow.fill = {\n          type: 'pattern',\n          pattern: 'solid',\n          fgColor: { argb: 'FFE0E0E0' },\n        };\n\n        // Add data rows\n        for (let i = 1; i < lines.length; i++) {\n          if (lines[i].trim()) {\n            // Parse CSV line properly (handle quoted values)\n            const values = lines[i].match(/(?:^|,)(\"(?:[^\"]*(?:\"\"[^\"]*)*)\"|[^,]*)/g)\n              ?.map((v: string) => v.replace(/^,/, '').replace(/^\"|\"$/g, '').replace(/\"\"/g, '\"')) || [];\n            worksheet.addRow(values);\n          }\n        }\n\n        // Auto-fit columns\n        worksheet.columns.forEach(column => {\n          let maxLength = 10;\n          column.eachCell?.({ includeEmpty: true }, cell => {\n            const cellLength = cell.value ? cell.value.toString().length : 0;\n            if (cellLength > maxLength) {\n              maxLength = Math.min(cellLength, 50);\n            }\n          });\n          column.width = maxLength + 2;\n        });\n\n        // Generate blob\n        const buffer = await workbook.xlsx.writeBuffer();\n        const blob = new Blob([buffer], { type: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet' });\n        const url = URL.createObjectURL(blob);\n\n        // Download file\n        const link = document.createElement('a');\n        link.href = url;\n        link.download = result.fileName.replace('.csv', '.xlsx');\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n        URL.revokeObjectURL(url);\n      } else if (result.content) {\n        // Download CSV or JSON directly\n        const blob = new Blob([result.content], { type: result.contentType });\n        const url = URL.createObjectURL(blob);\n\n        const link = document.createElement('a');\n        link.href = url;\n        link.download = result.fileName;\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n        URL.revokeObjectURL(url);\n      }\n\n      setProgress({\n        stage: 'complete',\n        progress: 100,\n        message_en: t('progress.complete'),\n        message_ar: t('progress.complete'),\n      });\n\n      const exportResponse: ExportResponse = {\n        success: true,\n        fileName: result.fileName,\n        recordCount: result.recordCount,\n        exportedAt: result.exportedAt,\n        entityType: result.entityType,\n        format: result.format,\n      };\n\n      options.onSuccess?.(exportResponse);\n      toast.success(t('export.success.title'), {\n        description: t('export.success.message', { count: result.recordCount }),\n      });\n\n      return exportResponse;\n    } catch (err) {\n      const error = err instanceof Error ? err : new Error('Export failed');\n      setError(error);\n      setProgress({\n        stage: 'error',\n        progress: 0,\n        message_en: error.message,\n        message_ar: error.message,\n      });\n      options.onError?.(error);\n      toast.error(t('export.error.title'), {\n        description: error.message,\n      });\n      throw error;\n    } finally {\n      setIsExporting(false);\n    }\n  }, [getAuthToken, options, t]);\n\n  const downloadTemplate = useCallback(async (request: TemplateDownloadRequest): Promise<void> => {\n    setIsExporting(true);\n    setError(null);\n\n    try {\n      const template = ENTITY_TEMPLATES[request.entityType];\n      if (!template) {\n        throw new Error(`Unknown entity type: ${request.entityType}`);\n      }\n\n      const language = request.language || (i18n.language === 'ar' ? 'ar' : 'en');\n\n      if (request.format === 'xlsx') {\n        const workbook = new ExcelJS.Workbook();\n        const worksheet = workbook.addWorksheet(request.entityType);\n\n        // Generate headers based on language\n        const headers = template.columns.map(col => {\n          if (language === 'both') {\n            return `${col.header} / ${col.headerAr}`;\n          }\n          return language === 'ar' ? col.headerAr : col.header;\n        });\n\n        // Add headers\n        worksheet.addRow(headers);\n\n        // Style header row\n        const headerRow = worksheet.getRow(1);\n        headerRow.font = { bold: true };\n        headerRow.fill = {\n          type: 'pattern',\n          pattern: 'solid',\n          fgColor: { argb: 'FF4472C4' },\n        };\n        headerRow.font = { bold: true, color: { argb: 'FFFFFFFF' } };\n\n        // Add sample data if requested\n        if (request.includeSampleData) {\n          const sampleRow = template.columns.map(col => col.example || '');\n          worksheet.addRow(sampleRow);\n        }\n\n        // Add instruction row\n        const instructionRow = template.columns.map(col =>\n          col.required ? '(Required)' : '(Optional)'\n        );\n        const instRow = worksheet.addRow(instructionRow);\n        instRow.font = { italic: true, color: { argb: 'FF808080' } };\n\n        // Auto-fit columns\n        worksheet.columns.forEach((column, index) => {\n          const header = headers[index] || '';\n          const maxLength = Math.max(header.length, 15);\n          column.width = Math.min(maxLength + 2, 40);\n        });\n\n        // Generate blob and download\n        const buffer = await workbook.xlsx.writeBuffer();\n        const blob = new Blob([buffer], { type: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet' });\n        const url = URL.createObjectURL(blob);\n\n        const link = document.createElement('a');\n        link.href = url;\n        link.download = `${request.entityType}_template.xlsx`;\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n        URL.revokeObjectURL(url);\n      } else {\n        // Generate CSV\n        const headers = template.columns.map(col => {\n          if (language === 'both') {\n            return `\"${col.header} / ${col.headerAr}\"`;\n          }\n          const header = language === 'ar' ? col.headerAr : col.header;\n          return header.includes(',') ? `\"${header}\"` : header;\n        });\n\n        const lines = [headers.join(',')];\n\n        // Add sample data if requested\n        if (request.includeSampleData) {\n          const sampleRow = template.columns.map(col => {\n            const value = col.example || '';\n            return value.includes(',') || value.includes('\"') ? `\"${value.replace(/\"/g, '\"\"')}\"` : value;\n          });\n          lines.push(sampleRow.join(','));\n        }\n\n        // Add BOM for Excel UTF-8 compatibility\n        const content = '\\uFEFF' + lines.join('\\r\\n');\n        const blob = new Blob([content], { type: 'text/csv; charset=utf-8' });\n        const url = URL.createObjectURL(blob);\n\n        const link = document.createElement('a');\n        link.href = url;\n        link.download = `${request.entityType}_template.csv`;\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n        URL.revokeObjectURL(url);\n      }\n\n      toast.success(t('template.success'));\n    } catch (err) {\n      const error = err instanceof Error ? err : new Error('Template download failed');\n      setError(error);\n      toast.error(error.message);\n      throw error;\n    } finally {\n      setIsExporting(false);\n    }\n  }, [i18n.language, t]);\n\n  const reset = useCallback(() => {\n    setProgress(null);\n    setError(null);\n    setIsExporting(false);\n  }, []);\n\n  return {\n    exportData,\n    downloadTemplate,\n    progress,\n    isExporting,\n    error,\n    reset,\n  };\n}\n","/**\n * ExportDialog Component\n * Feature: export-import-templates\n *\n * Modal dialog for exporting entity data with format and column selection.\n * Supports CSV, XLSX, and JSON formats with bilingual headers.\n */\n\nimport { useState, useCallback } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from '@/components/ui/dialog';\nimport { Button } from '@/components/ui/button';\nimport { Label } from '@/components/ui/label';\nimport { RadioGroup, RadioGroupItem } from '@/components/ui/radio-group';\nimport { Checkbox } from '@/components/ui/checkbox';\nimport { Progress } from '@/components/ui/progress';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select';\nimport { Download, FileSpreadsheet, FileText, FileJson, Loader2 } from 'lucide-react';\nimport { useExportData } from '@/hooks/useExportData';\nimport type { ExportableEntityType, ExportRequest } from '@/types/export-import.types';\nimport type { ExportFormat } from '@/types/bulk-actions.types';\n\ninterface ExportDialogProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  entityType: ExportableEntityType;\n  selectedIds?: string[];\n  onExportComplete?: () => void;\n}\n\nexport function ExportDialog({\n  open,\n  onOpenChange,\n  entityType,\n  selectedIds,\n  onExportComplete,\n}: ExportDialogProps) {\n  const { t, i18n } = useTranslation('export-import');\n  const isRTL = i18n.language === 'ar';\n\n  const [format, setFormat] = useState<ExportFormat>('xlsx');\n  const [language, setLanguage] = useState<'en' | 'ar' | 'both'>('both');\n  const [includeTemplate, setIncludeTemplate] = useState(false);\n  const [exportSelected, setExportSelected] = useState(!!selectedIds?.length);\n\n  const { exportData, downloadTemplate, progress, isExporting, reset } = useExportData({\n    onSuccess: () => {\n      onExportComplete?.();\n      setTimeout(() => {\n        reset();\n        onOpenChange(false);\n      }, 1500);\n    },\n  });\n\n  const handleExport = useCallback(async () => {\n    const request: ExportRequest = {\n      entityType,\n      format: format as 'csv' | 'xlsx' | 'json',\n      ids: exportSelected ? selectedIds : undefined,\n      includeTemplate,\n      language,\n    };\n\n    await exportData(request);\n  }, [entityType, format, exportSelected, selectedIds, includeTemplate, language, exportData]);\n\n  const handleDownloadTemplate = useCallback(async () => {\n    await downloadTemplate({\n      entityType,\n      format: format === 'xlsx' ? 'xlsx' : 'csv',\n      includeSampleData: true,\n      language,\n    });\n  }, [entityType, format, language, downloadTemplate]);\n\n  const handleClose = useCallback(() => {\n    if (!isExporting) {\n      reset();\n      onOpenChange(false);\n    }\n  }, [isExporting, reset, onOpenChange]);\n\n  const formatIcons: Record<ExportFormat, React.ReactNode> = {\n    xlsx: <FileSpreadsheet className=\"h-4 w-4\" />,\n    csv: <FileText className=\"h-4 w-4\" />,\n    json: <FileJson className=\"h-4 w-4\" />,\n    pdf: <FileText className=\"h-4 w-4\" />,\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={handleClose}>\n      <DialogContent\n        className=\"sm:max-w-[480px]\"\n        dir={isRTL ? 'rtl' : 'ltr'}\n      >\n        <DialogHeader>\n          <DialogTitle className=\"flex items-center gap-2\">\n            <Download className=\"h-5 w-5\" />\n            {t('export.title')}\n          </DialogTitle>\n          <DialogDescription>\n            {t('export.description')}\n          </DialogDescription>\n        </DialogHeader>\n\n        <div className=\"grid gap-6 py-4\">\n          {/* Format Selection */}\n          <div className=\"space-y-3\">\n            <Label>{t('export.format.label')}</Label>\n            <RadioGroup\n              value={format}\n              onValueChange={(value) => setFormat(value as ExportFormat)}\n              className=\"grid grid-cols-3 gap-2\"\n            >\n              <div>\n                <RadioGroupItem\n                  value=\"xlsx\"\n                  id=\"format-xlsx\"\n                  className=\"peer sr-only\"\n                />\n                <Label\n                  htmlFor=\"format-xlsx\"\n                  className=\"flex flex-col items-center justify-between rounded-md border-2 border-muted bg-popover p-3 hover:bg-accent hover:text-accent-foreground peer-data-[state=checked]:border-primary [&:has([data-state=checked])]:border-primary cursor-pointer\"\n                >\n                  {formatIcons.xlsx}\n                  <span className=\"text-xs mt-1\">{t('export.format.xlsx')}</span>\n                </Label>\n              </div>\n              <div>\n                <RadioGroupItem\n                  value=\"csv\"\n                  id=\"format-csv\"\n                  className=\"peer sr-only\"\n                />\n                <Label\n                  htmlFor=\"format-csv\"\n                  className=\"flex flex-col items-center justify-between rounded-md border-2 border-muted bg-popover p-3 hover:bg-accent hover:text-accent-foreground peer-data-[state=checked]:border-primary [&:has([data-state=checked])]:border-primary cursor-pointer\"\n                >\n                  {formatIcons.csv}\n                  <span className=\"text-xs mt-1\">{t('export.format.csv')}</span>\n                </Label>\n              </div>\n              <div>\n                <RadioGroupItem\n                  value=\"json\"\n                  id=\"format-json\"\n                  className=\"peer sr-only\"\n                />\n                <Label\n                  htmlFor=\"format-json\"\n                  className=\"flex flex-col items-center justify-between rounded-md border-2 border-muted bg-popover p-3 hover:bg-accent hover:text-accent-foreground peer-data-[state=checked]:border-primary [&:has([data-state=checked])]:border-primary cursor-pointer\"\n                >\n                  {formatIcons.json}\n                  <span className=\"text-xs mt-1\">{t('export.format.json')}</span>\n                </Label>\n              </div>\n            </RadioGroup>\n          </div>\n\n          {/* Language Selection */}\n          <div className=\"space-y-3\">\n            <Label>{t('export.language.title')}</Label>\n            <Select value={language} onValueChange={(value) => setLanguage(value as 'en' | 'ar' | 'both')}>\n              <SelectTrigger>\n                <SelectValue />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"en\">{t('export.language.en')}</SelectItem>\n                <SelectItem value=\"ar\">{t('export.language.ar')}</SelectItem>\n                <SelectItem value=\"both\">{t('export.language.both')}</SelectItem>\n              </SelectContent>\n            </Select>\n          </div>\n\n          {/* Options */}\n          <div className=\"space-y-3\">\n            <Label>{t('export.options.title')}</Label>\n            <div className=\"space-y-2\">\n              {selectedIds?.length ? (\n                <div className=\"flex items-center space-x-2 rtl:space-x-reverse\">\n                  <Checkbox\n                    id=\"export-selected\"\n                    checked={exportSelected}\n                    onCheckedChange={(checked) => setExportSelected(!!checked)}\n                  />\n                  <Label\n                    htmlFor=\"export-selected\"\n                    className=\"text-sm font-normal cursor-pointer\"\n                  >\n                    {t('export.options.selectedOnly')} ({selectedIds.length})\n                  </Label>\n                </div>\n              ) : null}\n              <div className=\"flex items-center space-x-2 rtl:space-x-reverse\">\n                <Checkbox\n                  id=\"include-template\"\n                  checked={includeTemplate}\n                  onCheckedChange={(checked) => setIncludeTemplate(!!checked)}\n                />\n                <Label\n                  htmlFor=\"include-template\"\n                  className=\"text-sm font-normal cursor-pointer\"\n                >\n                  {t('export.options.includeTemplate')}\n                </Label>\n              </div>\n            </div>\n          </div>\n\n          {/* Progress */}\n          {progress && (\n            <div className=\"space-y-2\">\n              <div className=\"flex items-center justify-between text-sm\">\n                <span>{i18n.language === 'ar' ? progress.message_ar : progress.message_en}</span>\n                <span>{progress.progress}%</span>\n              </div>\n              <Progress value={progress.progress} className=\"h-2\" />\n            </div>\n          )}\n        </div>\n\n        <DialogFooter className=\"flex-col sm:flex-row gap-2\">\n          <Button\n            variant=\"outline\"\n            onClick={handleDownloadTemplate}\n            disabled={isExporting}\n            className=\"w-full sm:w-auto\"\n          >\n            <FileSpreadsheet className=\"h-4 w-4 me-2\" />\n            {t('template.button')}\n          </Button>\n          <div className=\"flex gap-2 w-full sm:w-auto\">\n            <Button\n              variant=\"outline\"\n              onClick={handleClose}\n              disabled={isExporting}\n              className=\"flex-1 sm:flex-none\"\n            >\n              {t('common.cancel')}\n            </Button>\n            <Button\n              onClick={handleExport}\n              disabled={isExporting}\n              className=\"flex-1 sm:flex-none\"\n            >\n              {isExporting ? (\n                <>\n                  <Loader2 className=\"h-4 w-4 me-2 animate-spin\" />\n                  {t('export.downloading')}\n                </>\n              ) : (\n                <>\n                  <Download className=\"h-4 w-4 me-2\" />\n                  {t('export.button')}\n                </>\n              )}\n            </Button>\n          </div>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","/**\n * useImportData Hook\n * Feature: export-import-templates\n *\n * Hook for importing entity data from CSV or XLSX files.\n * Supports file parsing, validation, conflict detection, and import execution.\n */\n\nimport { useState, useCallback, useRef } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { toast } from 'sonner';\nimport Papa from 'papaparse';\nimport * as ExcelJS from 'exceljs';\nimport type {\n  ImportValidationResult,\n  ImportRequest,\n  ImportResponse,\n  ImportProgress,\n  UseImportDataOptions,\n  UseImportDataReturn,\n  RowValidationResult,\n} from '@/types/export-import.types';\n\nconst SUPABASE_URL = import.meta.env.VITE_SUPABASE_URL;\nconst MAX_FILE_SIZE_MB = 10;\n\nexport function useImportData(options: UseImportDataOptions): UseImportDataReturn {\n  const { t } = useTranslation('export-import');\n  const [validationResult, setValidationResult] = useState<ImportValidationResult | null>(null);\n  const [importResponse, setImportResponse] = useState<ImportResponse | null>(null);\n  const [progress, setProgress] = useState<ImportProgress | null>(null);\n  const [isValidating, setIsValidating] = useState(false);\n  const [isImporting, setIsImporting] = useState(false);\n  const [error, setError] = useState<Error | null>(null);\n  const abortControllerRef = useRef<AbortController | null>(null);\n\n  const getAuthToken = useCallback(() => {\n    const supabaseAuthKey = `sb-${new URL(SUPABASE_URL).hostname.split('.')[0]}-auth-token`;\n    const authData = localStorage.getItem(supabaseAuthKey);\n    if (authData) {\n      try {\n        const parsed = JSON.parse(authData);\n        return parsed.access_token || parsed;\n      } catch {\n        return authData;\n      }\n    }\n    return null;\n  }, []);\n\n  const parseCSV = useCallback((content: string): Promise<{ headers: string[]; data: Record<string, unknown>[] }> => {\n    return new Promise((resolve, reject) => {\n      Papa.parse(content, {\n        header: true,\n        skipEmptyLines: true,\n        transformHeader: (header: string) => header.trim(),\n        complete: (results) => {\n          const headers = results.meta.fields || [];\n          const data = results.data as Record<string, unknown>[];\n          resolve({ headers, data });\n        },\n        error: (error: Error) => {\n          reject(error);\n        },\n      });\n    });\n  }, []);\n\n  const parseXLSX = useCallback(async (file: File): Promise<{ headers: string[]; data: Record<string, unknown>[] }> => {\n    const workbook = new ExcelJS.Workbook();\n    const buffer = await file.arrayBuffer();\n    await workbook.xlsx.load(buffer);\n\n    const worksheet = workbook.worksheets[0];\n    if (!worksheet) {\n      throw new Error('No worksheet found in file');\n    }\n\n    const headers: string[] = [];\n    const data: Record<string, unknown>[] = [];\n\n    worksheet.eachRow((row, rowNumber) => {\n      if (rowNumber === 1) {\n        // Header row\n        row.eachCell((cell, colNumber) => {\n          headers[colNumber - 1] = String(cell.value || '').trim();\n        });\n      } else {\n        // Data row\n        const rowData: Record<string, unknown> = {};\n        row.eachCell((cell, colNumber) => {\n          const header = headers[colNumber - 1];\n          if (header) {\n            let value: unknown = cell.value;\n            // Handle rich text and formulas\n            if (typeof value === 'object' && value !== null) {\n              if ('text' in value) {\n                value = (value as { text: string }).text;\n              } else if ('result' in value) {\n                value = (value as { result: unknown }).result;\n              }\n            }\n            rowData[header] = value as string | number | boolean | null;\n          }\n        });\n        if (Object.keys(rowData).length > 0) {\n          data.push(rowData);\n        }\n      }\n    });\n\n    return { headers, data };\n  }, []);\n\n  const uploadFile = useCallback(async (file: File): Promise<ImportValidationResult> => {\n    setIsValidating(true);\n    setError(null);\n    setValidationResult(null);\n    abortControllerRef.current = new AbortController();\n\n    try {\n      // Check file size\n      const fileSizeMB = file.size / (1024 * 1024);\n      if (fileSizeMB > MAX_FILE_SIZE_MB) {\n        throw new Error(t('import.error.tooLarge', { size: MAX_FILE_SIZE_MB }));\n      }\n\n      setProgress({\n        stage: 'uploading',\n        progress: 10,\n        message_en: t('progress.uploading'),\n        message_ar: t('progress.uploading'),\n      });\n\n      // Determine file type and parse\n      let parsedData: { headers: string[]; data: Record<string, unknown>[] };\n      const fileName = file.name.toLowerCase();\n\n      setProgress({\n        stage: 'parsing',\n        progress: 30,\n        message_en: t('progress.parsing'),\n        message_ar: t('progress.parsing'),\n      });\n\n      if (fileName.endsWith('.xlsx') || fileName.endsWith('.xls')) {\n        parsedData = await parseXLSX(file);\n      } else if (fileName.endsWith('.csv')) {\n        const content = await file.text();\n        parsedData = await parseCSV(content);\n      } else {\n        throw new Error(t('import.error.invalidFormat'));\n      }\n\n      // Check for empty file\n      if (parsedData.data.length === 0) {\n        throw new Error(t('import.error.emptyFile'));\n      }\n\n      setProgress({\n        stage: 'validating',\n        progress: 50,\n        message_en: t('progress.validating'),\n        message_ar: t('progress.validating'),\n        totalRows: parsedData.data.length,\n      });\n\n      // Send to backend for validation\n      const token = getAuthToken();\n      if (!token) {\n        throw new Error('Not authenticated');\n      }\n\n      const response = await fetch(`${SUPABASE_URL}/functions/v1/data-import`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`,\n        },\n        body: JSON.stringify({\n          entityType: options.entityType,\n          headers: parsedData.headers,\n          data: parsedData.data,\n          mode: options.defaultMode || 'upsert',\n        }),\n        signal: abortControllerRef.current.signal,\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json().catch(() => ({}));\n        throw new Error(errorData.error?.message_en || 'Validation failed');\n      }\n\n      const result = await response.json() as ImportValidationResult;\n\n      // Add file info\n      result.fileInfo = {\n        name: file.name,\n        size: file.size,\n        rows: parsedData.data.length,\n        columns: parsedData.headers,\n        format: fileName.endsWith('.xlsx') || fileName.endsWith('.xls') ? 'xlsx' : 'csv',\n      };\n\n      setProgress({\n        stage: 'complete',\n        progress: 100,\n        message_en: t('progress.complete'),\n        message_ar: t('progress.complete'),\n      });\n\n      setValidationResult(result);\n      options.onValidationComplete?.(result);\n\n      return result;\n    } catch (err) {\n      if ((err as Error).name === 'AbortError') {\n        throw new Error('Operation cancelled');\n      }\n      const error = err instanceof Error ? err : new Error('Upload failed');\n      setError(error);\n      setProgress({\n        stage: 'error',\n        progress: 0,\n        message_en: error.message,\n        message_ar: error.message,\n      });\n      options.onError?.(error);\n      toast.error(t('import.error.title'), {\n        description: error.message,\n      });\n      throw error;\n    } finally {\n      setIsValidating(false);\n    }\n  }, [getAuthToken, options, parseCSV, parseXLSX, t]);\n\n  const executeImport = useCallback(async (request: ImportRequest): Promise<ImportResponse> => {\n    setIsImporting(true);\n    setError(null);\n    abortControllerRef.current = new AbortController();\n\n    try {\n      setProgress({\n        stage: 'importing',\n        progress: 0,\n        message_en: t('progress.importing'),\n        message_ar: t('progress.importing'),\n        totalRows: request.rows.length,\n        currentRow: 0,\n      });\n\n      const token = getAuthToken();\n      if (!token) {\n        throw new Error('Not authenticated');\n      }\n\n      // Filter to only valid/warning rows\n      const validRows = request.rows.filter(\n        (row: RowValidationResult) => row.status === 'valid' || row.status === 'warning' || row.status === 'conflict'\n      );\n\n      setProgress({\n        stage: 'importing',\n        progress: 20,\n        message_en: t('progress.importing'),\n        message_ar: t('progress.importing'),\n        totalRows: validRows.length,\n      });\n\n      const response = await fetch(`${SUPABASE_URL}/functions/v1/data-import`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`,\n        },\n        body: JSON.stringify({\n          entityType: options.entityType,\n          mode: request.mode,\n          conflictResolution: request.conflictResolution,\n          rows: validRows,\n          conflictResolutions: request.conflictResolutions,\n          skipWarnings: request.skipWarnings,\n          dryRun: request.dryRun,\n        }),\n        signal: abortControllerRef.current.signal,\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json().catch(() => ({}));\n        throw new Error(errorData.error?.message_en || 'Import failed');\n      }\n\n      const result = await response.json() as ImportResponse;\n\n      setProgress({\n        stage: 'complete',\n        progress: 100,\n        message_en: t('progress.complete'),\n        message_ar: t('progress.complete'),\n      });\n\n      setImportResponse(result);\n      options.onSuccess?.(result);\n\n      if (result.success) {\n        toast.success(t('import.success.title'), {\n          description: t('import.success.message', {\n            success: result.successCount,\n            total: result.totalRows,\n          }),\n        });\n      } else if (result.successCount > 0) {\n        toast.warning(t('import.error.partialSuccess'), {\n          description: t('import.error.partialSuccess', {\n            failed: result.failedCount,\n            total: result.totalRows,\n          }),\n        });\n      } else {\n        toast.error(t('import.error.title'));\n      }\n\n      return result;\n    } catch (err) {\n      if ((err as Error).name === 'AbortError') {\n        throw new Error('Operation cancelled');\n      }\n      const error = err instanceof Error ? err : new Error('Import failed');\n      setError(error);\n      setProgress({\n        stage: 'error',\n        progress: 0,\n        message_en: error.message,\n        message_ar: error.message,\n      });\n      options.onError?.(error);\n      toast.error(t('import.error.title'), {\n        description: error.message,\n      });\n      throw error;\n    } finally {\n      setIsImporting(false);\n    }\n  }, [getAuthToken, options, t]);\n\n  const cancel = useCallback(() => {\n    if (abortControllerRef.current) {\n      abortControllerRef.current.abort();\n    }\n    setIsValidating(false);\n    setIsImporting(false);\n    setProgress(null);\n  }, []);\n\n  const reset = useCallback(() => {\n    setValidationResult(null);\n    setImportResponse(null);\n    setProgress(null);\n    setError(null);\n    setIsValidating(false);\n    setIsImporting(false);\n  }, []);\n\n  return {\n    uploadFile,\n    executeImport,\n    cancel,\n    validationResult,\n    importResponse,\n    progress,\n    isValidating,\n    isImporting,\n    error,\n    reset,\n  };\n}\n","/**\n * ImportValidationResults Component\n * Feature: export-import-templates\n *\n * Displays validation results for imported data with error highlighting\n * and row-level status indicators.\n */\n\nimport { useState, useMemo } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from '@/components/ui/table';\nimport { Badge } from '@/components/ui/badge';\nimport { Button } from '@/components/ui/button';\nimport { ScrollArea } from '@/components/ui/scroll-area';\nimport {\n  Collapsible,\n  CollapsibleContent,\n  CollapsibleTrigger,\n} from '@/components/ui/collapsible';\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from '@/components/ui/tooltip';\nimport {\n  CheckCircle2,\n  XCircle,\n  AlertTriangle,\n  AlertCircle,\n  ChevronDown,\n  ChevronUp,\n  Eye,\n  EyeOff,\n} from 'lucide-react';\nimport type {\n  ImportValidationResult,\n  CellValidationError,\n} from '@/types/export-import.types';\nimport { cn } from '@/lib/utils';\n\ninterface ImportValidationResultsProps {\n  result: ImportValidationResult;\n  maxRowsPreview?: number;\n  className?: string;\n}\n\nconst STATUS_ICONS: Record<string, React.ReactNode> = {\n  valid: <CheckCircle2 className=\"h-4 w-4 text-green-500\" />,\n  invalid: <XCircle className=\"h-4 w-4 text-red-500\" />,\n  warning: <AlertTriangle className=\"h-4 w-4 text-yellow-500\" />,\n  conflict: <AlertCircle className=\"h-4 w-4 text-blue-500\" />,\n  pending: <AlertCircle className=\"h-4 w-4 text-muted-foreground\" />,\n};\n\nconst STATUS_BADGES: Record<string, { variant: 'default' | 'destructive' | 'secondary' | 'outline'; className?: string }> = {\n  valid: { variant: 'default', className: 'bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400' },\n  invalid: { variant: 'destructive' },\n  warning: { variant: 'secondary', className: 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400' },\n  conflict: { variant: 'outline', className: 'border-blue-500 text-blue-600 dark:text-blue-400' },\n  pending: { variant: 'secondary' },\n};\n\nexport function ImportValidationResults({\n  result,\n  maxRowsPreview = 100,\n  className,\n}: ImportValidationResultsProps) {\n  const { t, i18n } = useTranslation('export-import');\n  const isRTL = i18n.language === 'ar';\n\n  const [showAllErrors, setShowAllErrors] = useState(false);\n  const [expandedRows, setExpandedRows] = useState<Set<number>>(new Set());\n\n  const toggleRowExpanded = (rowNumber: number) => {\n    setExpandedRows(prev => {\n      const next = new Set(prev);\n      if (next.has(rowNumber)) {\n        next.delete(rowNumber);\n      } else {\n        next.add(rowNumber);\n      }\n      return next;\n    });\n  };\n\n  const displayedRows = useMemo(() => {\n    let rows = result.rows;\n\n    // Filter to show only errors if not showing all\n    if (!showAllErrors) {\n      const invalidRows = rows.filter(r => r.status === 'invalid' || r.status === 'warning' || r.status === 'conflict');\n      if (invalidRows.length > 0 && invalidRows.length < rows.length) {\n        rows = invalidRows;\n      }\n    }\n\n    return rows.slice(0, maxRowsPreview);\n  }, [result.rows, showAllErrors, maxRowsPreview]);\n\n  const errorsByType = useMemo(() => {\n    const counts: Record<string, number> = {};\n    for (const row of result.rows) {\n      for (const error of row.errors) {\n        counts[error.code] = (counts[error.code] || 0) + 1;\n      }\n    }\n    return counts;\n  }, [result.rows]);\n\n  const getErrorMessage = (error: CellValidationError): string => {\n    return isRTL ? error.message_ar : error.message_en;\n  };\n\n  const getSuggestion = (error: CellValidationError): string | undefined => {\n    return isRTL ? error.suggestion_ar : error.suggestion_en;\n  };\n\n  return (\n    <div className={cn('space-y-4', className)} dir={isRTL ? 'rtl' : 'ltr'}>\n      {/* Summary Cards */}\n      <div className=\"grid grid-cols-2 sm:grid-cols-4 gap-3\">\n        <div className=\"rounded-lg border p-3 bg-card\">\n          <div className=\"text-2xl font-bold\">{result.totalRows}</div>\n          <div className=\"text-xs text-muted-foreground\">{t('import.validation.summary.totalRows')}</div>\n        </div>\n        <div className=\"rounded-lg border p-3 bg-green-50 dark:bg-green-900/20\">\n          <div className=\"text-2xl font-bold text-green-600\">{result.validRows}</div>\n          <div className=\"text-xs text-green-700 dark:text-green-400\">{t('import.validation.summary.validRows')}</div>\n        </div>\n        <div className=\"rounded-lg border p-3 bg-red-50 dark:bg-red-900/20\">\n          <div className=\"text-2xl font-bold text-red-600\">{result.invalidRows}</div>\n          <div className=\"text-xs text-red-700 dark:text-red-400\">{t('import.validation.summary.invalidRows')}</div>\n        </div>\n        <div className=\"rounded-lg border p-3 bg-yellow-50 dark:bg-yellow-900/20\">\n          <div className=\"text-2xl font-bold text-yellow-600\">{result.warningRows}</div>\n          <div className=\"text-xs text-yellow-700 dark:text-yellow-400\">{t('import.validation.summary.warningRows')}</div>\n        </div>\n      </div>\n\n      {/* Missing Columns Warning */}\n      {result.missingRequiredColumns && result.missingRequiredColumns.length > 0 && (\n        <div className=\"rounded-lg border border-red-200 bg-red-50 dark:bg-red-900/20 p-4\">\n          <div className=\"flex items-center gap-2 text-red-700 dark:text-red-400\">\n            <XCircle className=\"h-5 w-5\" />\n            <span className=\"font-medium\">{t('import.error.missingColumns', { columns: result.missingRequiredColumns.join(', ') })}</span>\n          </div>\n        </div>\n      )}\n\n      {/* Unmapped Columns Info */}\n      {result.unmappedColumns && result.unmappedColumns.length > 0 && (\n        <div className=\"rounded-lg border border-yellow-200 bg-yellow-50 dark:bg-yellow-900/20 p-4\">\n          <div className=\"flex items-center gap-2 text-yellow-700 dark:text-yellow-400\">\n            <AlertTriangle className=\"h-5 w-5\" />\n            <span>Unmapped columns will be ignored: {result.unmappedColumns.join(', ')}</span>\n          </div>\n        </div>\n      )}\n\n      {/* Error Summary */}\n      {Object.keys(errorsByType).length > 0 && (\n        <Collapsible>\n          <CollapsibleTrigger asChild>\n            <Button variant=\"outline\" className=\"w-full justify-between\">\n              <span className=\"flex items-center gap-2\">\n                <AlertCircle className=\"h-4 w-4\" />\n                {t('import.validation.errors.title')}\n                <Badge variant=\"secondary\">\n                  {Object.values(errorsByType).reduce((a, b) => a + b, 0)}\n                </Badge>\n              </span>\n              <ChevronDown className=\"h-4 w-4\" />\n            </Button>\n          </CollapsibleTrigger>\n          <CollapsibleContent className=\"mt-2\">\n            <div className=\"rounded-lg border p-3 space-y-2\">\n              {Object.entries(errorsByType).map(([code, count]) => (\n                <div key={code} className=\"flex items-center justify-between text-sm\">\n                  <span className=\"text-muted-foreground\">{t(`errors.${code}`)}</span>\n                  <Badge variant=\"outline\">{count}</Badge>\n                </div>\n              ))}\n            </div>\n          </CollapsibleContent>\n        </Collapsible>\n      )}\n\n      {/* Toggle All/Errors Only */}\n      {result.validRows > 0 && result.invalidRows > 0 && (\n        <div className=\"flex justify-end\">\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            onClick={() => setShowAllErrors(!showAllErrors)}\n          >\n            {showAllErrors ? (\n              <>\n                <EyeOff className=\"h-4 w-4 me-2\" />\n                {t('import.validation.errors.hideErrors')}\n              </>\n            ) : (\n              <>\n                <Eye className=\"h-4 w-4 me-2\" />\n                {t('import.validation.errors.showAll')}\n              </>\n            )}\n          </Button>\n        </div>\n      )}\n\n      {/* Rows Table */}\n      <ScrollArea className=\"h-[300px] rounded-md border\">\n        <Table>\n          <TableHeader>\n            <TableRow>\n              <TableHead className=\"w-16\">{(t('import.preview.showingRows', { shown: '', total: '' }) || '').split(':')[0].trim() || 'Row'}</TableHead>\n              <TableHead className=\"w-24\">{t('import.validation.status.valid').split(' ')[0] || 'Status'}</TableHead>\n              <TableHead>{t('import.validation.errors.title').split(' ')[0] || 'Details'}</TableHead>\n              <TableHead className=\"w-10\"></TableHead>\n            </TableRow>\n          </TableHeader>\n          <TableBody>\n            {displayedRows.map((row) => (\n              <TableRow\n                key={row.row}\n                className={cn(\n                  row.status === 'invalid' && 'bg-red-50/50 dark:bg-red-900/10',\n                  row.status === 'warning' && 'bg-yellow-50/50 dark:bg-yellow-900/10',\n                  row.status === 'conflict' && 'bg-blue-50/50 dark:bg-blue-900/10'\n                )}\n              >\n                <TableCell className=\"font-medium\">#{row.row}</TableCell>\n                <TableCell>\n                  <Badge\n                    variant={STATUS_BADGES[row.status]?.variant || 'secondary'}\n                    className={STATUS_BADGES[row.status]?.className}\n                  >\n                    <span className=\"flex items-center gap-1\">\n                      {STATUS_ICONS[row.status]}\n                      {t(`import.validation.status.${row.status}`)}\n                    </span>\n                  </Badge>\n                </TableCell>\n                <TableCell>\n                  {row.errors.length > 0 ? (\n                    <div className=\"space-y-1\">\n                      {row.errors.slice(0, expandedRows.has(row.row) ? undefined : 2).map((error, idx) => (\n                        <TooltipProvider key={idx}>\n                          <Tooltip>\n                            <TooltipTrigger asChild>\n                              <div className=\"text-sm\">\n                                <span className=\"font-medium text-muted-foreground\">{error.column}:</span>{' '}\n                                <span className={error.severity === 'error' ? 'text-red-600' : 'text-yellow-600'}>\n                                  {getErrorMessage(error)}\n                                </span>\n                              </div>\n                            </TooltipTrigger>\n                            {getSuggestion(error) && (\n                              <TooltipContent>\n                                <p>{getSuggestion(error)}</p>\n                              </TooltipContent>\n                            )}\n                          </Tooltip>\n                        </TooltipProvider>\n                      ))}\n                      {row.errors.length > 2 && !expandedRows.has(row.row) && (\n                        <div className=\"text-xs text-muted-foreground\">\n                          +{row.errors.length - 2} more errors\n                        </div>\n                      )}\n                    </div>\n                  ) : row.status === 'conflict' ? (\n                    <div className=\"text-sm text-blue-600\">\n                      {t('errors.conflict_detected')}\n                      {row.existingId && (\n                        <span className=\"text-muted-foreground ms-2\">\n                          (ID: {row.existingId.slice(0, 8)}...)\n                        </span>\n                      )}\n                    </div>\n                  ) : row.data ? (\n                    <div className=\"text-sm text-muted-foreground truncate max-w-[300px]\">\n                      {Object.entries(row.data)\n                        .filter(([k, v]) => v && !k.includes('_at'))\n                        .slice(0, 3)\n                        .map(([k, v]) => `${k}: ${String(v).slice(0, 20)}`)\n                        .join(', ')}\n                    </div>\n                  ) : null}\n                </TableCell>\n                <TableCell>\n                  {row.errors.length > 2 && (\n                    <Button\n                      variant=\"ghost\"\n                      size=\"icon\"\n                      className=\"h-8 w-8\"\n                      onClick={() => toggleRowExpanded(row.row)}\n                    >\n                      {expandedRows.has(row.row) ? (\n                        <ChevronUp className=\"h-4 w-4\" />\n                      ) : (\n                        <ChevronDown className=\"h-4 w-4\" />\n                      )}\n                    </Button>\n                  )}\n                </TableCell>\n              </TableRow>\n            ))}\n          </TableBody>\n        </Table>\n      </ScrollArea>\n\n      {displayedRows.length < result.rows.length && (\n        <p className=\"text-sm text-muted-foreground text-center\">\n          {t('import.preview.showingRows', {\n            shown: displayedRows.length,\n            total: result.rows.length,\n          })}\n        </p>\n      )}\n\n      {/* Status Message */}\n      <div className={cn(\n        'rounded-lg p-4 text-center',\n        result.invalidRows === 0 && 'bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-400',\n        result.invalidRows > 0 && 'bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-400'\n      )}>\n        {result.invalidRows === 0 ? (\n          <div className=\"flex items-center justify-center gap-2\">\n            <CheckCircle2 className=\"h-5 w-5\" />\n            {t('import.validation.noErrors')}\n          </div>\n        ) : (\n          <div className=\"flex items-center justify-center gap-2\">\n            <XCircle className=\"h-5 w-5\" />\n            {t('import.validation.hasErrors')}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","/**\n * ImportDialog Component\n * Feature: export-import-templates\n *\n * Multi-step modal dialog for importing entity data from CSV/XLSX files.\n * Includes file upload, validation, conflict resolution, and import execution.\n */\n\nimport { useState, useCallback } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { useDropzone } from 'react-dropzone';\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from '@/components/ui/dialog';\nimport { Button } from '@/components/ui/button';\nimport { Label } from '@/components/ui/label';\nimport { RadioGroup, RadioGroupItem } from '@/components/ui/radio-group';\nimport { Progress } from '@/components/ui/progress';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select';\nimport {\n  Upload,\n  FileSpreadsheet,\n  FileText,\n  Loader2,\n  CheckCircle2,\n  AlertCircle,\n  X,\n} from 'lucide-react';\nimport { useImportData } from '@/hooks/useImportData';\nimport { ImportValidationResults } from './ImportValidationResults';\nimport type {\n  ExportableEntityType,\n  ImportMode,\n  ConflictResolution,\n  ImportRequest,\n} from '@/types/export-import.types';\nimport { cn } from '@/lib/utils';\n\ninterface ImportDialogProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  entityType: ExportableEntityType;\n  onImportComplete?: () => void;\n}\n\ntype ImportStep = 'upload' | 'validate' | 'options' | 'import' | 'complete';\n\nexport function ImportDialog({\n  open,\n  onOpenChange,\n  entityType,\n  onImportComplete,\n}: ImportDialogProps) {\n  const { t, i18n } = useTranslation('export-import');\n  const isRTL = i18n.language === 'ar';\n\n  const [step, setStep] = useState<ImportStep>('upload');\n  const [selectedFile, setSelectedFile] = useState<File | null>(null);\n  const [mode, setMode] = useState<ImportMode>('upsert');\n  const [conflictResolution, setConflictResolution] = useState<ConflictResolution>('skip');\n\n  const {\n    uploadFile,\n    executeImport,\n    cancel,\n    validationResult,\n    importResponse,\n    progress,\n    isValidating,\n    isImporting,\n    reset: resetHook,\n  } = useImportData({\n    entityType,\n    defaultMode: mode,\n    defaultConflictResolution: conflictResolution,\n    onSuccess: () => {\n      onImportComplete?.();\n    },\n  });\n\n  const onDrop = useCallback(async (acceptedFiles: File[]) => {\n    if (acceptedFiles.length > 0) {\n      const file = acceptedFiles[0];\n      setSelectedFile(file);\n      setStep('validate');\n\n      try {\n        await uploadFile(file);\n        setStep('options');\n      } catch {\n        setStep('upload');\n      }\n    }\n  }, [uploadFile]);\n\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({\n    onDrop,\n    accept: {\n      'text/csv': ['.csv'],\n      'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet': ['.xlsx'],\n      'application/vnd.ms-excel': ['.xls'],\n    },\n    maxFiles: 1,\n    disabled: isValidating || isImporting,\n  });\n\n  const handleImport = useCallback(async () => {\n    if (!validationResult) return;\n\n    setStep('import');\n\n    const request: ImportRequest = {\n      entityType,\n      mode,\n      conflictResolution,\n      rows: validationResult.rows,\n      skipWarnings: false,\n      dryRun: false,\n    };\n\n    try {\n      await executeImport(request);\n      setStep('complete');\n    } catch {\n      setStep('options');\n    }\n  }, [validationResult, entityType, mode, conflictResolution, executeImport]);\n\n  const handleClose = useCallback(() => {\n    if (!isValidating && !isImporting) {\n      resetHook();\n      setStep('upload');\n      setSelectedFile(null);\n      setMode('upsert');\n      setConflictResolution('skip');\n      onOpenChange(false);\n    }\n  }, [isValidating, isImporting, resetHook, onOpenChange]);\n\n  const handleReset = useCallback(() => {\n    cancel();\n    resetHook();\n    setStep('upload');\n    setSelectedFile(null);\n  }, [cancel, resetHook]);\n\n  const canImport = validationResult && validationResult.validRows > 0 && !validationResult.missingRequiredColumns?.length;\n\n  return (\n    <Dialog open={open} onOpenChange={handleClose}>\n      <DialogContent\n        className=\"sm:max-w-[600px] max-h-[90vh] overflow-hidden flex flex-col\"\n        dir={isRTL ? 'rtl' : 'ltr'}\n      >\n        <DialogHeader>\n          <DialogTitle className=\"flex items-center gap-2\">\n            <Upload className=\"h-5 w-5\" />\n            {t('import.title')}\n          </DialogTitle>\n          <DialogDescription>\n            {t('import.description')}\n          </DialogDescription>\n        </DialogHeader>\n\n        <div className=\"flex-1 overflow-y-auto py-4\">\n          {/* Step: Upload */}\n          {step === 'upload' && (\n            <div className=\"space-y-4\">\n              <div\n                {...getRootProps()}\n                className={cn(\n                  'border-2 border-dashed rounded-lg p-8 text-center cursor-pointer transition-colors',\n                  isDragActive && 'border-primary bg-primary/5',\n                  !isDragActive && 'border-muted-foreground/25 hover:border-primary/50'\n                )}\n              >\n                <input {...getInputProps()} />\n                <div className=\"flex flex-col items-center gap-3\">\n                  <div className=\"flex gap-2\">\n                    <FileSpreadsheet className=\"h-10 w-10 text-green-500\" />\n                    <FileText className=\"h-10 w-10 text-blue-500\" />\n                  </div>\n                  <div>\n                    <p className=\"text-lg font-medium\">{t('import.dropzone.title')}</p>\n                    <p className=\"text-sm text-muted-foreground mt-1\">{t('import.dropzone.subtitle')}</p>\n                    <p className=\"text-xs text-muted-foreground mt-2\">{t('import.dropzone.maxSize', { size: 10 })}</p>\n                  </div>\n                </div>\n              </div>\n\n              {/* Template Instructions */}\n              <div className=\"rounded-lg border bg-muted/50 p-4 space-y-2\">\n                <h4 className=\"font-medium\">{t('template.instructions.title')}</h4>\n                <ul className=\"text-sm text-muted-foreground space-y-1\">\n                  <li>{t('template.instructions.requiredFields')}</li>\n                  <li>{t('template.instructions.dateFormat')}</li>\n                  <li>{t('template.instructions.booleanFormat')}</li>\n                  <li>{t('template.instructions.encoding')}</li>\n                </ul>\n              </div>\n            </div>\n          )}\n\n          {/* Step: Validating */}\n          {step === 'validate' && (\n            <div className=\"flex flex-col items-center justify-center py-8 space-y-4\">\n              <Loader2 className=\"h-12 w-12 animate-spin text-primary\" />\n              <div className=\"text-center\">\n                <p className=\"font-medium\">{t('import.validation.validating')}</p>\n                {selectedFile && (\n                  <p className=\"text-sm text-muted-foreground mt-1\">{selectedFile.name}</p>\n                )}\n              </div>\n              {progress && (\n                <div className=\"w-full max-w-xs space-y-2\">\n                  <Progress value={progress.progress} className=\"h-2\" />\n                  <p className=\"text-xs text-center text-muted-foreground\">\n                    {isRTL ? progress.message_ar : progress.message_en}\n                  </p>\n                </div>\n              )}\n            </div>\n          )}\n\n          {/* Step: Options (Validation Complete) */}\n          {step === 'options' && validationResult && (\n            <div className=\"space-y-6\">\n              {/* File Info */}\n              <div className=\"flex items-center gap-3 p-3 rounded-lg bg-muted/50\">\n                <FileSpreadsheet className=\"h-8 w-8 text-green-500\" />\n                <div className=\"flex-1 min-w-0\">\n                  <p className=\"font-medium truncate\">{validationResult.fileInfo?.name}</p>\n                  <p className=\"text-sm text-muted-foreground\">\n                    {validationResult.fileInfo?.rows} rows, {validationResult.fileInfo?.columns.length} columns\n                  </p>\n                </div>\n                <Button variant=\"ghost\" size=\"icon\" onClick={handleReset}>\n                  <X className=\"h-4 w-4\" />\n                </Button>\n              </div>\n\n              {/* Validation Results */}\n              <ImportValidationResults result={validationResult} maxRowsPreview={50} />\n\n              {/* Import Options */}\n              {canImport && (\n                <>\n                  {/* Mode Selection */}\n                  <div className=\"space-y-3\">\n                    <Label>{t('import.mode.title')}</Label>\n                    <RadioGroup\n                      value={mode}\n                      onValueChange={(value) => setMode(value as ImportMode)}\n                      className=\"space-y-2\"\n                    >\n                      <div className=\"flex items-start space-x-3 rtl:space-x-reverse p-3 rounded-lg border hover:bg-muted/50\">\n                        <RadioGroupItem value=\"create\" id=\"mode-create\" className=\"mt-1\" />\n                        <div className=\"flex-1\">\n                          <Label htmlFor=\"mode-create\" className=\"font-medium cursor-pointer\">\n                            {t('import.mode.create')}\n                          </Label>\n                          <p className=\"text-sm text-muted-foreground\">{t('import.mode.createDescription')}</p>\n                        </div>\n                      </div>\n                      <div className=\"flex items-start space-x-3 rtl:space-x-reverse p-3 rounded-lg border hover:bg-muted/50\">\n                        <RadioGroupItem value=\"update\" id=\"mode-update\" className=\"mt-1\" />\n                        <div className=\"flex-1\">\n                          <Label htmlFor=\"mode-update\" className=\"font-medium cursor-pointer\">\n                            {t('import.mode.update')}\n                          </Label>\n                          <p className=\"text-sm text-muted-foreground\">{t('import.mode.updateDescription')}</p>\n                        </div>\n                      </div>\n                      <div className=\"flex items-start space-x-3 rtl:space-x-reverse p-3 rounded-lg border hover:bg-muted/50\">\n                        <RadioGroupItem value=\"upsert\" id=\"mode-upsert\" className=\"mt-1\" />\n                        <div className=\"flex-1\">\n                          <Label htmlFor=\"mode-upsert\" className=\"font-medium cursor-pointer\">\n                            {t('import.mode.upsert')}\n                          </Label>\n                          <p className=\"text-sm text-muted-foreground\">{t('import.mode.upsertDescription')}</p>\n                        </div>\n                      </div>\n                    </RadioGroup>\n                  </div>\n\n                  {/* Conflict Resolution */}\n                  {validationResult.conflictRows > 0 && (\n                    <div className=\"space-y-3\">\n                      <Label>{t('import.conflictResolution.title')}</Label>\n                      <Select\n                        value={conflictResolution}\n                        onValueChange={(value) => setConflictResolution(value as ConflictResolution)}\n                      >\n                        <SelectTrigger>\n                          <SelectValue />\n                        </SelectTrigger>\n                        <SelectContent>\n                          <SelectItem value=\"skip\">\n                            <div>\n                              <span className=\"font-medium\">{t('import.conflictResolution.skip')}</span>\n                              <p className=\"text-xs text-muted-foreground\">{t('import.conflictResolution.skipDescription')}</p>\n                            </div>\n                          </SelectItem>\n                          <SelectItem value=\"overwrite\">\n                            <div>\n                              <span className=\"font-medium\">{t('import.conflictResolution.overwrite')}</span>\n                              <p className=\"text-xs text-muted-foreground\">{t('import.conflictResolution.overwriteDescription')}</p>\n                            </div>\n                          </SelectItem>\n                          <SelectItem value=\"merge\">\n                            <div>\n                              <span className=\"font-medium\">{t('import.conflictResolution.merge')}</span>\n                              <p className=\"text-xs text-muted-foreground\">{t('import.conflictResolution.mergeDescription')}</p>\n                            </div>\n                          </SelectItem>\n                        </SelectContent>\n                      </Select>\n                    </div>\n                  )}\n                </>\n              )}\n            </div>\n          )}\n\n          {/* Step: Importing */}\n          {step === 'import' && (\n            <div className=\"flex flex-col items-center justify-center py-8 space-y-4\">\n              <Loader2 className=\"h-12 w-12 animate-spin text-primary\" />\n              <div className=\"text-center\">\n                <p className=\"font-medium\">{t('import.execute.importing')}</p>\n              </div>\n              {progress && (\n                <div className=\"w-full max-w-xs space-y-2\">\n                  <Progress value={progress.progress} className=\"h-2\" />\n                  <p className=\"text-xs text-center text-muted-foreground\">\n                    {isRTL ? progress.message_ar : progress.message_en}\n                  </p>\n                </div>\n              )}\n            </div>\n          )}\n\n          {/* Step: Complete */}\n          {step === 'complete' && importResponse && (\n            <div className=\"flex flex-col items-center justify-center py-8 space-y-4\">\n              {importResponse.success ? (\n                <CheckCircle2 className=\"h-12 w-12 text-green-500\" />\n              ) : (\n                <AlertCircle className=\"h-12 w-12 text-yellow-500\" />\n              )}\n              <div className=\"text-center space-y-2\">\n                <p className=\"font-medium text-lg\">\n                  {importResponse.success ? t('import.success.title') : t('import.error.partialSuccess', { failed: importResponse.failedCount, total: importResponse.totalRows })}\n                </p>\n                <p className=\"text-muted-foreground\">\n                  {t('import.success.message', { success: importResponse.successCount, total: importResponse.totalRows })}\n                </p>\n              </div>\n              <div className=\"grid grid-cols-3 gap-4 w-full max-w-sm mt-4\">\n                <div className=\"text-center p-3 rounded-lg bg-green-50 dark:bg-green-900/20\">\n                  <p className=\"text-2xl font-bold text-green-600\">{importResponse.createdCount}</p>\n                  <p className=\"text-xs text-green-700\">Created</p>\n                </div>\n                <div className=\"text-center p-3 rounded-lg bg-blue-50 dark:bg-blue-900/20\">\n                  <p className=\"text-2xl font-bold text-blue-600\">{importResponse.updatedCount}</p>\n                  <p className=\"text-xs text-blue-700\">Updated</p>\n                </div>\n                <div className=\"text-center p-3 rounded-lg bg-muted\">\n                  <p className=\"text-2xl font-bold text-muted-foreground\">{importResponse.skippedCount}</p>\n                  <p className=\"text-xs text-muted-foreground\">Skipped</p>\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n\n        <DialogFooter className=\"flex-col sm:flex-row gap-2 border-t pt-4\">\n          {step === 'upload' && (\n            <Button variant=\"outline\" onClick={handleClose} className=\"w-full sm:w-auto\">\n              {t('common.cancel')}\n            </Button>\n          )}\n\n          {step === 'options' && (\n            <>\n              <Button variant=\"outline\" onClick={handleReset} className=\"w-full sm:w-auto\">\n                {t('common.back')}\n              </Button>\n              <Button\n                onClick={handleImport}\n                disabled={!canImport}\n                className=\"w-full sm:w-auto\"\n              >\n                <Upload className=\"h-4 w-4 me-2\" />\n                {t('import.execute.button')} ({validationResult?.validRows || 0})\n              </Button>\n            </>\n          )}\n\n          {step === 'complete' && (\n            <Button onClick={handleClose} className=\"w-full sm:w-auto\">\n              {t('common.close')}\n            </Button>\n          )}\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","/**\n * Export/Import Demo Page\n * Feature: export-import-templates\n *\n * Demonstration page for the export/import functionality.\n * Shows how to integrate export and import dialogs with entity management.\n */\n\nimport { useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select';\nimport { Label } from '@/components/ui/label';\nimport { Separator } from '@/components/ui/separator';\nimport { Badge } from '@/components/ui/badge';\nimport {\n  Download,\n  Upload,\n  FileSpreadsheet,\n  Users,\n  Building2,\n  Calendar,\n  Briefcase,\n  Target,\n  ClipboardList,\n} from 'lucide-react';\nimport { ExportDialog, ImportDialog } from '@/components/export-import';\nimport type { ExportableEntityType } from '@/types/export-import.types';\n\nconst ENTITY_OPTIONS: Array<{ value: ExportableEntityType; label: string; labelAr: string; icon: React.ReactNode }> = [\n  { value: 'dossier', label: 'Dossiers', labelAr: 'الملفات', icon: <Building2 className=\"h-4 w-4\" /> },\n  { value: 'person', label: 'Persons', labelAr: 'الأشخاص', icon: <Users className=\"h-4 w-4\" /> },\n  { value: 'engagement', label: 'Engagements', labelAr: 'الارتباطات', icon: <Calendar className=\"h-4 w-4\" /> },\n  { value: 'working-group', label: 'Working Groups', labelAr: 'مجموعات العمل', icon: <Briefcase className=\"h-4 w-4\" /> },\n  { value: 'commitment', label: 'Commitments', labelAr: 'الالتزامات', icon: <Target className=\"h-4 w-4\" /> },\n  { value: 'deliverable', label: 'Deliverables', labelAr: 'المخرجات', icon: <ClipboardList className=\"h-4 w-4\" /> },\n];\n\nexport function ExportImportPage() {\n  const { t, i18n } = useTranslation('export-import');\n  const isRTL = i18n.language === 'ar';\n\n  const [entityType, setEntityType] = useState<ExportableEntityType>('dossier');\n  const [exportDialogOpen, setExportDialogOpen] = useState(false);\n  const [importDialogOpen, setImportDialogOpen] = useState(false);\n\n  const selectedEntity = ENTITY_OPTIONS.find(e => e.value === entityType);\n\n  return (\n    <div className=\"container mx-auto px-4 sm:px-6 lg:px-8 py-6\" dir={isRTL ? 'rtl' : 'ltr'}>\n      <div className=\"mb-6\">\n        <h1 className=\"text-2xl sm:text-3xl font-bold\">{t('title')}</h1>\n        <p className=\"text-muted-foreground mt-1\">\n          {t('export.description')} / {t('import.description')}\n        </p>\n      </div>\n\n      <div className=\"grid gap-6 md:grid-cols-2\">\n        {/* Export Card */}\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <Download className=\"h-5 w-5\" />\n              {t('export.title')}\n            </CardTitle>\n            <CardDescription>\n              {t('export.description')}\n            </CardDescription>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <div className=\"space-y-2\">\n              <Label>{t('entities.dossier').split(' ')[0]} Type</Label>\n              <Select\n                value={entityType}\n                onValueChange={(value) => setEntityType(value as ExportableEntityType)}\n              >\n                <SelectTrigger>\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  {ENTITY_OPTIONS.map(option => (\n                    <SelectItem key={option.value} value={option.value}>\n                      <span className=\"flex items-center gap-2\">\n                        {option.icon}\n                        {isRTL ? option.labelAr : option.label}\n                      </span>\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n\n            <div className=\"rounded-lg border bg-muted/50 p-4\">\n              <div className=\"flex items-center gap-3 mb-3\">\n                {selectedEntity?.icon}\n                <div>\n                  <p className=\"font-medium\">{isRTL ? selectedEntity?.labelAr : selectedEntity?.label}</p>\n                  <p className=\"text-sm text-muted-foreground\">\n                    Export to Excel, CSV, or JSON\n                  </p>\n                </div>\n              </div>\n              <div className=\"flex flex-wrap gap-2\">\n                <Badge variant=\"outline\">\n                  <FileSpreadsheet className=\"h-3 w-3 me-1\" />\n                  XLSX\n                </Badge>\n                <Badge variant=\"outline\">CSV</Badge>\n                <Badge variant=\"outline\">JSON</Badge>\n              </div>\n            </div>\n\n            <Button onClick={() => setExportDialogOpen(true)} className=\"w-full\">\n              <Download className=\"h-4 w-4 me-2\" />\n              {t('export.button')}\n            </Button>\n          </CardContent>\n        </Card>\n\n        {/* Import Card */}\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <Upload className=\"h-5 w-5\" />\n              {t('import.title')}\n            </CardTitle>\n            <CardDescription>\n              {t('import.description')}\n            </CardDescription>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <div className=\"space-y-2\">\n              <Label>{t('entities.dossier').split(' ')[0]} Type</Label>\n              <Select\n                value={entityType}\n                onValueChange={(value) => setEntityType(value as ExportableEntityType)}\n              >\n                <SelectTrigger>\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  {ENTITY_OPTIONS.map(option => (\n                    <SelectItem key={option.value} value={option.value}>\n                      <span className=\"flex items-center gap-2\">\n                        {option.icon}\n                        {isRTL ? option.labelAr : option.label}\n                      </span>\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n\n            <div className=\"rounded-lg border bg-muted/50 p-4\">\n              <div className=\"flex items-center gap-3 mb-3\">\n                {selectedEntity?.icon}\n                <div>\n                  <p className=\"font-medium\">{isRTL ? selectedEntity?.labelAr : selectedEntity?.label}</p>\n                  <p className=\"text-sm text-muted-foreground\">\n                    Import from Excel or CSV files\n                  </p>\n                </div>\n              </div>\n              <div className=\"space-y-1 text-sm text-muted-foreground\">\n                <p>{t('template.instructions.requiredFields')}</p>\n                <p>{t('template.instructions.dateFormat')}</p>\n              </div>\n            </div>\n\n            <Button onClick={() => setImportDialogOpen(true)} className=\"w-full\">\n              <Upload className=\"h-4 w-4 me-2\" />\n              {t('import.button')}\n            </Button>\n          </CardContent>\n        </Card>\n      </div>\n\n      <Separator className=\"my-8\" />\n\n      {/* Features Section */}\n      <div className=\"grid gap-4 sm:grid-cols-2 lg:grid-cols-3\">\n        <Card className=\"bg-muted/50\">\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm font-medium\">\n              {t('import.validation.title')}\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <p className=\"text-sm text-muted-foreground\">\n              Row-by-row validation with detailed error messages and suggestions for fixing issues.\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card className=\"bg-muted/50\">\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm font-medium\">\n              {t('import.conflictResolution.title')}\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <p className=\"text-sm text-muted-foreground\">\n              Detect and resolve conflicts with existing records. Choose to skip, overwrite, or merge changes.\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card className=\"bg-muted/50\">\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm font-medium\">\n              {t('export.language.title')}\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <p className=\"text-sm text-muted-foreground\">\n              Export with English, Arabic, or bilingual column headers for maximum compatibility.\n            </p>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Dialogs */}\n      <ExportDialog\n        open={exportDialogOpen}\n        onOpenChange={setExportDialogOpen}\n        entityType={entityType}\n      />\n\n      <ImportDialog\n        open={importDialogOpen}\n        onOpenChange={setImportDialogOpen}\n        entityType={entityType}\n      />\n    </div>\n  );\n}\n\nexport default ExportImportPage;\n","/**\n * Export/Import Route\n * Feature: export-import-templates\n *\n * Route for the export/import demo page.\n */\n\nimport { createFileRoute } from '@tanstack/react-router';\nimport ExportImportPage from '@/pages/export-import/ExportImportPage';\n\nexport const Route = createFileRoute('/_protected/export-import')({\n  component: ExportImportPage,\n});\n"],"names":["SUPABASE_URL","ENTITY_TEMPLATES","useExportData","options","t","i18n","useTranslation","progress","setProgress","useState","isExporting","setIsExporting","error","setError","getAuthToken","useCallback","supabaseAuthKey","authData","parsed","exportData","request","token","response","errorData","result","workbook","ExcelJS.Workbook","worksheet","lines","headers","h","headerRow","i","values","v","column","maxLength","cell","cellLength","buffer","blob","url","link","exportResponse","toast","err","downloadTemplate","template","language","col","sampleRow","instructionRow","instRow","index","header","value","content","reset","ExportDialog","open","onOpenChange","entityType","selectedIds","onExportComplete","isRTL","format","setFormat","setLanguage","includeTemplate","setIncludeTemplate","exportSelected","setExportSelected","handleExport","handleDownloadTemplate","handleClose","formatIcons","jsx","FileSpreadsheet","FileText","FileJson","Dialog","jsxs","DialogContent","DialogHeader","DialogTitle","Download","DialogDescription","Label","RadioGroup","RadioGroupItem","Select","SelectTrigger","SelectValue","SelectContent","SelectItem","Checkbox","checked","Progress","DialogFooter","Button","Fragment","Loader2","MAX_FILE_SIZE_MB","useImportData","validationResult","setValidationResult","importResponse","setImportResponse","isValidating","setIsValidating","isImporting","setIsImporting","abortControllerRef","useRef","parseCSV","resolve","reject","Papa","results","data","parseXLSX","file","row","rowNumber","colNumber","rowData","uploadFile","parsedData","fileName","executeImport","validRows","cancel","STATUS_ICONS","CheckCircle2","XCircle","AlertTriangle","AlertCircle","STATUS_BADGES","ImportValidationResults","maxRowsPreview","className","showAllErrors","setShowAllErrors","expandedRows","setExpandedRows","toggleRowExpanded","prev","next","displayedRows","useMemo","rows","invalidRows","r","errorsByType","counts","getErrorMessage","getSuggestion","cn","Collapsible","CollapsibleTrigger","Badge","a","b","ChevronDown","CollapsibleContent","code","count","EyeOff","Eye","ScrollArea","Table","TableHeader","TableRow","TableHead","TableBody","TableCell","idx","TooltipProvider","Tooltip","TooltipTrigger","TooltipContent","k","ChevronUp","ImportDialog","onImportComplete","step","setStep","selectedFile","setSelectedFile","mode","setMode","conflictResolution","setConflictResolution","resetHook","onDrop","acceptedFiles","getRootProps","getInputProps","isDragActive","useDropzone","handleImport","handleReset","canImport","Upload","X","ENTITY_OPTIONS","Building2","Users","Calendar","Briefcase","Target","ClipboardList","ExportImportPage","setEntityType","exportDialogOpen","setExportDialogOpen","importDialogOpen","setImportDialogOpen","selectedEntity","e","Card","CardHeader","CardTitle","CardDescription","CardContent","option","Separator","SplitComponent"],"mappings":"6/BAsBA,MAAMA,GAAe,2CAGfC,GAA+J,CACnK,QAAS,CACP,QAAS,CACP,CAAE,MAAO,UAAW,OAAQ,mBAAoB,SAAU,oBAAqB,SAAU,GAAM,QAAS,qBAAA,EACxG,CAAE,MAAO,UAAW,OAAQ,gBAAiB,SAAU,eAAgB,SAAU,GAAO,QAAS,eAAA,EACjG,CAAE,MAAO,OAAQ,OAAQ,SAAU,SAAU,UAAW,SAAU,GAAM,QAAS,cAAA,EACjF,CAAE,MAAO,SAAU,OAAQ,SAAU,SAAU,SAAU,SAAU,GAAO,QAAS,QAAA,EACnF,CAAE,MAAO,aAAc,OAAQ,oBAAqB,SAAU,mBAAoB,SAAU,EAAA,EAC5F,CAAE,MAAO,aAAc,OAAQ,mBAAoB,SAAU,gBAAiB,SAAU,EAAA,EACxF,CAAE,MAAO,oBAAqB,OAAQ,oBAAqB,SAAU,iBAAkB,SAAU,GAAO,QAAS,KAAA,EACjH,CAAE,MAAO,OAAQ,OAAQ,OAAQ,SAAU,SAAU,SAAU,GAAO,QAAS,qBAAA,CAAsB,CACvG,EAEF,OAAQ,CACN,QAAS,CACP,CAAE,MAAO,UAAW,OAAQ,mBAAoB,SAAU,oBAAqB,SAAU,GAAM,QAAS,UAAA,EACxG,CAAE,MAAO,UAAW,OAAQ,gBAAiB,SAAU,eAAgB,SAAU,GAAO,QAAS,QAAA,EACjG,CAAE,MAAO,WAAY,OAAQ,kBAAmB,SAAU,2BAA4B,SAAU,GAAO,QAAS,UAAA,EAChH,CAAE,MAAO,WAAY,OAAQ,iBAAkB,SAAU,wBAAyB,SAAU,EAAA,EAC5F,CAAE,MAAO,QAAS,OAAQ,QAAS,SAAU,oBAAqB,SAAU,GAAO,QAAS,kBAAA,EAC5F,CAAE,MAAO,QAAS,OAAQ,QAAS,SAAU,SAAU,SAAU,GAAO,QAAS,aAAA,EACjF,CAAE,MAAO,mBAAoB,OAAQ,yBAA0B,SAAU,sBAAuB,SAAU,GAAO,QAAS,GAAA,EAC1H,CAAE,MAAO,kBAAmB,OAAQ,kBAAmB,SAAU,gBAAiB,SAAU,GAAO,QAAS,iBAAA,EAC5G,CAAE,MAAO,YAAa,OAAQ,YAAa,SAAU,SAAU,SAAU,GAAO,QAAS,iBAAA,CAAkB,CAC7G,EAEF,WAAY,CACV,QAAS,CACP,CAAE,MAAO,UAAW,OAAQ,mBAAoB,SAAU,oBAAqB,SAAU,GAAM,QAAS,mBAAA,EACxG,CAAE,MAAO,UAAW,OAAQ,gBAAiB,SAAU,eAAgB,SAAU,EAAA,EACjF,CAAE,MAAO,kBAAmB,OAAQ,SAAU,SAAU,UAAW,SAAU,GAAM,QAAS,mBAAA,EAC5F,CAAE,MAAO,WAAY,OAAQ,WAAY,SAAU,QAAS,SAAU,GAAO,QAAS,YAAA,EACtF,CAAE,MAAO,SAAU,OAAQ,SAAU,SAAU,SAAU,SAAU,GAAO,QAAS,SAAA,EACnF,CAAE,MAAO,aAAc,OAAQ,0BAA2B,SAAU,cAAe,SAAU,GAAO,QAAS,YAAA,EAC7G,CAAE,MAAO,WAAY,OAAQ,wBAAyB,SAAU,iBAAkB,SAAU,GAAO,QAAS,YAAA,EAC5G,CAAE,MAAO,cAAe,OAAQ,qBAAsB,SAAU,mBAAoB,SAAU,GAAO,QAAS,QAAA,EAC9G,CAAE,MAAO,cAAe,OAAQ,oBAAqB,SAAU,gBAAiB,SAAU,GAAO,QAAS,QAAA,EAC1G,CAAE,MAAO,aAAc,OAAQ,uBAAwB,SAAU,UAAW,SAAU,GAAO,QAAS,OAAA,EACtG,CAAE,MAAO,kBAAmB,OAAQ,kBAAmB,SAAU,YAAa,SAAU,GAAO,QAAS,GAAA,CAAI,CAC9G,EAEF,gBAAiB,CACf,QAAS,CACP,CAAE,MAAO,UAAW,OAAQ,mBAAoB,SAAU,oBAAqB,SAAU,GAAM,QAAS,sBAAA,EACxG,CAAE,MAAO,UAAW,OAAQ,gBAAiB,SAAU,eAAgB,SAAU,EAAA,EACjF,CAAE,MAAO,SAAU,OAAQ,SAAU,SAAU,SAAU,SAAU,GAAO,QAAS,QAAA,EACnF,CAAE,MAAO,aAAc,OAAQ,oBAAqB,SAAU,oBAAqB,SAAU,EAAA,EAC7F,CAAE,MAAO,aAAc,OAAQ,mBAAoB,SAAU,iBAAkB,SAAU,EAAA,EACzF,CAAE,MAAO,iBAAkB,OAAQ,8BAA+B,SAAU,gBAAiB,SAAU,GAAO,QAAS,YAAA,EACvH,CAAE,MAAO,mBAAoB,OAAQ,gCAAiC,SAAU,aAAc,SAAU,EAAA,CAAM,CAChH,EAEF,WAAY,CACV,QAAS,CACP,CAAE,MAAO,WAAY,OAAQ,oBAAqB,SAAU,sBAAuB,SAAU,GAAM,QAAS,0BAAA,EAC5G,CAAE,MAAO,WAAY,OAAQ,iBAAkB,SAAU,iBAAkB,SAAU,EAAA,EACrF,CAAE,MAAO,kBAAmB,OAAQ,SAAU,SAAU,UAAW,SAAU,GAAM,QAAS,UAAA,EAC5F,CAAE,MAAO,SAAU,OAAQ,SAAU,SAAU,SAAU,SAAU,GAAO,QAAS,SAAA,EACnF,CAAE,MAAO,WAAY,OAAQ,WAAY,SAAU,WAAY,SAAU,GAAO,QAAS,QAAA,EACzF,CAAE,MAAO,WAAY,OAAQ,wBAAyB,SAAU,iBAAkB,SAAU,GAAO,QAAS,YAAA,EAC5G,CAAE,MAAO,wBAAyB,OAAQ,eAAgB,SAAU,eAAgB,SAAU,GAAO,QAAS,GAAA,CAAI,CACpH,EAEF,YAAa,CACX,QAAS,CACP,CAAE,MAAO,WAAY,OAAQ,oBAAqB,SAAU,sBAAuB,SAAU,GAAM,QAAS,gBAAA,EAC5G,CAAE,MAAO,WAAY,OAAQ,iBAAkB,SAAU,iBAAkB,SAAU,EAAA,EACrF,CAAE,MAAO,SAAU,OAAQ,SAAU,SAAU,SAAU,SAAU,GAAO,QAAS,SAAA,EACnF,CAAE,MAAO,WAAY,OAAQ,wBAAyB,SAAU,kBAAmB,SAAU,GAAO,QAAS,YAAA,EAC7G,CAAE,MAAO,kBAAmB,OAAQ,+BAAgC,SAAU,gBAAiB,SAAU,EAAA,CAAM,CACjH,CAEJ,EAEO,SAASC,GAAcC,EAAgC,GAAyB,CACrF,KAAM,CAAE,EAAAC,EAAG,KAAAC,GAASC,EAAe,eAAe,EAC5C,CAACC,EAAUC,CAAW,EAAIC,EAAAA,SAAgC,IAAI,EAC9D,CAACC,EAAaC,CAAc,EAAIF,EAAAA,SAAS,EAAK,EAC9C,CAACG,EAAOC,CAAQ,EAAIJ,EAAAA,SAAuB,IAAI,EAE/CK,EAAeC,EAAAA,YAAY,IAAM,CACrC,MAAMC,EAAkB,MAAM,IAAI,IAAIhB,EAAY,EAAE,SAAS,MAAM,GAAG,EAAE,CAAC,CAAC,cACpEiB,EAAW,aAAa,QAAQD,CAAe,EACrD,GAAIC,EACF,GAAI,CACF,MAAMC,EAAS,KAAK,MAAMD,CAAQ,EAClC,OAAOC,EAAO,cAAgBA,CAChC,MAAQ,CACN,OAAOD,CACT,CAEF,OAAO,IACT,EAAG,CAAA,CAAE,EAECE,EAAaJ,cAAY,MAAOK,GAAoD,CACxFT,EAAe,EAAI,EACnBE,EAAS,IAAI,EACbL,EAAY,CACV,MAAO,WACP,SAAU,EACV,WAAYJ,EAAE,mBAAmB,EACjC,WAAYA,EAAE,mBAAmB,CAAA,CAClC,EAED,GAAI,CACF,MAAMiB,EAAQP,EAAA,EACd,GAAI,CAACO,EACH,MAAM,IAAI,MAAM,mBAAmB,EAGrCb,EAAY,CACV,MAAO,WACP,SAAU,GACV,WAAYJ,EAAE,mBAAmB,EACjC,WAAYA,EAAE,mBAAmB,CAAA,CAClC,EAGD,MAAMkB,EAAW,MAAM,MAAM,GAAGtB,EAAY,4BAA6B,CACvE,OAAQ,OACR,QAAS,CACP,eAAgB,mBAChB,cAAiB,UAAUqB,CAAK,EAAA,EAElC,KAAM,KAAK,UAAUD,CAAO,CAAA,CAC7B,EAED,GAAI,CAACE,EAAS,GAAI,CAChB,MAAMC,EAAY,MAAMD,EAAS,KAAA,EAAO,MAAM,KAAO,CAAA,EAAG,EACxD,MAAM,IAAI,MAAMC,EAAU,OAAO,YAAc,eAAe,CAChE,CAEA,MAAMC,EAAS,MAAMF,EAAS,KAAA,EAU9B,GARAd,EAAY,CACV,MAAO,aACP,SAAU,GACV,WAAYJ,EAAE,qBAAqB,EACnC,WAAYA,EAAE,qBAAqB,CAAA,CACpC,EAGGgB,EAAQ,SAAW,QAAUI,EAAO,QAAS,CAC/C,MAAMC,EAAW,IAAIC,YACfC,EAAYF,EAAS,aAAaL,EAAQ,UAAU,EAGpDQ,EAAQJ,EAAO,QAAQ,QAAQ,UAAW,EAAE,EAAE,MAAM;AAAA,CAAM,EAC1DK,EAAUD,EAAM,CAAC,EAAE,MAAM,GAAG,EAAE,IAAKE,GAAcA,EAAE,QAAQ,SAAU,EAAE,CAAC,EAG9EH,EAAU,OAAOE,CAAO,EAGxB,MAAME,EAAYJ,EAAU,OAAO,CAAC,EACpCI,EAAU,KAAO,CAAE,KAAM,EAAA,EACzBA,EAAU,KAAO,CACf,KAAM,UACN,QAAS,QACT,QAAS,CAAE,KAAM,UAAA,CAAW,EAI9B,QAASC,EAAI,EAAGA,EAAIJ,EAAM,OAAQI,IAChC,GAAIJ,EAAMI,CAAC,EAAE,OAAQ,CAEnB,MAAMC,EAASL,EAAMI,CAAC,EAAE,MAAM,yCAAyC,GACnE,IAAKE,GAAcA,EAAE,QAAQ,KAAM,EAAE,EAAE,QAAQ,SAAU,EAAE,EAAE,QAAQ,MAAO,GAAG,CAAC,GAAK,CAAA,EACzFP,EAAU,OAAOM,CAAM,CACzB,CAIFN,EAAU,QAAQ,QAAQQ,GAAU,CAClC,IAAIC,EAAY,GAChBD,EAAO,WAAW,CAAE,aAAc,EAAA,EAAQE,GAAQ,CAChD,MAAMC,EAAaD,EAAK,MAAQA,EAAK,MAAM,SAAA,EAAW,OAAS,EAC3DC,EAAaF,IACfA,EAAY,KAAK,IAAIE,EAAY,EAAE,EAEvC,CAAC,EACDH,EAAO,MAAQC,EAAY,CAC7B,CAAC,EAGD,MAAMG,EAAS,MAAMd,EAAS,KAAK,YAAA,EAC7Be,EAAO,IAAI,KAAK,CAACD,CAAM,EAAG,CAAE,KAAM,oEAAqE,EACvGE,EAAM,IAAI,gBAAgBD,CAAI,EAG9BE,EAAO,SAAS,cAAc,GAAG,EACvCA,EAAK,KAAOD,EACZC,EAAK,SAAWlB,EAAO,SAAS,QAAQ,OAAQ,OAAO,EACvD,SAAS,KAAK,YAAYkB,CAAI,EAC9BA,EAAK,MAAA,EACL,SAAS,KAAK,YAAYA,CAAI,EAC9B,IAAI,gBAAgBD,CAAG,CACzB,SAAWjB,EAAO,QAAS,CAEzB,MAAMgB,EAAO,IAAI,KAAK,CAAChB,EAAO,OAAO,EAAG,CAAE,KAAMA,EAAO,YAAa,EAC9DiB,EAAM,IAAI,gBAAgBD,CAAI,EAE9BE,EAAO,SAAS,cAAc,GAAG,EACvCA,EAAK,KAAOD,EACZC,EAAK,SAAWlB,EAAO,SACvB,SAAS,KAAK,YAAYkB,CAAI,EAC9BA,EAAK,MAAA,EACL,SAAS,KAAK,YAAYA,CAAI,EAC9B,IAAI,gBAAgBD,CAAG,CACzB,CAEAjC,EAAY,CACV,MAAO,WACP,SAAU,IACV,WAAYJ,EAAE,mBAAmB,EACjC,WAAYA,EAAE,mBAAmB,CAAA,CAClC,EAED,MAAMuC,EAAiC,CACrC,QAAS,GACT,SAAUnB,EAAO,SACjB,YAAaA,EAAO,YACpB,WAAYA,EAAO,WACnB,WAAYA,EAAO,WACnB,OAAQA,EAAO,MAAA,EAGjB,OAAArB,EAAQ,YAAYwC,CAAc,EAClCC,EAAM,QAAQxC,EAAE,sBAAsB,EAAG,CACvC,YAAaA,EAAE,yBAA0B,CAAE,MAAOoB,EAAO,YAAa,CAAA,CACvE,EAEMmB,CACT,OAASE,EAAK,CACZ,MAAMjC,EAAQiC,aAAe,MAAQA,EAAM,IAAI,MAAM,eAAe,EACpE,MAAAhC,EAASD,CAAK,EACdJ,EAAY,CACV,MAAO,QACP,SAAU,EACV,WAAYI,EAAM,QAClB,WAAYA,EAAM,OAAA,CACnB,EACDT,EAAQ,UAAUS,CAAK,EACvBgC,EAAM,MAAMxC,EAAE,oBAAoB,EAAG,CACnC,YAAaQ,EAAM,OAAA,CACpB,EACKA,CACR,QAAA,CACED,EAAe,EAAK,CACtB,CACF,EAAG,CAACG,EAAcX,EAASC,CAAC,CAAC,EAEvB0C,EAAmB/B,cAAY,MAAOK,GAAoD,CAC9FT,EAAe,EAAI,EACnBE,EAAS,IAAI,EAEb,GAAI,CACF,MAAMkC,EAAW9C,GAAiBmB,EAAQ,UAAU,EACpD,GAAI,CAAC2B,EACH,MAAM,IAAI,MAAM,wBAAwB3B,EAAQ,UAAU,EAAE,EAG9D,MAAM4B,EAAW5B,EAAQ,WAAaf,EAAK,WAAa,KAAO,KAAO,MAEtE,GAAIe,EAAQ,SAAW,OAAQ,CAC7B,MAAMK,EAAW,IAAIC,YACfC,EAAYF,EAAS,aAAaL,EAAQ,UAAU,EAGpDS,EAAUkB,EAAS,QAAQ,IAAIE,GAC/BD,IAAa,OACR,GAAGC,EAAI,MAAM,MAAMA,EAAI,QAAQ,GAEjCD,IAAa,KAAOC,EAAI,SAAWA,EAAI,MAC/C,EAGDtB,EAAU,OAAOE,CAAO,EAGxB,MAAME,EAAYJ,EAAU,OAAO,CAAC,EAUpC,GATAI,EAAU,KAAO,CAAE,KAAM,EAAA,EACzBA,EAAU,KAAO,CACf,KAAM,UACN,QAAS,QACT,QAAS,CAAE,KAAM,UAAA,CAAW,EAE9BA,EAAU,KAAO,CAAE,KAAM,GAAM,MAAO,CAAE,KAAM,WAAW,EAGrDX,EAAQ,kBAAmB,CAC7B,MAAM8B,EAAYH,EAAS,QAAQ,IAAIE,GAAOA,EAAI,SAAW,EAAE,EAC/DtB,EAAU,OAAOuB,CAAS,CAC5B,CAGA,MAAMC,EAAiBJ,EAAS,QAAQ,IAAIE,GAC1CA,EAAI,SAAW,aAAe,YAAA,EAE1BG,EAAUzB,EAAU,OAAOwB,CAAc,EAC/CC,EAAQ,KAAO,CAAE,OAAQ,GAAM,MAAO,CAAE,KAAM,WAAW,EAGzDzB,EAAU,QAAQ,QAAQ,CAACQ,EAAQkB,IAAU,CAC3C,MAAMC,EAASzB,EAAQwB,CAAK,GAAK,GAC3BjB,EAAY,KAAK,IAAIkB,EAAO,OAAQ,EAAE,EAC5CnB,EAAO,MAAQ,KAAK,IAAIC,EAAY,EAAG,EAAE,CAC3C,CAAC,EAGD,MAAMG,EAAS,MAAMd,EAAS,KAAK,YAAA,EAC7Be,EAAO,IAAI,KAAK,CAACD,CAAM,EAAG,CAAE,KAAM,oEAAqE,EACvGE,EAAM,IAAI,gBAAgBD,CAAI,EAE9BE,EAAO,SAAS,cAAc,GAAG,EACvCA,EAAK,KAAOD,EACZC,EAAK,SAAW,GAAGtB,EAAQ,UAAU,iBACrC,SAAS,KAAK,YAAYsB,CAAI,EAC9BA,EAAK,MAAA,EACL,SAAS,KAAK,YAAYA,CAAI,EAC9B,IAAI,gBAAgBD,CAAG,CACzB,KAAO,CAUL,MAAMb,EAAQ,CAREmB,EAAS,QAAQ,IAAIE,GAAO,CAC1C,GAAID,IAAa,OACf,MAAO,IAAIC,EAAI,MAAM,MAAMA,EAAI,QAAQ,IAEzC,MAAMK,EAASN,IAAa,KAAOC,EAAI,SAAWA,EAAI,OACtD,OAAOK,EAAO,SAAS,GAAG,EAAI,IAAIA,CAAM,IAAMA,CAChD,CAAC,EAEsB,KAAK,GAAG,CAAC,EAGhC,GAAIlC,EAAQ,kBAAmB,CAC7B,MAAM8B,EAAYH,EAAS,QAAQ,IAAIE,GAAO,CAC5C,MAAMM,EAAQN,EAAI,SAAW,GAC7B,OAAOM,EAAM,SAAS,GAAG,GAAKA,EAAM,SAAS,GAAG,EAAI,IAAIA,EAAM,QAAQ,KAAM,IAAI,CAAC,IAAMA,CACzF,CAAC,EACD3B,EAAM,KAAKsB,EAAU,KAAK,GAAG,CAAC,CAChC,CAGA,MAAMM,EAAU,SAAW5B,EAAM,KAAK;AAAA,CAAM,EACtCY,EAAO,IAAI,KAAK,CAACgB,CAAO,EAAG,CAAE,KAAM,0BAA2B,EAC9Df,EAAM,IAAI,gBAAgBD,CAAI,EAE9BE,EAAO,SAAS,cAAc,GAAG,EACvCA,EAAK,KAAOD,EACZC,EAAK,SAAW,GAAGtB,EAAQ,UAAU,gBACrC,SAAS,KAAK,YAAYsB,CAAI,EAC9BA,EAAK,MAAA,EACL,SAAS,KAAK,YAAYA,CAAI,EAC9B,IAAI,gBAAgBD,CAAG,CACzB,CAEAG,EAAM,QAAQxC,EAAE,kBAAkB,CAAC,CACrC,OAASyC,EAAK,CACZ,MAAMjC,EAAQiC,aAAe,MAAQA,EAAM,IAAI,MAAM,0BAA0B,EAC/E,MAAAhC,EAASD,CAAK,EACdgC,EAAM,MAAMhC,EAAM,OAAO,EACnBA,CACR,QAAA,CACED,EAAe,EAAK,CACtB,CACF,EAAG,CAACN,EAAK,SAAUD,CAAC,CAAC,EAEfqD,EAAQ1C,EAAAA,YAAY,IAAM,CAC9BP,EAAY,IAAI,EAChBK,EAAS,IAAI,EACbF,EAAe,EAAK,CACtB,EAAG,CAAA,CAAE,EAEL,MAAO,CACL,WAAAQ,EACA,iBAAA2B,EACA,SAAAvC,EACA,YAAAG,EACA,MAAAE,EACA,MAAA6C,CAAA,CAEJ,CC3WO,SAASC,GAAa,CAC3B,KAAAC,EACA,aAAAC,EACA,WAAAC,EACA,YAAAC,EACA,iBAAAC,CACF,EAAsB,CACpB,KAAM,CAAE,EAAA3D,EAAG,KAAAC,GAASC,EAAe,eAAe,EAC5C0D,EAAQ3D,EAAK,WAAa,KAE1B,CAAC4D,EAAQC,CAAS,EAAIzD,EAAAA,SAAuB,MAAM,EACnD,CAACuC,EAAUmB,CAAW,EAAI1D,EAAAA,SAA+B,MAAM,EAC/D,CAAC2D,EAAiBC,CAAkB,EAAI5D,EAAAA,SAAS,EAAK,EACtD,CAAC6D,EAAgBC,CAAiB,EAAI9D,EAAAA,SAAS,CAAC,CAACqD,GAAa,MAAM,EAEpE,CAAE,WAAA3C,EAAY,iBAAA2B,EAAkB,SAAAvC,EAAU,YAAAG,EAAa,MAAA+C,CAAA,EAAUvD,GAAc,CACnF,UAAW,IAAM,CACf6D,IAAA,EACA,WAAW,IAAM,CACfN,EAAA,EACAG,EAAa,EAAK,CACpB,EAAG,IAAI,CACT,CAAA,CACD,EAEKY,EAAezD,EAAAA,YAAY,SAAY,CAS3C,MAAMI,EARyB,CAC7B,WAAA0C,EACA,OAAAI,EACA,IAAKK,EAAiBR,EAAc,OACpC,gBAAAM,EACA,SAAApB,CAAA,CAGsB,CAC1B,EAAG,CAACa,EAAYI,EAAQK,EAAgBR,EAAaM,EAAiBpB,EAAU7B,CAAU,CAAC,EAErFsD,EAAyB1D,EAAAA,YAAY,SAAY,CACrD,MAAM+B,EAAiB,CACrB,WAAAe,EACA,OAAQI,IAAW,OAAS,OAAS,MACrC,kBAAmB,GACnB,SAAAjB,CAAA,CACD,CACH,EAAG,CAACa,EAAYI,EAAQjB,EAAUF,CAAgB,CAAC,EAE7C4B,EAAc3D,EAAAA,YAAY,IAAM,CAC/BL,IACH+C,EAAA,EACAG,EAAa,EAAK,EAEtB,EAAG,CAAClD,EAAa+C,EAAOG,CAAY,CAAC,EAE/Be,EAAqD,CACzD,KAAMC,EAAAA,IAACC,EAAA,CAAgB,UAAU,SAAA,CAAU,EAC3C,IAAKD,EAAAA,IAACE,GAAA,CAAS,UAAU,SAAA,CAAU,EACnC,KAAMF,EAAAA,IAACG,GAAA,CAAS,UAAU,SAAA,CAAU,CAEtC,EAEA,OACEH,EAAAA,IAACI,GAAA,CAAO,KAAArB,EAAY,aAAce,EAChC,SAAAO,EAAAA,KAACC,GAAA,CACC,UAAU,mBACV,IAAKlB,EAAQ,MAAQ,MAErB,SAAA,CAAAiB,OAACE,GAAA,CACC,SAAA,CAAAF,EAAAA,KAACG,GAAA,CAAY,UAAU,0BACrB,SAAA,CAAAR,EAAAA,IAACS,GAAA,CAAS,UAAU,SAAA,CAAU,EAC7BjF,EAAE,cAAc,CAAA,EACnB,EACAwE,EAAAA,IAACU,GAAA,CACE,SAAAlF,EAAE,oBAAoB,CAAA,CACzB,CAAA,EACF,EAEA6E,EAAAA,KAAC,MAAA,CAAI,UAAU,kBAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAL,EAAAA,IAACW,EAAA,CAAO,SAAAnF,EAAE,qBAAqB,CAAA,CAAE,EACjC6E,EAAAA,KAACO,GAAA,CACC,MAAOvB,EACP,cAAgBV,GAAUW,EAAUX,CAAqB,EACzD,UAAU,yBAEV,SAAA,CAAA0B,OAAC,MAAA,CACC,SAAA,CAAAL,EAAAA,IAACa,EAAA,CACC,MAAM,OACN,GAAG,cACH,UAAU,cAAA,CAAA,EAEZR,EAAAA,KAACM,EAAA,CACC,QAAQ,cACR,UAAU,+OAET,SAAA,CAAAZ,EAAY,WACZ,OAAA,CAAK,UAAU,eAAgB,SAAAvE,EAAE,oBAAoB,CAAA,CAAE,CAAA,CAAA,CAAA,CAC1D,EACF,SACC,MAAA,CACC,SAAA,CAAAwE,EAAAA,IAACa,EAAA,CACC,MAAM,MACN,GAAG,aACH,UAAU,cAAA,CAAA,EAEZR,EAAAA,KAACM,EAAA,CACC,QAAQ,aACR,UAAU,+OAET,SAAA,CAAAZ,EAAY,UACZ,OAAA,CAAK,UAAU,eAAgB,SAAAvE,EAAE,mBAAmB,CAAA,CAAE,CAAA,CAAA,CAAA,CACzD,EACF,SACC,MAAA,CACC,SAAA,CAAAwE,EAAAA,IAACa,EAAA,CACC,MAAM,OACN,GAAG,cACH,UAAU,cAAA,CAAA,EAEZR,EAAAA,KAACM,EAAA,CACC,QAAQ,cACR,UAAU,+OAET,SAAA,CAAAZ,EAAY,WACZ,OAAA,CAAK,UAAU,eAAgB,SAAAvE,EAAE,oBAAoB,CAAA,CAAE,CAAA,CAAA,CAAA,CAC1D,CAAA,CACF,CAAA,CAAA,CAAA,CACF,EACF,EAGA6E,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAL,EAAAA,IAACW,EAAA,CAAO,SAAAnF,EAAE,uBAAuB,CAAA,CAAE,EACnC6E,EAAAA,KAACS,GAAO,MAAO1C,EAAU,cAAgBO,GAAUY,EAAYZ,CAA6B,EAC1F,SAAA,CAAAqB,EAAAA,IAACe,EAAA,CACC,SAAAf,EAAAA,IAACgB,GAAA,CAAA,CAAY,EACf,SACCC,GAAA,CACC,SAAA,CAAAjB,MAACkB,EAAA,CAAW,MAAM,KAAM,SAAA1F,EAAE,oBAAoB,EAAE,QAC/C0F,EAAA,CAAW,MAAM,KAAM,SAAA1F,EAAE,oBAAoB,EAAE,QAC/C0F,EAAA,CAAW,MAAM,OAAQ,SAAA1F,EAAE,sBAAsB,CAAA,CAAE,CAAA,CAAA,CACtD,CAAA,CAAA,CACF,CAAA,EACF,EAGA6E,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAL,EAAAA,IAACW,EAAA,CAAO,SAAAnF,EAAE,sBAAsB,CAAA,CAAE,EAClC6E,EAAAA,KAAC,MAAA,CAAI,UAAU,YACZ,SAAA,CAAAnB,GAAa,OACZmB,OAAC,MAAA,CAAI,UAAU,kDACb,SAAA,CAAAL,EAAAA,IAACmB,GAAA,CACC,GAAG,kBACH,QAASzB,EACT,gBAAkB0B,GAAYzB,EAAkB,CAAC,CAACyB,CAAO,CAAA,CAAA,EAE3Df,EAAAA,KAACM,EAAA,CACC,QAAQ,kBACR,UAAU,qCAET,SAAA,CAAAnF,EAAE,6BAA6B,EAAE,KAAG0D,EAAY,OAAO,GAAA,CAAA,CAAA,CAC1D,CAAA,CACF,EACE,KACJmB,EAAAA,KAAC,MAAA,CAAI,UAAU,kDACb,SAAA,CAAAL,EAAAA,IAACmB,GAAA,CACC,GAAG,mBACH,QAAS3B,EACT,gBAAkB4B,GAAY3B,EAAmB,CAAC,CAAC2B,CAAO,CAAA,CAAA,EAE5DpB,EAAAA,IAACW,EAAA,CACC,QAAQ,mBACR,UAAU,qCAET,WAAE,gCAAgC,CAAA,CAAA,CACrC,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EACF,EAGChF,GACC0E,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,4CACb,SAAA,CAAAL,EAAAA,IAAC,QAAM,SAAAvE,EAAK,WAAa,KAAOE,EAAS,WAAaA,EAAS,UAAA,CAAW,SACzE,OAAA,CAAM,SAAA,CAAAA,EAAS,SAAS,GAAA,CAAA,CAAC,CAAA,EAC5B,QACC0F,GAAA,CAAS,MAAO1F,EAAS,SAAU,UAAU,KAAA,CAAM,CAAA,CAAA,CACtD,CAAA,EAEJ,EAEA0E,EAAAA,KAACiB,GAAA,CAAa,UAAU,6BACtB,SAAA,CAAAjB,EAAAA,KAACkB,EAAA,CACC,QAAQ,UACR,QAAS1B,EACT,SAAU/D,EACV,UAAU,mBAEV,SAAA,CAAAkE,EAAAA,IAACC,EAAA,CAAgB,UAAU,cAAA,CAAe,EACzCzE,EAAE,iBAAiB,CAAA,CAAA,CAAA,EAEtB6E,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAL,EAAAA,IAACuB,EAAA,CACC,QAAQ,UACR,QAASzB,EACT,SAAUhE,EACV,UAAU,sBAET,WAAE,eAAe,CAAA,CAAA,EAEpBkE,EAAAA,IAACuB,EAAA,CACC,QAAS3B,EACT,SAAU9D,EACV,UAAU,sBAET,WACCuE,EAAAA,KAAAmB,EAAAA,SAAA,CACE,SAAA,CAAAxB,EAAAA,IAACyB,GAAA,CAAQ,UAAU,2BAAA,CAA4B,EAC9CjG,EAAE,oBAAoB,CAAA,CAAA,CACzB,EAEA6E,EAAAA,KAAAmB,EAAAA,SAAA,CACE,SAAA,CAAAxB,EAAAA,IAACS,GAAA,CAAS,UAAU,cAAA,CAAe,EAClCjF,EAAE,eAAe,CAAA,CAAA,CACpB,CAAA,CAAA,CAEJ,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CAAA,EAEJ,CAEJ,CC7PA,MAAMJ,GAAe,2CACfsG,GAAmB,GAElB,SAASC,GAAcpG,EAAoD,CAChF,KAAM,CAAE,EAAAC,CAAA,EAAME,EAAe,eAAe,EACtC,CAACkG,EAAkBC,CAAmB,EAAIhG,EAAAA,SAAwC,IAAI,EACtF,CAACiG,EAAgBC,CAAiB,EAAIlG,EAAAA,SAAgC,IAAI,EAC1E,CAACF,EAAUC,CAAW,EAAIC,EAAAA,SAAgC,IAAI,EAC9D,CAACmG,EAAcC,CAAe,EAAIpG,EAAAA,SAAS,EAAK,EAChD,CAACqG,EAAaC,CAAc,EAAItG,EAAAA,SAAS,EAAK,EAC9C,CAACG,EAAOC,CAAQ,EAAIJ,EAAAA,SAAuB,IAAI,EAC/CuG,EAAqBC,EAAAA,OAA+B,IAAI,EAExDnG,EAAeC,EAAAA,YAAY,IAAM,CACrC,MAAMC,EAAkB,MAAM,IAAI,IAAIhB,EAAY,EAAE,SAAS,MAAM,GAAG,EAAE,CAAC,CAAC,cACpEiB,EAAW,aAAa,QAAQD,CAAe,EACrD,GAAIC,EACF,GAAI,CACF,MAAMC,EAAS,KAAK,MAAMD,CAAQ,EAClC,OAAOC,EAAO,cAAgBA,CAChC,MAAQ,CACN,OAAOD,CACT,CAEF,OAAO,IACT,EAAG,CAAA,CAAE,EAECiG,EAAWnG,cAAayC,GACrB,IAAI,QAAQ,CAAC2D,EAASC,IAAW,CACtCC,GAAK,MAAM7D,EAAS,CAClB,OAAQ,GACR,eAAgB,GAChB,gBAAkBF,GAAmBA,EAAO,KAAA,EAC5C,SAAWgE,GAAY,CACrB,MAAMzF,EAAUyF,EAAQ,KAAK,QAAU,CAAA,EACjCC,EAAOD,EAAQ,KACrBH,EAAQ,CAAE,QAAAtF,EAAS,KAAA0F,EAAM,CAC3B,EACA,MAAQ3G,GAAiB,CACvBwG,EAAOxG,CAAK,CACd,CAAA,CACD,CACH,CAAC,EACA,CAAA,CAAE,EAEC4G,EAAYzG,cAAY,MAAO0G,GAAgF,CACnH,MAAMhG,EAAW,IAAIC,YACfa,EAAS,MAAMkF,EAAK,YAAA,EAC1B,MAAMhG,EAAS,KAAK,KAAKc,CAAM,EAE/B,MAAMZ,EAAYF,EAAS,WAAW,CAAC,EACvC,GAAI,CAACE,EACH,MAAM,IAAI,MAAM,4BAA4B,EAG9C,MAAME,EAAoB,CAAA,EACpB0F,EAAkC,CAAA,EAExC,OAAA5F,EAAU,QAAQ,CAAC+F,EAAKC,IAAc,CACpC,GAAIA,IAAc,EAEhBD,EAAI,SAAS,CAACrF,EAAMuF,IAAc,CAChC/F,EAAQ+F,EAAY,CAAC,EAAI,OAAOvF,EAAK,OAAS,EAAE,EAAE,KAAA,CACpD,CAAC,MACI,CAEL,MAAMwF,EAAmC,CAAA,EACzCH,EAAI,SAAS,CAACrF,EAAMuF,IAAc,CAChC,MAAMtE,EAASzB,EAAQ+F,EAAY,CAAC,EACpC,GAAItE,EAAQ,CACV,IAAIC,EAAiBlB,EAAK,MAEtB,OAAOkB,GAAU,UAAYA,IAAU,OACrC,SAAUA,EACZA,EAASA,EAA2B,KAC3B,WAAYA,IACrBA,EAASA,EAA8B,SAG3CsE,EAAQvE,CAAM,EAAIC,CACpB,CACF,CAAC,EACG,OAAO,KAAKsE,CAAO,EAAE,OAAS,GAChCN,EAAK,KAAKM,CAAO,CAErB,CACF,CAAC,EAEM,CAAE,QAAAhG,EAAS,KAAA0F,CAAA,CACpB,EAAG,CAAA,CAAE,EAECO,EAAa/G,cAAY,MAAO0G,GAAgD,CACpFZ,EAAgB,EAAI,EACpBhG,EAAS,IAAI,EACb4F,EAAoB,IAAI,EACxBO,EAAmB,QAAU,IAAI,gBAEjC,GAAI,CAGF,GADmBS,EAAK,KAAQ,QACfnB,GACf,MAAM,IAAI,MAAMlG,EAAE,wBAAyB,CAAE,KAAMkG,EAAA,CAAkB,CAAC,EAGxE9F,EAAY,CACV,MAAO,YACP,SAAU,GACV,WAAYJ,EAAE,oBAAoB,EAClC,WAAYA,EAAE,oBAAoB,CAAA,CACnC,EAGD,IAAI2H,EACJ,MAAMC,EAAWP,EAAK,KAAK,YAAA,EAS3B,GAPAjH,EAAY,CACV,MAAO,UACP,SAAU,GACV,WAAYJ,EAAE,kBAAkB,EAChC,WAAYA,EAAE,kBAAkB,CAAA,CACjC,EAEG4H,EAAS,SAAS,OAAO,GAAKA,EAAS,SAAS,MAAM,EACxDD,EAAa,MAAMP,EAAUC,CAAI,UACxBO,EAAS,SAAS,MAAM,EAAG,CACpC,MAAMxE,EAAU,MAAMiE,EAAK,KAAA,EAC3BM,EAAa,MAAMb,EAAS1D,CAAO,CACrC,KACE,OAAM,IAAI,MAAMpD,EAAE,4BAA4B,CAAC,EAIjD,GAAI2H,EAAW,KAAK,SAAW,EAC7B,MAAM,IAAI,MAAM3H,EAAE,wBAAwB,CAAC,EAG7CI,EAAY,CACV,MAAO,aACP,SAAU,GACV,WAAYJ,EAAE,qBAAqB,EACnC,WAAYA,EAAE,qBAAqB,EACnC,UAAW2H,EAAW,KAAK,MAAA,CAC5B,EAGD,MAAM1G,EAAQP,EAAA,EACd,GAAI,CAACO,EACH,MAAM,IAAI,MAAM,mBAAmB,EAGrC,MAAMC,EAAW,MAAM,MAAM,GAAGtB,EAAY,4BAA6B,CACvE,OAAQ,OACR,QAAS,CACP,eAAgB,mBAChB,cAAiB,UAAUqB,CAAK,EAAA,EAElC,KAAM,KAAK,UAAU,CACnB,WAAYlB,EAAQ,WACpB,QAAS4H,EAAW,QACpB,KAAMA,EAAW,KACjB,KAAM5H,EAAQ,aAAe,QAAA,CAC9B,EACD,OAAQ6G,EAAmB,QAAQ,MAAA,CACpC,EAED,GAAI,CAAC1F,EAAS,GAAI,CAChB,MAAMC,EAAY,MAAMD,EAAS,KAAA,EAAO,MAAM,KAAO,CAAA,EAAG,EACxD,MAAM,IAAI,MAAMC,EAAU,OAAO,YAAc,mBAAmB,CACpE,CAEA,MAAMC,EAAS,MAAMF,EAAS,KAAA,EAG9B,OAAAE,EAAO,SAAW,CAChB,KAAMiG,EAAK,KACX,KAAMA,EAAK,KACX,KAAMM,EAAW,KAAK,OACtB,QAASA,EAAW,QACpB,OAAQC,EAAS,SAAS,OAAO,GAAKA,EAAS,SAAS,MAAM,EAAI,OAAS,KAAA,EAG7ExH,EAAY,CACV,MAAO,WACP,SAAU,IACV,WAAYJ,EAAE,mBAAmB,EACjC,WAAYA,EAAE,mBAAmB,CAAA,CAClC,EAEDqG,EAAoBjF,CAAM,EAC1BrB,EAAQ,uBAAuBqB,CAAM,EAE9BA,CACT,OAASqB,EAAK,CACZ,GAAKA,EAAc,OAAS,aAC1B,MAAM,IAAI,MAAM,qBAAqB,EAEvC,MAAMjC,EAAQiC,aAAe,MAAQA,EAAM,IAAI,MAAM,eAAe,EACpE,MAAAhC,EAASD,CAAK,EACdJ,EAAY,CACV,MAAO,QACP,SAAU,EACV,WAAYI,EAAM,QAClB,WAAYA,EAAM,OAAA,CACnB,EACDT,EAAQ,UAAUS,CAAK,EACvBgC,EAAM,MAAMxC,EAAE,oBAAoB,EAAG,CACnC,YAAaQ,EAAM,OAAA,CACpB,EACKA,CACR,QAAA,CACEiG,EAAgB,EAAK,CACvB,CACF,EAAG,CAAC/F,EAAcX,EAAS+G,EAAUM,EAAWpH,CAAC,CAAC,EAE5C6H,EAAgBlH,cAAY,MAAOK,GAAoD,CAC3F2F,EAAe,EAAI,EACnBlG,EAAS,IAAI,EACbmG,EAAmB,QAAU,IAAI,gBAEjC,GAAI,CACFxG,EAAY,CACV,MAAO,YACP,SAAU,EACV,WAAYJ,EAAE,oBAAoB,EAClC,WAAYA,EAAE,oBAAoB,EAClC,UAAWgB,EAAQ,KAAK,OACxB,WAAY,CAAA,CACb,EAED,MAAMC,EAAQP,EAAA,EACd,GAAI,CAACO,EACH,MAAM,IAAI,MAAM,mBAAmB,EAIrC,MAAM6G,EAAY9G,EAAQ,KAAK,OAC5BsG,GAA6BA,EAAI,SAAW,SAAWA,EAAI,SAAW,WAAaA,EAAI,SAAW,UAAA,EAGrGlH,EAAY,CACV,MAAO,YACP,SAAU,GACV,WAAYJ,EAAE,oBAAoB,EAClC,WAAYA,EAAE,oBAAoB,EAClC,UAAW8H,EAAU,MAAA,CACtB,EAED,MAAM5G,EAAW,MAAM,MAAM,GAAGtB,EAAY,4BAA6B,CACvE,OAAQ,OACR,QAAS,CACP,eAAgB,mBAChB,cAAiB,UAAUqB,CAAK,EAAA,EAElC,KAAM,KAAK,UAAU,CACnB,WAAYlB,EAAQ,WACpB,KAAMiB,EAAQ,KACd,mBAAoBA,EAAQ,mBAC5B,KAAM8G,EACN,oBAAqB9G,EAAQ,oBAC7B,aAAcA,EAAQ,aACtB,OAAQA,EAAQ,MAAA,CACjB,EACD,OAAQ4F,EAAmB,QAAQ,MAAA,CACpC,EAED,GAAI,CAAC1F,EAAS,GAAI,CAChB,MAAMC,EAAY,MAAMD,EAAS,KAAA,EAAO,MAAM,KAAO,CAAA,EAAG,EACxD,MAAM,IAAI,MAAMC,EAAU,OAAO,YAAc,eAAe,CAChE,CAEA,MAAMC,EAAS,MAAMF,EAAS,KAAA,EAE9B,OAAAd,EAAY,CACV,MAAO,WACP,SAAU,IACV,WAAYJ,EAAE,mBAAmB,EACjC,WAAYA,EAAE,mBAAmB,CAAA,CAClC,EAEDuG,EAAkBnF,CAAM,EACxBrB,EAAQ,YAAYqB,CAAM,EAEtBA,EAAO,QACToB,EAAM,QAAQxC,EAAE,sBAAsB,EAAG,CACvC,YAAaA,EAAE,yBAA0B,CACvC,QAASoB,EAAO,aAChB,MAAOA,EAAO,SAAA,CACf,CAAA,CACF,EACQA,EAAO,aAAe,EAC/BoB,EAAM,QAAQxC,EAAE,6BAA6B,EAAG,CAC9C,YAAaA,EAAE,8BAA+B,CAC5C,OAAQoB,EAAO,YACf,MAAOA,EAAO,SAAA,CACf,CAAA,CACF,EAEDoB,EAAM,MAAMxC,EAAE,oBAAoB,CAAC,EAG9BoB,CACT,OAASqB,EAAK,CACZ,GAAKA,EAAc,OAAS,aAC1B,MAAM,IAAI,MAAM,qBAAqB,EAEvC,MAAMjC,EAAQiC,aAAe,MAAQA,EAAM,IAAI,MAAM,eAAe,EACpE,MAAAhC,EAASD,CAAK,EACdJ,EAAY,CACV,MAAO,QACP,SAAU,EACV,WAAYI,EAAM,QAClB,WAAYA,EAAM,OAAA,CACnB,EACDT,EAAQ,UAAUS,CAAK,EACvBgC,EAAM,MAAMxC,EAAE,oBAAoB,EAAG,CACnC,YAAaQ,EAAM,OAAA,CACpB,EACKA,CACR,QAAA,CACEmG,EAAe,EAAK,CACtB,CACF,EAAG,CAACjG,EAAcX,EAASC,CAAC,CAAC,EAEvB+H,EAASpH,EAAAA,YAAY,IAAM,CAC3BiG,EAAmB,SACrBA,EAAmB,QAAQ,MAAA,EAE7BH,EAAgB,EAAK,EACrBE,EAAe,EAAK,EACpBvG,EAAY,IAAI,CAClB,EAAG,CAAA,CAAE,EAECiD,EAAQ1C,EAAAA,YAAY,IAAM,CAC9B0F,EAAoB,IAAI,EACxBE,EAAkB,IAAI,EACtBnG,EAAY,IAAI,EAChBK,EAAS,IAAI,EACbgG,EAAgB,EAAK,EACrBE,EAAe,EAAK,CACtB,EAAG,CAAA,CAAE,EAEL,MAAO,CACL,WAAAe,EACA,cAAAG,EACA,OAAAE,EACA,iBAAA3B,EACA,eAAAE,EACA,SAAAnG,EACA,aAAAqG,EACA,YAAAE,EACA,MAAAlG,EACA,MAAA6C,CAAA,CAEJ,CClUA,MAAM2E,GAAgD,CACpD,MAAOxD,EAAAA,IAACyD,GAAA,CAAa,UAAU,wBAAA,CAAyB,EACxD,QAASzD,EAAAA,IAAC0D,GAAA,CAAQ,UAAU,sBAAA,CAAuB,EACnD,QAAS1D,EAAAA,IAAC2D,GAAA,CAAc,UAAU,yBAAA,CAA0B,EAC5D,SAAU3D,EAAAA,IAAC4D,GAAA,CAAY,UAAU,uBAAA,CAAwB,EACzD,QAAS5D,EAAAA,IAAC4D,GAAA,CAAY,UAAU,+BAAA,CAAgC,CAClE,EAEMC,GAAsH,CAC1H,MAAO,CAAE,QAAS,UAAW,UAAW,sEAAA,EACxC,QAAS,CAAE,QAAS,aAAA,EACpB,QAAS,CAAE,QAAS,YAAa,UAAW,0EAAA,EAC5C,SAAU,CAAE,QAAS,UAAW,UAAW,kDAAA,EAC3C,QAAS,CAAE,QAAS,WAAA,CACtB,EAEO,SAASC,GAAwB,CACtC,OAAAlH,EACA,eAAAmH,EAAiB,IACjB,UAAAC,CACF,EAAiC,CAC/B,KAAM,CAAE,EAAAxI,EAAG,KAAAC,GAASC,EAAe,eAAe,EAC5C0D,EAAQ3D,EAAK,WAAa,KAE1B,CAACwI,EAAeC,CAAgB,EAAIrI,EAAAA,SAAS,EAAK,EAClD,CAACsI,EAAcC,CAAe,EAAIvI,EAAAA,SAAsB,IAAI,GAAK,EAEjEwI,EAAqBtB,GAAsB,CAC/CqB,EAAgBE,GAAQ,CACtB,MAAMC,EAAO,IAAI,IAAID,CAAI,EACzB,OAAIC,EAAK,IAAIxB,CAAS,EACpBwB,EAAK,OAAOxB,CAAS,EAErBwB,EAAK,IAAIxB,CAAS,EAEbwB,CACT,CAAC,CACH,EAEMC,EAAgBC,EAAAA,QAAQ,IAAM,CAClC,IAAIC,EAAO9H,EAAO,KAGlB,GAAI,CAACqH,EAAe,CAClB,MAAMU,EAAcD,EAAK,OAAOE,GAAKA,EAAE,SAAW,WAAaA,EAAE,SAAW,WAAaA,EAAE,SAAW,UAAU,EAC5GD,EAAY,OAAS,GAAKA,EAAY,OAASD,EAAK,SACtDA,EAAOC,EAEX,CAEA,OAAOD,EAAK,MAAM,EAAGX,CAAc,CACrC,EAAG,CAACnH,EAAO,KAAMqH,EAAeF,CAAc,CAAC,EAEzCc,EAAeJ,EAAAA,QAAQ,IAAM,CACjC,MAAMK,EAAiC,CAAA,EACvC,UAAWhC,KAAOlG,EAAO,KACvB,UAAWZ,KAAS8G,EAAI,OACtBgC,EAAO9I,EAAM,IAAI,GAAK8I,EAAO9I,EAAM,IAAI,GAAK,GAAK,EAGrD,OAAO8I,CACT,EAAG,CAAClI,EAAO,IAAI,CAAC,EAEVmI,EAAmB/I,GAChBoD,EAAQpD,EAAM,WAAaA,EAAM,WAGpCgJ,EAAiBhJ,GACdoD,EAAQpD,EAAM,cAAgBA,EAAM,cAG7C,OACEqE,EAAAA,KAAC,MAAA,CAAI,UAAW4E,EAAG,YAAajB,CAAS,EAAG,IAAK5E,EAAQ,MAAQ,MAE/D,SAAA,CAAAiB,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,gCACb,SAAA,CAAAL,EAAAA,IAAC,MAAA,CAAI,UAAU,qBAAsB,SAAApD,EAAO,UAAU,QACrD,MAAA,CAAI,UAAU,gCAAiC,SAAApB,EAAE,qCAAqC,CAAA,CAAE,CAAA,EAC3F,EACA6E,EAAAA,KAAC,MAAA,CAAI,UAAU,yDACb,SAAA,CAAAL,EAAAA,IAAC,MAAA,CAAI,UAAU,oCAAqC,SAAApD,EAAO,UAAU,QACpE,MAAA,CAAI,UAAU,6CAA8C,SAAApB,EAAE,qCAAqC,CAAA,CAAE,CAAA,EACxG,EACA6E,EAAAA,KAAC,MAAA,CAAI,UAAU,qDACb,SAAA,CAAAL,EAAAA,IAAC,MAAA,CAAI,UAAU,kCAAmC,SAAApD,EAAO,YAAY,QACpE,MAAA,CAAI,UAAU,yCAA0C,SAAApB,EAAE,uCAAuC,CAAA,CAAE,CAAA,EACtG,EACA6E,EAAAA,KAAC,MAAA,CAAI,UAAU,2DACb,SAAA,CAAAL,EAAAA,IAAC,MAAA,CAAI,UAAU,qCAAsC,SAAApD,EAAO,YAAY,QACvE,MAAA,CAAI,UAAU,+CAAgD,SAAApB,EAAE,uCAAuC,CAAA,CAAE,CAAA,CAAA,CAC5G,CAAA,EACF,EAGCoB,EAAO,wBAA0BA,EAAO,uBAAuB,OAAS,GACvEoD,EAAAA,IAAC,MAAA,CAAI,UAAU,oEACb,SAAAK,EAAAA,KAAC,MAAA,CAAI,UAAU,yDACb,SAAA,CAAAL,EAAAA,IAAC0D,GAAA,CAAQ,UAAU,SAAA,CAAU,EAC7B1D,EAAAA,IAAC,OAAA,CAAK,UAAU,cAAe,WAAE,8BAA+B,CAAE,QAASpD,EAAO,uBAAuB,KAAK,IAAI,CAAA,CAAG,CAAA,CAAE,CAAA,CAAA,CACzH,CAAA,CACF,EAIDA,EAAO,iBAAmBA,EAAO,gBAAgB,OAAS,GACzDoD,EAAAA,IAAC,MAAA,CAAI,UAAU,6EACb,SAAAK,EAAAA,KAAC,MAAA,CAAI,UAAU,+DACb,SAAA,CAAAL,EAAAA,IAAC2D,GAAA,CAAc,UAAU,SAAA,CAAU,SAClC,OAAA,CAAK,SAAA,CAAA,qCAAmC/G,EAAO,gBAAgB,KAAK,IAAI,CAAA,CAAA,CAAE,CAAA,CAAA,CAC7E,CAAA,CACF,EAID,OAAO,KAAKiI,CAAY,EAAE,OAAS,UACjCK,GAAA,CACC,SAAA,CAAAlF,EAAAA,IAACmF,GAAA,CAAmB,QAAO,GACzB,SAAA9E,EAAAA,KAACkB,GAAO,QAAQ,UAAU,UAAU,yBAClC,SAAA,CAAAlB,EAAAA,KAAC,OAAA,CAAK,UAAU,0BACd,SAAA,CAAAL,EAAAA,IAAC4D,GAAA,CAAY,UAAU,SAAA,CAAU,EAChCpI,EAAE,gCAAgC,EACnCwE,EAAAA,IAACoF,EAAA,CAAM,QAAQ,YACZ,gBAAO,OAAOP,CAAY,EAAE,OAAO,CAACQ,EAAGC,IAAMD,EAAIC,EAAG,CAAC,CAAA,CACxD,CAAA,EACF,EACAtF,EAAAA,IAACuF,GAAA,CAAY,UAAU,SAAA,CAAU,CAAA,CAAA,CACnC,CAAA,CACF,EACAvF,EAAAA,IAACwF,IAAmB,UAAU,OAC5B,eAAC,MAAA,CAAI,UAAU,kCACZ,SAAA,OAAO,QAAQX,CAAY,EAAE,IAAI,CAAC,CAACY,EAAMC,CAAK,IAC7CrF,EAAAA,KAAC,MAAA,CAAe,UAAU,4CACxB,SAAA,CAAAL,EAAAA,IAAC,QAAK,UAAU,wBAAyB,WAAE,UAAUyF,CAAI,EAAE,CAAA,CAAE,EAC7DzF,EAAAA,IAACoF,EAAA,CAAM,QAAQ,UAAW,SAAAM,CAAA,CAAM,CAAA,GAFxBD,CAGV,CACD,CAAA,CACH,CAAA,CACF,CAAA,EACF,EAID7I,EAAO,UAAY,GAAKA,EAAO,YAAc,GAC5CoD,EAAAA,IAAC,MAAA,CAAI,UAAU,mBACb,SAAAA,EAAAA,IAACuB,EAAA,CACC,QAAQ,QACR,KAAK,KACL,QAAS,IAAM2C,EAAiB,CAACD,CAAa,EAE7C,WACC5D,EAAAA,KAAAmB,EAAAA,SAAA,CACE,SAAA,CAAAxB,EAAAA,IAAC2F,GAAA,CAAO,UAAU,cAAA,CAAe,EAChCnK,EAAE,qCAAqC,CAAA,CAAA,CAC1C,EAEA6E,EAAAA,KAAAmB,EAAAA,SAAA,CACE,SAAA,CAAAxB,EAAAA,IAAC4F,GAAA,CAAI,UAAU,cAAA,CAAe,EAC7BpK,EAAE,kCAAkC,CAAA,CAAA,CACvC,CAAA,CAAA,EAGN,EAIFwE,MAAC6F,GAAA,CAAW,UAAU,8BACpB,gBAACC,GAAA,CACC,SAAA,CAAA9F,EAAAA,IAAC+F,GAAA,CACC,gBAACC,GAAA,CACC,SAAA,CAAAhG,MAACiG,EAAA,CAAU,UAAU,OAAS,UAAAzK,EAAE,6BAA8B,CAAE,MAAO,GAAI,MAAO,EAAA,CAAI,GAAK,IAAI,MAAM,GAAG,EAAE,CAAC,EAAE,QAAU,MAAM,EAC7HwE,EAAAA,IAACiG,EAAA,CAAU,UAAU,OAAQ,SAAAzK,EAAE,gCAAgC,EAAE,MAAM,GAAG,EAAE,CAAC,GAAK,QAAA,CAAS,EAC3FwE,EAAAA,IAACiG,EAAA,CAAW,SAAAzK,EAAE,gCAAgC,EAAE,MAAM,GAAG,EAAE,CAAC,GAAK,SAAA,CAAU,EAC3EwE,EAAAA,IAACiG,EAAA,CAAU,UAAU,MAAA,CAAO,CAAA,CAAA,CAC9B,CAAA,CACF,EACAjG,EAAAA,IAACkG,GAAA,CACE,SAAA1B,EAAc,IAAK1B,GAClBzC,EAAAA,KAAC2F,GAAA,CAEC,UAAWf,EACTnC,EAAI,SAAW,WAAa,kCAC5BA,EAAI,SAAW,WAAa,wCAC5BA,EAAI,SAAW,YAAc,mCAAA,EAG/B,SAAA,CAAAzC,EAAAA,KAAC8F,EAAA,CAAU,UAAU,cAAc,SAAA,CAAA,IAAErD,EAAI,GAAA,EAAI,QAC5CqD,EAAA,CACC,SAAAnG,EAAAA,IAACoF,EAAA,CACC,QAASvB,GAAcf,EAAI,MAAM,GAAG,SAAW,YAC/C,UAAWe,GAAcf,EAAI,MAAM,GAAG,UAEtC,SAAAzC,EAAAA,KAAC,OAAA,CAAK,UAAU,0BACb,SAAA,CAAAmD,GAAaV,EAAI,MAAM,EACvBtH,EAAE,4BAA4BsH,EAAI,MAAM,EAAE,CAAA,CAAA,CAC7C,CAAA,CAAA,EAEJ,EACA9C,EAAAA,IAACmG,GACE,SAAArD,EAAI,OAAO,OAAS,EACnBzC,EAAAA,KAAC,MAAA,CAAI,UAAU,YACZ,SAAA,CAAAyC,EAAI,OAAO,MAAM,EAAGqB,EAAa,IAAIrB,EAAI,GAAG,EAAI,OAAY,CAAC,EAAE,IAAI,CAAC9G,EAAOoK,IAC1EpG,MAACqG,GAAA,CACC,gBAACC,GAAA,CACC,SAAA,CAAAtG,EAAAA,IAACuG,IAAe,QAAO,GACrB,SAAAlG,EAAAA,KAAC,MAAA,CAAI,UAAU,UACb,SAAA,CAAAA,EAAAA,KAAC,OAAA,CAAK,UAAU,oCAAqC,SAAA,CAAArE,EAAM,OAAO,GAAA,EAAC,EAAQ,IAC3EgE,EAAAA,IAAC,OAAA,CAAK,UAAWhE,EAAM,WAAa,QAAU,eAAiB,kBAC5D,SAAA+I,EAAgB/I,CAAK,CAAA,CACxB,CAAA,CAAA,CACF,CAAA,CACF,EACCgJ,EAAchJ,CAAK,GAClBgE,MAACwG,GAAA,CACC,eAAC,IAAA,CAAG,SAAAxB,EAAchJ,CAAK,CAAA,CAAE,CAAA,CAC3B,CAAA,EAEJ,CAAA,EAfoBoK,CAgBtB,CACD,EACAtD,EAAI,OAAO,OAAS,GAAK,CAACqB,EAAa,IAAIrB,EAAI,GAAG,GACjDzC,EAAAA,KAAC,MAAA,CAAI,UAAU,gCAAgC,SAAA,CAAA,IAC3CyC,EAAI,OAAO,OAAS,EAAE,cAAA,CAAA,CAC1B,CAAA,EAEJ,EACEA,EAAI,SAAW,WACjBzC,OAAC,MAAA,CAAI,UAAU,wBACZ,SAAA,CAAA7E,EAAE,0BAA0B,EAC5BsH,EAAI,YACHzC,OAAC,OAAA,CAAK,UAAU,6BAA6B,SAAA,CAAA,QACrCyC,EAAI,WAAW,MAAM,EAAG,CAAC,EAAE,MAAA,CAAA,CACnC,CAAA,CAAA,CAEJ,EACEA,EAAI,KACN9C,MAAC,OAAI,UAAU,uDACZ,SAAA,OAAO,QAAQ8C,EAAI,IAAI,EACrB,OAAO,CAAC,CAAC2D,EAAGnJ,CAAC,IAAMA,GAAK,CAACmJ,EAAE,SAAS,KAAK,CAAC,EAC1C,MAAM,EAAG,CAAC,EACV,IAAI,CAAC,CAACA,EAAGnJ,CAAC,IAAM,GAAGmJ,CAAC,KAAK,OAAOnJ,CAAC,EAAE,MAAM,EAAG,EAAE,CAAC,EAAE,EACjD,KAAK,IAAI,EACd,EACE,IAAA,CACN,EACA0C,EAAAA,IAACmG,EAAA,CACE,SAAArD,EAAI,OAAO,OAAS,GACnB9C,EAAAA,IAACuB,EAAA,CACC,QAAQ,QACR,KAAK,OACL,UAAU,UACV,QAAS,IAAM8C,EAAkBvB,EAAI,GAAG,EAEvC,SAAAqB,EAAa,IAAIrB,EAAI,GAAG,EACvB9C,EAAAA,IAAC0G,GAAA,CAAU,UAAU,SAAA,CAAU,EAE/B1G,EAAAA,IAACuF,GAAA,CAAY,UAAU,SAAA,CAAU,CAAA,CAAA,CAErC,CAEJ,CAAA,CAAA,EAjFKzC,EAAI,GAAA,CAmFZ,CAAA,CACH,CAAA,CAAA,CACF,CAAA,CACF,EAEC0B,EAAc,OAAS5H,EAAO,KAAK,cACjC,IAAA,CAAE,UAAU,4CACV,SAAApB,EAAE,6BAA8B,CAC/B,MAAOgJ,EAAc,OACrB,MAAO5H,EAAO,KAAK,MAAA,CACpB,EACH,EAIFoD,MAAC,OAAI,UAAWiF,EACd,6BACArI,EAAO,cAAgB,GAAK,sEAC5BA,EAAO,YAAc,GAAK,6DAAA,EAEzB,SAAAA,EAAO,cAAgB,EACtByD,OAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAL,EAAAA,IAACyD,GAAA,CAAa,UAAU,SAAA,CAAU,EACjCjI,EAAE,4BAA4B,CAAA,CAAA,CACjC,EAEA6E,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAL,EAAAA,IAAC0D,GAAA,CAAQ,UAAU,SAAA,CAAU,EAC5BlI,EAAE,6BAA6B,CAAA,CAAA,CAClC,CAAA,CAEJ,CAAA,EACF,CAEJ,CCnSO,SAASmL,GAAa,CAC3B,KAAA5H,EACA,aAAAC,EACA,WAAAC,EACA,iBAAA2H,CACF,EAAsB,CACpB,KAAM,CAAE,EAAG,KAAAnL,GAASC,EAAe,eAAe,EAC5C0D,EAAQ3D,EAAK,WAAa,KAE1B,CAACoL,EAAMC,CAAO,EAAIjL,EAAAA,SAAqB,QAAQ,EAC/C,CAACkL,EAAcC,CAAe,EAAInL,EAAAA,SAAsB,IAAI,EAC5D,CAACoL,EAAMC,CAAO,EAAIrL,EAAAA,SAAqB,QAAQ,EAC/C,CAACsL,EAAoBC,CAAqB,EAAIvL,EAAAA,SAA6B,MAAM,EAEjF,CACJ,WAAAqH,EACA,cAAAG,EACA,OAAAE,EACA,iBAAA3B,EACA,eAAAE,EACA,SAAAnG,EACA,aAAAqG,EACA,YAAAE,EACA,MAAOmF,CAAA,EACL1F,GAAc,CAChB,WAAA1C,EACA,YAAagI,EACb,0BAA2BE,EAC3B,UAAW,IAAM,CACfP,IAAA,CACF,CAAA,CACD,EAEKU,EAASnL,cAAY,MAAOoL,GAA0B,CAC1D,GAAIA,EAAc,OAAS,EAAG,CAC5B,MAAM1E,EAAO0E,EAAc,CAAC,EAC5BP,EAAgBnE,CAAI,EACpBiE,EAAQ,UAAU,EAElB,GAAI,CACF,MAAM5D,EAAWL,CAAI,EACrBiE,EAAQ,SAAS,CACnB,MAAQ,CACNA,EAAQ,QAAQ,CAClB,CACF,CACF,EAAG,CAAC5D,CAAU,CAAC,EAET,CAAE,aAAAsE,EAAc,cAAAC,EAAe,aAAAC,CAAA,EAAiBC,GAAY,CAChE,OAAAL,EACA,OAAQ,CACN,WAAY,CAAC,MAAM,EACnB,oEAAqE,CAAC,OAAO,EAC7E,2BAA4B,CAAC,MAAM,CAAA,EAErC,SAAU,EACV,SAAUtF,GAAgBE,CAAA,CAC3B,EAEK0F,EAAezL,EAAAA,YAAY,SAAY,CAC3C,GAAI,CAACyF,EAAkB,OAEvBkF,EAAQ,QAAQ,EAEhB,MAAMtK,EAAyB,CAC7B,WAAAyC,EACA,KAAAgI,EACA,mBAAAE,EACA,KAAMvF,EAAiB,KACvB,aAAc,GACd,OAAQ,EAAA,EAGV,GAAI,CACF,MAAMyB,EAAc7G,CAAO,EAC3BsK,EAAQ,UAAU,CACpB,MAAQ,CACNA,EAAQ,SAAS,CACnB,CACF,EAAG,CAAClF,EAAkB3C,EAAYgI,EAAME,EAAoB9D,CAAa,CAAC,EAEpEvD,EAAc3D,EAAAA,YAAY,IAAM,CAChC,CAAC6F,GAAgB,CAACE,IACpBmF,EAAA,EACAP,EAAQ,QAAQ,EAChBE,EAAgB,IAAI,EACpBE,EAAQ,QAAQ,EAChBE,EAAsB,MAAM,EAC5BpI,EAAa,EAAK,EAEtB,EAAG,CAACgD,EAAcE,EAAamF,EAAWrI,CAAY,CAAC,EAEjD6I,EAAc1L,EAAAA,YAAY,IAAM,CACpCoH,EAAA,EACA8D,EAAA,EACAP,EAAQ,QAAQ,EAChBE,EAAgB,IAAI,CACtB,EAAG,CAACzD,EAAQ8D,CAAS,CAAC,EAEhBS,EAAYlG,GAAoBA,EAAiB,UAAY,GAAK,CAACA,EAAiB,wBAAwB,OAElH,OACE5B,EAAAA,IAACI,GAAA,CAAO,KAAArB,EAAY,aAAce,EAChC,SAAAO,EAAAA,KAACC,GAAA,CACC,UAAU,8DACV,IAAKlB,EAAQ,MAAQ,MAErB,SAAA,CAAAiB,OAACE,GAAA,CACC,SAAA,CAAAF,EAAAA,KAACG,GAAA,CAAY,UAAU,0BACrB,SAAA,CAAAR,EAAAA,IAAC+H,GAAA,CAAO,UAAU,SAAA,CAAU,EAC3B,EAAE,cAAc,CAAA,EACnB,EACA/H,EAAAA,IAACU,GAAA,CACE,SAAA,EAAE,oBAAoB,CAAA,CACzB,CAAA,EACF,EAEAL,EAAAA,KAAC,MAAA,CAAI,UAAU,8BAEZ,SAAA,CAAAwG,IAAS,UACRxG,OAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CACE,GAAGmH,EAAA,EACJ,UAAWvC,EACT,qFACAyC,GAAgB,8BAChB,CAACA,GAAgB,oDAAA,EAGnB,SAAA,CAAA1H,EAAAA,IAAC,QAAA,CAAO,GAAGyH,EAAA,CAAc,CAAG,EAC5BpH,EAAAA,KAAC,MAAA,CAAI,UAAU,mCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,aACb,SAAA,CAAAL,EAAAA,IAACC,EAAA,CAAgB,UAAU,0BAAA,CAA2B,EACtDD,EAAAA,IAACE,GAAA,CAAS,UAAU,yBAAA,CAA0B,CAAA,EAChD,SACC,MAAA,CACC,SAAA,CAAAF,MAAC,IAAA,CAAE,UAAU,sBAAuB,SAAA,EAAE,uBAAuB,EAAE,QAC9D,IAAA,CAAE,UAAU,qCAAsC,SAAA,EAAE,0BAA0B,EAAE,EACjFA,EAAAA,IAAC,IAAA,CAAE,UAAU,qCAAsC,SAAA,EAAE,0BAA2B,CAAE,KAAM,EAAA,CAAI,CAAA,CAAE,CAAA,CAAA,CAChG,CAAA,CAAA,CACF,CAAA,CAAA,CAAA,EAIFK,EAAAA,KAAC,MAAA,CAAI,UAAU,8CACb,SAAA,CAAAL,MAAC,KAAA,CAAG,UAAU,cAAe,SAAA,EAAE,6BAA6B,EAAE,EAC9DK,EAAAA,KAAC,KAAA,CAAG,UAAU,0CACZ,SAAA,CAAAL,EAAAA,IAAC,KAAA,CAAI,SAAA,EAAE,sCAAsC,CAAA,CAAE,EAC/CA,EAAAA,IAAC,KAAA,CAAI,SAAA,EAAE,kCAAkC,CAAA,CAAE,EAC3CA,EAAAA,IAAC,KAAA,CAAI,SAAA,EAAE,qCAAqC,CAAA,CAAE,EAC9CA,EAAAA,IAAC,KAAA,CAAI,SAAA,EAAE,gCAAgC,CAAA,CAAE,CAAA,CAAA,CAC3C,CAAA,CAAA,CACF,CAAA,EACF,EAID6G,IAAS,YACRxG,OAAC,MAAA,CAAI,UAAU,2DACb,SAAA,CAAAL,EAAAA,IAACyB,GAAA,CAAQ,UAAU,qCAAA,CAAsC,EACzDpB,EAAAA,KAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAAL,MAAC,IAAA,CAAE,UAAU,cAAe,SAAA,EAAE,8BAA8B,EAAE,EAC7D+G,GACC/G,EAAAA,IAAC,IAAA,CAAE,UAAU,qCAAsC,WAAa,IAAA,CAAK,CAAA,EAEzE,EACCrE,GACC0E,EAAAA,KAAC,MAAA,CAAI,UAAU,4BACb,SAAA,CAAAL,EAAAA,IAACqB,GAAA,CAAS,MAAO1F,EAAS,SAAU,UAAU,MAAM,EACpDqE,EAAAA,IAAC,KAAE,UAAU,4CACV,WAAQrE,EAAS,WAAaA,EAAS,UAAA,CAC1C,CAAA,CAAA,CACF,CAAA,EAEJ,EAIDkL,IAAS,WAAajF,GACrBvB,EAAAA,KAAC,MAAA,CAAI,UAAU,YAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,qDACb,SAAA,CAAAL,EAAAA,IAACC,EAAA,CAAgB,UAAU,wBAAA,CAAyB,EACpDI,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAL,MAAC,IAAA,CAAE,UAAU,uBAAwB,SAAA4B,EAAiB,UAAU,KAAK,EACrEvB,EAAAA,KAAC,IAAA,CAAE,UAAU,gCACV,SAAA,CAAAuB,EAAiB,UAAU,KAAK,UAAQA,EAAiB,UAAU,QAAQ,OAAO,UAAA,CAAA,CACrF,CAAA,EACF,EACA5B,EAAAA,IAACuB,EAAA,CAAO,QAAQ,QAAQ,KAAK,OAAO,QAASsG,EAC3C,SAAA7H,EAAAA,IAACgI,GAAA,CAAE,UAAU,SAAA,CAAU,CAAA,CACzB,CAAA,EACF,EAGAhI,EAAAA,IAAC8D,GAAA,CAAwB,OAAQlC,EAAkB,eAAgB,GAAI,EAGtEkG,GACCzH,EAAAA,KAAAmB,WAAA,CAEE,SAAA,CAAAnB,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAL,EAAAA,IAACW,EAAA,CAAO,SAAA,EAAE,mBAAmB,CAAA,CAAE,EAC/BN,EAAAA,KAACO,GAAA,CACC,MAAOqG,EACP,cAAgBtI,GAAUuI,EAAQvI,CAAmB,EACrD,UAAU,YAEV,SAAA,CAAA0B,EAAAA,KAAC,MAAA,CAAI,UAAU,yFACb,SAAA,CAAAL,MAACa,GAAe,MAAM,SAAS,GAAG,cAAc,UAAU,OAAO,EACjER,EAAAA,KAAC,MAAA,CAAI,UAAU,SACb,SAAA,CAAAL,EAAAA,IAACW,GAAM,QAAQ,cAAc,UAAU,6BACpC,SAAA,EAAE,oBAAoB,EACzB,QACC,IAAA,CAAE,UAAU,gCAAiC,SAAA,EAAE,+BAA+B,CAAA,CAAE,CAAA,CAAA,CACnF,CAAA,EACF,EACAN,EAAAA,KAAC,MAAA,CAAI,UAAU,yFACb,SAAA,CAAAL,MAACa,GAAe,MAAM,SAAS,GAAG,cAAc,UAAU,OAAO,EACjER,EAAAA,KAAC,MAAA,CAAI,UAAU,SACb,SAAA,CAAAL,EAAAA,IAACW,GAAM,QAAQ,cAAc,UAAU,6BACpC,SAAA,EAAE,oBAAoB,EACzB,QACC,IAAA,CAAE,UAAU,gCAAiC,SAAA,EAAE,+BAA+B,CAAA,CAAE,CAAA,CAAA,CACnF,CAAA,EACF,EACAN,EAAAA,KAAC,MAAA,CAAI,UAAU,yFACb,SAAA,CAAAL,MAACa,GAAe,MAAM,SAAS,GAAG,cAAc,UAAU,OAAO,EACjER,EAAAA,KAAC,MAAA,CAAI,UAAU,SACb,SAAA,CAAAL,EAAAA,IAACW,GAAM,QAAQ,cAAc,UAAU,6BACpC,SAAA,EAAE,oBAAoB,EACzB,QACC,IAAA,CAAE,UAAU,gCAAiC,SAAA,EAAE,+BAA+B,CAAA,CAAE,CAAA,CAAA,CACnF,CAAA,CAAA,CACF,CAAA,CAAA,CAAA,CACF,EACF,EAGCiB,EAAiB,aAAe,GAC/BvB,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAL,EAAAA,IAACW,EAAA,CAAO,SAAA,EAAE,iCAAiC,CAAA,CAAE,EAC7CN,EAAAA,KAACS,EAAA,CACC,MAAOqG,EACP,cAAgBxI,GAAUyI,EAAsBzI,CAA2B,EAE3E,SAAA,CAAAqB,EAAAA,IAACe,EAAA,CACC,SAAAf,EAAAA,IAACgB,GAAA,CAAA,CAAY,EACf,SACCC,GAAA,CACC,SAAA,CAAAjB,MAACkB,EAAA,CAAW,MAAM,OAChB,SAAAb,EAAAA,KAAC,MAAA,CACC,SAAA,CAAAL,MAAC,OAAA,CAAK,UAAU,cAAe,SAAA,EAAE,gCAAgC,EAAE,QAClE,IAAA,CAAE,UAAU,gCAAiC,SAAA,EAAE,2CAA2C,CAAA,CAAE,CAAA,CAAA,CAC/F,CAAA,CACF,EACAA,MAACkB,EAAA,CAAW,MAAM,YAChB,gBAAC,MAAA,CACC,SAAA,CAAAlB,MAAC,OAAA,CAAK,UAAU,cAAe,SAAA,EAAE,qCAAqC,EAAE,QACvE,IAAA,CAAE,UAAU,gCAAiC,SAAA,EAAE,gDAAgD,CAAA,CAAE,CAAA,CAAA,CACpG,CAAA,CACF,EACAA,MAACkB,EAAA,CAAW,MAAM,QAChB,gBAAC,MAAA,CACC,SAAA,CAAAlB,MAAC,OAAA,CAAK,UAAU,cAAe,SAAA,EAAE,iCAAiC,EAAE,QACnE,IAAA,CAAE,UAAU,gCAAiC,SAAA,EAAE,4CAA4C,CAAA,CAAE,CAAA,CAAA,CAChG,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CAAA,CACF,CAAA,CACF,CAAA,CAAA,CAEJ,CAAA,EAEJ,EAID6G,IAAS,UACRxG,OAAC,MAAA,CAAI,UAAU,2DACb,SAAA,CAAAL,EAAAA,IAACyB,GAAA,CAAQ,UAAU,qCAAA,CAAsC,EACzDzB,EAAAA,IAAC,MAAA,CAAI,UAAU,cACb,SAAAA,EAAAA,IAAC,IAAA,CAAE,UAAU,cAAe,SAAA,EAAE,0BAA0B,CAAA,CAAE,EAC5D,EACCrE,GACC0E,EAAAA,KAAC,MAAA,CAAI,UAAU,4BACb,SAAA,CAAAL,EAAAA,IAACqB,GAAA,CAAS,MAAO1F,EAAS,SAAU,UAAU,MAAM,EACpDqE,EAAAA,IAAC,KAAE,UAAU,4CACV,WAAQrE,EAAS,WAAaA,EAAS,UAAA,CAC1C,CAAA,CAAA,CACF,CAAA,EAEJ,EAIDkL,IAAS,YAAc/E,GACtBzB,EAAAA,KAAC,MAAA,CAAI,UAAU,2DACZ,SAAA,CAAAyB,EAAe,cACb2B,GAAA,CAAa,UAAU,2BAA2B,EAEnDzD,EAAAA,IAAC4D,GAAA,CAAY,UAAU,2BAAA,CAA4B,EAErDvD,EAAAA,KAAC,MAAA,CAAI,UAAU,wBACb,SAAA,CAAAL,MAAC,KAAE,UAAU,sBACV,WAAe,QAAU,EAAE,sBAAsB,EAAI,EAAE,8BAA+B,CAAE,OAAQ8B,EAAe,YAAa,MAAOA,EAAe,SAAA,CAAW,EAChK,EACA9B,EAAAA,IAAC,IAAA,CAAE,UAAU,wBACV,WAAE,yBAA0B,CAAE,QAAS8B,EAAe,aAAc,MAAOA,EAAe,SAAA,CAAW,CAAA,CACxG,CAAA,EACF,EACAzB,EAAAA,KAAC,MAAA,CAAI,UAAU,8CACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8DACb,SAAA,CAAAL,EAAAA,IAAC,IAAA,CAAE,UAAU,oCAAqC,SAAA8B,EAAe,aAAa,EAC9E9B,EAAAA,IAAC,IAAA,CAAE,UAAU,yBAAyB,SAAA,SAAA,CAAO,CAAA,EAC/C,EACAK,EAAAA,KAAC,MAAA,CAAI,UAAU,4DACb,SAAA,CAAAL,EAAAA,IAAC,IAAA,CAAE,UAAU,mCAAoC,SAAA8B,EAAe,aAAa,EAC7E9B,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,SAAA,CAAO,CAAA,EAC9C,EACAK,EAAAA,KAAC,MAAA,CAAI,UAAU,sCACb,SAAA,CAAAL,EAAAA,IAAC,IAAA,CAAE,UAAU,2CAA4C,SAAA8B,EAAe,aAAa,EACrF9B,EAAAA,IAAC,IAAA,CAAE,UAAU,gCAAgC,SAAA,SAAA,CAAO,CAAA,CAAA,CACtD,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EAEJ,EAEAK,EAAAA,KAACiB,GAAA,CAAa,UAAU,2CACrB,SAAA,CAAAuF,IAAS,UACR7G,EAAAA,IAACuB,EAAA,CAAO,QAAQ,UAAU,QAASzB,EAAa,UAAU,mBACvD,SAAA,EAAE,eAAe,CAAA,CACpB,EAGD+G,IAAS,WACRxG,EAAAA,KAAAmB,EAAAA,SAAA,CACE,SAAA,CAAAxB,EAAAA,IAACuB,EAAA,CAAO,QAAQ,UAAU,QAASsG,EAAa,UAAU,mBACvD,SAAA,EAAE,aAAa,CAAA,CAClB,EACAxH,EAAAA,KAACkB,EAAA,CACC,QAASqG,EACT,SAAU,CAACE,EACX,UAAU,mBAEV,SAAA,CAAA9H,EAAAA,IAAC+H,GAAA,CAAO,UAAU,cAAA,CAAe,EAChC,EAAE,uBAAuB,EAAE,KAAGnG,GAAkB,WAAa,EAAE,GAAA,CAAA,CAAA,CAClE,EACF,EAGDiF,IAAS,YACR7G,MAACuB,EAAA,CAAO,QAASzB,EAAa,UAAU,mBACrC,SAAA,EAAE,cAAc,CAAA,CACnB,CAAA,CAAA,CAEJ,CAAA,CAAA,CAAA,EAEJ,CAEJ,CC/XA,MAAMmI,GAAgH,CACpH,CAAE,MAAO,UAAW,MAAO,WAAY,QAAS,UAAW,KAAMjI,EAAAA,IAACkI,GAAA,CAAU,UAAU,SAAA,CAAU,CAAA,EAChG,CAAE,MAAO,SAAU,MAAO,UAAW,QAAS,UAAW,KAAMlI,EAAAA,IAACmI,GAAA,CAAM,UAAU,SAAA,CAAU,CAAA,EAC1F,CAAE,MAAO,aAAc,MAAO,cAAe,QAAS,aAAc,KAAMnI,EAAAA,IAACoI,GAAA,CAAS,UAAU,SAAA,CAAU,CAAA,EACxG,CAAE,MAAO,gBAAiB,MAAO,iBAAkB,QAAS,gBAAiB,KAAMpI,EAAAA,IAACqI,GAAA,CAAU,UAAU,SAAA,CAAU,CAAA,EAClH,CAAE,MAAO,aAAc,MAAO,cAAe,QAAS,aAAc,KAAMrI,EAAAA,IAACsI,GAAA,CAAO,UAAU,SAAA,CAAU,CAAA,EACtG,CAAE,MAAO,cAAe,MAAO,eAAgB,QAAS,WAAY,KAAMtI,EAAAA,IAACuI,GAAA,CAAc,UAAU,SAAA,CAAU,CAAA,CAC/G,EAEO,SAASC,IAAmB,CACjC,KAAM,CAAE,EAAAhN,EAAG,KAAAC,GAASC,EAAe,eAAe,EAC5C0D,EAAQ3D,EAAK,WAAa,KAE1B,CAACwD,EAAYwJ,CAAa,EAAI5M,EAAAA,SAA+B,SAAS,EACtE,CAAC6M,EAAkBC,CAAmB,EAAI9M,EAAAA,SAAS,EAAK,EACxD,CAAC+M,EAAkBC,CAAmB,EAAIhN,EAAAA,SAAS,EAAK,EAExDiN,EAAiBb,GAAe,KAAKc,GAAKA,EAAE,QAAU9J,CAAU,EAEtE,cACG,MAAA,CAAI,UAAU,8CAA8C,IAAKG,EAAQ,MAAQ,MAChF,SAAA,CAAAiB,EAAAA,KAAC,MAAA,CAAI,UAAU,OACb,SAAA,CAAAL,MAAC,KAAA,CAAG,UAAU,iCAAkC,SAAAxE,EAAE,OAAO,EAAE,EAC3D6E,EAAAA,KAAC,IAAA,CAAE,UAAU,6BACV,SAAA,CAAA7E,EAAE,oBAAoB,EAAE,MAAIA,EAAE,oBAAoB,CAAA,CAAA,CACrD,CAAA,EACF,EAEA6E,EAAAA,KAAC,MAAA,CAAI,UAAU,4BAEb,SAAA,CAAAA,OAAC2I,EAAA,CACC,SAAA,CAAA3I,OAAC4I,EAAA,CACC,SAAA,CAAA5I,EAAAA,KAAC6I,EAAA,CAAU,UAAU,0BACnB,SAAA,CAAAlJ,EAAAA,IAACS,GAAA,CAAS,UAAU,SAAA,CAAU,EAC7BjF,EAAE,cAAc,CAAA,EACnB,EACAwE,EAAAA,IAACmJ,GAAA,CACE,SAAA3N,EAAE,oBAAoB,CAAA,CACzB,CAAA,EACF,EACA6E,EAAAA,KAAC+I,EAAA,CAAY,UAAU,YACrB,SAAA,CAAA/I,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,OAACM,EAAA,CAAO,SAAA,CAAAnF,EAAE,kBAAkB,EAAE,MAAM,GAAG,EAAE,CAAC,EAAE,OAAA,EAAK,EACjD6E,EAAAA,KAACS,EAAA,CACC,MAAO7B,EACP,cAAgBN,GAAU8J,EAAc9J,CAA6B,EAErE,SAAA,CAAAqB,EAAAA,IAACe,EAAA,CACC,SAAAf,EAAAA,IAACgB,GAAA,CAAA,CAAY,EACf,EACAhB,MAACiB,GAAA,CACE,SAAAgH,GAAe,IAAIoB,GAClBrJ,EAAAA,IAACkB,EAAA,CAA8B,MAAOmI,EAAO,MAC3C,SAAAhJ,EAAAA,KAAC,OAAA,CAAK,UAAU,0BACb,SAAA,CAAAgJ,EAAO,KACPjK,EAAQiK,EAAO,QAAUA,EAAO,KAAA,CAAA,CACnC,CAAA,EAJeA,EAAO,KAKxB,CACD,CAAA,CACH,CAAA,CAAA,CAAA,CACF,EACF,EAEAhJ,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,+BACZ,SAAA,CAAAyI,GAAgB,YAChB,MAAA,CACC,SAAA,CAAA9I,EAAAA,IAAC,KAAE,UAAU,cAAe,WAAQ8I,GAAgB,QAAUA,GAAgB,KAAA,CAAM,EACpF9I,EAAAA,IAAC,IAAA,CAAE,UAAU,gCAAgC,SAAA,+BAAA,CAE7C,CAAA,CAAA,CACF,CAAA,EACF,EACAK,EAAAA,KAAC,MAAA,CAAI,UAAU,uBACb,SAAA,CAAAA,EAAAA,KAAC+E,EAAA,CAAM,QAAQ,UACb,SAAA,CAAApF,EAAAA,IAACC,EAAA,CAAgB,UAAU,cAAA,CAAe,EAAE,MAAA,EAE9C,EACAD,EAAAA,IAACoF,EAAA,CAAM,QAAQ,UAAU,SAAA,MAAG,EAC5BpF,EAAAA,IAACoF,EAAA,CAAM,QAAQ,UAAU,SAAA,MAAA,CAAI,CAAA,CAAA,CAC/B,CAAA,EACF,EAEA/E,OAACkB,GAAO,QAAS,IAAMoH,EAAoB,EAAI,EAAG,UAAU,SAC1D,SAAA,CAAA3I,EAAAA,IAACS,GAAA,CAAS,UAAU,cAAA,CAAe,EAClCjF,EAAE,eAAe,CAAA,CAAA,CACpB,CAAA,CAAA,CACF,CAAA,EACF,SAGCwN,EAAA,CACC,SAAA,CAAA3I,OAAC4I,EAAA,CACC,SAAA,CAAA5I,EAAAA,KAAC6I,EAAA,CAAU,UAAU,0BACnB,SAAA,CAAAlJ,EAAAA,IAAC+H,GAAA,CAAO,UAAU,SAAA,CAAU,EAC3BvM,EAAE,cAAc,CAAA,EACnB,EACAwE,EAAAA,IAACmJ,GAAA,CACE,SAAA3N,EAAE,oBAAoB,CAAA,CACzB,CAAA,EACF,EACA6E,EAAAA,KAAC+I,EAAA,CAAY,UAAU,YACrB,SAAA,CAAA/I,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,OAACM,EAAA,CAAO,SAAA,CAAAnF,EAAE,kBAAkB,EAAE,MAAM,GAAG,EAAE,CAAC,EAAE,OAAA,EAAK,EACjD6E,EAAAA,KAACS,EAAA,CACC,MAAO7B,EACP,cAAgBN,GAAU8J,EAAc9J,CAA6B,EAErE,SAAA,CAAAqB,EAAAA,IAACe,EAAA,CACC,SAAAf,EAAAA,IAACgB,GAAA,CAAA,CAAY,EACf,EACAhB,MAACiB,GAAA,CACE,SAAAgH,GAAe,IAAIoB,GAClBrJ,EAAAA,IAACkB,EAAA,CAA8B,MAAOmI,EAAO,MAC3C,SAAAhJ,EAAAA,KAAC,OAAA,CAAK,UAAU,0BACb,SAAA,CAAAgJ,EAAO,KACPjK,EAAQiK,EAAO,QAAUA,EAAO,KAAA,CAAA,CACnC,CAAA,EAJeA,EAAO,KAKxB,CACD,CAAA,CACH,CAAA,CAAA,CAAA,CACF,EACF,EAEAhJ,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,+BACZ,SAAA,CAAAyI,GAAgB,YAChB,MAAA,CACC,SAAA,CAAA9I,EAAAA,IAAC,KAAE,UAAU,cAAe,WAAQ8I,GAAgB,QAAUA,GAAgB,KAAA,CAAM,EACpF9I,EAAAA,IAAC,IAAA,CAAE,UAAU,gCAAgC,SAAA,gCAAA,CAE7C,CAAA,CAAA,CACF,CAAA,EACF,EACAK,EAAAA,KAAC,MAAA,CAAI,UAAU,0CACb,SAAA,CAAAL,EAAAA,IAAC,IAAA,CAAG,SAAAxE,EAAE,sCAAsC,CAAA,CAAE,EAC9CwE,EAAAA,IAAC,IAAA,CAAG,SAAAxE,EAAE,kCAAkC,CAAA,CAAE,CAAA,CAAA,CAC5C,CAAA,EACF,EAEA6E,OAACkB,GAAO,QAAS,IAAMsH,EAAoB,EAAI,EAAG,UAAU,SAC1D,SAAA,CAAA7I,EAAAA,IAAC+H,GAAA,CAAO,UAAU,cAAA,CAAe,EAChCvM,EAAE,eAAe,CAAA,CAAA,CACpB,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EACF,EAEAwE,EAAAA,IAACsJ,GAAA,CAAU,UAAU,MAAA,CAAO,EAG5BjJ,EAAAA,KAAC,MAAA,CAAI,UAAU,2CACb,SAAA,CAAAA,EAAAA,KAAC2I,EAAA,CAAK,UAAU,cACd,SAAA,CAAAhJ,EAAAA,IAACiJ,EAAA,CAAW,UAAU,OACpB,SAAAjJ,EAAAA,IAACkJ,EAAA,CAAU,UAAU,sBAClB,SAAA1N,EAAE,yBAAyB,CAAA,CAC9B,EACF,QACC4N,EAAA,CACC,SAAApJ,MAAC,KAAE,UAAU,gCAAgC,iGAE7C,CAAA,CACF,CAAA,EACF,EAEAK,EAAAA,KAAC2I,EAAA,CAAK,UAAU,cACd,SAAA,CAAAhJ,EAAAA,IAACiJ,EAAA,CAAW,UAAU,OACpB,SAAAjJ,EAAAA,IAACkJ,EAAA,CAAU,UAAU,sBAClB,SAAA1N,EAAE,iCAAiC,CAAA,CACtC,EACF,QACC4N,EAAA,CACC,SAAApJ,MAAC,KAAE,UAAU,gCAAgC,4GAE7C,CAAA,CACF,CAAA,EACF,EAEAK,EAAAA,KAAC2I,EAAA,CAAK,UAAU,cACd,SAAA,CAAAhJ,EAAAA,IAACiJ,EAAA,CAAW,UAAU,OACpB,SAAAjJ,EAAAA,IAACkJ,EAAA,CAAU,UAAU,sBAClB,SAAA1N,EAAE,uBAAuB,CAAA,CAC5B,EACF,QACC4N,EAAA,CACC,SAAApJ,MAAC,KAAE,UAAU,gCAAgC,+FAE7C,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EACF,EAGAA,EAAAA,IAAClB,GAAA,CACC,KAAM4J,EACN,aAAcC,EACd,WAAA1J,CAAA,CAAA,EAGFe,EAAAA,IAAC2G,GAAA,CACC,KAAMiC,EACN,aAAcC,EACd,WAAA5J,CAAA,CAAA,CACF,EACF,CAEJ,CC1OsE,MAAAsK,GAA/Df"}