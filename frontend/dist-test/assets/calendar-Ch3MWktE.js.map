{"version":3,"file":"calendar-Ch3MWktE.js","sources":["../../src/hooks/useCalendarEvents.ts","../../src/components/Calendar/UnifiedCalendar.tsx","../../src/routes/_protected/calendar.tsx?tsr-split=component"],"sourcesContent":["// T070: useCalendarEvents hook\nimport { useQuery } from '@tanstack/react-query';\nimport { supabase } from '@/lib/supabase';\n\nexport interface CalendarEvent {\n  id: string;\n  dossier_id: string;\n  event_type: 'main_event' | 'session' | 'plenary' | 'working_session' | 'ceremony' | 'reception';\n  title_en?: string;\n  title_ar?: string;\n  description_en?: string;\n  description_ar?: string;\n  start_datetime: string;\n  end_datetime: string;\n  timezone: string;\n  location_en?: string;\n  location_ar?: string;\n  is_virtual: boolean;\n  virtual_link?: string;\n  room_en?: string;\n  room_ar?: string;\n  status: 'planned' | 'ongoing' | 'completed' | 'cancelled' | 'postponed';\n  created_at: string;\n  updated_at: string;\n  // Optional dossier relation when fetched with join\n  dossier?: {\n    id: string;\n    type: string;\n    name_en: string;\n    name_ar: string;\n  };\n}\n\nexport interface UseCalendarEventsFilters {\n  start_date?: string;\n  end_date?: string;\n  event_type?: string;\n  dossier_id?: string;\n  status?: string;\n}\n\nexport interface UseCalendarEventsResult {\n  events: CalendarEvent[];\n  totalCount: number;\n  isLoading: boolean;\n  error: Error | null;\n  refetch: () => void;\n}\n\nexport function useCalendarEvents(filters?: UseCalendarEventsFilters): UseCalendarEventsResult {\n  const {\n    data,\n    isLoading,\n    error,\n    refetch,\n  } = useQuery({\n    queryKey: ['calendar-events', filters],\n    queryFn: async () => {\n      const params = new URLSearchParams();\n      if (filters?.start_date) {\n        params.append('start_date', filters.start_date);\n      }\n      if (filters?.end_date) {\n        params.append('end_date', filters.end_date);\n      }\n      if (filters?.event_type) {\n        params.append('event_type', filters.event_type);\n      }\n      if (filters?.dossier_id) {\n        params.append('dossier_id', filters.dossier_id);\n      }\n      if (filters?.status) {\n        params.append('status', filters.status);\n      }\n\n      const { data: { session } } = await supabase.auth.getSession();\n      if (!session) {\n        throw new Error('Not authenticated');\n      }\n\n      const response = await fetch(\n        `${supabase.supabaseUrl}/functions/v1/calendar-get?${params.toString()}`,\n        {\n          headers: {\n            'Authorization': `Bearer ${session.access_token}`,\n            'Content-Type': 'application/json',\n          },\n        }\n      );\n\n      if (!response.ok) {\n        const error = await response.json();\n        throw new Error(error.error || 'Failed to fetch calendar events');\n      }\n\n      const result = await response.json();\n      return result;\n    },\n    staleTime: 2 * 60 * 1000, // 2 minutes (shorter for calendar events)\n  });\n\n  return {\n    events: data?.entries || [],\n    totalCount: data?.total_count || 0,\n    isLoading,\n    error: error as Error | null,\n    refetch,\n  };\n}\n","// T052: UnifiedCalendar component\nimport { useState, useMemo } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { useCalendarEvents } from '@/hooks/useCalendarEvents';\nimport { Card } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Badge } from '@/components/ui/badge';\nimport { ChevronLeft, ChevronRight, Calendar as CalendarIcon, Clock } from 'lucide-react';\nimport { format, startOfMonth, endOfMonth, eachDayOfInterval, isSameMonth, isSameDay, addMonths, subMonths } from 'date-fns';\n\ninterface UnifiedCalendarProps {\n linkedItemType?: string;\n linkedItemId?: string;\n}\n\nexport function UnifiedCalendar({ linkedItemType, linkedItemId }: UnifiedCalendarProps) {\n const { t, i18n } = useTranslation();\n const isRTL = i18n.language === 'ar';\n\n const [currentMonth, setCurrentMonth] = useState(new Date());\n const [entryTypeFilter, setEntryTypeFilter] = useState<string | undefined>(undefined);\n\n const monthStart = startOfMonth(currentMonth);\n const monthEnd = endOfMonth(currentMonth);\n\n const { events, isLoading, error } = useCalendarEvents({\n start_date: monthStart.toISOString(),\n end_date: monthEnd.toISOString(),\n entry_type: entryTypeFilter,\n linked_item_type: linkedItemType,\n });\n\n // Generate calendar days\n const calendarDays = useMemo(() => {\n return eachDayOfInterval({ start: monthStart, end: monthEnd });\n }, [monthStart, monthEnd]);\n\n // Group events by day\n const eventsByDay = useMemo(() => {\n const grouped = new Map<string, typeof events>();\n events.forEach(event => {\n const day = format(new Date(event.start_datetime), 'yyyy-MM-dd');\n if (!grouped.has(day)) {\n grouped.set(day, []);\n }\n grouped.get(day)?.push(event);\n });\n return grouped;\n }, [events]);\n\n const handlePreviousMonth = () => {\n setCurrentMonth(subMonths(currentMonth, 1));\n };\n\n const handleNextMonth = () => {\n setCurrentMonth(addMonths(currentMonth, 1));\n };\n\n const handleToday = () => {\n setCurrentMonth(new Date());\n };\n\n if (isLoading) {\n return (\n <Card className=\"p-8 text-center\">\n <p className=\"text-muted-foreground\">{t('common.loading')}</p>\n </Card>\n );\n }\n\n if (error) {\n return (\n <Card className=\"p-8 text-center\">\n <p className=\"text-destructive\">{t('errors.failed_to_load')}</p>\n </Card>\n );\n }\n\n return (\n <div className=\"flex flex-col gap-4\" dir={isRTL ? 'rtl' : 'ltr'}>\n {/* Header & Controls */}\n <Card className=\"p-4\">\n <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4\">\n <div className=\"flex items-center gap-2 w-full sm:w-auto\">\n <Button\n variant=\"outline\"\n size=\"sm\"\n onClick={handlePreviousMonth}\n className={isRTL ? 'rotate-180' : ''}\n >\n <ChevronLeft className=\"h-4 w-4\" />\n </Button>\n <h2 className=\"text-base sm:text-lg font-semibold flex-1 text-center\">\n {format(currentMonth, 'MMMM yyyy')}\n </h2>\n <Button\n variant=\"outline\"\n size=\"sm\"\n onClick={handleNextMonth}\n className={isRTL ? 'rotate-180' : ''}\n >\n <ChevronRight className=\"h-4 w-4\" />\n </Button>\n </div>\n\n <div className=\"flex flex-col sm:flex-row gap-2 w-full sm:w-auto\">\n <Button variant=\"outline\" size=\"sm\" onClick={handleToday} className=\"w-full sm:w-auto\">\n {t('calendar.today')}\n </Button>\n\n <Select value={entryTypeFilter} onValueChange={(v) => setEntryTypeFilter(v === 'all' ? undefined : v)}>\n <SelectTrigger className=\"w-full sm:w-48\">\n <SelectValue placeholder={t('calendar.all_types')} />\n </SelectTrigger>\n <SelectContent>\n <SelectItem value=\"all\">{t('calendar.all_types')}</SelectItem>\n <SelectItem value=\"internal_meeting\">{t('calendar.types.internal_meeting')}</SelectItem>\n <SelectItem value=\"deadline\">{t('calendar.types.deadline')}</SelectItem>\n <SelectItem value=\"reminder\">{t('calendar.types.reminder')}</SelectItem>\n <SelectItem value=\"holiday\">{t('calendar.types.holiday')}</SelectItem>\n <SelectItem value=\"training\">{t('calendar.types.training')}</SelectItem>\n <SelectItem value=\"review\">{t('calendar.types.review')}</SelectItem>\n <SelectItem value=\"other\">{t('calendar.types.other')}</SelectItem>\n </SelectContent>\n </Select>\n </div>\n </div>\n </Card>\n\n {/* Calendar Grid */}\n <Card className=\"p-2 sm:p-4\">\n {/* Weekday Headers */}\n <div className=\"grid grid-cols-7 gap-1 sm:gap-2 mb-2\">\n {[0, 1, 2, 3, 4, 5, 6].map(day => (\n <div\n key={day}\n className=\"text-center text-xs sm:text-sm font-medium text-muted-foreground py-2\"\n >\n {format(new Date(2024, 0, day + 1), 'EEE')}\n </div>\n ))}\n </div>\n\n {/* Calendar Days */}\n <div className=\"grid grid-cols-7 gap-1 sm:gap-2\">\n {calendarDays.map(day => {\n const dateKey = format(day, 'yyyy-MM-dd');\n const dayEvents = eventsByDay.get(dateKey) || [];\n const isToday = isSameDay(day, new Date());\n\n return (\n <div\n key={dateKey}\n className={`\n min-h-16 sm:min-h-24 p-1 sm:p-2 border rounded-lg\n ${!isSameMonth(day, currentMonth) ? 'opacity-40' : ''}\n ${isToday ? 'border-primary bg-primary/5' : 'border-border'}\n `}\n >\n <div className=\"flex flex-col h-full\">\n <div\n className={`\n text-xs sm:text-sm font-medium mb-1\n ${isToday ? 'text-primary' : 'text-foreground'}\n `}\n >\n {format(day, 'd')}\n </div>\n\n <div className=\"flex-1 overflow-y-auto space-y-1\">\n {dayEvents.slice(0, 3).map(event => (\n <div\n key={event.id}\n className=\"text-xs px-1 py-0.5 rounded bg-accent hover:bg-accent/80 cursor-pointer truncate\"\n title={isRTL ? (event.title_ar || event.title_en) : (event.title_en || event.title_ar)}\n >\n <div className=\"flex items-center gap-1\">\n <Clock className=\"h-2 w-2 sm:h-3 sm:w-3 shrink-0\" />\n <span className=\"truncate\">\n {isRTL ? (event.title_ar || event.title_en) : (event.title_en || event.title_ar)}\n </span>\n </div>\n </div>\n ))}\n {dayEvents.length > 3 && (\n <div className=\"text-xs text-muted-foreground ps-1\">\n +{dayEvents.length - 3} {t('calendar.more')}\n </div>\n )}\n </div>\n </div>\n </div>\n );\n })}\n </div>\n </Card>\n\n {/* Events List (Mobile-friendly alternative view) */}\n <div className=\"sm:hidden\">\n <h3 className=\"text-sm font-semibold mb-2\">{t('calendar.upcoming_events')}</h3>\n <div className=\"flex flex-col gap-2\">\n {events.slice(0, 5).map(event => (\n <Card key={event.id} className=\"p-3\">\n <div className=\"flex justify-between items-start gap-2\">\n <div className=\"flex-1 min-w-0\">\n <h4 className=\"font-medium text-sm truncate\">\n {isRTL ? (event.title_ar || event.title_en) : (event.title_en || event.title_ar)}\n </h4>\n <p className=\"text-xs text-muted-foreground\">\n {format(new Date(event.start_datetime), 'PPp')}\n </p>\n </div>\n <Badge variant=\"outline\" className=\"shrink-0 text-xs\">\n {t(`calendar.types.${event.entry_type}`)}\n </Badge>\n </div>\n </Card>\n ))}\n </div>\n </div>\n </div>\n );\n}\n","import { useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { createFileRoute, Link } from '@tanstack/react-router';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { Calendar as CalendarIcon, Plus } from 'lucide-react';\nimport { UnifiedCalendar } from '@/components/Calendar/UnifiedCalendar';\n\nexport const Route = createFileRoute('/_protected/calendar')({\n component: CalendarPage,\n});\n\nfunction CalendarPage() {\n const { t, i18n } = useTranslation('dossiers');\n const isRTL = i18n.language === 'ar';\n\n const [viewMode, setViewMode] = useState<'month' | 'week' | 'day'>('month');\n\n return (\n <div className=\"container mx-auto px-4 sm:px-6 lg:px-8 py-6\" dir={isRTL ? 'rtl' : 'ltr'}>\n {/* Page Header */}\n <div className=\"mb-6\">\n <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4\">\n <div>\n <h1 className=\"text-2xl sm:text-3xl font-bold text-start flex items-center gap-2\">\n <CalendarIcon className=\"h-6 w-6 sm:h-7 sm:w-7\" />\n {t('calendar.page.title')}\n </h1>\n <p className=\"text-sm sm:text-base text-muted-foreground mt-1 text-start\">\n {t('calendar.page.description')}\n </p>\n </div>\n\n <div className=\"flex gap-2\">\n <Link to=\"/calendar/new\">\n <Button className=\"w-full sm:w-auto\">\n <Plus className=\"h-4 w-4 me-2\" />\n {t('calendar.page.create_event')}\n </Button>\n </Link>\n </div>\n </div>\n </div>\n\n {/* View Mode Toggle */}\n <Card className=\"mb-6\">\n <CardContent className=\"pt-6\">\n <div className=\"flex items-center gap-2 justify-center sm:justify-start\">\n <Button\n variant={viewMode === 'month' ? 'default' : 'outline'}\n size=\"sm\"\n onClick={() => setViewMode('month')}\n >\n {t('calendar.view_mode.month')}\n </Button>\n <Button\n variant={viewMode === 'week' ? 'default' : 'outline'}\n size=\"sm\"\n onClick={() => setViewMode('week')}\n >\n {t('calendar.view_mode.week')}\n </Button>\n <Button\n variant={viewMode === 'day' ? 'default' : 'outline'}\n size=\"sm\"\n onClick={() => setViewMode('day')}\n >\n {t('calendar.view_mode.day')}\n </Button>\n </div>\n </CardContent>\n </Card>\n\n {/* Unified Calendar Component */}\n <UnifiedCalendar viewMode={viewMode} />\n </div>\n );\n}\n"],"names":["useCalendarEvents","filters","data","isLoading","error","refetch","useQuery","params","session","supabase","response","UnifiedCalendar","linkedItemType","linkedItemId","i18n","useTranslation","isRTL","currentMonth","setCurrentMonth","useState","entryTypeFilter","setEntryTypeFilter","monthStart","startOfMonth","monthEnd","endOfMonth","events","calendarDays","useMemo","eachDayOfInterval","eventsByDay","grouped","event","day","format","handlePreviousMonth","subMonths","handleNextMonth","addMonths","handleToday","jsx","Card","jsxs","Button","ChevronLeft","ChevronRight","Select","v","SelectTrigger","SelectValue","SelectContent","SelectItem","dateKey","dayEvents","isToday","isSameDay","isSameMonth","Clock","Badge","CalendarPage","t","language","viewMode","setViewMode","CalendarIcon","Link","Plus","CardContent"],"mappings":"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"}