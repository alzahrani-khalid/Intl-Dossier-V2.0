{"version":3,"file":"system-DodGAIl5.js","sources":["../../src/routes/_protected/admin/system.tsx?tsr-split=component"],"sourcesContent":["/**\n * Route: /admin/system\n * Admin system utilities and maintenance\n */\n\nimport { createFileRoute } from '@tanstack/react-router';\nimport { useState, useEffect, useRef } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Alert, AlertDescription } from '@/components/ui/alert';\nimport { Progress } from '@/components/ui/progress';\nimport { useMutation } from '@tanstack/react-query';\nimport { supabase } from '@/lib/supabase';\nimport { \n  Settings, \n  Globe, \n  RefreshCw, \n  CheckCircle2, \n  XCircle, \n  AlertCircle,\n  Database,\n  Download\n} from 'lucide-react';\nimport { Skeleton } from '@/components/ui/skeleton';\n\nexport const Route = createFileRoute('/_protected/admin/system')({\n  component: AdminSystemPage,\n  beforeLoad: async () => {\n    // Check admin role\n    const { data: { session } } = await supabase.auth.getSession();\n    const user = session?.user;\n    const isAdmin = user?.user_metadata?.role === 'admin' || user?.app_metadata?.role === 'admin';\n\n    if (!isAdmin) {\n      throw new Error('Admin access required');\n    }\n  },\n});\n\nconst API_BASE_URL = import.meta.env.VITE_SUPABASE_URL + '/functions/v1';\n\ninterface PopulateCountriesResponse {\n  success: boolean;\n  progress_id?: string;\n  summary: {\n    total: number;\n    processed: number;\n    successful: number;\n    failed: number;\n  };\n  errors?: string[];\n  message_en: string;\n  message_ar: string;\n  error?: string;\n}\n\ninterface ProgressData {\n  id: string;\n  operation_type: string;\n  total_items: number;\n  processed_items: number;\n  successful_items: number;\n  failed_items: number;\n  status: 'running' | 'completed' | 'failed';\n  percentage: number;\n  is_complete: boolean;\n}\n\nasync function populateCountries(): Promise<PopulateCountriesResponse> {\n  const { data: { session } } = await supabase.auth.getSession();\n  \n  const response = await fetch(`${API_BASE_URL}/populate-countries-v2`, {\n    method: 'POST',\n    headers: {\n      'Authorization': `Bearer ${session?.access_token}`,\n      'Content-Type': 'application/json',\n    },\n  });\n\n  if (!response.ok) {\n    const error = await response.json();\n    throw new Error(error.message_en || error.error || 'Failed to populate countries');\n  }\n\n  return response.json();\n}\n\nasync function fetchProgress(progressId: string): Promise<ProgressData> {\n  const { data: { session } } = await supabase.auth.getSession();\n  \n  const response = await fetch(`${API_BASE_URL}/operation-progress?id=${progressId}`, {\n    method: 'GET',\n    headers: {\n      'Authorization': `Bearer ${session?.access_token}`,\n    },\n  });\n\n  if (!response.ok) {\n    throw new Error('Failed to fetch progress');\n  }\n\n  const data = await response.json();\n  return data.progress;\n}\n\nfunction AdminSystemPage() {\n  const { t, i18n } = useTranslation('admin');\n  const isRTL = i18n.language === 'ar';\n  const [result, setResult] = useState<PopulateCountriesResponse | null>(null);\n  const [progress, setProgress] = useState<ProgressData | null>(null);\n  const [progressId, setProgressId] = useState<string | null>(null);\n  const pollingIntervalRef = useRef<NodeJS.Timeout | null>(null);\n\n  const populateMutation = useMutation({\n    mutationFn: populateCountries,\n    onSuccess: (data) => {\n      if (data.progress_id) {\n        setProgressId(data.progress_id);\n        // Start polling for progress\n        startProgressPolling(data.progress_id);\n      } else {\n        // If no progress_id, operation completed immediately\n        setResult(data);\n      }\n    },\n    onError: (error: Error) => {\n      setResult({\n        success: false,\n        summary: { total: 0, processed: 0, successful: 0, failed: 1 },\n        message_en: error.message,\n        message_ar: 'ÙØ´Ù„ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯ÙˆÙ„',\n        error: error.message,\n      });\n      stopProgressPolling();\n    },\n  });\n\n  // Poll for progress updates\n  const startProgressPolling = (id: string) => {\n    // Clear any existing interval\n    stopProgressPolling();\n\n    // Poll immediately\n    pollProgress(id);\n\n    // Then poll every 2 seconds\n    pollingIntervalRef.current = setInterval(() => {\n      pollProgress(id);\n    }, 2000);\n  };\n\n  const stopProgressPolling = () => {\n    if (pollingIntervalRef.current) {\n      clearInterval(pollingIntervalRef.current);\n      pollingIntervalRef.current = null;\n    }\n  };\n\n  const pollProgress = async (id: string) => {\n    try {\n      const progressData = await fetchProgress(id);\n      setProgress(progressData);\n\n      // If completed, stop polling and show final result\n      if (progressData.is_complete) {\n        stopProgressPolling();\n        setResult({\n          success: progressData.status === 'completed',\n          summary: {\n            total: progressData.total_items,\n            processed: progressData.processed_items,\n            successful: progressData.successful_items,\n            failed: progressData.failed_items,\n          },\n          message_en: `Successfully processed ${progressData.successful_items} countries`,\n          message_ar: `ØªÙ… Ù…Ø¹Ø§Ù„Ø¬Ø© ${progressData.successful_items} Ø¯ÙˆÙ„Ø© Ø¨Ù†Ø¬Ø§Ø­`,\n        });\n      }\n    } catch (error) {\n      console.error('Failed to fetch progress:', error);\n      // Don't stop polling on error, might be temporary\n    }\n  };\n\n  // Cleanup polling on unmount\n  useEffect(() => {\n    return () => {\n      stopProgressPolling();\n    };\n  }, []);\n\n  const handlePopulateCountries = () => {\n    setResult(null);\n    setProgress(null);\n    setProgressId(null);\n    populateMutation.mutate();\n  };\n\n  return (\n    <div className=\"container mx-auto py-6 space-y-6\" dir={isRTL ? 'rtl' : 'ltr'}>\n      {/* Header */}\n      <div className=\"flex items-center gap-3\">\n        <div className=\"p-3 bg-primary/10 rounded-lg\">\n          <Settings className=\"h-6 w-6 text-primary\" />\n        </div>\n        <div>\n          <h1 className=\"text-3xl font-bold\">\n            {t('system.title', 'System Utilities')}\n          </h1>\n          <p className=\"text-muted-foreground\">\n            {t('system.subtitle', 'Maintenance and data management tools')}\n          </p>\n        </div>\n      </div>\n\n      {/* Warning Banner */}\n      <Alert variant=\"default\" className=\"border-yellow-500 bg-yellow-50 dark:bg-yellow-900/20\">\n        <AlertCircle className=\"h-5 w-5 text-yellow-600 dark:text-yellow-400\" />\n        <AlertDescription className=\"text-yellow-800 dark:text-yellow-200\">\n          <p className=\"font-medium\">\n            {t('system.warning', 'Admin Privileges Active')}\n          </p>\n          <p className=\"text-sm mt-1\">\n            {t('system.warningText', 'These operations modify system data. Use with caution.')}\n          </p>\n        </AlertDescription>\n      </Alert>\n\n      {/* Countries Population Card */}\n      <Card>\n        <CardHeader>\n          <div className=\"flex items-start justify-between\">\n            <div className=\"flex items-center gap-3\">\n              <div className=\"p-2 bg-emerald-100 dark:bg-emerald-900 rounded-lg\">\n                <Globe className=\"h-5 w-5 text-emerald-600 dark:text-emerald-400\" />\n              </div>\n              <div>\n                <CardTitle className=\"text-xl\">\n                  {t('system.populateCountries.title', 'Populate Country Data')}\n                </CardTitle>\n                <CardDescription>\n                  {t('system.populateCountries.description', 'Fetch and update geographic data for all countries from REST Countries API')}\n                </CardDescription>\n              </div>\n            </div>\n          </div>\n        </CardHeader>\n\n        <CardContent className=\"space-y-4\">\n          {/* Information */}\n          <div className=\"space-y-2\">\n            <h3 className=\"text-sm font-medium\">\n              {t('system.populateCountries.whatIsIncluded', 'What will be updated:')}\n            </h3>\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-2 text-sm text-muted-foreground\">\n              <div className=\"flex items-center gap-2\">\n                <CheckCircle2 className=\"h-4 w-4 text-emerald-600\" />\n                <span>{t('system.populateCountries.isoCodes', 'ISO Codes (2 & 3 letter)')}</span>\n              </div>\n              <div className=\"flex items-center gap-2\">\n                <CheckCircle2 className=\"h-4 w-4 text-emerald-600\" />\n                <span>{t('system.populateCountries.capitals', 'Capital Cities')}</span>\n              </div>\n              <div className=\"flex items-center gap-2\">\n                <CheckCircle2 className=\"h-4 w-4 text-emerald-600\" />\n                <span>{t('system.populateCountries.regions', 'Regions & Subregions')}</span>\n              </div>\n              <div className=\"flex items-center gap-2\">\n                <CheckCircle2 className=\"h-4 w-4 text-emerald-600\" />\n                <span>{t('system.populateCountries.population', 'Population Data')}</span>\n              </div>\n              <div className=\"flex items-center gap-2\">\n                <CheckCircle2 className=\"h-4 w-4 text-emerald-600\" />\n                <span>{t('system.populateCountries.area', 'Area (kmÂ²)')}</span>\n              </div>\n              <div className=\"flex items-center gap-2\">\n                <CheckCircle2 className=\"h-4 w-4 text-emerald-600\" />\n                <span>{t('system.populateCountries.flags', 'Flag URLs')}</span>\n              </div>\n            </div>\n          </div>\n\n          {/* Data Source Badge */}\n          <div className=\"flex items-center gap-2\">\n            <Database className=\"h-4 w-4 text-muted-foreground\" />\n            <span className=\"text-sm text-muted-foreground\">\n              {t('system.populateCountries.dataSource', 'Data Source:')}\n            </span>\n            <Badge variant=\"secondary\" className=\"gap-1\">\n              <Download className=\"h-3 w-3\" />\n              REST Countries API\n            </Badge>\n            <span className=\"text-xs text-muted-foreground\">\n              ({t('system.populateCountries.countriesCount', '~250 countries')})\n            </span>\n          </div>\n\n          {/* Action Button */}\n          <Button\n            onClick={handlePopulateCountries}\n            disabled={populateMutation.isPending}\n            size=\"lg\"\n            className=\"w-full sm:w-auto\"\n          >\n            {populateMutation.isPending ? (\n              <>\n                <RefreshCw className=\"h-4 w-4 animate-spin\" />\n                <span>{t('system.populateCountries.processing', 'Processing...')}</span>\n              </>\n            ) : (\n              <>\n                <RefreshCw className=\"h-4 w-4\" />\n                <span>{t('system.populateCountries.updateButton', 'Update Country Data')}</span>\n              </>\n            )}\n          </Button>\n\n          {/* Progress Indicator with Real-time Updates */}\n          {(populateMutation.isPending || progress) && !result && (\n            <div className=\"space-y-3 p-4 bg-muted/30 rounded-lg border\">\n              <div className=\"flex items-center justify-between text-sm\">\n                <span className=\"text-muted-foreground font-medium\">\n                  {progress && progress.processed_items > 0 ? (\n                    <>\n                      {t('system.populateCountries.processing', 'Processing')}:{' '}\n                      <span className=\"font-bold text-foreground\">\n                        {progress.processed_items}/{progress.total_items}\n                      </span>\n                      {' '}\n                      {t('system.populateCountries.countries', 'countries')}\n                    </>\n                  ) : (\n                    t('system.populateCountries.fetching', 'Fetching and updating countries...')\n                  )}\n                </span>\n                {progress && (\n                  <span className=\"text-lg font-bold text-emerald-600\">\n                    {progress.percentage}%\n                  </span>\n                )}\n              </div>\n              \n              {/* Progress Bar */}\n              <div className=\"relative\">\n                <Progress \n                  value={progress?.percentage || 0} \n                  className=\"w-full h-3\"\n                />\n              </div>\n\n              {/* Progress Details */}\n              {progress && (\n                <div className=\"grid grid-cols-3 gap-2 text-xs\">\n                  <div className=\"text-center p-2 bg-background rounded\">\n                    <div className=\"font-bold text-blue-600\">{progress.successful_items}</div>\n                    <div className=\"text-muted-foreground\">{t('system.populateCountries.successful', 'Successful')}</div>\n                  </div>\n                  <div className=\"text-center p-2 bg-background rounded\">\n                    <div className=\"font-bold text-yellow-600\">{progress.processed_items - progress.successful_items - progress.failed_items}</div>\n                    <div className=\"text-muted-foreground\">{t('system.populateCountries.pending', 'Pending')}</div>\n                  </div>\n                  <div className=\"text-center p-2 bg-background rounded\">\n                    <div className=\"font-bold text-red-600\">{progress.failed_items}</div>\n                    <div className=\"text-muted-foreground\">{t('system.populateCountries.failed', 'Failed')}</div>\n                  </div>\n                </div>\n              )}\n\n              <p className=\"text-xs text-muted-foreground text-center\">\n                {!progress && t('system.populateCountries.estimatedTime', 'This may take 2-3 minutes')}\n                {progress && progress.percentage < 100 && (\n                  <span className=\"flex items-center justify-center gap-1\">\n                    <RefreshCw className=\"h-3 w-3 animate-spin inline\" />\n                    {t('system.populateCountries.inProgress', 'Operation in progress...')}\n                  </span>\n                )}\n              </p>\n            </div>\n          )}\n\n          {/* Results */}\n          {result && (\n            <Alert\n              variant={result.success ? 'default' : 'destructive'}\n              className={result.success ? 'border-emerald-500 bg-emerald-50 dark:bg-emerald-900/20' : ''}\n            >\n              {result.success ? (\n                <CheckCircle2 className=\"h-5 w-5 text-emerald-600 dark:text-emerald-400\" />\n              ) : (\n                <XCircle className=\"h-5 w-5\" />\n              )}\n              <AlertDescription>\n                <div className=\"space-y-3\">\n                  {/* Message */}\n                  <p className={result.success ? 'text-emerald-800 dark:text-emerald-200 font-medium' : 'font-medium'}>\n                    {isRTL ? result.message_ar : result.message_en}\n                  </p>\n\n                  {/* Summary Stats */}\n                  {result.success && result.summary && (\n                    <div className=\"grid grid-cols-2 sm:grid-cols-4 gap-3 pt-2\">\n                      <div className=\"text-center p-2 bg-background rounded\">\n                        <div className=\"text-2xl font-bold text-emerald-600\">\n                          {result.summary.total}\n                        </div>\n                        <div className=\"text-xs text-muted-foreground\">\n                          {t('system.populateCountries.total', 'Total')}\n                        </div>\n                      </div>\n                      <div className=\"text-center p-2 bg-background rounded\">\n                        <div className=\"text-2xl font-bold text-blue-600\">\n                          {result.summary.processed}\n                        </div>\n                        <div className=\"text-xs text-muted-foreground\">\n                          {t('system.populateCountries.processed', 'Processed')}\n                        </div>\n                      </div>\n                      <div className=\"text-center p-2 bg-background rounded\">\n                        <div className=\"text-2xl font-bold text-green-600\">\n                          {result.summary.successful}\n                        </div>\n                        <div className=\"text-xs text-muted-foreground\">\n                          {t('system.populateCountries.successful', 'Successful')}\n                        </div>\n                      </div>\n                      <div className=\"text-center p-2 bg-background rounded\">\n                        <div className={`text-2xl font-bold ${result.summary.failed > 0 ? 'text-red-600' : 'text-gray-400'}`}>\n                          {result.summary.failed}\n                        </div>\n                        <div className=\"text-xs text-muted-foreground\">\n                          {t('system.populateCountries.failed', 'Failed')}\n                        </div>\n                      </div>\n                    </div>\n                  )}\n\n                  {/* Error Details */}\n                  {result.errors && result.errors.length > 0 && (\n                    <details className=\"text-sm\">\n                      <summary className=\"cursor-pointer text-muted-foreground hover:text-foreground\">\n                        {t('system.populateCountries.viewErrors', 'View error details')} ({result.errors.length})\n                      </summary>\n                      <ul className=\"mt-2 space-y-1 text-xs max-h-40 overflow-y-auto\">\n                        {result.errors.map((error, idx) => (\n                          <li key={idx} className=\"flex items-start gap-2\">\n                            <XCircle className=\"h-3 w-3 mt-0.5 flex-shrink-0 text-red-500\" />\n                            <span>{error}</span>\n                          </li>\n                        ))}\n                      </ul>\n                    </details>\n                  )}\n                </div>\n              </AlertDescription>\n            </Alert>\n          )}\n\n          {/* Help Text */}\n          <div className=\"text-xs text-muted-foreground space-y-1 pt-2 border-t\">\n            <p>\n              ðŸ’¡ {t('system.populateCountries.tip1', 'This operation is safe to run multiple times - it will update existing countries.')}\n            </p>\n            <p>\n              ðŸ’¡ {t('system.populateCountries.tip2', 'Run this annually to keep population and area data up to date.')}\n            </p>\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n\n"],"names":["API_BASE_URL","import","populateCountries","data","session","supabase","auth","getSession","response","fetch","method","headers","access_token","ok","error","json","Error","message_en","fetchProgress","progressId","progress","AdminSystemPage","t","i18n","useTranslation","isRTL","language","result","setResult","useState","setProgress","setProgressId","pollingIntervalRef","useRef","populateMutation","useMutation","mutationFn","onSuccess","progress_id","startProgressPolling","onError","success","summary","total","processed","successful","failed","message","message_ar","stopProgressPolling","id","pollProgress","current","setInterval","clearInterval","progressData","is_complete","status","total_items","processed_items","successful_items","failed_items","console","useEffect","handlePopulateCountries","mutate","jsxs","jsx","Settings","Alert","AlertCircle","AlertDescription","Card","CardHeader","Globe","CardTitle","CardDescription","CardContent","CheckCircle2","Database","Badge","Download","Button","isPending","Fragment","RefreshCw","percentage","Progress","XCircle","errors","length","map","idx"],"mappings":"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"}