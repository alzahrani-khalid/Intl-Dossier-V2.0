{"version":3,"file":"_id-B-OB3ERp.js","sources":["../../src/components/Dossier/sections/InstitutionalProfile.tsx","../../src/components/Dossier/sections/OrgHierarchy.tsx","../../src/components/Dossier/sections/KeyContacts.tsx","../../src/components/Dossier/sections/ActiveMoUs.tsx","../../src/components/Dossier/OrganizationDossierDetail.tsx","../../src/pages/dossiers/OrganizationDossierPage.tsx","../../src/routes/_protected/dossiers/organizations/$id.tsx?tsr-split=component"],"sourcesContent":["/**\n * InstitutionalProfile Section Component\n *\n * Displays organization extension fields: org_code, org_type, established_date,\n * website_url, head_count, parent organization reference.\n *\n * Mobile-first layout with responsive grid for key-value pairs.\n * RTL-compatible with logical properties and text alignment.\n */\n\nimport { useTranslation } from 'react-i18next';\nimport { Building2, Users, Calendar, Globe, Hash, Network } from 'lucide-react';\nimport type { OrganizationDossier } from '@/lib/dossier-type-guards';\nimport { cn } from '@/lib/utils';\n\ninterface InstitutionalProfileProps {\n  dossier: OrganizationDossier;\n}\n\nexport function InstitutionalProfile({ dossier }: InstitutionalProfileProps) {\n  const { t, i18n } = useTranslation('dossier');\n  const isRTL = i18n.language === 'ar';\n  const { extension } = dossier;\n\n  // Format date\n  const formatDate = (dateString?: string) => {\n    if (!dateString) return t('common.notAvailable');\n    const date = new Date(dateString);\n    return new Intl.DateTimeFormat(i18n.language, {\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric',\n    }).format(date);\n  };\n\n  // Organization type label\n  const getOrgTypeLabel = (orgType: string) => {\n    const labels: Record<string, { en: string; ar: string }> = {\n      government: { en: 'Government', ar: 'حكومية' },\n      ngo: { en: 'NGO', ar: 'منظمة غير حكومية' },\n      international: { en: 'International', ar: 'دولية' },\n      private: { en: 'Private Sector', ar: 'قطاع خاص' },\n    };\n    return labels[orgType]?.[isRTL ? 'ar' : 'en'] || orgType;\n  };\n\n  interface ProfileFieldProps {\n    icon: typeof Building2;\n    label: string;\n    value: string | number | null | undefined;\n    link?: string;\n  }\n\n  function ProfileField({ icon: Icon, label, value, link }: ProfileFieldProps) {\n    const displayValue = value || t('common.notAvailable');\n\n    return (\n      <div className=\"flex items-start gap-3 p-3 sm:p-4 rounded-lg bg-muted/30 hover:bg-muted/50 transition-colors\">\n        <Icon className=\"h-5 w-5 text-muted-foreground shrink-0 mt-0.5\" />\n        <div className=\"flex-1 min-w-0\">\n          <dt className=\"text-xs sm:text-sm font-medium text-muted-foreground mb-1\">\n            {label}\n          </dt>\n          <dd className=\"text-sm sm:text-base font-medium break-words\">\n            {link && value ? (\n              <a\n                href={link}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                className=\"text-primary hover:underline\"\n              >\n                {displayValue}\n              </a>\n            ) : (\n              displayValue\n            )}\n          </dd>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-4\" dir={isRTL ? 'rtl' : 'ltr'}>\n      {/* Organization Code and Type */}\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4\">\n        <ProfileField\n          icon={Hash}\n          label=\"Organization Code\"\n          value={extension.org_code}\n        />\n        <ProfileField\n          icon={Building2}\n          label=\"Organization Type\"\n          value={getOrgTypeLabel(extension.org_type)}\n        />\n      </div>\n\n      {/* Established Date and Website */}\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4\">\n        <ProfileField\n          icon={Calendar}\n          label=\"Established Date\"\n          value={formatDate(extension.established_date)}\n        />\n        <ProfileField\n          icon={Globe}\n          label=\"Website\"\n          value={extension.website_url}\n          link={extension.website_url}\n        />\n      </div>\n\n      {/* Headcount and Parent Organization */}\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4\">\n        <ProfileField\n          icon={Users}\n          label=\"Headcount\"\n          value={extension.head_count}\n        />\n        {extension.parent_org_id && (\n          <ProfileField\n            icon={Network}\n            label=\"Parent Organization\"\n            value={extension.parent_org_id}\n          />\n        )}\n      </div>\n    </div>\n  );\n}\n","/**\n * OrgHierarchy Section Component (Feature 028 - User Story 5 - T044/T058)\n *\n * Displays organizational hierarchy tree using React Flow with d3-hierarchy layout.\n * Optimized for performance with memoization and virtualization.\n * Mobile-first with touch gestures and RTL support.\n */\n\nimport { useTranslation } from 'react-i18next';\nimport { Network, Building2 } from 'lucide-react';\nimport { useQuery } from '@tanstack/react-query';\nimport { useMemo, memo } from 'react';\nimport ReactFlow, {\n  Node,\n  Edge,\n  Background,\n  Controls,\n  useNodesState,\n  useEdgesState,\n  OnNodesChange,\n  OnEdgesChange,\n  NodeTypes,\n  Position,\n} from 'reactflow';\nimport 'reactflow/dist/style.css';\nimport { hierarchy, tree } from 'd3-hierarchy';\nimport { supabase } from '@/lib/supabase-client';\nimport type { OrganizationDossier } from '@/lib/dossier-type-guards';\nimport { Badge } from '@/components/ui/badge';\n\ninterface OrgHierarchyProps {\n  dossier: OrganizationDossier;\n}\n\ninterface OrgNode {\n  id: string;\n  name_en: string;\n  name_ar: string;\n  extension: {\n    org_code?: string;\n    org_type?: string;\n    parent_org_id?: string;\n    head_count?: number;\n  };\n}\n\n// Custom node component for organizations (memoized for performance)\nconst OrganizationNode = memo(\n  ({ data }: { data: { label: string; orgCode: string; orgType: string; headCount?: number } }) => (\n    <div className=\"bg-card border-2 border-primary rounded-lg px-3 py-2 sm:px-4 sm:py-3 shadow-md min-w-[120px] sm:min-w-[160px] hover:shadow-lg transition-shadow\">\n      <div className=\"flex flex-col items-center gap-1\">\n        <Badge variant=\"outline\" className=\"text-xs\">\n          {data.orgCode}\n        </Badge>\n        <div className=\"text-sm sm:text-base font-semibold text-foreground text-center\">\n          {data.label}\n        </div>\n        <div className=\"text-xs text-muted-foreground\">{data.orgType}</div>\n        {data.headCount !== undefined && (\n          <div className=\"text-xs text-muted-foreground\">\n            {data.headCount} employees\n          </div>\n        )}\n      </div>\n    </div>\n  )\n);\nOrganizationNode.displayName = 'OrganizationNode';\n\nconst nodeTypes: NodeTypes = {\n  organization: OrganizationNode,\n};\n\nexport function OrgHierarchy({ dossier }: OrgHierarchyProps) {\n  const { t, i18n } = useTranslation('dossier');\n  const isRTL = i18n.language === 'ar';\n  const { extension } = dossier;\n\n  // Fetch organization hierarchy (parent and children)\n  const { data: hierarchyOrgs, isLoading } = useQuery({\n    queryKey: ['org-hierarchy', dossier.id],\n    queryFn: async () => {\n      // Fetch all organizations to build complete hierarchy\n      const { data, error } = await supabase\n        .from('dossiers')\n        .select('id, name_en, name_ar, extension')\n        .eq('type', 'organization');\n\n      if (error) throw error;\n      return data as OrgNode[];\n    },\n  });\n\n  // Build hierarchy tree structure and generate nodes/edges\n  const { nodes: initialNodes, edges: initialEdges } = useMemo(() => {\n    if (!hierarchyOrgs || hierarchyOrgs.length === 0) {\n      return { nodes: [], edges: [] };\n    }\n\n    // Build parent-child map\n    const orgMap = new Map<string, OrgNode>();\n    hierarchyOrgs.forEach((org) => orgMap.set(org.id, org));\n\n    // Find root nodes (organizations without parent)\n    const roots = hierarchyOrgs.filter((org) => !org.extension.parent_org_id);\n\n    // Build hierarchy tree for each root\n    interface HierarchyNode {\n      id: string;\n      name: string;\n      orgCode: string;\n      orgType: string;\n      headCount?: number;\n      children: HierarchyNode[];\n    }\n\n    const buildTree = (orgId: string): HierarchyNode | null => {\n      const org = orgMap.get(orgId);\n      if (!org) return null;\n\n      const children = hierarchyOrgs\n        .filter((child) => child.extension.parent_org_id === orgId)\n        .map((child) => buildTree(child.id))\n        .filter((node): node is HierarchyNode => node !== null);\n\n      return {\n        id: org.id,\n        name: isRTL ? org.name_ar : org.name_en,\n        orgCode: org.extension.org_code || org.id.slice(0, 8),\n        orgType: org.extension.org_type || 'organization',\n        headCount: org.extension.head_count,\n        children,\n      };\n    };\n\n    // Build tree starting from current dossier or first root\n    let treeRoot: HierarchyNode | null = null;\n\n    // Try to find tree containing current dossier\n    if (extension.parent_org_id) {\n      // Find root of current dossier's tree\n      let currentId = dossier.id;\n      let parentId = extension.parent_org_id;\n\n      while (parentId) {\n        const parent = orgMap.get(parentId);\n        if (!parent || !parent.extension.parent_org_id) {\n          treeRoot = buildTree(parentId);\n          break;\n        }\n        currentId = parentId;\n        parentId = parent.extension.parent_org_id;\n      }\n    } else {\n      // Current dossier is root\n      treeRoot = buildTree(dossier.id);\n    }\n\n    // If tree not found, use first root\n    if (!treeRoot && roots.length > 0) {\n      treeRoot = buildTree(roots[0].id);\n    }\n\n    if (!treeRoot) {\n      return { nodes: [], edges: [] };\n    }\n\n    // Apply d3-hierarchy tree layout\n    const root = hierarchy(treeRoot);\n    const treeLayout = tree<HierarchyNode>()\n      .size([800, 600])\n      .separation((a, b) => (a.parent === b.parent ? 1 : 2));\n\n    const treeData = treeLayout(root);\n\n    // Convert to React Flow nodes\n    const nodesData: Node[] = [];\n    treeData.descendants().forEach((node) => {\n      const x = isRTL ? 800 - node.y : node.y;\n      const y = node.x;\n\n      nodesData.push({\n        id: node.data.id,\n        type: 'organization',\n        position: { x, y },\n        data: {\n          label: node.data.name,\n          orgCode: node.data.orgCode,\n          orgType: node.data.orgType,\n          headCount: node.data.headCount,\n        },\n        sourcePosition: isRTL ? Position.Left : Position.Right,\n        targetPosition: isRTL ? Position.Right : Position.Left,\n      });\n    });\n\n    // Convert to React Flow edges\n    const edgesData: Edge[] = [];\n    treeData.links().forEach((link) => {\n      edgesData.push({\n        id: `${link.source.data.id}-${link.target.data.id}`,\n        source: link.source.data.id,\n        target: link.target.data.id,\n        type: 'step',\n        animated: false,\n        style: {\n          stroke: 'hsl(var(--primary))',\n          strokeWidth: 2,\n        },\n      });\n    });\n\n    return { nodes: nodesData, edges: edgesData };\n  }, [hierarchyOrgs, dossier.id, extension.parent_org_id, isRTL]);\n\n  const [nodes, setNodes, onNodesChange] = useNodesState(initialNodes);\n  const [edges, setEdges, onEdgesChange] = useEdgesState(initialEdges);\n\n  // Update nodes/edges when data changes\n  useMemo(() => {\n    setNodes(initialNodes);\n    setEdges(initialEdges);\n  }, [initialNodes, initialEdges, setNodes, setEdges]);\n\n  // Loading state\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center py-12 sm:py-16\" dir={isRTL ? 'rtl' : 'ltr'}>\n        <div className=\"text-center\">\n          <div className=\"h-12 w-12 sm:h-16 sm:w-16 rounded-full border-4 border-primary border-t-transparent animate-spin mx-auto mb-4\" />\n          <p className=\"text-sm sm:text-base text-muted-foreground\">{t('common.loading')}</p>\n        </div>\n      </div>\n    );\n  }\n\n  // Empty state\n  if (!hierarchyOrgs || hierarchyOrgs.length === 0) {\n    return (\n      <div\n        className=\"flex flex-col items-center justify-center py-8 sm:py-12 text-center\"\n        dir={isRTL ? 'rtl' : 'ltr'}\n      >\n        <div className=\"rounded-full bg-muted p-4 sm:p-6 mb-4\">\n          <Network className=\"h-8 w-8 sm:h-10 sm:w-10 text-muted-foreground\" />\n        </div>\n        <h3 className=\"text-sm sm:text-base font-medium text-muted-foreground mb-2\">\n          No Organizational Hierarchy\n        </h3>\n        <p className=\"text-xs sm:text-sm text-muted-foreground max-w-md\">\n          This organization does not have a parent organization defined.\n        </p>\n      </div>\n    );\n  }\n\n  // Hierarchy chart view\n  return (\n    <div\n      className=\"w-full h-[500px] sm:h-[600px] lg:h-[700px] border rounded-lg overflow-hidden\"\n      dir={isRTL ? 'rtl' : 'ltr'}\n    >\n      <ReactFlow\n        nodes={nodes}\n        edges={edges}\n        onNodesChange={onNodesChange as OnNodesChange}\n        onEdgesChange={onEdgesChange as OnEdgesChange}\n        nodeTypes={nodeTypes}\n        fitView\n        attributionPosition={isRTL ? 'top-left' : 'top-right'}\n        minZoom={0.1}\n        maxZoom={1.5}\n        defaultEdgeOptions={{\n          type: 'step',\n          animated: false,\n        }}\n        onlyRenderVisibleElements={true}\n      >\n        <Background color=\"hsl(var(--muted-foreground))\" gap={16} />\n        <Controls position={isRTL ? 'top-left' : 'top-right'} />\n      </ReactFlow>\n    </div>\n  );\n}\n","/**\n * KeyContacts Section Component\n *\n * Displays person dossiers related to organization via dossier_relationships table.\n * Card grid layout with person details, mobile-first responsive, RTL support.\n *\n * Future: Will fetch actual relationships from API (Polish Phase).\n */\n\nimport { useTranslation } from 'react-i18next';\nimport { Users, UserCircle } from 'lucide-react';\nimport type { OrganizationDossier } from '@/lib/dossier-type-guards';\n\ninterface KeyContactsProps {\n  dossier: OrganizationDossier;\n}\n\nexport function KeyContacts({ dossier }: KeyContactsProps) {\n  const { t, i18n } = useTranslation('dossier');\n  const isRTL = i18n.language === 'ar';\n\n  // Placeholder - will fetch from dossier_relationships table in future\n  const contacts: any[] = [];\n\n  if (contacts.length === 0) {\n    return (\n      <div\n        className=\"flex flex-col items-center justify-center py-8 sm:py-12 text-center\"\n        dir={isRTL ? 'rtl' : 'ltr'}\n      >\n        <div className=\"rounded-full bg-muted p-4 sm:p-6 mb-4\">\n          <Users className=\"h-8 w-8 sm:h-10 sm:w-10 text-muted-foreground\" />\n        </div>\n        <h3 className=\"text-sm sm:text-base font-medium text-muted-foreground mb-2\">\n          No Key Contacts\n        </h3>\n        <p className=\"text-xs sm:text-sm text-muted-foreground max-w-md\">\n          Person dossier relationships will populate this section. Integration pending.\n        </p>\n      </div>\n    );\n  }\n\n  return (\n    <div\n      className=\"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4\"\n      dir={isRTL ? 'rtl' : 'ltr'}\n    >\n      {contacts.map((contact) => (\n        <div\n          key={contact.id}\n          className=\"p-4 rounded-lg border bg-card hover:bg-accent/50 transition-colors\"\n        >\n          <div className=\"flex items-start gap-3\">\n            <UserCircle className=\"h-10 w-10 text-muted-foreground shrink-0\" />\n            <div className=\"flex-1 min-w-0\">\n              <h4 className=\"text-sm font-medium truncate\">{contact.name}</h4>\n              <p className=\"text-xs text-muted-foreground truncate\">\n                {contact.title}\n              </p>\n            </div>\n          </div>\n        </div>\n      ))}\n    </div>\n  );\n}\n","/**\n * ActiveMoUs Section Component\n *\n * Displays MoUs from mous table where organization is a signatory.\n * List view with expiry dates, mobile-first responsive, RTL support.\n *\n * Future: Will fetch actual MoUs from API (Polish Phase).\n */\n\nimport { useTranslation } from 'react-i18next';\nimport { FileText, Calendar } from 'lucide-react';\nimport type { OrganizationDossier } from '@/lib/dossier-type-guards';\n\ninterface ActiveMoUsProps {\n  dossier: OrganizationDossier;\n}\n\nexport function ActiveMoUs({ dossier }: ActiveMoUsProps) {\n  const { t, i18n } = useTranslation('dossier');\n  const isRTL = i18n.language === 'ar';\n\n  // Placeholder - will fetch from mous table in future\n  const mous: any[] = [];\n\n  if (mous.length === 0) {\n    return (\n      <div\n        className=\"flex flex-col items-center justify-center py-8 sm:py-12 text-center\"\n        dir={isRTL ? 'rtl' : 'ltr'}\n      >\n        <div className=\"rounded-full bg-muted p-4 sm:p-6 mb-4\">\n          <FileText className=\"h-8 w-8 sm:h-10 sm:w-10 text-muted-foreground\" />\n        </div>\n        <h3 className=\"text-sm sm:text-base font-medium text-muted-foreground mb-2\">\n          No Active MoUs\n        </h3>\n        <p className=\"text-xs sm:text-sm text-muted-foreground max-w-md\">\n          MoUs table integration pending. Active memorandums will appear here.\n        </p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-3\" dir={isRTL ? 'rtl' : 'ltr'}>\n      {mous.map((mou) => (\n        <div\n          key={mou.id}\n          className=\"p-4 rounded-lg border bg-card hover:bg-accent/50 transition-colors\"\n        >\n          <div className=\"flex items-start gap-3\">\n            <FileText className=\"h-5 w-5 text-muted-foreground shrink-0 mt-0.5\" />\n            <div className=\"flex-1 min-w-0\">\n              <h4 className=\"text-sm font-medium mb-1 truncate\">{mou.title}</h4>\n              <div className=\"flex items-center gap-2 text-xs text-muted-foreground\">\n                <Calendar className=\"h-3 w-3\" />\n                <span>Expires: {mou.expiry_date}</span>\n              </div>\n            </div>\n          </div>\n        </div>\n      ))}\n    </div>\n  );\n}\n","/**\n * OrganizationDossierDetail - Type-specific layout for Organization dossiers\n *\n * Component Library Decision:\n * - Checked: Aceternity UI > Aceternity Pro > Kibo-UI\n * - Selected: CollapsibleSection (implemented), section components (custom)\n * - Reason: Reusable collapsible sections with organization-specific content\n *\n * Responsive Strategy:\n * - Base: Single column grid (grid-cols-1)\n * - lg: 3-column grid (lg:grid-cols-3) for hierarchical visualization\n * - Sections: Full-width sections within grid cells\n *\n * RTL Support:\n * - Logical properties: gap-*, text-start\n * - Icon flipping: None needed in organization view\n * - Text alignment: Inherited from CollapsibleSection\n *\n * Accessibility:\n * - ARIA: CollapsibleSection handles accordion ARIA patterns\n * - Keyboard: Tab navigation through sections, Enter/Space to toggle\n * - Focus: CollapsibleSection manages focus states\n *\n * Performance:\n * - Memoization: Section data memoized via useMemo (T065)\n * - Lazy loading: Sections use dynamic imports in future optimization\n *\n * Feature: 028-type-specific-dossier-pages\n */\n\nimport { useTranslation } from 'react-i18next';\nimport { useCollapsibleSections } from '@/hooks/useSessionStorage';\nimport { CollapsibleSection } from './CollapsibleSection';\nimport { InstitutionalProfile } from './sections/InstitutionalProfile';\nimport { OrgHierarchy } from './sections/OrgHierarchy';\nimport { KeyContacts } from './sections/KeyContacts';\nimport { ActiveMoUs } from './sections/ActiveMoUs';\nimport { OrganizationTimeline } from '@/components/timeline/OrganizationTimeline';\nimport type { OrganizationDossier } from '@/lib/dossier-type-guards';\n\ninterface OrganizationDossierDetailProps {\n  dossier: OrganizationDossier;\n}\n\nexport function OrganizationDossierDetail({\n  dossier,\n}: OrganizationDossierDetailProps) {\n  const { t, i18n } = useTranslation('dossier');\n  const isRTL = i18n.language === 'ar';\n\n  // Manage collapsible section state with session storage\n  const [sections, toggleSection] = useCollapsibleSections(\n    dossier.id,\n    'organization',\n    {\n      institutionalProfile: true,\n      orgHierarchy: true,\n      keyContacts: true,\n      timeline: true,\n      activeMous: true,\n    }\n  );\n\n  return (\n    <div\n      className=\"space-y-4 sm:space-y-6 lg:space-y-8\"\n      dir={isRTL ? 'rtl' : 'ltr'}\n    >\n      {/* Institutional Profile Section - Spans all columns on large screens */}\n      <div className=\"lg:col-span-3\">\n        <CollapsibleSection\n          id=\"institutionalProfile\"\n          title={t('sections.organization.institutionalProfile')}\n          description={t('sections.organization.institutionalProfileDescription')}\n          isExpanded={sections.institutionalProfile}\n          onToggle={() => toggleSection('institutionalProfile')}\n        >\n          <InstitutionalProfile dossier={dossier} />\n        </CollapsibleSection>\n      </div>\n\n      {/* Organization Hierarchy Section - Spans all columns */}\n      <div className=\"lg:col-span-3\">\n        <CollapsibleSection\n          id=\"orgHierarchy\"\n          title={t('sections.organization.orgHierarchy')}\n          description={t('sections.organization.orgHierarchyDescription')}\n          isExpanded={sections.orgHierarchy}\n          onToggle={() => toggleSection('orgHierarchy')}\n        >\n          <OrgHierarchy dossier={dossier} />\n        </CollapsibleSection>\n      </div>\n\n      {/* Key Contacts Section - Takes 2 columns on large screens */}\n      <div className=\"lg:col-span-2\">\n        <CollapsibleSection\n          id=\"keyContacts\"\n          title={t('sections.organization.keyContacts')}\n          description={t('sections.organization.keyContactsDescription')}\n          isExpanded={sections.keyContacts}\n          onToggle={() => toggleSection('keyContacts')}\n        >\n          <KeyContacts dossier={dossier} />\n        </CollapsibleSection>\n      </div>\n\n      {/* Active MoUs Section - Takes 1 column on large screens */}\n      <div className=\"lg:col-span-1\">\n        <CollapsibleSection\n          id=\"activeMous\"\n          title={t('sections.organization.activeMous')}\n          description={t('sections.organization.activeMousDescription')}\n          isExpanded={sections.activeMous}\n          onToggle={() => toggleSection('activeMous')}\n        >\n          <ActiveMoUs dossier={dossier} />\n        </CollapsibleSection>\n      </div>\n\n      {/* Timeline Section - Unified Timeline with Multi-Source Events */}\n      <div className=\"lg:col-span-3\">\n        <CollapsibleSection\n          id=\"timeline\"\n          title={t('timeline.title')}\n          description={t('sections.shared.timelineDescription')}\n          isExpanded={sections.timeline}\n          onToggle={() => toggleSection('timeline')}\n        >\n          <OrganizationTimeline dossierId={dossier.id} />\n        </CollapsibleSection>\n      </div>\n    </div>\n  );\n}\n","/**\n * Organization Dossier Page Wrapper (Feature 028 - User Story 5)\n *\n * Component Library Decision:\n * - Checked: Aceternity UI > Aceternity Pro > Kibo-UI\n * - Selected: DossierDetailLayout (shared wrapper)\n * - Reason: Provides consistent header, breadcrumbs, and RTL support\n *\n * Responsive Strategy:\n * - Base: Inherits from DossierDetailLayout (px-4 sm:px-6 lg:px-8)\n * - Grid: 3-column grid for organization hierarchy visualization\n *\n * RTL Support:\n * - Inherited from DossierDetailLayout (dir attribute, logical properties)\n *\n * Accessibility:\n * - Semantic HTML: Uses DossierDetailLayout's semantic structure\n * - ARIA: Breadcrumbs, heading hierarchy\n *\n * Performance:\n * - Will be lazy-loaded via React.lazy in polish phase (T064)\n */\n\nimport { DossierDetailLayout } from '@/components/Dossier/DossierDetailLayout';\nimport { OrganizationDossierDetail } from '@/components/Dossier/OrganizationDossierDetail';\nimport type { OrganizationDossier } from '@/lib/dossier-type-guards';\n\ninterface OrganizationDossierPageProps {\n  dossier: OrganizationDossier;\n}\n\nexport function OrganizationDossierPage({ dossier }: OrganizationDossierPageProps) {\n  return (\n    <DossierDetailLayout\n      dossier={dossier}\n      gridClassName=\"grid-cols-1 lg:grid-cols-3\"\n    >\n      <OrganizationDossierDetail dossier={dossier} />\n    </DossierDetailLayout>\n  );\n}\n","/**\n * Organization Dossier Detail Route (Feature 028 - User Story 5)\n *\n * Component Library Decision:\n * - Checked: Aceternity UI > Aceternity Pro > Kibo-UI\n * - Selected: CollapsibleSection (already implemented), DossierDetailLayout (shared wrapper)\n * - Reason: Reusing shared components for consistency, type-specific layout via gridClassName\n *\n * Responsive Strategy:\n * - Base: Single column (grid-cols-1)\n * - lg: 3-column grid (lg:grid-cols-3) for hierarchical visualization\n *\n * RTL Support:\n * - Logical properties: Container uses ps-*, pe-*, text-start\n * - Icon flipping: None needed (no directional icons in organization view)\n * - Text alignment: text-start for all text content\n *\n * Accessibility:\n * - ARIA: Page title as h1, proper semantic structure\n * - Keyboard: Collapsible sections support keyboard navigation\n * - Focus: Focus management in CollapsibleSection component\n *\n * Performance:\n * - Lazy loading: Component will be code-split via React.lazy in polish phase\n * - Memoization: Type guard validation memoized via TanStack Query\n *\n * @example\n * <Route path=\"/dossiers/organizations/:id\" />\n */\n\nimport { createFileRoute } from '@tanstack/react-router';\nimport { useTranslation } from 'react-i18next';\nimport { Loader2, AlertCircle } from 'lucide-react';\nimport { useTypedDossier } from '@/hooks/useDossier';\nimport { OrganizationDossierPage } from '@/pages/dossiers/OrganizationDossierPage';\nimport { Button } from '@/components/ui/button';\nimport { Link } from '@tanstack/react-router';\n\nexport const Route = createFileRoute('/_protected/dossiers/organizations/$id')({\n  component: OrganizationDossierDetailRoute,\n});\n\nfunction OrganizationDossierDetailRoute() {\n  const { id } = Route.useParams();\n  const { t, i18n } = useTranslation('dossier');\n  const isRTL = i18n.language === 'ar';\n\n  // Fetch organization dossier with type validation\n  const { data: dossier, isLoading, error } = useTypedDossier(id, 'organization');\n\n  // Loading State\n  if (isLoading) {\n    return (\n      <div\n        className=\"flex min-h-[50vh] items-center justify-center\"\n        dir={isRTL ? 'rtl' : 'ltr'}\n      >\n        <div className=\"flex flex-col items-center gap-3\">\n          <Loader2 className=\"h-8 w-8 sm:h-10 sm:w-10 animate-spin text-primary\" />\n          <p className=\"text-sm sm:text-base text-muted-foreground\">\n            {t('detail.loading')}\n          </p>\n        </div>\n      </div>\n    );\n  }\n\n  // Error State\n  if (error || !dossier) {\n    return (\n      <div\n        className=\"container mx-auto px-4 sm:px-6 lg:px-8 py-8 sm:py-12\"\n        dir={isRTL ? 'rtl' : 'ltr'}\n      >\n        <div className=\"max-w-2xl mx-auto\">\n          <div className=\"rounded-lg border border-destructive/20 bg-destructive/10 p-6 sm:p-8\">\n            <div className=\"flex items-start gap-4\">\n              <AlertCircle className=\"h-5 w-5 sm:h-6 sm:w-6 text-destructive shrink-0 mt-1\" />\n              <div className=\"flex-1\">\n                <h2 className=\"text-lg sm:text-xl font-semibold text-destructive mb-2\">\n                  {t('detail.error')}\n                </h2>\n                <p className=\"text-sm sm:text-base text-destructive/90 mb-4\">\n                  {error?.message || t('detail.errorGeneric')}\n                </p>\n                <Button asChild variant=\"outline\">\n                  <Link to=\"/dossiers\">\n                    {t('action.backToHub')}\n                  </Link>\n                </Button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  // Type Mismatch Error (should not happen with type guard, but defensive)\n  if (dossier.type !== 'organization') {\n    return (\n      <div\n        className=\"container mx-auto px-4 sm:px-6 lg:px-8 py-8 sm:py-12\"\n        dir={isRTL ? 'rtl' : 'ltr'}\n      >\n        <div className=\"max-w-2xl mx-auto\">\n          <div className=\"rounded-lg border border-warning/20 bg-warning/10 p-6 sm:p-8\">\n            <h2 className=\"text-lg sm:text-xl font-semibold mb-2\">\n              {t('detail.wrongType')}\n            </h2>\n            <p className=\"text-sm sm:text-base text-muted-foreground mb-4\">\n              {t('detail.wrongTypeDescription', {\n                actualType: t(`type.${dossier.type}`),\n                expectedType: t('type.organization'),\n              })}\n            </p>\n            <div className=\"flex gap-3\">\n              <Button asChild>\n                <Link to={`/dossiers/${dossier.type}s/${id}`}>\n                  {t('action.viewCorrectType', { type: t(`type.${dossier.type}`) })}\n                </Link>\n              </Button>\n              <Button asChild variant=\"outline\">\n                <Link to=\"/dossiers\">\n                  {t('action.backToHub')}\n                </Link>\n              </Button>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  // Success - Render Organization Dossier Page\n  return <OrganizationDossierPage dossier={dossier} />;\n}\n"],"names":["InstitutionalProfile","dossier","i18n","useTranslation","isRTL","extension","formatDate","dateString","date","getOrgTypeLabel","orgType","ProfileField","Icon","label","value","link","displayValue","jsxs","jsx","Hash","Building2","Calendar","Globe","Users","Network","OrganizationNode","memo","data","Badge","nodeTypes","OrgHierarchy","hierarchyOrgs","isLoading","useQuery","error","supabase","initialNodes","initialEdges","useMemo","orgMap","org","roots","buildTree","orgId","children","child","node","treeRoot","parentId","parent","root","hierarchy","treeData","tree","a","b","nodesData","x","y","Position","edgesData","nodes","setNodes","onNodesChange","useNodesState","edges","setEdges","onEdgesChange","useEdgesState","ReactFlow","Background","Controls","KeyContacts","contacts","contact","UserCircle","ActiveMoUs","mous","FileText","mou","OrganizationDossierDetail","sections","toggleSection","useCollapsibleSections","CollapsibleSection","OrganizationTimeline","OrganizationDossierPage","DossierDetailLayout","OrganizationDossierDetailRoute","id","Route","useParams","t","language","useTypedDossier","Loader2","AlertCircle","message","Button","Link","type","actualType","expectedType"],"mappings":"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"}