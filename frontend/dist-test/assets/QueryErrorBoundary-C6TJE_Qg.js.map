{"version":3,"file":"QueryErrorBoundary-C6TJE_Qg.js","sources":["../../src/components/QueryErrorBoundary.tsx"],"sourcesContent":["/**\n * QueryErrorBoundary Component\n *\n * Task: T095 [Polish]\n * Specialized error boundary for TanStack Query errors\n * Provides contextual error messages and retry functionality\n */\n\nimport { ReactNode } from 'react';\nimport { QueryErrorResetBoundary } from '@tanstack/react-query';\nimport { useTranslation } from 'react-i18next';\nimport { AlertTriangle, RefreshCw, Wifi, WifiOff } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport { Alert, AlertDescription, AlertTitle } from '@/components/ui/alert';\nimport ErrorBoundary from './ErrorBoundary';\n\ninterface QueryErrorBoundaryProps {\n children: ReactNode;\n fallbackMessage?: string;\n}\n\n/**\n * QueryErrorBoundary\n * Wraps components that use TanStack Query and provides specialized error handling\n */\nexport default function QueryErrorBoundary({ children, fallbackMessage }: QueryErrorBoundaryProps) {\n return (\n <QueryErrorResetBoundary>\n {({ reset }) => (\n <ErrorBoundary\n onError={(error) => {\n // Log query errors\n console.error('[QueryErrorBoundary] Query error:', error);\n }}\n fallback={<QueryErrorFallback onReset={reset} message={fallbackMessage} />}\n >\n {children}\n </ErrorBoundary>\n )}\n </QueryErrorResetBoundary>\n );\n}\n\n/**\n * QueryErrorFallback\n * Specialized fallback UI for query errors\n */\ninterface QueryErrorFallbackProps {\n onReset: () => void;\n message?: string;\n error?: Error;\n}\n\nfunction QueryErrorFallback({ onReset, message, error }: QueryErrorFallbackProps) {\n const { t, i18n } = useTranslation();\n const isRTL = i18n.language === 'ar';\n\n // Determine error type\n const isNetworkError = error?.message.includes('fetch') || error?.message.includes('network');\n const isAuthError = error?.message.includes('401') || error?.message.includes('unauthorized');\n const isServerError = error?.message.includes('500') || error?.message.includes('server');\n\n // Select appropriate icon\n const ErrorIcon = isNetworkError ? WifiOff : AlertTriangle;\n\n // Select appropriate title\n let title = t('error.query.generic', 'Failed to load data');\n if (isNetworkError) {\n title = t('error.query.network', 'Connection Error');\n } else if (isAuthError) {\n title = t('error.query.auth', 'Authentication Error');\n } else if (isServerError) {\n title = t('error.query.server', 'Server Error');\n }\n\n // Select appropriate description\n let description = message || t('error.query.genericDescription', 'Unable to load the requested data. Please try again.');\n if (isNetworkError) {\n description = t('error.query.networkDescription', 'Unable to connect to the server. Please check your internet connection.');\n } else if (isAuthError) {\n description = t('error.query.authDescription', 'Your session may have expired. Please sign in again.');\n } else if (isServerError) {\n description = t('error.query.serverDescription', 'The server encountered an error. Please try again later.');\n }\n\n return (\n <div\n className=\"flex min-h-[400px] items-center justify-center p-4 sm:p-6\"\n dir={isRTL ? 'rtl' : 'ltr'}\n >\n <div className=\"w-full max-w-lg\">\n <Alert variant=\"destructive\" className=\"mb-4\">\n <ErrorIcon className=\"size-5\" />\n <AlertTitle className=\"mb-2 text-start text-base sm:text-lg\">\n {title}\n </AlertTitle>\n <AlertDescription className=\"text-start text-sm sm:text-base\">\n {description}\n </AlertDescription>\n </Alert>\n\n {/* Actions */}\n <div className=\"flex flex-col gap-3 sm:flex-row sm:gap-4\">\n <Button\n onClick={onReset}\n className=\" w-full sm: sm:w-auto\"\n variant=\"default\"\n >\n <RefreshCw className={`size-4 ${isRTL ? 'ms-2' : 'me-2'}`} />\n {t('error.query.retry', 'Retry')}\n </Button>\n\n {isNetworkError && (\n <Button\n onClick={() => window.location.reload()}\n className=\" w-full sm: sm:w-auto\"\n variant=\"outline\"\n >\n <Wifi className={`size-4 ${isRTL ? 'ms-2' : 'me-2'}`} />\n {t('error.query.reload', 'Reload Page')}\n </Button>\n )}\n\n {isAuthError && (\n <Button\n onClick={() => window.location.href = '/login'}\n className=\" w-full sm: sm:w-auto\"\n variant=\"outline\"\n >\n {t('error.query.signIn', 'Sign In')}\n </Button>\n )}\n </div>\n </div>\n </div>\n );\n}\n"],"names":["QueryErrorBoundary","children","fallbackMessage","jsx","QueryErrorResetBoundary","reset","ErrorBoundary","error","QueryErrorFallback","onReset","message","t","i18n","useTranslation","isRTL","isNetworkError","isAuthError","isServerError","ErrorIcon","WifiOff","AlertTriangle","title","description","jsxs","Alert","AlertTitle","AlertDescription","Button","RefreshCw","Wifi"],"mappings":"uPAyBA,SAAwBA,EAAmB,CAAE,SAAAC,EAAU,gBAAAC,GAA4C,CAClG,OACAC,EAAAA,IAACC,EAAA,CACA,SAAA,CAAC,CAAE,MAAAC,KACJF,EAAAA,IAACG,EAAA,CACD,QAAUC,GAAU,CAEpB,QAAQ,MAAM,oCAAqCA,CAAK,CACxD,EACA,SAAUJ,EAAAA,IAACK,EAAA,CAAmB,QAASH,EAAO,QAASH,EAAiB,EAEvE,SAAAD,CAAA,CAAA,EAGD,CAED,CAYA,SAASO,EAAmB,CAAE,QAAAC,EAAS,QAAAC,EAAS,MAAAH,GAAkC,CACjF,KAAM,CAAE,EAAAI,EAAG,KAAAC,CAAA,EAASC,EAAA,EACdC,EAAQF,EAAK,WAAa,KAG1BG,EAAiBR,GAAO,QAAQ,SAAS,OAAO,GAAKA,GAAO,QAAQ,SAAS,SAAS,EACtFS,EAAcT,GAAO,QAAQ,SAAS,KAAK,GAAKA,GAAO,QAAQ,SAAS,cAAc,EACtFU,EAAgBV,GAAO,QAAQ,SAAS,KAAK,GAAKA,GAAO,QAAQ,SAAS,QAAQ,EAGlFW,EAAYH,EAAiBI,EAAUC,EAG7C,IAAIC,EAAQV,EAAE,sBAAuB,qBAAqB,EACtDI,EACJM,EAAQV,EAAE,sBAAuB,kBAAkB,EACxCK,EACXK,EAAQV,EAAE,mBAAoB,sBAAsB,EACzCM,IACXI,EAAQV,EAAE,qBAAsB,cAAc,GAI9C,IAAIW,EAAcZ,GAAWC,EAAE,iCAAkC,sDAAsD,EACvH,OAAII,EACJO,EAAcX,EAAE,iCAAkC,yEAAyE,EAChHK,EACXM,EAAcX,EAAE,8BAA+B,sDAAsD,EAC1FM,IACXK,EAAcX,EAAE,gCAAiC,0DAA0D,GAI3GR,EAAAA,IAAC,MAAA,CACD,UAAU,4DACV,IAAKW,EAAQ,MAAQ,MAErB,SAAAS,EAAAA,KAAC,MAAA,CAAI,UAAU,kBACf,SAAA,CAAAA,EAAAA,KAACC,EAAA,CAAM,QAAQ,cAAc,UAAU,OACvC,SAAA,CAAArB,EAAAA,IAACe,EAAA,CAAU,UAAU,QAAA,CAAS,EAC9Bf,EAAAA,IAACsB,EAAA,CAAW,UAAU,uCACrB,SAAAJ,EACD,EACAlB,EAAAA,IAACuB,EAAA,CAAiB,UAAU,kCAC3B,SAAAJ,CAAA,CACD,CAAA,EACA,EAGAC,EAAAA,KAAC,MAAA,CAAI,UAAU,2CACf,SAAA,CAAAA,EAAAA,KAACI,EAAA,CACD,QAASlB,EACT,UAAU,wBACV,QAAQ,UAER,SAAA,CAAAN,MAACyB,GAAU,UAAW,UAAUd,EAAQ,OAAS,MAAM,GAAI,EAC1DH,EAAE,oBAAqB,OAAO,CAAA,CAAA,CAAA,EAG9BI,GACDQ,EAAAA,KAACI,EAAA,CACD,QAAS,IAAM,OAAO,SAAS,OAAA,EAC/B,UAAU,wBACV,QAAQ,UAER,SAAA,CAAAxB,MAAC0B,GAAK,UAAW,UAAUf,EAAQ,OAAS,MAAM,GAAI,EACrDH,EAAE,qBAAsB,aAAa,CAAA,CAAA,CAAA,EAIrCK,GACDb,EAAAA,IAACwB,EAAA,CACD,QAAS,IAAM,OAAO,SAAS,KAAO,SACtC,UAAU,wBACV,QAAQ,UAEP,SAAAhB,EAAE,qBAAsB,SAAS,CAAA,CAAA,CAClC,CAAA,CAEA,CAAA,CAAA,CACA,CAAA,CAAA,CAGD"}