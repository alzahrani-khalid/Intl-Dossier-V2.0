{"version":3,"file":"index-Cq750ZR-.js","sources":["../../src/services/unified-work.service.ts","../../src/hooks/useUnifiedWork.ts","../../src/hooks/useUnifiedWorkRealtime.ts","../../src/pages/my-work/components/WorkSummaryHeader.tsx","../../src/pages/my-work/components/ProductivityMetrics.tsx","../../src/pages/my-work/components/WorkItemTabs.tsx","../../src/pages/my-work/components/WorkItemCard.tsx","../../src/pages/my-work/components/WorkItemList.tsx","../../src/pages/my-work/components/TeamWorkloadPanel.tsx","../../src/pages/my-work/components/WorkItemFiltersBar.tsx","../../src/pages/my-work/MyWorkDashboard.tsx","../../src/routes/_protected/my-work/index.tsx?tsr-split=component"],"sourcesContent":["// Feature 032: Unified Work Management Service\nimport { supabase } from '@/lib/supabase';\nimport type {\n  UnifiedWorkItem,\n  UserWorkSummary,\n  UserProductivityMetrics,\n  TeamMemberWorkload,\n  WorkItemFilters,\n  WorkItemCursor,\n  PaginatedWorkItems,\n  WorkItemSortBy,\n  SortOrder,\n} from '@/types/unified-work.types';\n\nconst EDGE_FUNCTION_URL = `${import.meta.env.VITE_SUPABASE_URL}/functions/v1/unified-work-list`;\n\n/**\n * Build query string from filters\n */\nfunction buildQueryString(params: Record<string, unknown>): string {\n  const searchParams = new URLSearchParams();\n\n  Object.entries(params).forEach(([key, value]) => {\n    if (value !== undefined && value !== null) {\n      if (Array.isArray(value)) {\n        searchParams.set(key, value.join(','));\n      } else {\n        searchParams.set(key, String(value));\n      }\n    }\n  });\n\n  return searchParams.toString();\n}\n\n/**\n * Get auth headers for Edge Function calls\n */\nasync function getAuthHeaders(): Promise<Headers> {\n  const { data: { session } } = await supabase.auth.getSession();\n  const headers = new Headers({\n    'Content-Type': 'application/json',\n    'apikey': import.meta.env.VITE_SUPABASE_ANON_KEY,\n  });\n\n  if (session?.access_token) {\n    headers.set('Authorization', `Bearer ${session.access_token}`);\n  }\n\n  return headers;\n}\n\n/**\n * Fetch paginated work items with filters\n */\nexport async function fetchWorkItems(\n  filters: WorkItemFilters = {},\n  cursor?: WorkItemCursor,\n  limit = 50,\n  sortBy: WorkItemSortBy = 'deadline',\n  sortOrder: SortOrder = 'asc'\n): Promise<PaginatedWorkItems> {\n  const queryParams = buildQueryString({\n    endpoint: 'list',\n    sources: filters.sources,\n    trackingTypes: filters.trackingTypes,\n    statuses: filters.statuses,\n    priorities: filters.priorities,\n    isOverdue: filters.isOverdue,\n    dossierId: filters.dossierId,\n    search: filters.searchQuery,\n    cursorDeadline: cursor?.deadline,\n    cursorId: cursor?.id,\n    limit,\n    sortBy,\n    sortOrder,\n  });\n\n  const headers = await getAuthHeaders();\n  const response = await fetch(`${EDGE_FUNCTION_URL}?${queryParams}`, {\n    method: 'GET',\n    headers,\n  });\n\n  if (!response.ok) {\n    const error = await response.json();\n    throw new Error(error.error || 'Failed to fetch work items');\n  }\n\n  return response.json();\n}\n\n/**\n * Fetch user work summary for dashboard header\n */\nexport async function fetchUserWorkSummary(): Promise<UserWorkSummary> {\n  const headers = await getAuthHeaders();\n  const response = await fetch(`${EDGE_FUNCTION_URL}?endpoint=summary`, {\n    method: 'GET',\n    headers,\n  });\n\n  if (!response.ok) {\n    const error = await response.json();\n    throw new Error(error.error || 'Failed to fetch work summary');\n  }\n\n  return response.json();\n}\n\n/**\n * Fetch user productivity metrics\n */\nexport async function fetchUserProductivityMetrics(): Promise<UserProductivityMetrics> {\n  const headers = await getAuthHeaders();\n  const response = await fetch(`${EDGE_FUNCTION_URL}?endpoint=metrics`, {\n    method: 'GET',\n    headers,\n  });\n\n  if (!response.ok) {\n    const error = await response.json();\n    throw new Error(error.error || 'Failed to fetch productivity metrics');\n  }\n\n  return response.json();\n}\n\n/**\n * Fetch team workload (managers only)\n */\nexport async function fetchTeamWorkload(): Promise<TeamMemberWorkload[]> {\n  const headers = await getAuthHeaders();\n  const response = await fetch(`${EDGE_FUNCTION_URL}?endpoint=team`, {\n    method: 'GET',\n    headers,\n  });\n\n  if (!response.ok) {\n    const error = await response.json();\n    throw new Error(error.error || 'Failed to fetch team workload');\n  }\n\n  const data = await response.json();\n  return data.team_members || [];\n}\n\n/**\n * Direct RPC call for work items (alternative to Edge Function)\n */\nexport async function fetchWorkItemsRPC(\n  filters: WorkItemFilters = {},\n  cursor?: WorkItemCursor,\n  limit = 50,\n  sortBy: WorkItemSortBy = 'deadline',\n  sortOrder: SortOrder = 'asc'\n): Promise<UnifiedWorkItem[]> {\n  const { data, error } = await supabase.rpc('get_unified_work_items', {\n    p_sources: filters.sources,\n    p_tracking_types: filters.trackingTypes,\n    p_statuses: filters.statuses,\n    p_priorities: filters.priorities,\n    p_is_overdue: filters.isOverdue,\n    p_dossier_id: filters.dossierId,\n    p_search_query: filters.searchQuery,\n    p_cursor_deadline: cursor?.deadline,\n    p_cursor_id: cursor?.id,\n    p_limit: limit,\n    p_sort_by: sortBy,\n    p_sort_order: sortOrder,\n  });\n\n  if (error) {\n    throw new Error(error.message);\n  }\n\n  return data || [];\n}\n\n/**\n * Direct RPC call for work summary\n */\nexport async function fetchUserWorkSummaryRPC(): Promise<UserWorkSummary | null> {\n  const { data, error } = await supabase.rpc('get_user_work_summary');\n\n  if (error) {\n    throw new Error(error.message);\n  }\n\n  return data?.[0] || null;\n}\n\n/**\n * Direct RPC call for productivity metrics\n */\nexport async function fetchUserProductivityMetricsRPC(): Promise<UserProductivityMetrics | null> {\n  const { data, error } = await supabase.rpc('get_user_productivity_metrics');\n\n  if (error) {\n    throw new Error(error.message);\n  }\n\n  return data?.[0] || null;\n}\n\n/**\n * Direct RPC call for team workload\n */\nexport async function fetchTeamWorkloadRPC(): Promise<TeamMemberWorkload[]> {\n  const { data, error } = await supabase.rpc('get_team_workload');\n\n  if (error) {\n    // Handle unauthorized access gracefully\n    if (error.message.includes('Unauthorized')) {\n      return [];\n    }\n    throw new Error(error.message);\n  }\n\n  return data || [];\n}\n","// Feature 032: Unified Work Management TanStack Query Hooks\nimport { useQuery, useInfiniteQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport type {\n  WorkItemFilters,\n  WorkItemCursor,\n  PaginatedWorkItems,\n  UserWorkSummary,\n  UserProductivityMetrics,\n  TeamMemberWorkload,\n  WorkItemSortBy,\n  SortOrder,\n  UnifiedWorkItem,\n} from '@/types/unified-work.types';\nimport {\n  fetchWorkItems,\n  fetchUserWorkSummary,\n  fetchUserProductivityMetrics,\n  fetchTeamWorkload,\n} from '@/services/unified-work.service';\n\n// Query keys factory\nexport const unifiedWorkKeys = {\n  all: ['unified-work'] as const,\n  items: () => [...unifiedWorkKeys.all, 'items'] as const,\n  itemsFiltered: (filters: WorkItemFilters, sortBy?: WorkItemSortBy, sortOrder?: SortOrder) =>\n    [...unifiedWorkKeys.items(), { filters, sortBy, sortOrder }] as const,\n  summary: () => [...unifiedWorkKeys.all, 'summary'] as const,\n  metrics: () => [...unifiedWorkKeys.all, 'metrics'] as const,\n  team: () => [...unifiedWorkKeys.all, 'team'] as const,\n};\n\n/**\n * Hook for infinite scrolling work items with filtering\n */\nexport function useUnifiedWorkItems(\n  filters: WorkItemFilters = {},\n  sortBy: WorkItemSortBy = 'deadline',\n  sortOrder: SortOrder = 'asc',\n  pageSize = 50,\n  enabled = true\n) {\n  return useInfiniteQuery({\n    queryKey: unifiedWorkKeys.itemsFiltered(filters, sortBy, sortOrder),\n    queryFn: async ({ pageParam }) => {\n      const cursor = pageParam as WorkItemCursor | undefined;\n      return fetchWorkItems(filters, cursor, pageSize, sortBy, sortOrder);\n    },\n    initialPageParam: undefined as WorkItemCursor | undefined,\n    getNextPageParam: (lastPage: PaginatedWorkItems) => {\n      return lastPage.hasMore ? lastPage.nextCursor : undefined;\n    },\n    enabled,\n    staleTime: 30 * 1000, // 30 seconds\n    gcTime: 5 * 60 * 1000, // 5 minutes (formerly cacheTime)\n  });\n}\n\n/**\n * Hook for user work summary (dashboard header stats)\n */\nexport function useUserWorkSummary(enabled = true) {\n  return useQuery<UserWorkSummary>({\n    queryKey: unifiedWorkKeys.summary(),\n    queryFn: fetchUserWorkSummary,\n    enabled,\n    staleTime: 30 * 1000, // 30 seconds\n    gcTime: 5 * 60 * 1000, // 5 minutes\n    refetchOnWindowFocus: true,\n  });\n}\n\n/**\n * Hook for user productivity metrics\n */\nexport function useUserProductivityMetrics(enabled = true) {\n  return useQuery<UserProductivityMetrics>({\n    queryKey: unifiedWorkKeys.metrics(),\n    queryFn: fetchUserProductivityMetrics,\n    enabled,\n    staleTime: 5 * 60 * 1000, // 5 minutes (metrics change less frequently)\n    gcTime: 30 * 60 * 1000, // 30 minutes\n  });\n}\n\n/**\n * Hook for team workload (managers only)\n */\nexport function useTeamWorkload(enabled = true) {\n  return useQuery<TeamMemberWorkload[]>({\n    queryKey: unifiedWorkKeys.team(),\n    queryFn: fetchTeamWorkload,\n    enabled,\n    staleTime: 60 * 1000, // 1 minute\n    gcTime: 10 * 60 * 1000, // 10 minutes\n    retry: (failureCount, error) => {\n      // Don't retry on authorization errors\n      if (error instanceof Error && error.message.includes('Forbidden')) {\n        return false;\n      }\n      return failureCount < 3;\n    },\n  });\n}\n\n/**\n * Hook to invalidate all unified work queries\n */\nexport function useInvalidateUnifiedWork() {\n  const queryClient = useQueryClient();\n\n  return {\n    invalidateAll: () => {\n      queryClient.invalidateQueries({ queryKey: unifiedWorkKeys.all });\n    },\n    invalidateItems: () => {\n      queryClient.invalidateQueries({ queryKey: unifiedWorkKeys.items() });\n    },\n    invalidateSummary: () => {\n      queryClient.invalidateQueries({ queryKey: unifiedWorkKeys.summary() });\n    },\n    invalidateMetrics: () => {\n      queryClient.invalidateQueries({ queryKey: unifiedWorkKeys.metrics() });\n    },\n    invalidateTeam: () => {\n      queryClient.invalidateQueries({ queryKey: unifiedWorkKeys.team() });\n    },\n  };\n}\n\n/**\n * Optimistic update helper for work item status changes\n */\nexport function useOptimisticWorkItemUpdate() {\n  const queryClient = useQueryClient();\n\n  return {\n    updateItem: (itemId: string, updates: Partial<UnifiedWorkItem>) => {\n      // Update all cached pages that might contain this item\n      queryClient.setQueriesData(\n        { queryKey: unifiedWorkKeys.items() },\n        (oldData: { pages: PaginatedWorkItems[] } | undefined) => {\n          if (!oldData) return oldData;\n\n          return {\n            ...oldData,\n            pages: oldData.pages.map((page) => ({\n              ...page,\n              items: page.items.map((item) =>\n                item.id === itemId ? { ...item, ...updates } : item\n              ),\n            })),\n          };\n        }\n      );\n    },\n    removeItem: (itemId: string) => {\n      queryClient.setQueriesData(\n        { queryKey: unifiedWorkKeys.items() },\n        (oldData: { pages: PaginatedWorkItems[] } | undefined) => {\n          if (!oldData) return oldData;\n\n          return {\n            ...oldData,\n            pages: oldData.pages.map((page) => ({\n              ...page,\n              items: page.items.filter((item) => item.id !== itemId),\n            })),\n          };\n        }\n      );\n    },\n  };\n}\n\n/**\n * Combined hook for My Work dashboard - fetches summary and items together\n */\nexport function useMyWorkDashboard(\n  filters: WorkItemFilters = {},\n  sortBy: WorkItemSortBy = 'deadline',\n  sortOrder: SortOrder = 'asc'\n) {\n  const summaryQuery = useUserWorkSummary();\n  const metricsQuery = useUserProductivityMetrics();\n  const itemsQuery = useUnifiedWorkItems(filters, sortBy, sortOrder);\n\n  return {\n    summary: summaryQuery,\n    metrics: metricsQuery,\n    items: itemsQuery,\n    isLoading: summaryQuery.isLoading || itemsQuery.isLoading,\n    isError: summaryQuery.isError || itemsQuery.isError,\n    error: summaryQuery.error || itemsQuery.error,\n  };\n}\n","// Feature 032: Unified Work Management Realtime Subscription Hook\nimport { useEffect, useRef, useCallback, useState } from 'react'\nimport { useQueryClient } from '@tanstack/react-query'\nimport { supabase } from '@/lib/supabase'\nimport { unifiedWorkKeys, useInvalidateUnifiedWork } from './useUnifiedWork'\nimport type { RealtimeChannel } from '@supabase/supabase-js'\n\n// Debounce time to prevent excessive invalidations (300ms as per spec)\nconst DEBOUNCE_MS = 300\n\ninterface UseUnifiedWorkRealtimeOptions {\n  /** User ID to filter events for */\n  userId?: string\n  /** Whether to enable the subscription */\n  enabled?: boolean\n  /** Custom debounce time in ms */\n  debounceMs?: number\n}\n\n/**\n * Hook to subscribe to realtime updates for work items\n * Listens to changes on aa_commitments, tasks, and intake_tickets tables\n * and invalidates relevant queries with debouncing\n */\nexport function useUnifiedWorkRealtime({\n  userId,\n  enabled = true,\n  debounceMs = DEBOUNCE_MS,\n}: UseUnifiedWorkRealtimeOptions = {}) {\n  const queryClient = useQueryClient()\n  const { invalidateAll, invalidateSummary } = useInvalidateUnifiedWork()\n  const channelRef = useRef<RealtimeChannel | null>(null)\n  const debounceTimerRef = useRef<NodeJS.Timeout | null>(null)\n  const pendingInvalidationsRef = useRef<Set<string>>(new Set())\n\n  // Debounced invalidation handler\n  const debouncedInvalidate = useCallback(() => {\n    if (debounceTimerRef.current) {\n      clearTimeout(debounceTimerRef.current)\n    }\n\n    debounceTimerRef.current = setTimeout(() => {\n      const pending = pendingInvalidationsRef.current\n\n      if (pending.has('all')) {\n        invalidateAll()\n      } else {\n        if (pending.has('summary')) {\n          invalidateSummary()\n        }\n        if (pending.has('items')) {\n          queryClient.invalidateQueries({ queryKey: unifiedWorkKeys.items() })\n        }\n      }\n\n      pendingInvalidationsRef.current.clear()\n    }, debounceMs)\n  }, [debounceMs, invalidateAll, invalidateSummary, queryClient])\n\n  // Queue an invalidation\n  const queueInvalidation = useCallback(\n    (type: 'all' | 'summary' | 'items') => {\n      pendingInvalidationsRef.current.add(type)\n      debouncedInvalidate()\n    },\n    [debouncedInvalidate],\n  )\n\n  useEffect(() => {\n    if (!enabled) {\n      return\n    }\n\n    // Create a unique channel name\n    const channelName = userId ? `unified-work:${userId}` : `unified-work:all`\n\n    // Subscribe to realtime changes\n    const channel = supabase\n      .channel(channelName)\n      // Listen to aa_commitments changes\n      .on(\n        'postgres_changes',\n        {\n          event: '*',\n          schema: 'public',\n          table: 'aa_commitments',\n          ...(userId && { filter: `owner_user_id=eq.${userId}` }),\n        },\n        (_payload) => {\n          queueInvalidation('all')\n        },\n      )\n      // Listen to tasks changes\n      .on(\n        'postgres_changes',\n        {\n          event: '*',\n          schema: 'public',\n          table: 'tasks',\n          ...(userId && { filter: `assignee_id=eq.${userId}` }),\n        },\n        (_payload) => {\n          queueInvalidation('all')\n        },\n      )\n      // Listen to intake_tickets changes\n      .on(\n        'postgres_changes',\n        {\n          event: '*',\n          schema: 'public',\n          table: 'intake_tickets',\n          ...(userId && { filter: `assigned_to=eq.${userId}` }),\n        },\n        (_payload) => {\n          queueInvalidation('all')\n        },\n      )\n      .subscribe((_status) => {\n        // Subscription status changed\n      })\n\n    channelRef.current = channel\n\n    // Cleanup\n    return () => {\n      if (debounceTimerRef.current) {\n        clearTimeout(debounceTimerRef.current)\n      }\n      if (channelRef.current) {\n        supabase.removeChannel(channelRef.current)\n        channelRef.current = null\n      }\n    }\n  }, [enabled, userId, queueInvalidation])\n\n  return {\n    /** Manually trigger an invalidation */\n    forceInvalidate: () => {\n      pendingInvalidationsRef.current.clear()\n      if (debounceTimerRef.current) {\n        clearTimeout(debounceTimerRef.current)\n      }\n      invalidateAll()\n    },\n  }\n}\n\n/**\n * Hook to get the current user ID for realtime filtering\n * Uses state instead of ref to trigger re-renders and ensure\n * the subscription is created with the correct userId filter\n */\nexport function useCurrentUserId() {\n  const [userId, setUserId] = useState<string | undefined>()\n\n  useEffect(() => {\n    // Get initial user\n    supabase.auth.getUser().then(({ data }) => {\n      setUserId(data.user?.id)\n    })\n\n    // Listen for auth state changes\n    const {\n      data: { subscription },\n    } = supabase.auth.onAuthStateChange((_, session) => {\n      setUserId(session?.user?.id)\n    })\n\n    return () => {\n      subscription.unsubscribe()\n    }\n  }, [])\n\n  return userId\n}\n","/**\n * Work Summary Header Component\n * Displays key stats: Total Active, Overdue, Due Today, Due This Week\n * Mobile-first, RTL-compatible\n */\nimport { useTranslation } from 'react-i18next';\nimport { AlertTriangle, Calendar, CalendarDays, ListTodo } from 'lucide-react';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { Skeleton } from '@/components/ui/skeleton';\nimport type { UserWorkSummary } from '@/types/unified-work.types';\nimport { cn } from '@/lib/utils';\n\ninterface WorkSummaryHeaderProps {\n  summary?: UserWorkSummary;\n  isLoading: boolean;\n  onFilterClick: (filter: string | undefined) => void;\n  currentFilter?: string;\n}\n\nexport function WorkSummaryHeader({\n  summary,\n  isLoading,\n  onFilterClick,\n  currentFilter,\n}: WorkSummaryHeaderProps) {\n  const { t, i18n } = useTranslation('my-work');\n  const isRTL = i18n.language === 'ar';\n\n  const stats = [\n    {\n      key: 'active',\n      label: t('stats.totalActive', 'Total Active'),\n      value: summary?.total_active || 0,\n      icon: ListTodo,\n      color: 'text-blue-600 bg-blue-100 dark:text-blue-400 dark:bg-blue-900/30',\n      filter: undefined, // No filter for \"all active\"\n    },\n    {\n      key: 'overdue',\n      label: t('stats.overdue', 'Overdue'),\n      value: summary?.overdue_count || 0,\n      icon: AlertTriangle,\n      color: 'text-red-600 bg-red-100 dark:text-red-400 dark:bg-red-900/30',\n      filter: 'overdue',\n    },\n    {\n      key: 'due-today',\n      label: t('stats.dueToday', 'Due Today'),\n      value: summary?.due_today || 0,\n      icon: Calendar,\n      color: 'text-orange-600 bg-orange-100 dark:text-orange-400 dark:bg-orange-900/30',\n      filter: 'due-today',\n    },\n    {\n      key: 'due-week',\n      label: t('stats.dueThisWeek', 'Due This Week'),\n      value: summary?.due_this_week || 0,\n      icon: CalendarDays,\n      color: 'text-green-600 bg-green-100 dark:text-green-400 dark:bg-green-900/30',\n      filter: 'due-week',\n    },\n  ];\n\n  if (isLoading) {\n    return (\n      <div className=\"grid grid-cols-2 sm:grid-cols-4 gap-3 sm:gap-4 mb-4 sm:mb-6\">\n        {[1, 2, 3, 4].map((i) => (\n          <Card key={i}>\n            <CardContent className=\"p-3 sm:p-4\">\n              <Skeleton className=\"h-4 w-20 mb-2\" />\n              <Skeleton className=\"h-8 w-12\" />\n            </CardContent>\n          </Card>\n        ))}\n      </div>\n    );\n  }\n\n  return (\n    <div\n      className=\"grid grid-cols-2 sm:grid-cols-4 gap-3 sm:gap-4 mb-4 sm:mb-6\"\n      dir={isRTL ? 'rtl' : 'ltr'}\n    >\n      {stats.map((stat) => {\n        const Icon = stat.icon;\n        const isActive = currentFilter === stat.filter || (stat.key === 'active' && !currentFilter);\n\n        return (\n          <Card\n            key={stat.key}\n            className={cn(\n              'cursor-pointer transition-all hover:shadow-md',\n              isActive && 'ring-2 ring-primary ring-offset-2'\n            )}\n            onClick={() => onFilterClick(stat.filter === currentFilter ? undefined : stat.filter)}\n          >\n            <CardContent className=\"p-3 sm:p-4\">\n              <div className=\"flex items-center gap-2 sm:gap-3\">\n                <div className={cn('p-2 rounded-lg', stat.color)}>\n                  <Icon className=\"h-4 w-4 sm:h-5 sm:w-5\" />\n                </div>\n                <div className=\"min-w-0 flex-1\">\n                  <p className=\"text-xs sm:text-sm text-muted-foreground truncate text-start\">\n                    {stat.label}\n                  </p>\n                  <p className=\"text-xl sm:text-2xl font-bold text-start\">\n                    {stat.value.toLocaleString(isRTL ? 'ar-SA' : 'en-US')}\n                  </p>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        );\n      })}\n    </div>\n  );\n}\n","/**\n * Productivity Metrics Component\n * Displays: Completed (30d), On-Time Rate, Avg Completion Time\n * Mobile-first, RTL-compatible\n */\nimport { useTranslation } from 'react-i18next';\nimport { CheckCircle2, Clock, TrendingUp, type LucideIcon } from 'lucide-react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Skeleton } from '@/components/ui/skeleton';\nimport { Progress } from '@/components/ui/progress';\nimport type { UserProductivityMetrics } from '@/types/unified-work.types';\nimport { cn } from '@/lib/utils';\n\ninterface ProductivityMetricsProps {\n  metrics?: UserProductivityMetrics;\n  isLoading: boolean;\n}\n\nexport function ProductivityMetrics({ metrics, isLoading }: ProductivityMetricsProps) {\n  const { t, i18n } = useTranslation('my-work');\n  const isRTL = i18n.language === 'ar';\n\n  if (isLoading) {\n    return (\n      <Card className=\"mb-4 sm:mb-6\">\n        <CardHeader className=\"pb-2\">\n          <Skeleton className=\"h-5 w-40\" />\n        </CardHeader>\n        <CardContent>\n          <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-4\">\n            {[1, 2, 3].map((i) => (\n              <div key={i} className=\"flex items-center gap-3\">\n                <Skeleton className=\"h-10 w-10 rounded-lg\" />\n                <div className=\"flex-1\">\n                  <Skeleton className=\"h-3 w-20 mb-1\" />\n                  <Skeleton className=\"h-6 w-16\" />\n                </div>\n              </div>\n            ))}\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  // Format completion time to hours/days\n  const formatCompletionTime = (hours: number): string => {\n    if (hours < 24) {\n      return `${Math.round(hours)}h`;\n    }\n    const days = Math.round(hours / 24);\n    return `${days}d`;\n  };\n\n  const metricItems: {\n    key: string;\n    label: string;\n    value: number;\n    icon: LucideIcon;\n    color: string;\n    format: (v: number) => string;\n    showProgress?: boolean;\n  }[] = [\n    {\n      key: 'completed',\n      label: t('metrics.completed30d', 'Completed (30d)'),\n      value: metrics?.completed_count_30d || 0,\n      icon: CheckCircle2,\n      color: 'text-green-600 bg-green-100 dark:text-green-400 dark:bg-green-900/30',\n      format: (v: number) => v.toLocaleString(isRTL ? 'ar-SA' : 'en-US'),\n    },\n    {\n      key: 'on-time',\n      label: t('metrics.onTimeRate', 'On-Time Rate'),\n      value: metrics?.on_time_rate_30d || 0,\n      icon: TrendingUp,\n      color: 'text-blue-600 bg-blue-100 dark:text-blue-400 dark:bg-blue-900/30',\n      format: (v: number) => `${v}%`,\n      showProgress: true,\n    },\n    {\n      key: 'avg-time',\n      label: t('metrics.avgCompletionTime', 'Avg Completion'),\n      value: metrics?.avg_completion_hours_30d || 0,\n      icon: Clock,\n      color: 'text-purple-600 bg-purple-100 dark:text-purple-400 dark:bg-purple-900/30',\n      format: formatCompletionTime,\n    },\n  ];\n\n  return (\n    <Card className=\"mb-4 sm:mb-6\" dir={isRTL ? 'rtl' : 'ltr'}>\n      <CardHeader className=\"pb-2 px-4 sm:px-6\">\n        <CardTitle className=\"text-base sm:text-lg text-start\">\n          {t('metrics.title', 'Your Productivity')}\n        </CardTitle>\n      </CardHeader>\n      <CardContent className=\"px-4 sm:px-6\">\n        <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-4\">\n          {metricItems.map((item) => {\n            const Icon = item.icon;\n\n            return (\n              <div key={item.key} className=\"flex items-center gap-3\">\n                <div className={cn('p-2.5 rounded-lg shrink-0', item.color)}>\n                  <Icon className=\"h-5 w-5\" />\n                </div>\n                <div className=\"min-w-0 flex-1\">\n                  <p className=\"text-xs text-muted-foreground text-start\">\n                    {item.label}\n                  </p>\n                  <div className=\"flex items-center gap-2\">\n                    <p className=\"text-lg sm:text-xl font-semibold text-start\">\n                      {item.format(item.value)}\n                    </p>\n                    {item.showProgress && (\n                      <Progress\n                        value={item.value}\n                        className=\"h-2 flex-1 max-w-20\"\n                      />\n                    )}\n                  </div>\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n","/**\n * Work Item Tabs Component\n * Tabs for: All, Commitments, Tasks, Intake\n * Mobile-first, RTL-compatible\n */\nimport { useTranslation } from 'react-i18next';\nimport { Tabs, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { Badge } from '@/components/ui/badge';\nimport { FileCheck, ListChecks, Inbox, LayoutList } from 'lucide-react';\nimport { cn } from '@/lib/utils';\n\ninterface WorkItemTabsProps {\n  activeTab: string;\n  onTabChange: (tab: string) => void;\n  counts: {\n    all: number;\n    commitments: number;\n    tasks: number;\n    intake: number;\n  };\n}\n\nexport function WorkItemTabs({ activeTab, onTabChange, counts }: WorkItemTabsProps) {\n  const { t, i18n } = useTranslation('my-work');\n  const isRTL = i18n.language === 'ar';\n\n  const tabs = [\n    {\n      id: 'all',\n      label: t('tabs.all', 'All'),\n      icon: LayoutList,\n      count: counts.all,\n    },\n    {\n      id: 'commitments',\n      label: t('tabs.commitments', 'Commitments'),\n      icon: FileCheck,\n      count: counts.commitments,\n    },\n    {\n      id: 'tasks',\n      label: t('tabs.tasks', 'Tasks'),\n      icon: ListChecks,\n      count: counts.tasks,\n    },\n    {\n      id: 'intake',\n      label: t('tabs.intake', 'Intake'),\n      icon: Inbox,\n      count: counts.intake,\n    },\n  ];\n\n  return (\n    <Tabs\n      value={activeTab}\n      onValueChange={onTabChange}\n      className=\"mb-4\"\n      dir={isRTL ? 'rtl' : 'ltr'}\n    >\n      <TabsList className=\"w-full h-auto flex-wrap justify-start gap-1 bg-muted/50 p-1\">\n        {tabs.map((tab) => {\n          const Icon = tab.icon;\n          const isActive = activeTab === tab.id;\n\n          return (\n            <TabsTrigger\n              key={tab.id}\n              value={tab.id}\n              className={cn(\n                'flex items-center gap-1.5 sm:gap-2 px-2.5 sm:px-4 py-2 min-h-10',\n                'data-[state=active]:bg-background data-[state=active]:shadow-sm'\n              )}\n            >\n              <Icon className=\"h-4 w-4 shrink-0\" />\n              <span className=\"text-sm font-medium\">{tab.label}</span>\n              {tab.count > 0 && (\n                <Badge\n                  variant={isActive ? 'default' : 'secondary'}\n                  className=\"ms-1 h-5 min-w-5 px-1.5 text-xs\"\n                >\n                  {tab.count > 99 ? '99+' : tab.count}\n                </Badge>\n              )}\n            </TabsTrigger>\n          );\n        })}\n      </TabsList>\n    </Tabs>\n  );\n}\n","/**\n * Work Item Card Component\n * Individual card for a work item\n * Mobile-first, RTL-compatible\n */\nimport { useTranslation } from 'react-i18next';\nimport { Link } from '@tanstack/react-router';\nimport {\n  FileCheck,\n  ListChecks,\n  Inbox,\n  AlertTriangle,\n  Calendar,\n  ChevronRight,\n  type LucideIcon,\n} from 'lucide-react';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport type { UnifiedWorkItem, WorkSource, TrackingType } from '@/types/unified-work.types';\nimport { cn } from '@/lib/utils';\nimport { formatDistanceToNow, format, isToday, isTomorrow, isPast } from 'date-fns';\nimport { ar, enUS } from 'date-fns/locale';\n\ninterface WorkItemCardProps {\n  item: UnifiedWorkItem;\n}\n\nexport function WorkItemCard({ item }: WorkItemCardProps) {\n  const { t, i18n } = useTranslation('my-work');\n  const isRTL = i18n.language === 'ar';\n  const locale = isRTL ? ar : enUS;\n\n  // Source icon and color\n  const sourceConfig: Record<WorkSource, { icon: LucideIcon; color: string; label: string }> = {\n    commitment: {\n      icon: FileCheck,\n      color: 'text-green-600 bg-green-100 dark:text-green-400 dark:bg-green-900/30',\n      label: t('source.commitment', 'Commitment'),\n    },\n    task: {\n      icon: ListChecks,\n      color: 'text-blue-600 bg-blue-100 dark:text-blue-400 dark:bg-blue-900/30',\n      label: t('source.task', 'Task'),\n    },\n    intake: {\n      icon: Inbox,\n      color: 'text-purple-600 bg-purple-100 dark:text-purple-400 dark:bg-purple-900/30',\n      label: t('source.intake', 'Intake'),\n    },\n  };\n\n  // Tracking type badge\n  const trackingTypeConfig: Record<TrackingType, { color: string; label: string }> = {\n    delivery: {\n      color: 'bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400',\n      label: t('trackingType.delivery', 'Delivery'),\n    },\n    follow_up: {\n      color: 'bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400',\n      label: t('trackingType.followUp', 'Follow-up'),\n    },\n    sla: {\n      color: 'bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-400',\n      label: t('trackingType.sla', 'SLA'),\n    },\n  };\n\n  // Priority badge\n  const priorityConfig: Record<string, { color: string; label: string }> = {\n    low: {\n      color: 'bg-slate-100 text-slate-700 dark:bg-slate-800 dark:text-slate-300',\n      label: t('priority.low', 'Low'),\n    },\n    medium: {\n      color: 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400',\n      label: t('priority.medium', 'Medium'),\n    },\n    high: {\n      color: 'bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-400',\n      label: t('priority.high', 'High'),\n    },\n    critical: {\n      color: 'bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400',\n      label: t('priority.critical', 'Critical'),\n    },\n    urgent: {\n      color: 'bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400',\n      label: t('priority.urgent', 'Urgent'),\n    },\n  };\n\n  // Format deadline\n  const formatDeadline = (deadline: string | null) => {\n    if (!deadline) return null;\n\n    const date = new Date(deadline);\n    const isPastDue = isPast(date);\n\n    if (isToday(date)) {\n      return { text: t('deadline.today', 'Today'), urgent: true };\n    }\n    if (isTomorrow(date)) {\n      return { text: t('deadline.tomorrow', 'Tomorrow'), urgent: true };\n    }\n    if (isPastDue) {\n      return {\n        text: formatDistanceToNow(date, { addSuffix: true, locale }),\n        urgent: true,\n      };\n    }\n\n    return {\n      text: format(date, 'MMM d', { locale }),\n      urgent: false,\n    };\n  };\n\n  const sourceInfo = sourceConfig[item.source];\n  const trackingInfo = trackingTypeConfig[item.tracking_type];\n  const priorityInfo = priorityConfig[item.priority] || priorityConfig.medium;\n  const deadlineInfo = formatDeadline(item.deadline);\n  const Icon = sourceInfo.icon;\n\n  // Build link URL based on source\n  const getItemLink = () => {\n    switch (item.source) {\n      case 'commitment':\n        return `/commitments?id=${item.id}`;\n      case 'task':\n        return `/tasks/${item.id}`;\n      case 'intake':\n        return `/intake/tickets/${item.id}`;\n      default:\n        return '#';\n    }\n  };\n\n  const itemLink = getItemLink();\n\n  return (\n    <Link\n      to={itemLink}\n      className=\"block\"\n    >\n      <Card\n        className={cn(\n          'transition-all hover:shadow-md hover:border-primary/20 cursor-pointer',\n          item.is_overdue && 'border-red-300 dark:border-red-800'\n        )}\n        dir={isRTL ? 'rtl' : 'ltr'}\n      >\n        <CardContent className=\"p-3 sm:p-4\">\n        <div className=\"flex items-start gap-3\">\n          {/* Source Icon */}\n          <div className={cn('p-2 rounded-lg shrink-0', sourceInfo.color)}>\n            <Icon className=\"h-5 w-5\" />\n          </div>\n\n          {/* Content */}\n          <div className=\"min-w-0 flex-1\">\n            {/* Title */}\n            <div className=\"flex items-start justify-between gap-2 mb-1\">\n              <span\n                className=\"font-medium text-sm sm:text-base hover:text-primary transition-colors line-clamp-2 text-start\"\n              >\n                {item.title}\n              </span>\n              <ChevronRight\n                className={cn(\n                  'h-4 w-4 text-muted-foreground shrink-0 mt-1',\n                  isRTL && 'rotate-180'\n                )}\n              />\n            </div>\n\n            {/* Description (truncated) */}\n            {item.description && (\n              <p className=\"text-xs sm:text-sm text-muted-foreground line-clamp-1 mb-2 text-start\">\n                {item.description}\n              </p>\n            )}\n\n            {/* Badges Row */}\n            <div className=\"flex flex-wrap items-center gap-1.5 sm:gap-2\">\n              {/* Source Badge */}\n              <Badge variant=\"outline\" className=\"text-xs px-1.5 py-0\">\n                {sourceInfo.label}\n              </Badge>\n\n              {/* Tracking Type Badge */}\n              <Badge className={cn('text-xs px-1.5 py-0', trackingInfo.color)} variant=\"secondary\">\n                {trackingInfo.label}\n              </Badge>\n\n              {/* Priority Badge */}\n              <Badge className={cn('text-xs px-1.5 py-0', priorityInfo.color)} variant=\"secondary\">\n                {priorityInfo.label}\n              </Badge>\n\n              {/* Overdue Indicator */}\n              {item.is_overdue && (\n                <Badge variant=\"destructive\" className=\"text-xs px-1.5 py-0 gap-1\">\n                  <AlertTriangle className=\"h-3 w-3\" />\n                  {t('status.overdue', 'Overdue')}\n                </Badge>\n              )}\n\n              {/* Deadline */}\n              {deadlineInfo && (\n                <Badge\n                  variant=\"outline\"\n                  className={cn(\n                    'text-xs px-1.5 py-0 gap-1',\n                    deadlineInfo.urgent && 'border-orange-300 text-orange-700 dark:border-orange-700 dark:text-orange-400'\n                  )}\n                >\n                  <Calendar className=\"h-3 w-3\" />\n                  {deadlineInfo.text}\n                </Badge>\n              )}\n\n              {/* Days until due (on larger screens) */}\n              {item.days_until_due !== null && !item.is_overdue && (\n                <span className=\"hidden sm:inline text-xs text-muted-foreground\">\n                  {item.days_until_due === 0\n                    ? t('deadline.dueToday', 'Due today')\n                    : item.days_until_due === 1\n                      ? t('deadline.dueTomorrow', 'Due tomorrow')\n                      : t('deadline.dueInDays', { count: item.days_until_due })}\n                </span>\n              )}\n            </div>\n          </div>\n        </div>\n      </CardContent>\n      </Card>\n    </Link>\n  );\n}\n","/**\n * Work Item List Component\n * Virtualized list with infinite scroll\n * Mobile-first, RTL-compatible\n */\nimport { useTranslation } from 'react-i18next';\nimport { useRef, useCallback, useEffect } from 'react';\nimport { useVirtualizer } from '@tanstack/react-virtual';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { Skeleton } from '@/components/ui/skeleton';\nimport { Button } from '@/components/ui/button';\nimport { Alert, AlertDescription } from '@/components/ui/alert';\nimport { AlertCircle, Loader2, RefreshCcw } from 'lucide-react';\nimport { WorkItemCard } from './WorkItemCard';\nimport type { UnifiedWorkItem } from '@/types/unified-work.types';\n\ninterface WorkItemListProps {\n  items: UnifiedWorkItem[];\n  isLoading: boolean;\n  isError: boolean;\n  error: Error | null;\n  hasMore?: boolean;\n  onLoadMore: () => void;\n  isFetchingMore: boolean;\n}\n\nexport function WorkItemList({\n  items,\n  isLoading,\n  isError,\n  error,\n  hasMore,\n  onLoadMore,\n  isFetchingMore,\n}: WorkItemListProps) {\n  const { t, i18n } = useTranslation('my-work');\n  const isRTL = i18n.language === 'ar';\n  const parentRef = useRef<HTMLDivElement>(null);\n\n  // Virtualizer for performance with 500+ items\n  const rowVirtualizer = useVirtualizer({\n    count: items.length + (hasMore ? 1 : 0), // +1 for loading indicator\n    getScrollElement: () => parentRef.current,\n    estimateSize: () => 120, // Estimated card height\n    overscan: 5, // Render 5 extra items outside viewport\n  });\n\n  // Infinite scroll trigger\n  const lastItemRef = useCallback(\n    (node: HTMLDivElement | null) => {\n      if (!node) return;\n      if (isLoading || isFetchingMore || !hasMore) return;\n\n      const observer = new IntersectionObserver(\n        (entries) => {\n          if (entries[0].isIntersecting) {\n            onLoadMore();\n          }\n        },\n        { rootMargin: '200px' }\n      );\n\n      observer.observe(node);\n      return () => observer.disconnect();\n    },\n    [isLoading, isFetchingMore, hasMore, onLoadMore]\n  );\n\n  // Loading state\n  if (isLoading && items.length === 0) {\n    return (\n      <div className=\"space-y-3\" dir={isRTL ? 'rtl' : 'ltr'}>\n        {[1, 2, 3, 4, 5].map((i) => (\n          <Card key={i}>\n            <CardContent className=\"p-4\">\n              <div className=\"flex items-start gap-3\">\n                <Skeleton className=\"h-10 w-10 rounded-lg shrink-0\" />\n                <div className=\"flex-1 space-y-2\">\n                  <Skeleton className=\"h-4 w-3/4\" />\n                  <Skeleton className=\"h-3 w-1/2\" />\n                  <div className=\"flex gap-2 pt-1\">\n                    <Skeleton className=\"h-5 w-16\" />\n                    <Skeleton className=\"h-5 w-20\" />\n                  </div>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        ))}\n      </div>\n    );\n  }\n\n  // Error state\n  if (isError) {\n    return (\n      <Alert variant=\"destructive\" dir={isRTL ? 'rtl' : 'ltr'}>\n        <AlertCircle className=\"h-4 w-4\" />\n        <AlertDescription className=\"flex items-center justify-between\">\n          <span>{error?.message || t('error.loading', 'Failed to load work items')}</span>\n          <Button variant=\"outline\" size=\"sm\" onClick={() => window.location.reload()}>\n            <RefreshCcw className=\"h-4 w-4 me-2\" />\n            {t('error.retry', 'Retry')}\n          </Button>\n        </AlertDescription>\n      </Alert>\n    );\n  }\n\n  // Empty state\n  if (items.length === 0) {\n    return (\n      <Card dir={isRTL ? 'rtl' : 'ltr'}>\n        <CardContent className=\"py-12 text-center\">\n          <div className=\"mx-auto w-12 h-12 rounded-full bg-muted flex items-center justify-center mb-4\">\n            <AlertCircle className=\"h-6 w-6 text-muted-foreground\" />\n          </div>\n          <h3 className=\"font-medium text-lg mb-1\">\n            {t('empty.title', 'No work items found')}\n          </h3>\n          <p className=\"text-muted-foreground text-sm\">\n            {t('empty.description', 'Try adjusting your filters or check back later')}\n          </p>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  // Virtualized list\n  return (\n    <div\n      ref={parentRef}\n      className=\"h-[calc(100vh-400px)] min-h-[400px] overflow-auto\"\n      dir={isRTL ? 'rtl' : 'ltr'}\n    >\n      <div\n        style={{\n          height: `${rowVirtualizer.getTotalSize()}px`,\n          width: '100%',\n          position: 'relative',\n        }}\n      >\n        {rowVirtualizer.getVirtualItems().map((virtualRow) => {\n          const isLoaderRow = virtualRow.index >= items.length;\n          const item = items[virtualRow.index];\n\n          return (\n            <div\n              key={virtualRow.key}\n              ref={virtualRow.index === items.length - 1 ? lastItemRef : undefined}\n              style={{\n                position: 'absolute',\n                top: 0,\n                [isRTL ? 'right' : 'left']: 0,\n                width: '100%',\n                transform: `translateY(${virtualRow.start}px)`,\n              }}\n              className=\"pb-3\"\n            >\n              {isLoaderRow ? (\n                <div className=\"flex justify-center py-4\">\n                  <Loader2 className=\"h-6 w-6 animate-spin text-muted-foreground\" />\n                </div>\n              ) : (\n                <WorkItemCard item={item} />\n              )}\n            </div>\n          );\n        })}\n      </div>\n\n      {/* Load more button (fallback for non-intersection observer) */}\n      {hasMore && !isFetchingMore && (\n        <div className=\"flex justify-center py-4\">\n          <Button variant=\"outline\" onClick={onLoadMore}>\n            {t('loadMore', 'Load More')}\n          </Button>\n        </div>\n      )}\n\n      {/* Loading more indicator */}\n      {isFetchingMore && (\n        <div className=\"flex justify-center py-4\">\n          <Loader2 className=\"h-6 w-6 animate-spin text-muted-foreground\" />\n        </div>\n      )}\n    </div>\n  );\n}\n","/**\n * Team Workload Panel Component\n * Shows team members' workload for managers\n * Mobile-first, RTL-compatible\n */\nimport { useTranslation } from 'react-i18next';\nimport { Users, AlertTriangle, TrendingUp } from 'lucide-react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Skeleton } from '@/components/ui/skeleton';\nimport { Badge } from '@/components/ui/badge';\nimport { Progress } from '@/components/ui/progress';\nimport { Avatar, AvatarFallback } from '@/components/ui/avatar';\nimport { ScrollArea, ScrollBar } from '@/components/ui/scroll-area';\nimport type { TeamMemberWorkload } from '@/types/unified-work.types';\nimport { cn } from '@/lib/utils';\n\ninterface TeamWorkloadPanelProps {\n  teamMembers: TeamMemberWorkload[];\n  isLoading: boolean;\n}\n\nexport function TeamWorkloadPanel({ teamMembers, isLoading }: TeamWorkloadPanelProps) {\n  const { t, i18n } = useTranslation('my-work');\n  const isRTL = i18n.language === 'ar';\n\n  if (isLoading) {\n    return (\n      <Card className=\"mb-4 sm:mb-6\">\n        <CardHeader className=\"pb-2\">\n          <Skeleton className=\"h-5 w-40\" />\n        </CardHeader>\n        <CardContent>\n          <div className=\"flex gap-4 overflow-hidden\">\n            {[1, 2, 3, 4].map((i) => (\n              <div key={i} className=\"w-48 shrink-0\">\n                <Skeleton className=\"h-24 w-full rounded-lg\" />\n              </div>\n            ))}\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  if (teamMembers.length === 0) {\n    return null;\n  }\n\n  // Get initials from email\n  const getInitials = (email: string) => {\n    const name = email.split('@')[0] || 'U';\n    const parts = name.split(/[._-]/);\n    if (parts.length >= 2 && parts[0] && parts[1]) {\n      return `${parts[0][0]}${parts[1][0]}`.toUpperCase();\n    }\n    return name.slice(0, 2).toUpperCase();\n  };\n\n  return (\n    <Card className=\"mb-4 sm:mb-6\" dir={isRTL ? 'rtl' : 'ltr'}>\n      <CardHeader className=\"pb-2 px-4 sm:px-6\">\n        <CardTitle className=\"text-base sm:text-lg flex items-center gap-2 text-start\">\n          <Users className=\"h-5 w-5\" />\n          {t('team.title', 'Team Workload')}\n          <Badge variant=\"secondary\" className=\"ms-2\">\n            {teamMembers.length} {t('team.members', 'members')}\n          </Badge>\n        </CardTitle>\n      </CardHeader>\n      <CardContent className=\"px-4 sm:px-6\">\n        <ScrollArea className=\"w-full\">\n          <div className=\"flex gap-3 pb-2\">\n            {teamMembers.map((member) => {\n              const hasOverdue = member.overdue_count > 0;\n              const workloadPct = Math.min((member.total_active / 20) * 100, 100); // Assume 20 is max capacity\n\n              return (\n                <Card\n                  key={member.user_id}\n                  className={cn(\n                    'w-48 shrink-0 transition-all hover:shadow-md',\n                    hasOverdue && 'border-red-200 dark:border-red-800'\n                  )}\n                >\n                  <CardContent className=\"p-3\">\n                    {/* Member Info */}\n                    <div className=\"flex items-center gap-2 mb-3\">\n                      <Avatar className=\"h-8 w-8\">\n                        <AvatarFallback className=\"text-xs\">\n                          {getInitials(member.user_email)}\n                        </AvatarFallback>\n                      </Avatar>\n                      <div className=\"min-w-0 flex-1\">\n                        <p className=\"text-sm font-medium truncate text-start\">\n                          {member.user_email.split('@')[0]}\n                        </p>\n                        {hasOverdue && (\n                          <div className=\"flex items-center gap-1 text-xs text-red-600 dark:text-red-400\">\n                            <AlertTriangle className=\"h-3 w-3\" />\n                            <span>{member.overdue_count} {t('team.overdue', 'overdue')}</span>\n                          </div>\n                        )}\n                      </div>\n                    </div>\n\n                    {/* Workload Stats */}\n                    <div className=\"space-y-2\">\n                      {/* Total Active */}\n                      <div className=\"flex items-center justify-between text-xs\">\n                        <span className=\"text-muted-foreground text-start\">\n                          {t('team.active', 'Active')}\n                        </span>\n                        <span className=\"font-medium\">{member.total_active}</span>\n                      </div>\n\n                      {/* Workload Bar */}\n                      <Progress\n                        value={workloadPct}\n                        className={cn(\n                          'h-1.5',\n                          workloadPct > 80 && 'bg-red-100 [&>div]:bg-red-500',\n                          workloadPct > 60 && workloadPct <= 80 && 'bg-orange-100 [&>div]:bg-orange-500'\n                        )}\n                      />\n\n                      {/* On-Time Rate */}\n                      <div className=\"flex items-center justify-between text-xs pt-1\">\n                        <span className=\"text-muted-foreground flex items-center gap-1 text-start\">\n                          <TrendingUp className=\"h-3 w-3\" />\n                          {t('team.onTime', 'On-time')}\n                        </span>\n                        <span\n                          className={cn(\n                            'font-medium',\n                            member.on_time_rate_30d >= 80\n                              ? 'text-green-600 dark:text-green-400'\n                              : member.on_time_rate_30d >= 60\n                                ? 'text-yellow-600 dark:text-yellow-400'\n                                : 'text-red-600 dark:text-red-400'\n                          )}\n                        >\n                          {member.on_time_rate_30d}%\n                        </span>\n                      </div>\n                    </div>\n                  </CardContent>\n                </Card>\n              );\n            })}\n          </div>\n          <ScrollBar orientation=\"horizontal\" />\n        </ScrollArea>\n      </CardContent>\n    </Card>\n  );\n}\n","/**\n * Work Item Filters Bar Component\n * Search, Tracking Type filter, Sort options\n * Mobile-first, RTL-compatible\n */\nimport { useTranslation } from 'react-i18next';\nimport { Search, SlidersHorizontal, ArrowUpDown, ChevronDown } from 'lucide-react';\nimport { Input } from '@/components/ui/input';\nimport { Button } from '@/components/ui/button';\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n  DropdownMenuSeparator,\n  DropdownMenuLabel,\n} from '@/components/ui/dropdown-menu';\nimport { Badge } from '@/components/ui/badge';\nimport type { TrackingType, WorkItemSortBy, SortOrder } from '@/types/unified-work.types';\nimport { cn } from '@/lib/utils';\nimport { useState, useCallback } from 'react';\nimport { useDebouncedCallback } from 'use-debounce';\n\ninterface WorkItemFiltersBarProps {\n  trackingType?: TrackingType;\n  onTrackingTypeChange: (type: TrackingType | undefined) => void;\n  searchQuery: string;\n  onSearchChange: (query: string) => void;\n  sortBy: WorkItemSortBy;\n  sortOrder: SortOrder;\n  onSortChange: (sortBy: WorkItemSortBy, sortOrder: SortOrder) => void;\n}\n\nexport function WorkItemFiltersBar({\n  trackingType,\n  onTrackingTypeChange,\n  searchQuery,\n  onSearchChange,\n  sortBy,\n  sortOrder,\n  onSortChange,\n}: WorkItemFiltersBarProps) {\n  const { t, i18n } = useTranslation('my-work');\n  const isRTL = i18n.language === 'ar';\n  const [localSearch, setLocalSearch] = useState(searchQuery);\n\n  // Debounce search to avoid excessive API calls\n  const debouncedSearch = useDebouncedCallback((value: string) => {\n    onSearchChange(value);\n  }, 300);\n\n  const handleSearchChange = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      const value = e.target.value;\n      setLocalSearch(value);\n      debouncedSearch(value);\n    },\n    [debouncedSearch]\n  );\n\n  const trackingTypes: { id: TrackingType; label: string; color: string }[] = [\n    {\n      id: 'delivery',\n      label: t('trackingType.delivery', 'Delivery'),\n      color: 'bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400',\n    },\n    {\n      id: 'follow_up',\n      label: t('trackingType.followUp', 'Follow-up'),\n      color: 'bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400',\n    },\n    {\n      id: 'sla',\n      label: t('trackingType.sla', 'SLA'),\n      color: 'bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-400',\n    },\n  ];\n\n  const sortOptions: { sortBy: WorkItemSortBy; sortOrder: SortOrder; label: string }[] = [\n    { sortBy: 'deadline', sortOrder: 'asc', label: t('sort.deadlineAsc', 'Deadline (Earliest)') },\n    { sortBy: 'deadline', sortOrder: 'desc', label: t('sort.deadlineDesc', 'Deadline (Latest)') },\n    { sortBy: 'priority', sortOrder: 'desc', label: t('sort.priorityDesc', 'Priority (High to Low)') },\n    { sortBy: 'priority', sortOrder: 'asc', label: t('sort.priorityAsc', 'Priority (Low to High)') },\n    { sortBy: 'created_at', sortOrder: 'desc', label: t('sort.createdDesc', 'Newest First') },\n    { sortBy: 'created_at', sortOrder: 'asc', label: t('sort.createdAsc', 'Oldest First') },\n  ];\n\n  const currentSort = sortOptions.find(\n    (opt) => opt.sortBy === sortBy && opt.sortOrder === sortOrder\n  );\n\n  return (\n    <div\n      className=\"flex flex-col sm:flex-row gap-3 mb-4\"\n      dir={isRTL ? 'rtl' : 'ltr'}\n    >\n      {/* Search Input */}\n      <div className=\"relative flex-1\">\n        <Search className={cn(\n          'absolute top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground',\n          isRTL ? 'end-3' : 'start-3'\n        )} />\n        <Input\n          placeholder={t('search.placeholder', 'Search work items...')}\n          value={localSearch}\n          onChange={handleSearchChange}\n          className={cn('h-10', isRTL ? 'pe-10 ps-3' : 'ps-10 pe-3')}\n        />\n      </div>\n\n      {/* Tracking Type Filter */}\n      <DropdownMenu>\n        <DropdownMenuTrigger asChild>\n          <Button variant=\"outline\" className=\"h-10 gap-2 whitespace-nowrap\">\n            <SlidersHorizontal className=\"h-4 w-4\" />\n            <span className=\"hidden sm:inline\">{t('filters.trackingType', 'Type')}</span>\n            {trackingType && (\n              <Badge variant=\"secondary\" className=\"ms-1\">\n                {trackingTypes.find((tt) => tt.id === trackingType)?.label}\n              </Badge>\n            )}\n            <ChevronDown className=\"h-4 w-4 ms-1\" />\n          </Button>\n        </DropdownMenuTrigger>\n        <DropdownMenuContent align={isRTL ? 'start' : 'end'} className=\"w-48\">\n          <DropdownMenuLabel>{t('filters.trackingType', 'Tracking Type')}</DropdownMenuLabel>\n          <DropdownMenuSeparator />\n          <DropdownMenuItem onClick={() => onTrackingTypeChange(undefined)}>\n            {t('filters.all', 'All Types')}\n          </DropdownMenuItem>\n          {trackingTypes.map((tt) => (\n            <DropdownMenuItem\n              key={tt.id}\n              onClick={() => onTrackingTypeChange(tt.id)}\n              className={cn(trackingType === tt.id && 'bg-accent')}\n            >\n              <Badge className={cn('me-2', tt.color)} variant=\"secondary\">\n                {tt.label}\n              </Badge>\n            </DropdownMenuItem>\n          ))}\n        </DropdownMenuContent>\n      </DropdownMenu>\n\n      {/* Sort Options */}\n      <DropdownMenu>\n        <DropdownMenuTrigger asChild>\n          <Button variant=\"outline\" className=\"h-10 gap-2 whitespace-nowrap\">\n            <ArrowUpDown className=\"h-4 w-4\" />\n            <span className=\"hidden sm:inline\">{t('sort.label', 'Sort')}</span>\n            <ChevronDown className=\"h-4 w-4 ms-1\" />\n          </Button>\n        </DropdownMenuTrigger>\n        <DropdownMenuContent align={isRTL ? 'start' : 'end'} className=\"w-56\">\n          <DropdownMenuLabel>{t('sort.label', 'Sort By')}</DropdownMenuLabel>\n          <DropdownMenuSeparator />\n          {sortOptions.map((opt, idx) => (\n            <DropdownMenuItem\n              key={idx}\n              onClick={() => onSortChange(opt.sortBy, opt.sortOrder)}\n              className={cn(\n                currentSort?.sortBy === opt.sortBy &&\n                  currentSort?.sortOrder === opt.sortOrder &&\n                  'bg-accent'\n              )}\n            >\n              {opt.label}\n            </DropdownMenuItem>\n          ))}\n        </DropdownMenuContent>\n      </DropdownMenu>\n    </div>\n  );\n}\n","/**\n * Feature 032: Unified Work Management Dashboard\n * Mobile-first, RTL-compatible design\n */\nimport { useTranslation } from 'react-i18next'\nimport { useSearch, useNavigate } from '@tanstack/react-router'\nimport { useCallback, useMemo } from 'react'\nimport { LayoutGrid } from 'lucide-react'\nimport { useMyWorkDashboard, useTeamWorkload } from '@/hooks/useUnifiedWork'\nimport { useUnifiedWorkRealtime, useCurrentUserId } from '@/hooks/useUnifiedWorkRealtime'\nimport type {\n  WorkItemFilters,\n  WorkSource,\n  TrackingType,\n  WorkItemSortBy,\n  SortOrder,\n} from '@/types/unified-work.types'\n\n// Components\nimport { Button } from '@/components/ui/button'\nimport { WorkSummaryHeader } from './components/WorkSummaryHeader'\nimport { ProductivityMetrics } from './components/ProductivityMetrics'\nimport { WorkItemTabs } from './components/WorkItemTabs'\nimport { WorkItemList } from './components/WorkItemList'\nimport { TeamWorkloadPanel } from './components/TeamWorkloadPanel'\nimport { WorkItemFiltersBar } from './components/WorkItemFiltersBar'\n\nexport default function MyWorkDashboard() {\n  const { t, i18n } = useTranslation('my-work')\n  const isRTL = i18n.language === 'ar'\n  const navigate = useNavigate()\n\n  // URL state\n  const searchParams = useSearch({ from: '/_protected/my-work/' })\n  const {\n    tab = 'all',\n    filter,\n    trackingType,\n    search,\n    sortBy = 'deadline',\n    sortOrder = 'asc',\n  } = searchParams\n\n  // Build filters from URL state\n  const filters = useMemo<WorkItemFilters>(() => {\n    const result: WorkItemFilters = {}\n\n    // Source filter based on tab\n    if (tab !== 'all') {\n      const sourceMap: Record<string, WorkSource> = {\n        commitments: 'commitment',\n        tasks: 'task',\n        intake: 'intake',\n      }\n      result.sources = [sourceMap[tab]]\n    }\n\n    // Tracking type filter\n    if (trackingType) {\n      result.trackingTypes = [trackingType as TrackingType]\n    }\n\n    // Quick filter presets\n    if (filter === 'overdue') {\n      result.isOverdue = true\n    } else if (filter === 'due-today' || filter === 'due-week') {\n      // These are handled in the query\n    }\n\n    // Search query\n    if (search) {\n      result.searchQuery = search\n    }\n\n    return result\n  }, [tab, trackingType, filter, search])\n\n  // Fetch data\n  const { summary, metrics, items } = useMyWorkDashboard(\n    filters,\n    sortBy as WorkItemSortBy,\n    sortOrder as SortOrder,\n  )\n\n  // Team workload for managers\n  const teamWorkload = useTeamWorkload()\n\n  // Get current user ID for realtime filtering\n  const userId = useCurrentUserId()\n\n  // Real-time subscription - only enable when userId is available to prevent\n  // subscribing without filter (which would cause cache thrashing for all users)\n  useUnifiedWorkRealtime({ userId, enabled: !!userId })\n\n  // URL state update handlers\n  const updateSearch = useCallback(\n    (updates: Partial<typeof searchParams>) => {\n      navigate({\n        search: (prev) => ({ ...prev, ...updates }),\n        replace: true,\n      })\n    },\n    [navigate],\n  )\n\n  const handleTabChange = useCallback(\n    (newTab: string) => {\n      updateSearch({ tab: newTab as typeof tab })\n    },\n    [updateSearch],\n  )\n\n  const handleFilterChange = useCallback(\n    (newFilter: string | undefined) => {\n      updateSearch({ filter: newFilter as typeof filter })\n    },\n    [updateSearch],\n  )\n\n  const handleTrackingTypeChange = useCallback(\n    (newType: TrackingType | undefined) => {\n      updateSearch({ trackingType: newType })\n    },\n    [updateSearch],\n  )\n\n  const handleSearchChange = useCallback(\n    (newSearch: string) => {\n      updateSearch({ search: newSearch || undefined })\n    },\n    [updateSearch],\n  )\n\n  const handleSortChange = useCallback(\n    (newSortBy: WorkItemSortBy, newSortOrder: SortOrder) => {\n      updateSearch({ sortBy: newSortBy, sortOrder: newSortOrder })\n    },\n    [updateSearch],\n  )\n\n  // Flatten paginated items\n  const workItems = useMemo(() => {\n    return items.data?.pages.flatMap((page) => page.items) || []\n  }, [items.data])\n\n  return (\n    <div\n      className=\"container mx-auto px-4 sm:px-6 lg:px-8 py-4 sm:py-6\"\n      dir={isRTL ? 'rtl' : 'ltr'}\n    >\n      {/* Page Header */}\n      <div className=\"mb-4 sm:mb-6 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3\">\n        <div>\n          <h1 className=\"text-2xl sm:text-3xl font-bold text-start\">{t('title', 'My Work')}</h1>\n          <p className=\"text-muted-foreground text-sm sm:text-base mt-1 text-start\">\n            {t('subtitle', 'Track your commitments, tasks, and intake tickets in one place')}\n          </p>\n        </div>\n        <Button\n          variant=\"outline\"\n          size=\"sm\"\n          onClick={() => navigate({ to: '/my-work/board' })}\n          className=\"flex items-center gap-2 self-start sm:self-auto\"\n        >\n          <LayoutGrid className=\"h-4 w-4\" />\n          <span>{t('viewBoard', 'Board View')}</span>\n        </Button>\n      </div>\n\n      {/* Summary Header with Stats */}\n      <WorkSummaryHeader\n        summary={summary.data}\n        isLoading={summary.isLoading}\n        onFilterClick={handleFilterChange}\n        currentFilter={filter}\n      />\n\n      {/* Productivity Metrics */}\n      <ProductivityMetrics metrics={metrics.data} isLoading={metrics.isLoading} />\n\n      {/* Team Workload Panel (managers only) */}\n      {teamWorkload.data && teamWorkload.data.length > 0 && (\n        <TeamWorkloadPanel teamMembers={teamWorkload.data} isLoading={teamWorkload.isLoading} />\n      )}\n\n      {/* Tabs for Source Filter */}\n      <WorkItemTabs\n        activeTab={tab}\n        onTabChange={handleTabChange}\n        counts={{\n          all: summary.data?.total_active || 0,\n          commitments: summary.data?.commitment_count || 0,\n          tasks: summary.data?.task_count || 0,\n          intake: summary.data?.intake_count || 0,\n        }}\n      />\n\n      {/* Filter Bar */}\n      <WorkItemFiltersBar\n        trackingType={trackingType}\n        onTrackingTypeChange={handleTrackingTypeChange}\n        searchQuery={search || ''}\n        onSearchChange={handleSearchChange}\n        sortBy={sortBy}\n        sortOrder={sortOrder}\n        onSortChange={handleSortChange}\n      />\n\n      {/* Work Items List */}\n      <WorkItemList\n        items={workItems}\n        isLoading={items.isLoading}\n        isError={items.isError}\n        error={items.error}\n        hasMore={items.hasNextPage}\n        onLoadMore={() => items.fetchNextPage()}\n        isFetchingMore={items.isFetchingNextPage}\n      />\n    </div>\n  )\n}\n","/**\n * Feature 032: Unified Work Management - My Work Dashboard\n *\n * This is the unified \"My Work\" dashboard that combines:\n * - Commitments (from aa_commitments)\n * - Tasks (from tasks table)\n * - Intake Tickets (from intake_tickets table)\n *\n * Features:\n * - Summary stats header (total active, overdue, due today/week)\n * - Productivity metrics (completion rate, avg completion time)\n * - Tabbed view by source (All, Commitments, Tasks, Intake)\n * - Filter by tracking type (Delivery, Follow-up, SLA)\n * - Cursor-based pagination with infinite scroll\n * - URL state sync for filters\n * - Real-time updates with debouncing\n * - Mobile-first, RTL-compatible design\n */\n\nimport { createFileRoute } from '@tanstack/react-router';\nimport { z } from 'zod';\nimport MyWorkDashboard from '@/pages/my-work/MyWorkDashboard';\n\n// URL search params schema for type-safe routing\nconst myWorkSearchSchema = z.object({\n  tab: z.enum(['all', 'commitments', 'tasks', 'intake']).optional().default('all'),\n  filter: z.enum(['active', 'overdue', 'due-today', 'due-week']).optional(),\n  trackingType: z.enum(['delivery', 'follow_up', 'sla']).optional(),\n  search: z.string().optional(),\n  sortBy: z.enum(['deadline', 'created_at', 'priority']).optional().default('deadline'),\n  sortOrder: z.enum(['asc', 'desc']).optional().default('asc'),\n});\n\nexport type MyWorkSearchParams = z.infer<typeof myWorkSearchSchema>;\n\nexport const Route = createFileRoute('/_protected/my-work/')({\n  component: MyWorkDashboard,\n  validateSearch: (search) => myWorkSearchSchema.parse(search),\n});\n"],"names":["EDGE_FUNCTION_URL","buildQueryString","params","searchParams","key","value","getAuthHeaders","session","supabase","headers","fetchWorkItems","filters","cursor","limit","sortBy","sortOrder","queryParams","response","error","fetchUserWorkSummary","fetchUserProductivityMetrics","fetchTeamWorkload","unifiedWorkKeys","useUnifiedWorkItems","pageSize","enabled","useInfiniteQuery","pageParam","lastPage","useUserWorkSummary","useQuery","useUserProductivityMetrics","useTeamWorkload","failureCount","useInvalidateUnifiedWork","queryClient","useQueryClient","useMyWorkDashboard","summaryQuery","metricsQuery","itemsQuery","DEBOUNCE_MS","useUnifiedWorkRealtime","userId","debounceMs","invalidateAll","invalidateSummary","channelRef","useRef","debounceTimerRef","pendingInvalidationsRef","debouncedInvalidate","useCallback","pending","queueInvalidation","type","useEffect","channelName","channel","_payload","_status","useCurrentUserId","setUserId","useState","data","subscription","_","WorkSummaryHeader","summary","isLoading","onFilterClick","currentFilter","t","i18n","useTranslation","isRTL","stats","ListTodo","AlertTriangle","Calendar","CalendarDays","jsx","Card","jsxs","CardContent","Skeleton","stat","Icon","isActive","cn","ProductivityMetrics","metrics","CardHeader","i","formatCompletionTime","hours","metricItems","CheckCircle2","v","TrendingUp","Clock","CardTitle","item","Progress","WorkItemTabs","activeTab","onTabChange","counts","tabs","LayoutList","FileCheck","ListChecks","Inbox","Tabs","TabsList","tab","TabsTrigger","Badge","WorkItemCard","locale","ar","enUS","sourceConfig","trackingTypeConfig","priorityConfig","formatDeadline","deadline","date","isPastDue","isPast","isToday","isTomorrow","formatDistanceToNow","format","sourceInfo","trackingInfo","priorityInfo","deadlineInfo","itemLink","Link","ChevronRight","WorkItemList","items","isError","hasMore","onLoadMore","isFetchingMore","parentRef","rowVirtualizer","useVirtualizer","lastItemRef","node","observer","entries","Alert","AlertCircle","AlertDescription","Button","RefreshCcw","virtualRow","isLoaderRow","Loader2","TeamWorkloadPanel","teamMembers","getInitials","email","name","parts","Users","ScrollArea","member","hasOverdue","workloadPct","Avatar","AvatarFallback","ScrollBar","WorkItemFiltersBar","trackingType","onTrackingTypeChange","searchQuery","onSearchChange","onSortChange","localSearch","setLocalSearch","debouncedSearch","useDebouncedCallback","handleSearchChange","e","trackingTypes","sortOptions","currentSort","opt","Search","Input","DropdownMenu","DropdownMenuTrigger","SlidersHorizontal","tt","ChevronDown","DropdownMenuContent","DropdownMenuLabel","DropdownMenuSeparator","DropdownMenuItem","ArrowUpDown","idx","MyWorkDashboard","navigate","useNavigate","useSearch","filter","search","useMemo","result","sourceMap","teamWorkload","updateSearch","updates","prev","handleTabChange","newTab","handleFilterChange","newFilter","handleTrackingTypeChange","newType","newSearch","handleSortChange","newSortBy","newSortOrder","workItems","page","LayoutGrid","z","optional","default","string","SplitComponent"],"mappings":"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"}