{"version":3,"file":"useUnifiedTimeline-2-SmgReu.js","sources":["../../src/components/timeline/EnhancedVerticalTimelineCard.tsx","../../src/components/timeline/EnhancedVerticalTimeline.tsx","../../src/components/timeline/TimelineFilters.tsx","../../src/hooks/useUnifiedTimeline.ts"],"sourcesContent":["/**\n * EnhancedVerticalTimelineCard Component\n *\n * Timeline card using react-vertical-timeline-component with:\n * - Expandable modal overlay (Aceternity UI inspired)\n * - Mobile-first responsive design\n * - RTL support with logical properties\n * - Dark/light mode theming\n * - Touch-friendly interactions (44x44px minimum)\n */\n\nimport { useEffect, useId, useRef, useState } from 'react';\nimport { AnimatePresence, motion } from 'framer-motion';\nimport { useTranslation } from 'react-i18next';\nimport { useNavigate } from '@tanstack/react-router';\nimport { VerticalTimelineElement } from 'react-vertical-timeline-component';\nimport {\n  Calendar,\n  Users,\n  FileText,\n  Briefcase,\n  Target,\n  TrendingUp,\n  AlertCircle,\n  CheckCircle2,\n  Clock,\n  MapPin,\n  ExternalLink,\n  Download,\n  X,\n} from 'lucide-react';\nimport { Badge } from '@/components/ui/badge';\nimport { Button } from '@/components/ui/button';\nimport { Avatar, AvatarFallback, AvatarImage } from '@/components/ui/avatar';\nimport { useOutsideClick } from '@/hooks/use-outside-click';\nimport { cn } from '@/lib/utils';\nimport type { UnifiedTimelineEvent } from '@/types/timeline.types';\n\ninterface EnhancedVerticalTimelineCardProps {\n  event: UnifiedTimelineEvent;\n  index: number;\n}\n\n/**\n * Get icon component based on event type\n */\nconst getEventIcon = (eventType: string): React.ElementType => {\n  const iconMap: Record<string, React.ElementType> = {\n    calendar: Calendar,\n    interaction: Users,\n    intelligence: TrendingUp,\n    document: FileText,\n    mou: Briefcase,\n    position: Target,\n    relationship: Users,\n    commitment: CheckCircle2,\n    decision: AlertCircle,\n  };\n  return iconMap[eventType] || Calendar;\n};\n\n/**\n * Get event type color class\n */\nconst getEventColor = (eventType: string): string => {\n  const colorMap: Record<string, string> = {\n    calendar: 'timeline-icon-calendar',\n    interaction: 'timeline-icon-interaction',\n    intelligence: 'timeline-icon-intelligence',\n    document: 'timeline-icon-document',\n    mou: 'timeline-icon-mou',\n    position: 'timeline-icon-position',\n    relationship: 'timeline-icon-relationship',\n    commitment: 'timeline-icon-commitment',\n    decision: 'timeline-icon-decision',\n  };\n  return colorMap[eventType] || 'timeline-icon-calendar';\n};\n\n/**\n * Get priority color classes\n */\nconst getPriorityColor = (priority: string): string => {\n  const colorMap: Record<string, string> = {\n    high: 'bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300',\n    medium: 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300',\n    low: 'bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300',\n  };\n  return colorMap[priority] || colorMap.low;\n};\n\n/**\n * Get status color classes\n */\nconst getStatusColor = (status: string): string => {\n  const colorMap: Record<string, string> = {\n    planned: 'bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-300',\n    ongoing: 'bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300',\n    completed: 'bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300',\n    cancelled: 'bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300',\n    postponed: 'bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300',\n  };\n  return colorMap[status] || colorMap.planned;\n};\n\n/**\n * Format date for display\n */\nconst formatEventDate = (dateString: string, locale: string): string => {\n  const date = new Date(dateString);\n  return new Intl.DateTimeFormat(locale === 'ar' ? 'ar-SA' : 'en-US', {\n    year: 'numeric',\n    month: 'short',\n    day: 'numeric',\n  }).format(date);\n};\n\n/**\n * Format time for display\n */\nconst formatEventTime = (dateString: string, locale: string): string => {\n  const date = new Date(dateString);\n  return new Intl.DateTimeFormat(locale === 'ar' ? 'ar-SA' : 'en-US', {\n    hour: '2-digit',\n    minute: '2-digit',\n  }).format(date);\n};\n\n/**\n * Close icon component\n */\nfunction CloseIcon() {\n  return (\n    <motion.svg\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      exit={{ opacity: 0, transition: { duration: 0.05 } }}\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"24\"\n      height=\"24\"\n      viewBox=\"0 0 24 24\"\n      fill=\"none\"\n      stroke=\"currentColor\"\n      strokeWidth=\"2\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      className=\"h-4 w-4 text-black dark:text-white\"\n    >\n      <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n      <path d=\"M18 6l-12 12\" />\n      <path d=\"M6 6l12 12\" />\n    </motion.svg>\n  );\n}\n\nexport function EnhancedVerticalTimelineCard({\n  event,\n  index,\n}: EnhancedVerticalTimelineCardProps) {\n  const { t, i18n } = useTranslation('dossier');\n  const navigate = useNavigate();\n  const isRTL = i18n.language === 'ar';\n  const [isActive, setIsActive] = useState(false);\n  const id = useId();\n  const ref = useRef<HTMLDivElement>(null);\n\n  const EventIcon = getEventIcon(event.event_type);\n  const eventColorClass = getEventColor(event.event_type);\n  const title = isRTL ? event.title_ar : event.title_en;\n  const description = isRTL ? event.description_ar : event.description_en;\n  const formattedDate = formatEventDate(event.event_date, i18n.language);\n  const formattedTime = formatEventTime(event.event_date, i18n.language);\n\n  // Handle escape key and body overflow\n  useEffect(() => {\n    function onKeyDown(e: KeyboardEvent) {\n      if (e.key === 'Escape') {\n        setIsActive(false);\n      }\n    }\n\n    if (isActive) {\n      document.body.style.overflow = 'hidden';\n    } else {\n      document.body.style.overflow = 'auto';\n    }\n\n    window.addEventListener('keydown', onKeyDown);\n    return () => window.removeEventListener('keydown', onKeyDown);\n  }, [isActive]);\n\n  useOutsideClick(ref, () => setIsActive(false));\n\n  const handleNavigate = () => {\n    if (event.metadata.navigation_url) {\n      setIsActive(false);\n      navigate({ to: event.metadata.navigation_url });\n    }\n  };\n\n  const handleCardClick = () => {\n    setIsActive(true);\n  };\n\n  return (\n    <>\n      {/* Modal Overlay */}\n      <AnimatePresence>\n        {isActive && (\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n            className=\"fixed inset-0 bg-black/20 dark:bg-black/40 backdrop-blur-sm h-full w-full z-[100]\"\n          />\n        )}\n      </AnimatePresence>\n\n      {/* Modal Content */}\n      <AnimatePresence>\n        {isActive && (\n          <div className=\"fixed inset-0 grid place-items-center z-[101] p-4\" dir={isRTL ? 'rtl' : 'ltr'}>\n            {/* Close Button */}\n            <motion.button\n              key={`button-${event.id}-${id}`}\n              layout\n              initial={{ opacity: 0 }}\n              animate={{ opacity: 1 }}\n              exit={{ opacity: 0, transition: { duration: 0.05 } }}\n              className=\"flex absolute top-4 end-4 items-center justify-center bg-white dark:bg-neutral-900 rounded-full h-10 w-10 shadow-lg z-[102] hover:bg-gray-100 dark:hover:bg-neutral-800 transition-colors\"\n              onClick={() => setIsActive(false)}\n              aria-label={t('common.close')}\n            >\n              <CloseIcon />\n            </motion.button>\n\n            {/* Modal Card */}\n            <motion.div\n              layoutId={`card-${event.id}-${id}`}\n              ref={ref}\n              className=\"w-full max-w-3xl h-full md:h-fit md:max-h-[90%] flex flex-col bg-white dark:bg-neutral-900 sm:rounded-3xl overflow-hidden shadow-2xl\"\n            >\n              {/* Event Icon Header */}\n              <div className={cn(\n                \"w-full h-32 sm:h-40 flex items-center justify-center\",\n                eventColorClass,\n                \"sm:rounded-t-3xl relative overflow-hidden\"\n              )}>\n                <div className=\"absolute inset-0 bg-gradient-to-br from-white/10 to-transparent\" />\n                <EventIcon className=\"h-16 w-16 sm:h-20 sm:w-20 text-white relative z-10\" />\n              </div>\n\n              {/* Content */}\n              <div className=\"flex-1 overflow-auto\">\n                {/* Title & Metadata */}\n                <div className=\"p-4 sm:p-6 border-b border-border\">\n                  <motion.h3\n                    layoutId={`title-${event.id}-${id}`}\n                    className=\"font-bold text-neutral-700 dark:text-neutral-200 text-xl sm:text-2xl mb-3 text-start\"\n                  >\n                    {title}\n                  </motion.h3>\n\n                  <div className=\"flex flex-wrap items-center gap-3 text-sm text-muted-foreground mb-4\">\n                    <div className=\"flex items-center gap-2\">\n                      <Calendar className=\"h-4 w-4\" />\n                      <span className=\"font-medium\">{formattedDate}</span>\n                    </div>\n                    <div className=\"flex items-center gap-2\">\n                      <Clock className=\"h-4 w-4\" />\n                      <span>{formattedTime}</span>\n                    </div>\n                  </div>\n\n                  {/* Badges */}\n                  <div className=\"flex flex-wrap gap-2\">\n                    <Badge variant=\"outline\" className={cn(getPriorityColor(event.priority), \"text-xs\")}>\n                      {t(`timeline.priority.${event.priority}`)}\n                    </Badge>\n                    {event.status && (\n                      <Badge variant=\"outline\" className={cn(getStatusColor(event.status), \"text-xs\")}>\n                        {t(`timeline.status.${event.status}`)}\n                      </Badge>\n                    )}\n                    {event.metadata.badge_text_en && (\n                      <Badge variant=\"secondary\" className=\"text-xs\">\n                        {isRTL ? event.metadata.badge_text_ar : event.metadata.badge_text_en}\n                      </Badge>\n                    )}\n                  </div>\n                </div>\n\n                {/* Description & Details */}\n                <div className=\"p-4 sm:p-6 space-y-6\">\n                  {/* Description */}\n                  {description && (\n                    <motion.div\n                      layout\n                      initial={{ opacity: 0 }}\n                      animate={{ opacity: 1 }}\n                      exit={{ opacity: 0 }}\n                      className=\"text-neutral-600 dark:text-neutral-400 text-sm sm:text-base text-start whitespace-pre-wrap leading-relaxed\"\n                    >\n                      {description}\n                    </motion.div>\n                  )}\n\n                  {/* Location */}\n                  {(event.metadata.location_en || event.metadata.location_ar) && (\n                    <div className=\"flex items-start gap-3 p-4 rounded-lg bg-muted\">\n                      <MapPin className={cn('h-5 w-5 mt-0.5 text-primary', isRTL && 'rotate-180')} />\n                      <div className=\"flex-1 text-start\">\n                        <p className=\"font-semibold text-sm mb-1\">{t('timeline.location')}</p>\n                        <p className=\"text-sm text-muted-foreground\">\n                          {isRTL ? event.metadata.location_ar : event.metadata.location_en}\n                        </p>\n                        {event.metadata.is_virtual && event.metadata.virtual_link && (\n                          <a\n                            href={event.metadata.virtual_link}\n                            target=\"_blank\"\n                            rel=\"noopener noreferrer\"\n                            className=\"text-primary hover:underline inline-flex items-center gap-1 text-sm mt-2 font-medium\"\n                          >\n                            {t('timeline.join_virtual')}\n                            <ExternalLink className=\"h-3.5 w-3.5\" />\n                          </a>\n                        )}\n                      </div>\n                    </div>\n                  )}\n\n                  {/* Participants */}\n                  {event.metadata.participants && event.metadata.participants.length > 0 && (\n                    <div className=\"space-y-3\">\n                      <p className=\"text-sm font-semibold text-start flex items-center gap-2\">\n                        <Users className=\"h-4 w-4\" />\n                        {t('timeline.participants')}\n                      </p>\n                      <div className=\"flex flex-wrap gap-2\">\n                        {event.metadata.participants.slice(0, 10).map((participant) => (\n                          <div\n                            key={participant.id}\n                            className=\"flex items-center gap-2 rounded-full bg-muted px-3 py-2 hover:bg-muted/80 transition-colors\"\n                          >\n                            <Avatar className=\"h-7 w-7\">\n                              {participant.avatar_url && <AvatarImage src={participant.avatar_url} />}\n                              <AvatarFallback className=\"text-xs\">\n                                {(isRTL ? participant.name_ar : participant.name_en)\n                                  .split(' ')\n                                  .map((n) => n[0])\n                                  .join('')\n                                  .toUpperCase()\n                                  .slice(0, 2)}\n                              </AvatarFallback>\n                            </Avatar>\n                            <span className=\"text-xs sm:text-sm font-medium\">\n                              {isRTL ? participant.name_ar : participant.name_en}\n                            </span>\n                          </div>\n                        ))}\n                        {event.metadata.participants.length > 10 && (\n                          <Badge variant=\"secondary\" className=\"rounded-full\">\n                            +{event.metadata.participants.length - 10} {t('timeline.more')}\n                          </Badge>\n                        )}\n                      </div>\n                    </div>\n                  )}\n\n                  {/* Attachments */}\n                  {event.metadata.attachments && event.metadata.attachments.length > 0 && (\n                    <div className=\"space-y-3\">\n                      <p className=\"text-sm font-semibold text-start flex items-center gap-2\">\n                        <FileText className=\"h-4 w-4\" />\n                        {t('timeline.attachments')}\n                      </p>\n                      <div className=\"space-y-2\">\n                        {event.metadata.attachments.map((attachment) => (\n                          <a\n                            key={attachment.id}\n                            href={attachment.url}\n                            target=\"_blank\"\n                            rel=\"noopener noreferrer\"\n                            className=\"flex items-center gap-3 rounded-lg bg-muted px-4 py-3 text-sm hover:bg-muted/80 transition-colors group\"\n                          >\n                            <FileText className=\"h-5 w-5 text-muted-foreground flex-shrink-0\" />\n                            <span className=\"flex-1 text-start truncate font-medium\">{attachment.filename}</span>\n                            <Download className=\"h-4 w-4 text-muted-foreground group-hover:text-primary transition-colors flex-shrink-0\" />\n                          </a>\n                        ))}\n                      </div>\n                    </div>\n                  )}\n\n                  {/* Intelligence-specific metadata */}\n                  {event.event_type === 'intelligence' && event.metadata.confidence_score && (\n                    <div className=\"flex items-center gap-3 p-4 rounded-lg bg-muted\">\n                      <TrendingUp className=\"h-5 w-5 text-primary\" />\n                      <span className=\"text-sm font-medium\">{t('timeline.confidence')}:</span>\n                      <Badge variant=\"outline\" className=\"font-semibold\">\n                        {Math.round(event.metadata.confidence_score * 100)}%\n                      </Badge>\n                    </div>\n                  )}\n                </div>\n\n                {/* Action Buttons */}\n                {event.metadata.navigation_url && (\n                  <div className=\"p-4 sm:p-6 border-t border-border bg-muted/30\">\n                    <Button\n                      onClick={handleNavigate}\n                      className=\"w-full min-h-11 sm:min-h-10\"\n                      size=\"lg\"\n                    >\n                      {t('timeline.view_details')}\n                      <ExternalLink className={cn('h-4 w-4', isRTL ? 'me-2' : 'ms-2')} />\n                    </Button>\n                  </div>\n                )}\n              </div>\n            </motion.div>\n          </div>\n        )}\n      </AnimatePresence>\n\n      {/* Timeline Element */}\n      <VerticalTimelineElement\n        className={cn(\n          'vertical-timeline-element',\n          event.priority === 'high' && 'timeline-priority-high'\n        )}\n        contentStyle={{\n          cursor: 'pointer',\n        }}\n        contentArrowStyle={{\n          borderRight: '7px solid hsl(var(--border))',\n        }}\n        date={formattedDate}\n        iconStyle={{\n          cursor: 'pointer',\n        }}\n        icon={<EventIcon className=\"h-5 w-5 sm:h-6 sm:w-6\" />}\n        iconClassName={eventColorClass}\n        onTimelineElementClick={handleCardClick}\n      >\n        <div className=\"space-y-3\" dir={isRTL ? 'rtl' : 'ltr'}>\n          {/* Date - Prominent Display for Single-Side Layout (Mobile & Tablet up to 1169px) */}\n          <div className=\"xl:hidden mb-3 pb-3 border-b border-border\">\n            <div className=\"flex items-center gap-2 text-primary\">\n              <Calendar className=\"h-4 w-4 sm:h-5 sm:w-5 flex-shrink-0\" />\n              <span className=\"text-base sm:text-lg font-bold\">{formattedDate}</span>\n            </div>\n            <div className=\"flex items-center gap-2 text-muted-foreground mt-1 ms-6 sm:ms-7\">\n              <Clock className=\"h-3.5 w-3.5 sm:h-4 sm:w-4\" />\n              <span className=\"text-sm sm:text-base\">{formattedTime}</span>\n            </div>\n          </div>\n\n          <div className=\"flex items-start justify-between gap-3\">\n            <h3 className=\"vertical-timeline-element-title text-start flex-1\">\n              {title}\n            </h3>\n          </div>\n\n          {/* Time - Desktop Only (date is shown by library on 2-column layout) */}\n          <h4 className=\"hidden xl:flex vertical-timeline-element-subtitle text-start items-center gap-2\">\n            <Clock className=\"h-3.5 w-3.5\" />\n            {formattedTime}\n          </h4>\n\n          {description && (\n            <p className=\"text-start line-clamp-2\">\n              {description}\n            </p>\n          )}\n\n          <div className=\"flex flex-wrap gap-2 pt-1\">\n            <Badge variant=\"outline\" className={cn(getPriorityColor(event.priority), \"text-xs\")}>\n              {t(`timeline.priority.${event.priority}`)}\n            </Badge>\n            {event.status && (\n              <Badge variant=\"outline\" className={cn(getStatusColor(event.status), \"text-xs\")}>\n                {t(`timeline.status.${event.status}`)}\n              </Badge>\n            )}\n          </div>\n\n          {/* Quick info indicators */}\n          <div className=\"flex items-center gap-3 text-xs text-muted-foreground pt-1\">\n            {event.metadata.participants && event.metadata.participants.length > 0 && (\n              <span className=\"flex items-center gap-1\">\n                <Users className=\"h-3.5 w-3.5\" />\n                {event.metadata.participants.length}\n              </span>\n            )}\n            {event.metadata.attachments && event.metadata.attachments.length > 0 && (\n              <span className=\"flex items-center gap-1\">\n                <FileText className=\"h-3.5 w-3.5\" />\n                {event.metadata.attachments.length}\n              </span>\n            )}\n            {(event.metadata.location_en || event.metadata.location_ar) && (\n              <span className=\"flex items-center gap-1\">\n                <MapPin className={cn('h-3.5 w-3.5', isRTL && 'rotate-180')} />\n                {event.metadata.is_virtual ? t('timeline.virtual') : t('timeline.in_person')}\n              </span>\n            )}\n          </div>\n        </div>\n      </VerticalTimelineElement>\n    </>\n  );\n}\n\n","/**\n * EnhancedVerticalTimeline Component\n *\n * Main timeline container using react-vertical-timeline-component:\n * - Infinite scroll pagination\n * - Mobile-first responsive design\n * - RTL support with logical properties\n * - Dark/light mode theming\n * - Expandable cards with modal overlay\n * - Empty and loading states\n * - Accessibility compliant\n */\n\nimport { useEffect, useRef } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { VerticalTimeline } from 'react-vertical-timeline-component';\nimport 'react-vertical-timeline-component/style.min.css';\nimport '@/styles/vertical-timeline.css';\nimport { Loader2, Calendar } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport { Alert, AlertDescription, AlertTitle } from '@/components/ui/alert';\nimport { cn } from '@/lib/utils';\nimport { EnhancedVerticalTimelineCard } from './EnhancedVerticalTimelineCard';\nimport type { UnifiedTimelineEvent } from '@/types/timeline.types';\n\ninterface EnhancedVerticalTimelineProps {\n  events: UnifiedTimelineEvent[];\n  isLoading?: boolean;\n  isFetchingNextPage?: boolean;\n  hasNextPage?: boolean;\n  onLoadMore?: () => void;\n  error?: Error | null;\n  emptyMessage?: string;\n  className?: string;\n}\n\n/**\n * Loading skeleton for timeline events\n */\nfunction TimelineLoadingSkeleton({ count = 3 }: { count?: number }) {\n  return (\n    <div className=\"space-y-8 sm:space-y-12 py-8 sm:py-12\">\n      {Array.from({ length: count }).map((_, index) => (\n        <div\n          key={index}\n          className=\"relative flex items-start gap-4 sm:gap-6 animate-pulse\"\n        >\n          {/* Icon skeleton */}\n          <div className=\"flex-shrink-0 w-12 h-12 sm:w-14 sm:h-14 rounded-full bg-muted\" />\n\n          {/* Content skeleton */}\n          <div className=\"flex-1 space-y-3\">\n            <div className=\"h-5 sm:h-6 bg-muted rounded-md w-3/4\" />\n            <div className=\"h-4 bg-muted rounded-md w-1/2\" />\n            <div className=\"h-20 sm:h-24 bg-muted rounded-lg\" />\n            <div className=\"flex gap-2\">\n              <div className=\"h-6 w-16 bg-muted rounded-full\" />\n              <div className=\"h-6 w-20 bg-muted rounded-full\" />\n            </div>\n          </div>\n        </div>\n      ))}\n    </div>\n  );\n}\n\n/**\n * Empty state component\n */\nfunction TimelineEmptyState({ message }: { message: string }) {\n  const { t } = useTranslation('dossier');\n  return (\n    <div className=\"flex flex-col items-center justify-center py-16 sm:py-20 lg:py-24 text-center px-4\">\n      <div className=\"rounded-full bg-muted p-8 sm:p-10 lg:p-12 mb-6 sm:mb-8\">\n        <Calendar className=\"h-16 w-16 sm:h-20 sm:w-20 lg:h-24 lg:w-24 text-muted-foreground\" />\n      </div>\n      <h3 className=\"text-xl sm:text-2xl lg:text-3xl font-semibold mb-3\">\n        {t('timeline.empty.title')}\n      </h3>\n      <p className=\"text-sm sm:text-base text-muted-foreground max-w-md\">\n        {message || t('timeline.empty.description')}\n      </p>\n    </div>\n  );\n}\n\n/**\n * Error state component\n */\nfunction TimelineErrorState({ error }: { error: Error }) {\n  const { t } = useTranslation('dossier');\n  return (\n    <Alert variant=\"destructive\" className=\"mb-6 mx-4\">\n      <AlertTitle>{t('timeline.error.title')}</AlertTitle>\n      <AlertDescription className=\"text-start\">\n        {error.message || t('timeline.error.description')}\n      </AlertDescription>\n    </Alert>\n  );\n}\n\nexport function EnhancedVerticalTimeline({\n  events,\n  isLoading = false,\n  isFetchingNextPage = false,\n  hasNextPage = false,\n  onLoadMore,\n  error,\n  emptyMessage,\n  className,\n}: EnhancedVerticalTimelineProps) {\n  const { t, i18n } = useTranslation('dossier');\n  const isRTL = i18n.language === 'ar';\n  const loadMoreRef = useRef<HTMLDivElement>(null);\n\n  // Intersection Observer for infinite scroll\n  useEffect(() => {\n    if (!loadMoreRef.current || !hasNextPage || isFetchingNextPage) return;\n\n    const observer = new IntersectionObserver(\n      (entries) => {\n        if (entries[0].isIntersecting && onLoadMore) {\n          onLoadMore();\n        }\n      },\n      { threshold: 0.1, rootMargin: '100px' }\n    );\n\n    observer.observe(loadMoreRef.current);\n\n    return () => observer.disconnect();\n  }, [hasNextPage, isFetchingNextPage, onLoadMore]);\n\n  // Initial loading state\n  if (isLoading) {\n    return (\n      <div className={cn('w-full', className)} dir={isRTL ? 'rtl' : 'ltr'}>\n        <TimelineLoadingSkeleton count={5} />\n      </div>\n    );\n  }\n\n  // Error state\n  if (error) {\n    return (\n      <div className={cn('w-full', className)} dir={isRTL ? 'rtl' : 'ltr'}>\n        <TimelineErrorState error={error} />\n      </div>\n    );\n  }\n\n  // Empty state\n  if (events.length === 0) {\n    return (\n      <div className={cn('w-full', className)} dir={isRTL ? 'rtl' : 'ltr'}>\n        <TimelineEmptyState message={emptyMessage || ''} />\n      </div>\n    );\n  }\n\n  return (\n    <div\n      className={cn('w-full bg-background font-sans', className)}\n      dir={isRTL ? 'rtl' : 'ltr'}\n    >\n      <div className=\"max-w-7xl mx-auto\">\n        {/* Vertical Timeline */}\n        <VerticalTimeline\n          animate={true}\n          layout=\"2-columns\"\n          lineColor={\n            typeof window !== 'undefined' &&\n            document.documentElement.getAttribute('data-color-mode') === 'dark'\n              ? 'hsl(var(--border))'\n              : 'hsl(var(--border))'\n          }\n        >\n          {events.map((event, index) => (\n            <EnhancedVerticalTimelineCard\n              key={event.id}\n              event={event}\n              index={index}\n            />\n          ))}\n        </VerticalTimeline>\n\n        {/* Load More Trigger */}\n        {hasNextPage && (\n          <div\n            ref={loadMoreRef}\n            className=\"flex justify-center py-8 sm:py-10 lg:py-12 px-4\"\n          >\n            {isFetchingNextPage ? (\n              <div className=\"flex items-center gap-3 text-sm sm:text-base text-muted-foreground\">\n                <Loader2 className=\"h-5 w-5 sm:h-6 sm:w-6 animate-spin\" />\n                <span>{t('timeline.loading_more')}</span>\n              </div>\n            ) : (\n              <Button\n                variant=\"outline\"\n                onClick={onLoadMore}\n                className=\"min-h-11 sm:min-h-10 px-6 sm:px-8\"\n                size=\"lg\"\n              >\n                {t('timeline.load_more')}\n              </Button>\n            )}\n          </div>\n        )}\n\n        {/* End of Timeline Indicator */}\n        {!hasNextPage && events.length > 0 && (\n          <div className=\"flex justify-center py-8 sm:py-10 lg:py-12 px-4\">\n            <div className=\"flex flex-col items-center gap-2 text-center\">\n              <div className=\"h-px w-24 bg-border\" />\n              <p className=\"text-xs sm:text-sm text-muted-foreground font-medium\">\n                {t('timeline.end')}\n              </p>\n              <div className=\"h-px w-24 bg-border\" />\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\n\n\n\n\n\n\n\n","/**\n * TimelineFilters Component\n *\n * Comprehensive filter controls for timeline:\n * - Event type multi-select checkboxes\n * - Date range picker (presets + custom)\n * - Priority filter\n * - Status filter\n * - Full-text search\n * - Mobile-first responsive design\n * - RTL support\n */\n\nimport { useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport {\n  Filter,\n  Search,\n  X,\n  ChevronDown,\n  ChevronUp,\n  RotateCcw,\n  Calendar as CalendarIcon,\n} from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Checkbox } from '@/components/ui/checkbox';\nimport {\n  Popover,\n  PopoverContent,\n  PopoverTrigger,\n} from '@/components/ui/popover';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select';\nimport { Calendar } from '@/components/ui/calendar';\nimport { Badge } from '@/components/ui/badge';\nimport { Separator } from '@/components/ui/separator';\nimport { cn } from '@/lib/utils';\nimport type {\n  TimelineFilters as ITimelineFilters,\n  TimelineEventType,\n  TimelinePriority,\n  TimelineEventStatus,\n  DateRangePreset,\n} from '@/types/timeline.types';\n\ninterface TimelineFiltersProps {\n  filters: ITimelineFilters;\n  onFiltersChange: (filters: ITimelineFilters) => void;\n  availableEventTypes: TimelineEventType[];\n  defaultEventTypes: TimelineEventType[];\n  showFilters: boolean;\n  onToggleFilters: () => void;\n  onRefresh: () => void;\n  className?: string;\n}\n\nexport function TimelineFilters({\n  filters,\n  onFiltersChange,\n  availableEventTypes,\n  defaultEventTypes,\n  showFilters,\n  onToggleFilters,\n  onRefresh,\n  className,\n}: TimelineFiltersProps) {\n  const { t, i18n } = useTranslation('dossier');\n  const isRTL = i18n.language === 'ar';\n\n  const [searchInput, setSearchInput] = useState(filters.search_query || '');\n  const [dateRangePreset, setDateRangePreset] = useState<DateRangePreset>('all_time');\n  const [customDateFrom, setCustomDateFrom] = useState<Date | undefined>();\n  const [customDateTo, setCustomDateTo] = useState<Date | undefined>();\n\n  // Event type labels\n  const eventTypeLabels: Record<TimelineEventType, { en: string; ar: string }> = {\n    calendar: { en: 'Calendar Events', ar: 'أحداث التقويم' },\n    interaction: { en: 'Interactions', ar: 'التفاعلات' },\n    intelligence: { en: 'Intelligence Reports', ar: 'تقارير استخبارية' },\n    document: { en: 'Documents', ar: 'المستندات' },\n    mou: { en: 'MoUs', ar: 'مذكرات التفاهم' },\n    position: { en: 'Positions', ar: 'المناصب' },\n    relationship: { en: 'Relationships', ar: 'العلاقات' },\n    commitment: { en: 'Commitments', ar: 'الالتزامات' },\n    decision: { en: 'Decisions', ar: 'القرارات' },\n  };\n\n  // Handle event type toggle\n  const handleEventTypeToggle = (eventType: TimelineEventType) => {\n    const currentTypes = filters.event_types || defaultEventTypes;\n    const newTypes = currentTypes.includes(eventType)\n      ? currentTypes.filter((t) => t !== eventType)\n      : [...currentTypes, eventType];\n\n    onFiltersChange({\n      ...filters,\n      event_types: newTypes.length > 0 ? newTypes : defaultEventTypes,\n    });\n  };\n\n  // Handle priority filter\n  const handlePriorityChange = (priority: TimelinePriority | 'all') => {\n    onFiltersChange({\n      ...filters,\n      priority: priority === 'all' ? undefined : [priority],\n    });\n  };\n\n  // Handle status filter\n  const handleStatusChange = (status: TimelineEventStatus | 'all') => {\n    onFiltersChange({\n      ...filters,\n      status: status === 'all' ? undefined : [status],\n    });\n  };\n\n  // Handle date range preset\n  const handleDateRangePreset = (preset: DateRangePreset) => {\n    setDateRangePreset(preset);\n\n    const now = new Date();\n    let dateFrom: string | undefined;\n    let dateTo: string | undefined;\n\n    switch (preset) {\n      case 'last_7_days':\n        dateFrom = new Date(now.setDate(now.getDate() - 7)).toISOString();\n        break;\n      case 'last_30_days':\n        dateFrom = new Date(now.setDate(now.getDate() - 30)).toISOString();\n        break;\n      case 'last_90_days':\n        dateFrom = new Date(now.setDate(now.getDate() - 90)).toISOString();\n        break;\n      case 'last_year':\n        dateFrom = new Date(now.setFullYear(now.getFullYear() - 1)).toISOString();\n        break;\n      case 'all_time':\n        dateFrom = undefined;\n        dateTo = undefined;\n        break;\n      case 'custom':\n        // User will set custom dates\n        break;\n    }\n\n    if (preset !== 'custom') {\n      onFiltersChange({\n        ...filters,\n        date_from: dateFrom,\n        date_to: dateTo,\n      });\n    }\n  };\n\n  // Handle custom date range\n  const handleCustomDateRange = () => {\n    onFiltersChange({\n      ...filters,\n      date_from: customDateFrom?.toISOString(),\n      date_to: customDateTo?.toISOString(),\n    });\n  };\n\n  // Handle search\n  const handleSearch = (query: string) => {\n    setSearchInput(query);\n    onFiltersChange({\n      ...filters,\n      search_query: query || undefined,\n    });\n  };\n\n  // Reset all filters\n  const handleResetFilters = () => {\n    setSearchInput('');\n    setDateRangePreset('all_time');\n    setCustomDateFrom(undefined);\n    setCustomDateTo(undefined);\n    onFiltersChange({\n      event_types: defaultEventTypes,\n    });\n  };\n\n  // Count active filters\n  const activeFiltersCount =\n    (filters.event_types && filters.event_types.length !== defaultEventTypes.length ? 1 : 0) +\n    (filters.priority ? 1 : 0) +\n    (filters.status ? 1 : 0) +\n    (filters.date_from || filters.date_to ? 1 : 0) +\n    (filters.search_query ? 1 : 0);\n\n  return (\n    <div className={cn('space-y-4 mb-6', className)} dir={isRTL ? 'rtl' : 'ltr'}>\n      {/* Filter Toggle & Search Bar */}\n      <div className=\"flex flex-col sm:flex-row gap-2 sm:gap-4\">\n        {/* Search Input */}\n        <div className=\"relative flex-1\">\n          <Search className={cn('absolute top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground', isRTL ? 'end-3' : 'start-3')} />\n          <Input\n            type=\"text\"\n            placeholder={t('timeline.search_placeholder')}\n            value={searchInput}\n            onChange={(e) => handleSearch(e.target.value)}\n            className={cn('min-h-11 sm:min-h-10', isRTL ? 'pe-9' : 'ps-9')}\n          />\n          {searchInput && (\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              onClick={() => handleSearch('')}\n              className={cn('absolute top-1/2 -translate-y-1/2 h-7 w-7 p-0', isRTL ? 'start-1' : 'end-1')}\n            >\n              <X className=\"h-4 w-4\" />\n            </Button>\n          )}\n        </div>\n\n        {/* Filter Toggle Button */}\n        <Button\n          variant=\"outline\"\n          onClick={onToggleFilters}\n          className=\"min-h-11 sm:min-h-10 justify-between\"\n        >\n          <div className=\"flex items-center gap-2\">\n            <Filter className=\"h-4 w-4\" />\n            <span>{t('timeline.filters')}</span>\n            {activeFiltersCount > 0 && (\n              <Badge variant=\"secondary\" className=\"h-5 min-w-5 rounded-full px-1.5\">\n                {activeFiltersCount}\n              </Badge>\n            )}\n          </div>\n          {showFilters ? (\n            <ChevronUp className={cn('h-4 w-4', isRTL ? 'me-2' : 'ms-2')} />\n          ) : (\n            <ChevronDown className={cn('h-4 w-4', isRTL ? 'me-2' : 'ms-2')} />\n          )}\n        </Button>\n\n        {/* Refresh Button */}\n        <Button\n          variant=\"outline\"\n          size=\"icon\"\n          onClick={onRefresh}\n          className=\"min-h-11 min-w-11 sm:min-h-10 sm:min-w-10\"\n        >\n          <RotateCcw className=\"h-4 w-4\" />\n        </Button>\n      </div>\n\n      {/* Expandable Filter Panel */}\n      {showFilters && (\n        <div className=\"rounded-lg border bg-card p-4 sm:p-6 space-y-4 sm:space-y-6\">\n          {/* Event Types */}\n          <div className=\"space-y-3\">\n            <Label className=\"text-start block\">{t('timeline.event_types')}</Label>\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3\">\n              {availableEventTypes.map((eventType) => (\n                <div key={eventType} className=\"flex items-center gap-2\">\n                  <Checkbox\n                    id={`event-type-${eventType}`}\n                    checked={(filters.event_types || defaultEventTypes).includes(eventType)}\n                    onCheckedChange={() => handleEventTypeToggle(eventType)}\n                  />\n                  <Label\n                    htmlFor={`event-type-${eventType}`}\n                    className=\"text-sm font-normal cursor-pointer text-start\"\n                  >\n                    {isRTL ? eventTypeLabels[eventType].ar : eventTypeLabels[eventType].en}\n                  </Label>\n                </div>\n              ))}\n            </div>\n          </div>\n\n          <Separator />\n\n          {/* Priority & Status Filters */}\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n            {/* Priority Filter */}\n            <div className=\"space-y-2\">\n              <Label className=\"text-start block\">{t('timeline.priority_filter')}</Label>\n              <Select\n                value={filters.priority?.[0] || 'all'}\n                onValueChange={(value) => handlePriorityChange(value as TimelinePriority | 'all')}\n              >\n                <SelectTrigger className=\"min-h-11 sm:min-h-10\">\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"all\">{t('timeline.all_priorities')}</SelectItem>\n                  <SelectItem value=\"high\">{t('timeline.priority.high')}</SelectItem>\n                  <SelectItem value=\"medium\">{t('timeline.priority.medium')}</SelectItem>\n                  <SelectItem value=\"low\">{t('timeline.priority.low')}</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n\n            {/* Status Filter */}\n            <div className=\"space-y-2\">\n              <Label className=\"text-start block\">{t('timeline.status_filter')}</Label>\n              <Select\n                value={filters.status?.[0] || 'all'}\n                onValueChange={(value) => handleStatusChange(value as TimelineEventStatus | 'all')}\n              >\n                <SelectTrigger className=\"min-h-11 sm:min-h-10\">\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"all\">{t('timeline.all_statuses')}</SelectItem>\n                  <SelectItem value=\"planned\">{t('timeline.status.planned')}</SelectItem>\n                  <SelectItem value=\"ongoing\">{t('timeline.status.ongoing')}</SelectItem>\n                  <SelectItem value=\"completed\">{t('timeline.status.completed')}</SelectItem>\n                  <SelectItem value=\"cancelled\">{t('timeline.status.cancelled')}</SelectItem>\n                  <SelectItem value=\"postponed\">{t('timeline.status.postponed')}</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n          </div>\n\n          <Separator />\n\n          {/* Date Range Filter */}\n          <div className=\"space-y-3\">\n            <Label className=\"text-start block\">{t('timeline.date_range')}</Label>\n\n            {/* Preset Options */}\n            <div className=\"flex flex-wrap gap-2\">\n              {[\n                { value: 'last_7_days', label: t('timeline.last_7_days') },\n                { value: 'last_30_days', label: t('timeline.last_30_days') },\n                { value: 'last_90_days', label: t('timeline.last_90_days') },\n                { value: 'last_year', label: t('timeline.last_year') },\n                { value: 'all_time', label: t('timeline.all_time') },\n              ].map((preset) => (\n                <Button\n                  key={preset.value}\n                  variant={dateRangePreset === preset.value ? 'default' : 'outline'}\n                  size=\"sm\"\n                  onClick={() => handleDateRangePreset(preset.value as DateRangePreset)}\n                  className=\"min-h-9 sm:min-h-8\"\n                >\n                  {preset.label}\n                </Button>\n              ))}\n\n              {/* Custom Date Range */}\n              <Popover>\n                <PopoverTrigger asChild>\n                  <Button\n                    variant={dateRangePreset === 'custom' ? 'default' : 'outline'}\n                    size=\"sm\"\n                    className=\"min-h-9 sm:min-h-8\"\n                  >\n                    <CalendarIcon className={cn('h-4 w-4', isRTL ? 'ms-2' : 'me-2')} />\n                    {t('timeline.custom_range')}\n                  </Button>\n                </PopoverTrigger>\n                <PopoverContent className=\"w-auto p-0\" align=\"start\">\n                  <div className=\"p-4 space-y-4\">\n                    <div className=\"space-y-2\">\n                      <Label>{t('timeline.from_date')}</Label>\n                      <Calendar\n                        mode=\"single\"\n                        selected={customDateFrom}\n                        onSelect={setCustomDateFrom}\n                      />\n                    </div>\n                    <div className=\"space-y-2\">\n                      <Label>{t('timeline.to_date')}</Label>\n                      <Calendar\n                        mode=\"single\"\n                        selected={customDateTo}\n                        onSelect={setCustomDateTo}\n                      />\n                    </div>\n                    <Button\n                      onClick={() => {\n                        setDateRangePreset('custom');\n                        handleCustomDateRange();\n                      }}\n                      className=\"w-full\"\n                    >\n                      {t('timeline.apply_custom_range')}\n                    </Button>\n                  </div>\n                </PopoverContent>\n              </Popover>\n            </div>\n          </div>\n\n          {/* Reset Button */}\n          {activeFiltersCount > 0 && (\n            <>\n              <Separator />\n              <Button\n                variant=\"outline\"\n                onClick={handleResetFilters}\n                className=\"w-full min-h-11 sm:min-h-10\"\n              >\n                <X className={cn('h-4 w-4', isRTL ? 'ms-2' : 'me-2')} />\n                {t('timeline.reset_filters')}\n              </Button>\n            </>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n","/**\n * useUnifiedTimeline Hook\n *\n * Fetches and manages timeline data with:\n * - Infinite scroll pagination (TanStack Query)\n * - Multi-source aggregation (calendar, interactions, documents, etc.)\n * - Type-based filtering\n * - Date range filtering\n * - Full-text search\n * - Real-time updates (optional)\n */\n\nimport { useState, useMemo } from 'react';\nimport { useInfiniteQuery } from '@tanstack/react-query';\nimport { supabase } from '@/lib/supabase';\nimport type {\n  UnifiedTimelineEvent,\n  TimelineFilters,\n  TimelineResponse,\n  TimelineEventType,\n  UseUnifiedTimelineReturn,\n} from '@/types/timeline.types';\n\ninterface UseUnifiedTimelineOptions {\n  dossierId: string;\n  dossierType: 'Country' | 'Organization' | 'Person' | 'Engagement' | 'Forum' | 'WorkingGroup' | 'Topic';\n  initialFilters?: TimelineFilters;\n  itemsPerPage?: number;\n  enableRealtime?: boolean;\n}\n\n/**\n * Fetch timeline events from Edge Function\n */\nasync function fetchTimelineEvents(\n  dossierId: string,\n  dossierType: string,\n  filters: TimelineFilters,\n  cursor?: string,\n  itemsPerPage: number = 20\n): Promise<TimelineResponse> {\n  const { data, error } = await supabase.functions.invoke<TimelineResponse>('unified-timeline', {\n    body: {\n      dossier_id: dossierId,\n      dossier_type: dossierType,\n      filters,\n      cursor,\n      limit: itemsPerPage,\n    },\n  });\n\n  if (error) {\n    throw new Error(error.message || 'Failed to fetch timeline events');\n  }\n\n  if (!data) {\n    throw new Error('No data returned from timeline API');\n  }\n\n  return data;\n}\n\n/**\n * Hook for fetching unified timeline data\n */\nexport function useUnifiedTimeline({\n  dossierId,\n  dossierType,\n  initialFilters = {},\n  itemsPerPage = 20,\n  enableRealtime = false,\n}: UseUnifiedTimelineOptions): UseUnifiedTimelineReturn {\n  const [filters, setFilters] = useState<TimelineFilters>(initialFilters);\n\n  // Infinite query for timeline events\n  const {\n    data,\n    isLoading,\n    isFetchingNextPage,\n    hasNextPage,\n    fetchNextPage,\n    error,\n    refetch,\n  } = useInfiniteQuery({\n    queryKey: ['timeline', dossierId, dossierType, filters],\n    queryFn: ({ pageParam }) =>\n      fetchTimelineEvents(dossierId, dossierType, filters, pageParam, itemsPerPage),\n    initialPageParam: undefined,\n    getNextPageParam: (lastPage) => {\n      return lastPage.has_more ? lastPage.next_cursor : undefined;\n    },\n    refetchOnWindowFocus: false,\n    staleTime: 1000 * 60 * 5, // 5 minutes\n  });\n\n  // Flatten paginated results into a single array\n  const events = useMemo<UnifiedTimelineEvent[]>(() => {\n    if (!data?.pages) return [];\n    return data.pages.flatMap((page) => page.events);\n  }, [data]);\n\n  // TODO: Implement real-time subscriptions if enableRealtime is true\n  // This would subscribe to relevant Supabase tables and update the timeline in real-time\n\n  return {\n    events,\n    isLoading,\n    isFetchingNextPage,\n    hasNextPage: hasNextPage ?? false,\n    error: error as Error | null,\n    fetchNextPage: () => fetchNextPage(),\n    refetch,\n    filters,\n    setFilters,\n  };\n}\n\n/**\n * Get default event types for a dossier type\n */\nexport function getDefaultEventTypes(\n  dossierType: 'Country' | 'Organization' | 'Person' | 'Engagement' | 'Forum' | 'WorkingGroup' | 'Topic'\n): TimelineEventType[] {\n  const eventTypeMap: Record<string, TimelineEventType[]> = {\n    Country: ['intelligence', 'mou', 'calendar', 'document', 'relationship'],\n    Organization: ['interaction', 'mou', 'calendar', 'document', 'relationship'],\n    Person: ['interaction', 'position', 'calendar', 'relationship'],\n    Engagement: ['calendar', 'commitment', 'decision', 'document'],\n    Forum: ['calendar', 'decision', 'document', 'relationship'],\n    WorkingGroup: ['calendar', 'commitment', 'decision', 'document'],\n    Topic: ['document', 'calendar', 'intelligence', 'relationship'],\n  };\n\n  return eventTypeMap[dossierType] || ['calendar', 'document'];\n}\n\n/**\n * Get available event types for a dossier type\n */\nexport function getAvailableEventTypes(\n  dossierType: 'Country' | 'Organization' | 'Person' | 'Engagement' | 'Forum' | 'WorkingGroup' | 'Topic'\n): TimelineEventType[] {\n  const eventTypeMap: Record<string, TimelineEventType[]> = {\n    Country: ['intelligence', 'mou', 'calendar', 'document', 'interaction', 'position', 'relationship'],\n    Organization: ['interaction', 'mou', 'calendar', 'document', 'relationship', 'position'],\n    Person: ['interaction', 'position', 'calendar', 'document', 'relationship'],\n    Engagement: ['calendar', 'commitment', 'decision', 'document', 'interaction'],\n    Forum: ['calendar', 'decision', 'document', 'relationship', 'interaction'],\n    WorkingGroup: ['calendar', 'commitment', 'decision', 'document', 'interaction'],\n    Topic: ['document', 'calendar', 'intelligence', 'relationship', 'interaction'],\n  };\n\n  return eventTypeMap[dossierType] || [\n    'calendar',\n    'interaction',\n    'intelligence',\n    'document',\n    'mou',\n    'position',\n    'relationship',\n    'commitment',\n    'decision',\n  ];\n}\n"],"names":["getEventIcon","eventType","Calendar","Users","TrendingUp","FileText","Briefcase","Target","CheckCircle2","AlertCircle","getEventColor","getPriorityColor","priority","colorMap","getStatusColor","status","formatEventDate","dateString","locale","date","formatEventTime","CloseIcon","jsxs","motion","jsx","EnhancedVerticalTimelineCard","event","index","t","i18n","useTranslation","navigate","useNavigate","isRTL","isActive","setIsActive","useState","id","useId","ref","useRef","EventIcon","eventColorClass","title","description","formattedDate","formattedTime","useEffect","onKeyDown","e","useOutsideClick","handleNavigate","handleCardClick","Fragment","AnimatePresence","cn","Clock","Badge","MapPin","ExternalLink","participant","Avatar","AvatarImage","AvatarFallback","n","attachment","Download","Button","VerticalTimelineElement","TimelineLoadingSkeleton","count","_","TimelineEmptyState","message","TimelineErrorState","error","Alert","AlertTitle","AlertDescription","EnhancedVerticalTimeline","events","isLoading","isFetchingNextPage","hasNextPage","onLoadMore","emptyMessage","className","loadMoreRef","observer","entries","VerticalTimeline","Loader2","TimelineFilters","filters","onFiltersChange","availableEventTypes","defaultEventTypes","showFilters","onToggleFilters","onRefresh","searchInput","setSearchInput","dateRangePreset","setDateRangePreset","customDateFrom","setCustomDateFrom","customDateTo","setCustomDateTo","eventTypeLabels","handleEventTypeToggle","currentTypes","newTypes","handlePriorityChange","handleStatusChange","handleDateRangePreset","preset","now","dateFrom","dateTo","handleCustomDateRange","handleSearch","query","handleResetFilters","activeFiltersCount","Search","Input","X","Filter","ChevronUp","ChevronDown","RotateCcw","Label","Checkbox","Separator","Select","value","SelectTrigger","SelectValue","SelectContent","SelectItem","Popover","PopoverTrigger","CalendarIcon","PopoverContent","fetchTimelineEvents","dossierId","dossierType","cursor","itemsPerPage","data","supabase","useUnifiedTimeline","initialFilters","enableRealtime","setFilters","fetchNextPage","refetch","useInfiniteQuery","pageParam","lastPage","useMemo","page","getDefaultEventTypes","getAvailableEventTypes"],"mappings":"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"}