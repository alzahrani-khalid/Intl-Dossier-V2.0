{"version":3,"file":"monitoring-DBJn4-1i.js","sources":["../../src/pages/monitoring/Dashboard.tsx","../../src/routes/_protected/monitoring.tsx?tsr-split=component"],"sourcesContent":["import React from 'react'\nimport { useQuery } from '@tanstack/react-query'\n\ntype HealthService = { status: 'healthy' | 'degraded' | 'unhealthy'; latency_ms: number; last_check: string }\ntype HealthResponse = { status: 'healthy' | 'degraded' | 'unhealthy'; services: Record<string, HealthService> }\n\ntype Alert = {\n id: string\n name: string\n name_ar: string\n condition: string\n threshold: number\n severity: 'low' | 'medium' | 'high' | 'critical'\n channels: string[]\n is_active: boolean\n acknowledged?: boolean\n}\n\nasync function fetchJSON<T>(url: string, init?: RequestInit): Promise<T> {\n const res = await fetch(url, init)\n if (!res.ok) throw new Error(`Failed ${res.status}`)\n return res.json() as Promise<T>\n}\n\nexport default function MonitoringDashboard() {\n const { data: health } = useQuery<HealthResponse>({\n queryKey: ['monitoring-health'],\n queryFn: () => fetchJSON<HealthResponse>('/monitoring/health'),\n refetchInterval: 5000\n })\n\n const { data: alerts } = useQuery<Alert[]>({\n queryKey: ['monitoring-alerts'],\n queryFn: () => fetchJSON<Alert[]>('/monitoring/alerts'),\n refetchInterval: 10000\n })\n\n return (\n <div style={{ padding: 16 }}>\n <h1>Monitoring Dashboard</h1>\n <section>\n <h2>Health</h2>\n {!health && <p>Loading health...</p>}\n {health && (\n <div>\n <p>Overall: {health.status}</p>\n <ul>\n {Object.entries(health.services).map(([name, svc]) => (\n <li key={name}>\n <strong>{name}</strong>: {svc.status} ({svc.latency_ms} ms)\n </li>\n ))}\n </ul>\n </div>\n )}\n </section>\n <section>\n <h2>Alerts</h2>\n {!alerts && <p>Loading alerts...</p>}\n {alerts && alerts.length === 0 && <p>No alerts configured</p>}\n {alerts && alerts.length > 0 && (\n <table>\n <thead>\n <tr>\n <th>Name</th>\n <th>Severity</th>\n <th>Active</th>\n </tr>\n </thead>\n <tbody>\n {alerts.map(a => (\n <tr key={a.id}>\n <td>{a.name}</td>\n <td>{a.severity}</td>\n <td>{a.is_active ? 'Yes' : 'No'}</td>\n </tr>\n ))}\n </tbody>\n </table>\n )}\n </section>\n </div>\n )\n}\n\n","import { createFileRoute } from '@tanstack/react-router'\nimport MonitoringDashboard from '@/pages/monitoring/Dashboard'\n\nexport const Route = createFileRoute('/_protected/monitoring')({\n component: MonitoringDashboard,\n})\n\n"],"names":["fetchJSON","url","init","res","MonitoringDashboard","health","useQuery","alerts","jsx","jsxs","name","svc","a","SplitComponent"],"mappings":"gNAkBA,eAAeA,EAAaC,EAAaC,EAAgC,CACxE,MAAMC,EAAM,MAAM,MAAMF,EAAKC,CAAI,EACjC,GAAI,CAACC,EAAI,GAAI,MAAM,IAAI,MAAM,UAAUA,EAAI,MAAM,EAAE,EACnD,OAAOA,EAAI,KAAA,CACZ,CAEA,SAAwBC,GAAsB,CAC7C,KAAM,CAAE,KAAMC,CAAA,EAAWC,EAAyB,CAClD,SAAU,CAAC,mBAAmB,EAC9B,QAAS,IAAMN,EAA0B,oBAAoB,EAC7D,gBAAiB,GAAA,CAChB,EAEK,CAAE,KAAMO,CAAA,EAAWD,EAAkB,CAC3C,SAAU,CAAC,mBAAmB,EAC9B,QAAS,IAAMN,EAAmB,oBAAoB,EACtD,gBAAiB,GAAA,CAChB,EAED,cACC,MAAA,CAAI,MAAO,CAAE,QAAS,IACvB,SAAA,CAAAQ,EAAAA,IAAC,MAAG,SAAA,sBAAA,CAAoB,SACvB,UAAA,CACD,SAAA,CAAAA,EAAAA,IAAC,MAAG,SAAA,QAAA,CAAM,EACT,CAACH,GAAUG,EAAAA,IAAC,IAAA,CAAE,SAAA,mBAAA,CAAiB,EAC/BH,UACA,MAAA,CACD,SAAA,CAAAI,OAAC,IAAA,CAAE,SAAA,CAAA,YAAUJ,EAAO,MAAA,EAAO,EAC3BG,EAAAA,IAAC,KAAA,CACA,SAAA,OAAO,QAAQH,EAAO,QAAQ,EAAE,IAAI,CAAC,CAACK,EAAMC,CAAG,WAC/C,KAAA,CACD,SAAA,CAAAH,EAAAA,IAAC,UAAQ,SAAAE,CAAA,CAAK,EAAS,KAAGC,EAAI,OAAO,KAAGA,EAAI,WAAW,MAAA,CAAA,EAD9CD,CAET,CACC,CAAA,CACD,CAAA,CAAA,CACA,CAAA,EAEA,SACC,UAAA,CACD,SAAA,CAAAF,EAAAA,IAAC,MAAG,SAAA,QAAA,CAAM,EACT,CAACD,GAAUC,EAAAA,IAAC,IAAA,CAAE,SAAA,mBAAA,CAAiB,EAC/BD,GAAUA,EAAO,SAAW,GAAKC,EAAAA,IAAC,KAAE,SAAA,uBAAoB,EACxDD,GAAUA,EAAO,OAAS,UAC1B,QAAA,CACD,SAAA,CAAAC,EAAAA,IAAC,QAAA,CACD,gBAAC,KAAA,CACD,SAAA,CAAAA,EAAAA,IAAC,MAAG,SAAA,MAAA,CAAI,EACRA,EAAAA,IAAC,MAAG,SAAA,UAAA,CAAQ,EACZA,EAAAA,IAAC,MAAG,SAAA,QAAA,CAAM,CAAA,CAAA,CACV,CAAA,CACA,QACC,QAAA,CACA,SAAAD,EAAO,IAAIK,UACX,KAAA,CACD,SAAA,CAAAJ,EAAAA,IAAC,KAAA,CAAI,WAAE,IAAA,CAAK,EACZA,EAAAA,IAAC,KAAA,CAAI,SAAAI,EAAE,QAAA,CAAS,EAChBJ,EAAAA,IAAC,KAAA,CAAI,SAAAI,EAAE,UAAY,MAAQ,IAAA,CAAK,CAAA,GAHvBA,EAAE,EAIX,CACC,CAAA,CACD,CAAA,CAAA,CACA,CAAA,CAAA,CAEA,CAAA,EACA,CAED,CClF8D,MAAAC,EAAvDT"}