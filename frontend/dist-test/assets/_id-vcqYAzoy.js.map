{"version":3,"file":"_id-vcqYAzoy.js","sources":["../../src/hooks/use-tasks.ts","../../src/utils/sla-calculator.ts","../../src/components/tasks/SLAIndicator.tsx","../../src/components/tasks/WorkItemLinker.tsx","../../src/components/tasks/LinkedItemsList.tsx","../../src/components/tasks/TaskDetail.tsx","../../src/pages/TaskDetailPage.tsx","../../src/routes/_protected/tasks/$id.tsx?tsr-split=component"],"sourcesContent":["/**\n * Tasks Hook\n * Part of: 025-unified-tasks-model implementation\n * Task: T023\n *\n * TanStack Query hooks for task CRUD operations with:\n * - Optimistic updates for <50ms perceived latency\n * - Auto-retry on optimistic lock conflicts (3 retries with exponential backoff)\n * - Variable load optimization (10-1000+ tasks)\n * - Work item linking support\n * - Offline state management with IndexedDB (T113-T115)\n */\n\nimport { useMutation, useQuery, useQueryClient } from '@tanstack/react-query'\nimport { useTranslation } from 'react-i18next'\nimport { useEffect, useCallback } from 'react'\nimport {\n  tasksAPI,\n  type CreateTaskRequest,\n  type UpdateTaskRequest,\n  type TaskFilters,\n  OptimisticLockConflictError,\n} from '@/services/tasks-api'\nimport type { Database } from '../../../backend/src/types/database.types'\nimport { useToast } from './use-toast'\nimport { useOfflineState } from './use-offline-state'\nimport {\n  saveTaskDraft,\n  getTaskDraft,\n  clearTaskDraft,\n  getAllTaskDrafts,\n  clearStaleDrafts,\n  isIndexedDBSupported,\n} from '@/utils/local-storage'\n\ntype Task = Database['public']['Tables']['tasks']['Row']\n\n/**\n * Query keys for cache management\n */\nexport const tasksKeys = {\n  all: ['tasks'] as const,\n  lists: () => [...tasksKeys.all, 'list'] as const,\n  list: (filters: TaskFilters) => [...tasksKeys.lists(), filters] as const,\n  detail: (id: string) => [...tasksKeys.all, 'detail', id] as const,\n  myTasks: () => [...tasksKeys.all, 'my-tasks'] as const,\n  contributedTasks: () => [...tasksKeys.all, 'contributed'] as const,\n  engagement: (engagementId: string) => [...tasksKeys.all, 'engagement', engagementId] as const,\n  workItem: (workItemType: string, workItemId: string) =>\n    [...tasksKeys.all, 'work-item', workItemType, workItemId] as const,\n  overdue: (assigneeId?: string) => [...tasksKeys.all, 'overdue', assigneeId || 'all'] as const,\n  approaching: (hours: number, assigneeId?: string) =>\n    [...tasksKeys.all, 'approaching', hours, assigneeId || 'all'] as const,\n}\n\n/**\n * Hook to fetch tasks with filtering and pagination\n */\nexport function useTasks(filters: TaskFilters = {}) {\n  return useQuery({\n    queryKey: tasksKeys.list(filters),\n    queryFn: () => tasksAPI.getTasks(filters),\n    staleTime: 1000 * 60 * 2, // 2 minutes\n    gcTime: 1000 * 60 * 10, // 10 minutes\n  })\n}\n\n/**\n * Hook to fetch a single task by ID\n */\nexport function useTask(taskId: string) {\n  return useQuery({\n    queryKey: tasksKeys.detail(taskId),\n    queryFn: () => tasksAPI.getTask(taskId),\n    enabled: !!taskId,\n    staleTime: 1000 * 60 * 2, // 2 minutes\n    gcTime: 1000 * 60 * 10, // 10 minutes\n  })\n}\n\n/**\n * Hook to fetch my tasks (assigned to current user)\n */\nexport function useMyTasks(filters: Omit<TaskFilters, 'filter'> = {}) {\n  return useQuery({\n    queryKey: tasksKeys.myTasks(),\n    queryFn: () => tasksAPI.getMyTasks(filters),\n    staleTime: 1000 * 60 * 1, // 1 minute (more frequent updates for personal tasks)\n    gcTime: 1000 * 60 * 10, // 10 minutes\n  })\n}\n\n/**\n * Hook to fetch tasks I contributed to (US2 - T049)\n * Queries tasks via task_contributors join where user is a contributor\n */\nexport function useContributedTasks(filters: Omit<TaskFilters, 'filter'> = {}) {\n  return useQuery({\n    queryKey: tasksKeys.contributedTasks(),\n    queryFn: () => tasksAPI.getContributedTasks(filters),\n    staleTime: 1000 * 60 * 2, // 2 minutes (contributors change less frequently)\n    gcTime: 1000 * 60 * 10, // 10 minutes\n  })\n}\n\n/**\n * Hook to fetch tasks for an engagement (kanban board)\n */\nexport function useEngagementTasks(engagementId: string) {\n  return useQuery({\n    queryKey: tasksKeys.engagement(engagementId),\n    queryFn: () => tasksAPI.getEngagementTasks(engagementId),\n    enabled: !!engagementId,\n    staleTime: 1000 * 30, // 30 seconds (more frequent for kanban boards)\n    gcTime: 1000 * 60 * 5, // 5 minutes\n  })\n}\n\n/**\n * Hook to fetch tasks linked to a work item\n */\nexport function useWorkItemTasks(\n  workItemType: 'dossier' | 'position' | 'ticket' | 'generic',\n  workItemId: string,\n) {\n  return useQuery({\n    queryKey: tasksKeys.workItem(workItemType, workItemId),\n    queryFn: () => tasksAPI.getWorkItemTasks(workItemType, workItemId),\n    enabled: !!workItemId && !!workItemType,\n    staleTime: 1000 * 60 * 2, // 2 minutes\n    gcTime: 1000 * 60 * 10, // 10 minutes\n  })\n}\n\n/**\n * Hook to fetch overdue tasks\n */\nexport function useOverdueTasks(assigneeId?: string) {\n  return useQuery({\n    queryKey: tasksKeys.overdue(assigneeId),\n    queryFn: () => tasksAPI.getOverdueTasks(assigneeId),\n    staleTime: 1000 * 60 * 5, // 5 minutes\n    gcTime: 1000 * 60 * 15, // 15 minutes\n  })\n}\n\n/**\n * Hook to fetch tasks approaching deadline\n */\nexport function useTasksApproachingDeadline(hours: number = 4, assigneeId?: string) {\n  return useQuery({\n    queryKey: tasksKeys.approaching(hours, assigneeId),\n    queryFn: () => tasksAPI.getTasksApproachingDeadline(hours, assigneeId),\n    staleTime: 1000 * 60 * 5, // 5 minutes\n    gcTime: 1000 * 60 * 15, // 15 minutes\n  })\n}\n\n/**\n * Hook to create a new task\n * Includes optimistic updates for instant UI feedback\n */\nexport function useCreateTask() {\n  const { t } = useTranslation()\n  const { toast } = useToast()\n  const queryClient = useQueryClient()\n\n  return useMutation({\n    mutationFn: (data: CreateTaskRequest) => tasksAPI.createTask(data),\n\n    onSuccess: (newTask) => {\n      // Invalidate all task lists to refetch\n      queryClient.invalidateQueries({ queryKey: tasksKeys.lists() })\n      queryClient.invalidateQueries({ queryKey: tasksKeys.myTasks() })\n\n      if (newTask.engagement_id) {\n        queryClient.invalidateQueries({\n          queryKey: tasksKeys.engagement(newTask.engagement_id),\n        })\n      }\n\n      if (newTask.work_item_type && newTask.work_item_id) {\n        queryClient.invalidateQueries({\n          queryKey: tasksKeys.workItem(newTask.work_item_type, newTask.work_item_id),\n        })\n      }\n\n      toast({\n        title: t('tasks.created'),\n        description: t('tasks.created_success'),\n      })\n    },\n\n    onError: (error: any) => {\n      toast({\n        title: t('tasks.create_failed'),\n        description: error.message,\n        variant: 'destructive',\n      })\n    },\n  })\n}\n\n/**\n * Hook to update a task\n * Includes optimistic locking with auto-retry (3 attempts, exponential backoff)\n * After retries fail, triggers ConflictDialog for user resolution (T050)\n */\nexport function useUpdateTask(options?: {\n  onConflictDetected?: (error: OptimisticLockConflictError, localChanges: UpdateTaskRequest) => void\n}) {\n  const { t } = useTranslation()\n  const { toast } = useToast()\n  const queryClient = useQueryClient()\n\n  return useMutation({\n    mutationFn: ({ taskId, data }: { taskId: string; data: UpdateTaskRequest }) =>\n      tasksAPI.updateTask(taskId, data),\n\n    // Auto-retry on optimistic lock conflicts\n    retry: (failureCount, error) => {\n      if (error instanceof OptimisticLockConflictError) {\n        return failureCount < 3 // Retry up to 3 times\n      }\n      return false\n    },\n\n    retryDelay: (attemptIndex) => {\n      // Exponential backoff: 100ms, 200ms, 400ms\n      return Math.min(1000, 100 * Math.pow(2, attemptIndex))\n    },\n\n    onMutate: async ({ taskId, data }) => {\n      // Cancel any outgoing refetches\n      await queryClient.cancelQueries({ queryKey: tasksKeys.detail(taskId) })\n\n      // Snapshot the previous value\n      const previousTask = queryClient.getQueryData<Task>(tasksKeys.detail(taskId))\n\n      // Optimistically update the cache\n      if (previousTask) {\n        queryClient.setQueryData<Task>(tasksKeys.detail(taskId), {\n          ...previousTask,\n          ...data,\n          updated_at: new Date().toISOString(),\n        })\n      }\n\n      // Return context for rollback\n      return { previousTask }\n    },\n\n    onError: (error, { taskId, data }, context) => {\n      // Rollback on error\n      if (context?.previousTask) {\n        queryClient.setQueryData(tasksKeys.detail(taskId), context.previousTask)\n      }\n\n      // Special handling for optimistic lock conflicts\n      if (error instanceof OptimisticLockConflictError) {\n        // After all retries fail, trigger conflict dialog if callback provided\n        if (options?.onConflictDetected) {\n          options.onConflictDetected(error, data)\n        } else {\n          // Fallback: show toast notification\n          toast({\n            title: t('tasks.conflict'),\n            description: t('tasks.conflict_message'),\n            variant: 'default',\n          })\n        }\n      } else {\n        toast({\n          title: t('tasks.update_failed'),\n          description: error.message,\n          variant: 'destructive',\n        })\n      }\n    },\n\n    onSuccess: (updatedTask) => {\n      // Update cache with server data\n      queryClient.setQueryData(tasksKeys.detail(updatedTask.id), updatedTask)\n\n      // Invalidate related queries\n      queryClient.invalidateQueries({ queryKey: tasksKeys.lists() })\n      queryClient.invalidateQueries({ queryKey: tasksKeys.myTasks() })\n\n      if (updatedTask.engagement_id) {\n        queryClient.invalidateQueries({\n          queryKey: tasksKeys.engagement(updatedTask.engagement_id),\n        })\n      }\n\n      if (updatedTask.work_item_type && updatedTask.work_item_id) {\n        queryClient.invalidateQueries({\n          queryKey: tasksKeys.workItem(updatedTask.work_item_type, updatedTask.work_item_id),\n        })\n      }\n\n      toast({\n        title: t('tasks.updated'),\n        description: t('tasks.updated_success'),\n      })\n    },\n  })\n}\n\n/**\n * Hook to update task workflow stage (for kanban drag-and-drop)\n */\nexport function useUpdateWorkflowStage() {\n  const { t } = useTranslation()\n  const { toast } = useToast()\n  const queryClient = useQueryClient()\n\n  return useMutation({\n    mutationFn: ({\n      taskId,\n      workflow_stage,\n      last_known_updated_at,\n    }: {\n      taskId: string\n      workflow_stage: UpdateTaskRequest['workflow_stage']\n      last_known_updated_at?: string\n    }) => tasksAPI.updateWorkflowStage(taskId, workflow_stage, last_known_updated_at),\n\n    // Auto-retry on optimistic lock conflicts\n    retry: (failureCount, error) => {\n      if (error instanceof OptimisticLockConflictError) {\n        return failureCount < 3\n      }\n      return false\n    },\n\n    retryDelay: (attemptIndex) => Math.min(1000, 100 * Math.pow(2, attemptIndex)),\n\n    onError: (error) => {\n      if (!(error instanceof OptimisticLockConflictError)) {\n        toast({\n          title: t('tasks.update_failed'),\n          description: error.message,\n          variant: 'destructive',\n        })\n      }\n    },\n\n    onSuccess: (updatedTask) => {\n      queryClient.setQueryData(tasksKeys.detail(updatedTask.id), updatedTask)\n      queryClient.invalidateQueries({ queryKey: tasksKeys.lists() })\n\n      if (updatedTask.engagement_id) {\n        queryClient.invalidateQueries({\n          queryKey: tasksKeys.engagement(updatedTask.engagement_id),\n        })\n      }\n    },\n  })\n}\n\n/**\n * Hook to mark task as completed\n */\nexport function useCompleteTask() {\n  const { t } = useTranslation()\n  const { toast } = useToast()\n  const queryClient = useQueryClient()\n\n  return useMutation({\n    mutationFn: ({\n      taskId,\n      last_known_updated_at,\n    }: {\n      taskId: string\n      last_known_updated_at?: string\n    }) => tasksAPI.completeTask(taskId, last_known_updated_at),\n\n    // Auto-retry on optimistic lock conflicts\n    retry: (failureCount, error) => {\n      if (error instanceof OptimisticLockConflictError) {\n        return failureCount < 3\n      }\n      return false\n    },\n\n    retryDelay: (attemptIndex) => Math.min(1000, 100 * Math.pow(2, attemptIndex)),\n\n    onSuccess: (completedTask) => {\n      queryClient.setQueryData(tasksKeys.detail(completedTask.id), completedTask)\n      queryClient.invalidateQueries({ queryKey: tasksKeys.lists() })\n      queryClient.invalidateQueries({ queryKey: tasksKeys.myTasks() })\n\n      if (completedTask.engagement_id) {\n        queryClient.invalidateQueries({\n          queryKey: tasksKeys.engagement(completedTask.engagement_id),\n        })\n      }\n\n      toast({\n        title: t('tasks.completed'),\n        description: t('tasks.completed_success'),\n      })\n    },\n\n    onError: (error) => {\n      if (!(error instanceof OptimisticLockConflictError)) {\n        toast({\n          title: t('tasks.complete_failed'),\n          description: error.message,\n          variant: 'destructive',\n        })\n      }\n    },\n  })\n}\n\n/**\n * Hook to delete a task (soft delete)\n */\nexport function useDeleteTask() {\n  const { t } = useTranslation()\n  const { toast } = useToast()\n  const queryClient = useQueryClient()\n\n  return useMutation({\n    mutationFn: (taskId: string) => tasksAPI.deleteTask(taskId),\n\n    onSuccess: (_, taskId) => {\n      queryClient.invalidateQueries({ queryKey: tasksKeys.lists() })\n      queryClient.invalidateQueries({ queryKey: tasksKeys.myTasks() })\n      queryClient.removeQueries({ queryKey: tasksKeys.detail(taskId) })\n\n      toast({\n        title: t('tasks.deleted'),\n        description: t('tasks.deleted_success'),\n      })\n    },\n\n    onError: (error: any) => {\n      toast({\n        title: t('tasks.delete_failed'),\n        description: error.message,\n        variant: 'destructive',\n      })\n    },\n  })\n}\n\n/**\n * Hook to automatically recover task drafts from IndexedDB on mount (T115)\n * - Checks IndexedDB for any unsaved drafts\n * - Attempts to save them when connectivity is restored\n * - Cleans up stale drafts (older than 7 days)\n *\n * Usage: Call this hook once in the root App component\n */\nexport function useTaskDraftRecovery() {\n  const { t } = useTranslation()\n  const { toast } = useToast()\n  const { isOnline } = useOfflineState()\n  const updateTask = useUpdateTask()\n\n  // Attempt to recover drafts when coming online\n  const recoverDrafts = useCallback(async () => {\n    if (!isIndexedDBSupported()) {\n      return\n    }\n\n    try {\n      // Get all pending drafts\n      const drafts = await getAllTaskDrafts()\n\n      if (drafts.length === 0) {\n        return\n      }\n\n      // Attempt to save each draft\n      let successCount = 0\n      let failureCount = 0\n\n      for (const draft of drafts) {\n        try {\n          // Attempt to update task with draft data\n          await updateTask.mutateAsync({\n            taskId: draft.taskId,\n            data: {\n              ...draft.updates,\n              // Include original updated_at for optimistic locking if available\n              ...(draft.originalUpdatedAt && {\n                updated_at: draft.originalUpdatedAt,\n              }),\n            },\n          })\n\n          // Clear draft on success\n          await clearTaskDraft(draft.taskId)\n          successCount++\n        } catch (error) {\n          failureCount++\n\n          // If it's an optimistic lock conflict, keep the draft for manual resolution\n          if (!(error instanceof OptimisticLockConflictError)) {\n            // For other errors, clear the draft to avoid endless retry loops\n            await clearTaskDraft(draft.taskId)\n          }\n        }\n      }\n\n      // Show summary toast\n      if (successCount > 0) {\n        toast({\n          title: t('tasks.drafts_recovered'),\n          description: t('tasks.drafts_recovered_message', {\n            count: successCount,\n          }),\n        })\n      }\n\n      if (failureCount > 0) {\n        toast({\n          title: t('tasks.drafts_recovery_partial'),\n          description: t('tasks.drafts_recovery_partial_message', {\n            failed: failureCount,\n          }),\n          variant: 'default',\n        })\n      }\n\n      // Clean up stale drafts\n      await clearStaleDrafts()\n    } catch (_error) {\n      // Error during draft recovery\n    }\n  }, [isOnline, updateTask, toast, t])\n\n  // Trigger recovery when coming online\n  useEffect(() => {\n    if (isOnline) {\n      recoverDrafts()\n    }\n  }, [isOnline, recoverDrafts])\n\n  return {\n    recoverDrafts,\n  }\n}\n\n/**\n * Hook to persist task updates to IndexedDB when offline (T114)\n *\n * Usage:\n * ```tsx\n * const { saveOfflineDraft } = useTaskOfflineDraft(taskId);\n *\n * const handleSave = async () => {\n *   if (isOffline) {\n *     await saveOfflineDraft({ title: newTitle });\n *     toast({ title: 'Saved offline, will sync when online' });\n *   } else {\n *     await updateTask.mutateAsync({ taskId, data: { title: newTitle } });\n *   }\n * };\n * ```\n */\nexport function useTaskOfflineDraft(taskId: string) {\n  const { isOffline } = useOfflineState()\n  const { toast } = useToast()\n  const { t } = useTranslation()\n\n  const saveOfflineDraft = useCallback(\n    async (updates: Partial<UpdateTaskRequest>, originalUpdatedAt?: string) => {\n      if (!isIndexedDBSupported()) {\n        console.warn('[TaskOfflineDraft] IndexedDB not supported')\n        return\n      }\n\n      try {\n        await saveTaskDraft(taskId, updates, originalUpdatedAt)\n\n        toast({\n          title: t('tasks.draft_saved'),\n          description: t('tasks.draft_saved_offline_message'),\n        })\n      } catch (_error) {\n        toast({\n          title: t('tasks.draft_save_failed'),\n          description: t('tasks.draft_save_failed_message'),\n          variant: 'destructive',\n        })\n      }\n    },\n    [taskId, toast, t],\n  )\n\n  const loadDraft = useCallback(async () => {\n    if (!isIndexedDBSupported()) {\n      return null\n    }\n\n    try {\n      const draft = await getTaskDraft(taskId)\n      return draft\n    } catch (_error) {\n      return null\n    }\n  }, [taskId])\n\n  const clearDraft = useCallback(async () => {\n    if (!isIndexedDBSupported()) {\n      return\n    }\n\n    try {\n      await clearTaskDraft(taskId)\n    } catch (_error) {\n      // Error clearing draft\n    }\n  }, [taskId])\n\n  return {\n    isOffline,\n    saveOfflineDraft,\n    loadDraft,\n    clearDraft,\n  }\n}\n","/**\n * SLA Calculator Utility\n *\n * Calculates SLA status based on current time vs deadline\n * with thresholds:\n * - Safe: 0-74% of time elapsed (green)\n * - Warning: 75-99% of time elapsed (yellow)\n * - Breached: 100%+ of time elapsed (red)\n * - Completed on time: Task completed before deadline (blue)\n * - Completed late: Task completed after deadline (gray)\n */\n\nexport type SLAStatusType =\n  | 'safe'\n  | 'warning'\n  | 'breached'\n  | 'completed_on_time'\n  | 'completed_late'\n  | 'no_deadline';\n\nexport interface SLAStatus {\n  /**\n   * Current SLA status\n   */\n  status: SLAStatusType;\n\n  /**\n   * Percentage of time elapsed (0-100+)\n   * undefined for completed tasks or no deadline\n   */\n  percentElapsed?: number;\n\n  /**\n   * Human-readable time remaining\n   * e.g., \"2 hours remaining\", \"3 days overdue\"\n   */\n  timeRemaining?: string;\n\n  /**\n   * Absolute time difference in milliseconds\n   * Positive = time remaining\n   * Negative = time overdue\n   */\n  timeDiffMs?: number;\n\n  /**\n   * Is the SLA breached?\n   */\n  isBreached: boolean;\n\n  /**\n   * Is the task completed?\n   */\n  isCompleted: boolean;\n}\n\n/**\n * Calculate SLA status based on deadline and current time\n *\n * @param deadline - SLA deadline (ISO 8601 timestamp)\n * @param isCompleted - Whether the task is completed\n * @param completedAt - Task completion timestamp (ISO 8601)\n * @param now - Current time (for testing purposes, defaults to Date.now())\n * @returns SLA status object\n */\nexport function calculateSLAStatus(\n  deadline: string | null,\n  isCompleted: boolean = false,\n  completedAt: string | null = null,\n  now: Date = new Date()\n): SLAStatus {\n  // No deadline = no SLA tracking\n  if (!deadline) {\n    return {\n      status: 'no_deadline',\n      isBreached: false,\n      isCompleted,\n    };\n  }\n\n  const deadlineDate = new Date(deadline);\n  const currentTime = now.getTime();\n  const deadlineTime = deadlineDate.getTime();\n\n  // Task is completed\n  if (isCompleted && completedAt) {\n    const completedDate = new Date(completedAt);\n    const completedTime = completedDate.getTime();\n\n    const completedOnTime = completedTime <= deadlineTime;\n\n    return {\n      status: completedOnTime ? 'completed_on_time' : 'completed_late',\n      isBreached: !completedOnTime,\n      isCompleted: true,\n      timeDiffMs: deadlineTime - completedTime,\n      timeRemaining: completedOnTime\n        ? `Completed ${formatTimeDiff(completedTime - deadlineTime)} early`\n        : `Completed ${formatTimeDiff(completedTime - deadlineTime)} late`,\n    };\n  }\n\n  // Calculate time difference\n  const timeDiffMs = deadlineTime - currentTime;\n  const isOverdue = timeDiffMs < 0;\n\n  // Calculate start time (assume SLA starts 7 days before deadline by default)\n  // This is a heuristic - in a real system, you'd have a separate sla_start_time field\n  const assumedStartTime = deadlineTime - 7 * 24 * 60 * 60 * 1000; // 7 days ago\n  const totalSLATime = deadlineTime - assumedStartTime;\n  const elapsedTime = currentTime - assumedStartTime;\n  const percentElapsed = Math.max(0, Math.min(200, (elapsedTime / totalSLATime) * 100)); // Cap at 200%\n\n  // Determine status based on time remaining\n  let status: SLAStatusType;\n\n  if (isOverdue) {\n    status = 'breached';\n  } else if (percentElapsed >= 75) {\n    status = 'warning';\n  } else {\n    status = 'safe';\n  }\n\n  return {\n    status,\n    percentElapsed,\n    timeDiffMs,\n    isBreached: isOverdue,\n    isCompleted: false,\n    timeRemaining: isOverdue\n      ? `${formatTimeDiff(Math.abs(timeDiffMs))} overdue`\n      : `${formatTimeDiff(timeDiffMs)} remaining`,\n  };\n}\n\n/**\n * Format time difference in human-readable format\n *\n * @param diffMs - Time difference in milliseconds\n * @returns Human-readable string (e.g., \"2 hours\", \"3 days\")\n */\nexport function formatTimeDiff(diffMs: number): string {\n  const absDiff = Math.abs(diffMs);\n\n  const seconds = Math.floor(absDiff / 1000);\n  const minutes = Math.floor(seconds / 60);\n  const hours = Math.floor(minutes / 60);\n  const days = Math.floor(hours / 24);\n  const weeks = Math.floor(days / 7);\n  const months = Math.floor(days / 30);\n\n  if (months > 0) {\n    return `${months} ${months === 1 ? 'month' : 'months'}`;\n  }\n  if (weeks > 0) {\n    return `${weeks} ${weeks === 1 ? 'week' : 'weeks'}`;\n  }\n  if (days > 0) {\n    return `${days} ${days === 1 ? 'day' : 'days'}`;\n  }\n  if (hours > 0) {\n    return `${hours} ${hours === 1 ? 'hour' : 'hours'}`;\n  }\n  if (minutes > 0) {\n    return `${minutes} ${minutes === 1 ? 'minute' : 'minutes'}`;\n  }\n  return `${seconds} ${seconds === 1 ? 'second' : 'seconds'}`;\n}\n\n/**\n * Check if a task is breaching SLA (for filtering)\n *\n * @param deadline - SLA deadline\n * @param isCompleted - Whether the task is completed\n * @param completedAt - Task completion timestamp\n * @returns true if SLA is currently breached (not completed and past deadline)\n */\nexport function isSLABreached(\n  deadline: string | null,\n  isCompleted: boolean = false,\n  completedAt: string | null = null\n): boolean {\n  if (!deadline || isCompleted) {\n    return false;\n  }\n\n  const status = calculateSLAStatus(deadline, isCompleted, completedAt);\n  return status.isBreached;\n}\n\n/**\n * Get SLA warning threshold timestamp (75% of time elapsed)\n *\n * @param deadline - SLA deadline\n * @param startTime - SLA start time (defaults to 7 days before deadline)\n * @returns Timestamp when SLA enters warning zone\n */\nexport function getSLAWarningThreshold(deadline: string, startTime?: string): Date {\n  const deadlineDate = new Date(deadline);\n  const startDate = startTime ? new Date(startTime) : new Date(deadlineDate.getTime() - 7 * 24 * 60 * 60 * 1000);\n\n  const totalTime = deadlineDate.getTime() - startDate.getTime();\n  const warningThreshold = startDate.getTime() + totalTime * 0.75;\n\n  return new Date(warningThreshold);\n}\n\n/**\n * Sort tasks by SLA urgency (most urgent first)\n *\n * Priority order:\n * 1. Breached (overdue) - sorted by most overdue first\n * 2. Warning (75%+ elapsed) - sorted by closest to deadline\n * 3. Safe (0-74% elapsed) - sorted by closest to deadline\n * 4. Completed/No deadline - sorted by completion time or created time\n *\n * @param tasks - Array of tasks to sort\n * @returns Sorted array\n */\nexport function sortBySLAUrgency<T extends { sla_deadline: string | null; status: string }>(tasks: T[]): T[] {\n  return [...tasks].sort((a, b) => {\n    const statusA = calculateSLAStatus(a.sla_deadline, a.status === 'completed');\n    const statusB = calculateSLAStatus(b.sla_deadline, b.status === 'completed');\n\n    // Breached tasks first\n    if (statusA.isBreached && !statusB.isBreached) return -1;\n    if (!statusA.isBreached && statusB.isBreached) return 1;\n\n    // If both breached, sort by most overdue\n    if (statusA.isBreached && statusB.isBreached) {\n      return (statusA.timeDiffMs || 0) - (statusB.timeDiffMs || 0);\n    }\n\n    // Warning tasks next\n    if (statusA.status === 'warning' && statusB.status !== 'warning') return -1;\n    if (statusA.status !== 'warning' && statusB.status === 'warning') return 1;\n\n    // If both warning or both safe, sort by closest deadline\n    if (statusA.timeDiffMs !== undefined && statusB.timeDiffMs !== undefined) {\n      return statusA.timeDiffMs - statusB.timeDiffMs;\n    }\n\n    // Default: no change\n    return 0;\n  });\n}\n\n/**\n * Get SLA status color class for styling\n *\n * @param status - SLA status\n * @returns Tailwind color class\n */\nexport function getSLAColorClass(status: SLAStatusType): string {\n  switch (status) {\n    case 'safe':\n      return 'text-green-600 dark:text-green-400';\n    case 'warning':\n      return 'text-yellow-600 dark:text-yellow-400';\n    case 'breached':\n      return 'text-red-600 dark:text-red-400';\n    case 'completed_on_time':\n      return 'text-blue-600 dark:text-blue-400';\n    case 'completed_late':\n      return 'text-gray-600 dark:text-gray-400';\n    default:\n      return 'text-gray-600 dark:text-gray-400';\n  }\n}\n","import { useTranslation } from 'react-i18next';\nimport { Clock, AlertCircle, CheckCircle2, XCircle } from 'lucide-react';\nimport { cn } from '@/lib/utils';\nimport { calculateSLAStatus, type SLAStatus } from '@/utils/sla-calculator';\n\ninterface SLAIndicatorProps {\n /**\n * SLA deadline timestamp (ISO 8601 format)\n */\n deadline: string | null;\n\n /**\n * Task completion status\n */\n isCompleted?: boolean;\n\n /**\n * Completion timestamp (ISO 8601 format)\n */\n completedAt?: string | null;\n\n /**\n * Display mode: badge (compact) or detailed (full info)\n * @default 'badge'\n */\n mode?: 'badge' | 'detailed';\n\n /**\n * Additional CSS classes\n */\n className?: string;\n}\n\n/**\n * SLAIndicator Component\n *\n * Displays SLA status with color coding:\n * - Green (safe): 0-74% of time elapsed\n * - Yellow (warning): 75-99% of time elapsed\n * - Red (breached): 100%+ of time elapsed\n * - Blue (completed): Task completed within SLA\n * - Gray (completed late): Task completed after SLA breach\n *\n * Mobile-first: Minimum 44x44px touch targets\n * RTL-compatible: Uses logical properties and flips icon direction\n * Accessibility: WCAG AA color contrast (4.5:1 minimum)\n */\nexport function SLAIndicator({\n deadline,\n isCompleted = false,\n completedAt,\n mode = 'badge',\n className,\n}: SLAIndicatorProps) {\n const { t, i18n } = useTranslation();\n const isRTL = i18n.language === 'ar';\n\n // No deadline = no SLA tracking\n if (!deadline) {\n return null;\n }\n\n const slaStatus = calculateSLAStatus(deadline, isCompleted, completedAt);\n\n return mode === 'badge' ? (\n <BadgeMode status={slaStatus} isRTL={isRTL} className={className} />\n ) : (\n <DetailedMode status={slaStatus} deadline={deadline} isRTL={isRTL} className={className} />\n );\n}\n\n/**\n * Badge Mode: Compact indicator with icon and color\n */\nfunction BadgeMode({\n status,\n isRTL,\n className,\n}: {\n status: SLAStatus;\n isRTL: boolean;\n className?: string;\n}) {\n const { t } = useTranslation();\n\n const Icon = getStatusIcon(status.status);\n\n return (\n <div\n className={cn(\n // Base styles (mobile-first)\n 'inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium',\n 'min-h-11 min-w-11', // Touch target minimum (44x44px)\n 'sm:min-h-10 sm:px-3 sm:py-1.5 sm:text-sm', // Tablet\n 'md:min-h-9', // Desktop\n\n // RTL support\n isRTL ? 'flex-row-reverse' : 'flex-row',\n\n // Color coding\n getStatusColors(status.status),\n\n className\n )}\n role=\"status\"\n aria-label={t(`tasks.sla.${status.status}`, { defaultValue: status.status })}\n >\n <Icon className={cn('size-4', isRTL ? 'rotate-180' : '')} aria-hidden=\"true\" />\n <span className=\"text-start\">{t(`tasks.sla.${status.status}`)}</span>\n </div>\n );\n}\n\n/**\n * Detailed Mode: Full SLA information with time remaining\n */\nfunction DetailedMode({\n status,\n deadline,\n isRTL,\n className,\n}: {\n status: SLAStatus;\n deadline: string;\n isRTL: boolean;\n className?: string;\n}) {\n const { t } = useTranslation();\n\n const Icon = getStatusIcon(status.status);\n\n return (\n <div\n className={cn(\n // Base styles (mobile-first)\n 'flex flex-col gap-2 p-4 rounded-lg border',\n 'sm:gap-3 sm:p-6', // Tablet\n 'md:flex-row md:items-center md:justify-between', // Desktop\n\n // RTL support\n 'text-start',\n\n // Border color based on status\n getStatusBorderColors(status.status),\n\n className\n )}\n dir={isRTL ? 'rtl' : 'ltr'}\n role=\"region\"\n aria-labelledby=\"sla-info-title\"\n >\n {/* Status indicator */}\n <div className={cn('flex items-center gap-2', isRTL ? 'flex-row-reverse' : 'flex-row')}>\n <Icon\n className={cn('size-5 sm:size-6', isRTL ? 'rotate-180' : '', getStatusColors(status.status))}\n aria-hidden=\"true\"\n />\n <div className=\"flex flex-col\">\n <h3 id=\"sla-info-title\" className=\"text-sm font-semibold sm:text-base\">\n {t(`tasks.sla.${status.status}`)}\n </h3>\n <p className=\"text-xs text-muted-foreground sm:text-sm\">{t('tasks.sla.deadline')}</p>\n </div>\n </div>\n\n {/* Deadline and time remaining */}\n <div className=\"flex flex-col gap-1 text-sm sm:text-base\">\n <div className={cn('flex items-center gap-2', isRTL ? 'flex-row-reverse' : 'flex-row')}>\n <Clock className={cn('size-4', isRTL ? 'rotate-180' : '')} aria-hidden=\"true\" />\n <span>\n {new Date(deadline).toLocaleString(isRTL ? 'ar-SA' : 'en-US', {\n dateStyle: 'medium',\n timeStyle: 'short',\n })}\n </span>\n </div>\n\n {status.timeRemaining && (\n <p className=\"text-xs text-muted-foreground sm:text-sm\">{status.timeRemaining}</p>\n )}\n </div>\n\n {/* Progress bar (if not completed) */}\n {!status.status.includes('completed') && status.percentElapsed !== undefined && (\n <div className=\"flex flex-col gap-1 w-full md:w-48\">\n <div className=\"flex justify-between text-xs text-muted-foreground\">\n <span>{t('tasks.sla.progress')}</span>\n <span>{Math.round(status.percentElapsed)}%</span>\n </div>\n <div className=\"w-full h-2 bg-gray-200 rounded-full overflow-hidden\">\n <div\n className={cn('h-full transition-all duration-500', getStatusColors(status.status))}\n style={{ width: `${Math.min(status.percentElapsed, 100)}%` }}\n role=\"progressbar\"\n aria-valuenow={Math.round(status.percentElapsed)}\n aria-valuemin={0}\n aria-valuemax={100}\n />\n </div>\n </div>\n )}\n </div>\n );\n}\n\n/**\n * Get icon based on SLA status\n */\nfunction getStatusIcon(status: string) {\n switch (status) {\n case 'safe':\n return CheckCircle2;\n case 'warning':\n return AlertCircle;\n case 'breached':\n return XCircle;\n case 'completed_on_time':\n return CheckCircle2;\n case 'completed_late':\n return XCircle;\n default:\n return Clock;\n }\n}\n\n/**\n * Get color classes for SLA status (WCAG AA compliant - 4.5:1 contrast)\n */\nfunction getStatusColors(status: string): string {\n switch (status) {\n case 'safe':\n return 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-100';\n case 'warning':\n return 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-100';\n case 'breached':\n return 'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-100';\n case 'completed_on_time':\n return 'bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-100';\n case 'completed_late':\n return 'bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-100';\n default:\n return 'bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-100';\n }\n}\n\n/**\n * Get border color classes for detailed mode\n */\nfunction getStatusBorderColors(status: string): string {\n switch (status) {\n case 'safe':\n return 'border-green-300 dark:border-green-700';\n case 'warning':\n return 'border-yellow-300 dark:border-yellow-700';\n case 'breached':\n return 'border-red-300 dark:border-red-700';\n case 'completed_on_time':\n return 'border-blue-300 dark:border-blue-700';\n case 'completed_late':\n return 'border-gray-300 dark:border-gray-700';\n default:\n return 'border-gray-300 dark:border-gray-700';\n }\n}\n","import { useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { X, Plus, FileText, Briefcase, Ticket } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport {\n Dialog,\n DialogContent,\n DialogDescription,\n DialogFooter,\n DialogHeader,\n DialogTitle,\n DialogTrigger,\n} from '@/components/ui/dialog';\nimport {\n Select,\n SelectContent,\n SelectItem,\n SelectTrigger,\n SelectValue,\n} from '@/components/ui/select';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\n\ntype WorkItemType = 'dossier' | 'position' | 'ticket';\n\ninterface WorkItem {\n type: WorkItemType;\n id: string;\n title: string;\n}\n\ninterface WorkItemLinkerProps {\n selectedItems: WorkItem[];\n onItemsChange: (items: WorkItem[]) => void;\n disabled?: boolean;\n}\n\nexport function WorkItemLinker({\n selectedItems,\n onItemsChange,\n disabled = false,\n}: WorkItemLinkerProps) {\n const { t, i18n } = useTranslation();\n const isRTL = i18n.language === 'ar';\n\n const [isOpen, setIsOpen] = useState(false);\n const [selectedType, setSelectedType] = useState<WorkItemType>('dossier');\n const [searchQuery, setSearchQuery] = useState('');\n const [searchResults, setSearchResults] = useState<WorkItem[]>([]);\n\n // Mock search function - replace with actual API call\n const handleSearch = async (query: string, type: WorkItemType) => {\n // TODO: Replace with actual API call\n const mockResults: WorkItem[] = [\n { type: 'dossier', id: '1', title: 'Australia Population Data Initiative' },\n { type: 'dossier', id: '2', title: 'Canada Trade Agreement Review' },\n { type: 'position', id: '3', title: 'Senior Analyst Position' },\n { type: 'ticket', id: '4', title: 'Intake #25' },\n ].filter(\n (item) =>\n item.type === type &&\n item.title.toLowerCase().includes(query.toLowerCase())\n );\n\n setSearchResults(mockResults);\n };\n\n const handleAddItem = (item: WorkItem) => {\n if (!selectedItems.find((i) => i.id === item.id && i.type === item.type)) {\n onItemsChange([...selectedItems, item]);\n }\n setSearchQuery('');\n setSearchResults([]);\n };\n\n const handleRemoveItem = (itemId: string, itemType: WorkItemType) => {\n onItemsChange(\n selectedItems.filter((i) => !(i.id === itemId && i.type === itemType))\n );\n };\n\n const getIcon = (type: WorkItemType) => {\n switch (type) {\n case 'dossier':\n return <FileText className=\"size-4\" />;\n case 'position':\n return <Briefcase className=\"size-4\" />;\n case 'ticket':\n return <Ticket className=\"size-4\" />;\n }\n };\n\n return (\n <div className=\"space-y-2\" dir={isRTL ? 'rtl' : 'ltr'}>\n <Label className=\"text-sm sm:text-base\">{t('tasks.linkedItems')}</Label>\n\n {/* Selected items display */}\n <div className=\"flex flex-wrap gap-2\">\n {selectedItems.map((item) => (\n <div\n key={`${item.type}-${item.id}`}\n className=\"flex items-center gap-2 rounded-lg bg-muted px-3 py-2 text-sm\"\n >\n {getIcon(item.type)}\n <span className=\"text-start\">{item.title}</span>\n <Button\n variant=\"ghost\"\n size=\"icon\"\n className=\"h-5 w-5\"\n onClick={() => handleRemoveItem(item.id, item.type)}\n disabled={disabled}\n >\n <X className=\"size-3\" />\n <span className=\"sr-only\">{t('common.remove')}</span>\n </Button>\n </div>\n ))}\n\n {selectedItems.length === 0 && (\n <p className=\"text-sm text-muted-foreground text-start\">\n {t('tasks.noLinkedItems')}\n </p>\n )}\n </div>\n\n {/* Add item dialog */}\n <Dialog open={isOpen} onOpenChange={setIsOpen}>\n <DialogTrigger asChild>\n <Button\n variant=\"outline\"\n size=\"sm\"\n className=\"w-full sm:w-auto\"\n disabled={disabled}\n >\n <Plus className={`size-4 ${isRTL ? 'ms-2' : 'me-2'}`} />\n {t('tasks.addWorkItem')}\n </Button>\n </DialogTrigger>\n\n <DialogContent className=\"w-[calc(100vw-2rem)] max-w-lg sm:max-w-xl\">\n <DialogHeader>\n <DialogTitle className=\"text-start text-lg sm:text-xl\">\n {t('tasks.linkWorkItems')}\n </DialogTitle>\n <DialogDescription className=\"text-start text-sm sm:text-base\">\n {t('tasks.linkWorkItemsDescription')}\n </DialogDescription>\n </DialogHeader>\n\n <div className=\"space-y-4 py-4\">\n {/* Type selector */}\n <div className=\"space-y-2\">\n <Label className=\"text-sm sm:text-base\">{t('tasks.itemType')}</Label>\n <Select\n value={selectedType}\n onValueChange={(value) => setSelectedType(value as WorkItemType)}\n >\n <SelectTrigger className=\"w-full\">\n <SelectValue />\n </SelectTrigger>\n <SelectContent>\n <SelectItem value=\"dossier\">\n <div className=\"flex items-center gap-2\">\n <FileText className=\"size-4\" />\n <span>{t('tasks.dossier')}</span>\n </div>\n </SelectItem>\n <SelectItem value=\"position\">\n <div className=\"flex items-center gap-2\">\n <Briefcase className=\"size-4\" />\n <span>{t('tasks.position')}</span>\n </div>\n </SelectItem>\n <SelectItem value=\"ticket\">\n <div className=\"flex items-center gap-2\">\n <Ticket className=\"size-4\" />\n <span>{t('tasks.ticket')}</span>\n </div>\n </SelectItem>\n </SelectContent>\n </Select>\n </div>\n\n {/* Search input */}\n <div className=\"space-y-2\">\n <Label className=\"text-sm sm:text-base\">{t('tasks.search')}</Label>\n <Input\n type=\"text\"\n placeholder={t('tasks.searchPlaceholder')}\n value={searchQuery}\n onChange={(e) => {\n setSearchQuery(e.target.value);\n if (e.target.value.length >= 2) {\n handleSearch(e.target.value, selectedType);\n } else {\n setSearchResults([]);\n }\n }}\n className=\"text-start\"\n />\n </div>\n\n {/* Search results */}\n {searchResults.length > 0 && (\n <div className=\"max-h-48 space-y-2 overflow-y-auto rounded-lg border p-2\">\n {searchResults.map((result) => (\n <Button\n key={`${result.type}-${result.id}`}\n variant=\"ghost\"\n className=\"h-auto w-full justify-start px-3 py-2 text-start\"\n onClick={() => handleAddItem(result)}\n >\n <div className=\"flex items-center gap-2\">\n {getIcon(result.type)}\n <span>{result.title}</span>\n </div>\n </Button>\n ))}\n </div>\n )}\n\n {searchQuery.length >= 2 && searchResults.length === 0 && (\n <p className=\"text-sm text-muted-foreground text-start\">\n {t('tasks.noResults')}\n </p>\n )}\n </div>\n\n <DialogFooter className=\"flex-col-reverse gap-2 sm:flex-row\">\n <Button\n variant=\"outline\"\n onClick={() => setIsOpen(false)}\n className=\"w-full sm:w-auto\"\n >\n {t('common.close')}\n </Button>\n </DialogFooter>\n </DialogContent>\n </Dialog>\n </div>\n );\n}\n","import { useTranslation } from 'react-i18next';\nimport { FileText, Briefcase, Ticket, ExternalLink } from 'lucide-react';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { Link } from '@tanstack/react-router';\n\ntype WorkItemType = 'dossier' | 'position' | 'ticket';\n\ninterface WorkItem {\n type: WorkItemType;\n id: string;\n title: string;\n}\n\ninterface LinkedItemsListProps {\n items: WorkItem[];\n emptyMessage?: string;\n}\n\nexport function LinkedItemsList({\n items,\n emptyMessage,\n}: LinkedItemsListProps) {\n const { t, i18n } = useTranslation();\n const isRTL = i18n.language === 'ar';\n\n const getIcon = (type: WorkItemType) => {\n const className = \"size-4 sm:size-5\";\n switch (type) {\n case 'dossier':\n return <FileText className={className} />;\n case 'position':\n return <Briefcase className={className} />;\n case 'ticket':\n return <Ticket className={className} />;\n }\n };\n\n const getLink = (item: WorkItem) => {\n switch (item.type) {\n case 'dossier':\n return `/dossiers/${item.id}`;\n case 'position':\n return `/positions/${item.id}`;\n case 'ticket':\n return `/intake-tickets/${item.id}`;\n }\n };\n\n const getTypeLabel = (type: WorkItemType) => {\n switch (type) {\n case 'dossier':\n return t('tasks.dossier');\n case 'position':\n return t('tasks.position');\n case 'ticket':\n return t('tasks.ticket');\n }\n };\n\n if (items.length === 0) {\n return (\n <div\n className=\"rounded-lg border border-dashed p-6 text-center\"\n dir={isRTL ? 'rtl' : 'ltr'}\n >\n <p className=\"text-sm text-muted-foreground\">\n {emptyMessage || t('tasks.noLinkedItems')}\n </p>\n </div>\n );\n }\n\n return (\n <div\n className=\"grid grid-cols-1 gap-3 sm:grid-cols-2 lg:grid-cols-3\"\n dir={isRTL ? 'rtl' : 'ltr'}\n >\n {items.map((item) => (\n <Link\n key={`${item.type}-${item.id}`}\n to={getLink(item)}\n className=\"group\"\n >\n <Card className=\"h-full transition-all hover:shadow-md hover:border-primary/50\">\n <CardContent className=\"flex flex-col gap-3 p-4\">\n {/* Icon and type */}\n <div className=\"flex items-center justify-between\">\n <div className=\"flex items-center gap-2\">\n <div className=\"rounded-full bg-muted p-2\">\n {getIcon(item.type)}\n </div>\n <span className=\"text-xs text-muted-foreground sm:text-sm\">\n {getTypeLabel(item.type)}\n </span>\n </div>\n <ExternalLink className=\"size-4 opacity-0 transition-opacity group-hover:opacity-100\" />\n </div>\n\n {/* Title */}\n <h3 className=\"text-sm font-medium text-start line-clamp-2 sm:text-base\">\n {item.title}\n </h3>\n </CardContent>\n </Card>\n </Link>\n ))}\n </div>\n );\n}\n","/**\n * TaskDetail Component\n * Feature: 025-unified-tasks-model\n * User Story: US1 - View My Tasks with Clear Titles\n * User Story: US2 - Track Team Collaboration\n * User Story: US4 - Link Tasks to Multiple Work Items\n * Task: T034, T048, T070\n *\n * Shows task.title as page header with mobile-first responsive design and RTL support\n * Integrates ContributorsList and AddContributorDialog for team collaboration\n * Integrates WorkItemLinker and LinkedItemsList for multi-work item support\n */\n\nimport React, { useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Card, CardContent, CardHeader, CardTitle } from '../ui/card';\nimport { Badge } from '../ui/badge';\nimport { Button } from '../ui/button';\nimport { Separator } from '../ui/separator';\nimport {\n Clock,\n AlertCircle,\n User,\n Calendar,\n FileText,\n Link as LinkIcon,\n Edit,\n Trash2,\n UserPlus,\n Users,\n UserCheck,\n ExternalLink,\n} from 'lucide-react';\nimport type { Database } from '../../../../backend/src/types/database.types';\nimport { SLAIndicator } from './SLAIndicator';\n// import { ContributorsList } from './ContributorsList';\n// import { AddContributorDialog } from './AddContributorDialog';\nimport { WorkItemLinker } from './WorkItemLinker';\nimport { LinkedItemsList } from './LinkedItemsList';\nimport { useUpdateTask } from '@/hooks/use-tasks';\n// import { useTaskContributors, useRemoveContributor } from '@/hooks/use-contributors';\n\ntype Task = Database['public']['Tables']['tasks']['Row'];\n\ninterface TaskDetailProps {\n task: Task;\n onEdit?: (task: Task) => void;\n onDelete?: (task: Task) => void;\n onStatusChange?: (task: Task, newStatus: Task['status']) => void;\n showActions?: boolean;\n isTaskOwner?: boolean; // Whether current user is assignee or creator\n}\n\nexport function TaskDetail({\n task,\n onEdit,\n onDelete,\n onStatusChange,\n showActions = true,\n isTaskOwner = false,\n}: TaskDetailProps) {\n const { t, i18n } = useTranslation();\n const isRTL = i18n.language === 'ar';\n\n // Mutation hook for updating work items\n const updateTask = useUpdateTask();\n\n // Contributors management - temporarily disabled for migration\n // const [isAddContributorOpen, setIsAddContributorOpen] = useState(false);\n // const { data: contributors = [], isLoading: isLoadingContributors } =\n // useTaskContributors(task.id);\n // const removeContributor = useRemoveContributor(task.id);\n\n const getPriorityColor = (priority: string): string => {\n const colors = {\n urgent: 'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200',\n high: 'bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200',\n medium: 'bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200',\n low: 'bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200',\n };\n return colors[priority as keyof typeof colors] || colors.medium;\n };\n\n const getStatusColor = (status: string): string => {\n const colors = {\n pending: 'bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200',\n in_progress: 'bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200',\n review: 'bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200',\n completed: 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200',\n cancelled: 'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200',\n };\n return colors[status as keyof typeof colors] || colors.pending;\n };\n\n const isCompleted = task.status === 'completed' || task.status === 'cancelled';\n\n return (\n <div className=\"space-y-6\" dir={isRTL ? 'rtl' : 'ltr'}>\n {/* Page Header with Task Title */}\n <div>\n <div className=\"flex flex-wrap items-start justify-between gap-4 mb-4\">\n {/* Task Title - Mobile-first, RTL-compatible */}\n <h1 className={`text-2xl sm:text-3xl md:text-4xl font-bold flex-1 ${isRTL ? 'text-end' : 'text-start'}`}>\n {task.title}\n </h1>\n\n {/* Actions */}\n {showActions && (\n <div className=\"flex gap-2\">\n {onEdit && (\n <Button variant=\"outline\" size=\"sm\" onClick={() => onEdit(task)}>\n <Edit className={`h-4 w-4 ${isRTL ? 'ml-2' : 'mr-2'}`} />\n {t('edit', 'Edit')}\n </Button>\n )}\n {onDelete && task.status !== 'completed' && (\n <Button variant=\"destructive\" size=\"sm\" onClick={() => onDelete(task)}>\n <Trash2 className={`h-4 w-4 ${isRTL ? 'ml-2' : 'mr-2'}`} />\n {t('delete', 'Delete')}\n </Button>\n )}\n </div>\n )}\n </div>\n\n {/* Status Badges */}\n <div className=\"flex flex-wrap gap-2\">\n <Badge className={getPriorityColor(task.priority)}>\n {t(`priority.${task.priority}`, task.priority)}\n </Badge>\n <Badge className={getStatusColor(task.status)}>\n {t(`status.${task.status}`, task.status)}\n </Badge>\n <Badge variant=\"outline\">\n {t(`workflow_stage.${task.workflow_stage}`, task.workflow_stage)}\n </Badge>\n {task.work_item_type && (\n <Badge variant=\"outline\">\n <LinkIcon className={`h-3 w-3 ${isRTL ? 'ml-1' : 'mr-1'}`} />\n {t(`work_item.${task.work_item_type}`, task.work_item_type)}\n </Badge>\n )}\n </div>\n </div>\n\n {/* SLA Status Card - T079: Using detailed SLAIndicator component */}\n <SLAIndicator\n deadline={task.sla_deadline}\n isCompleted={isCompleted}\n completedAt={task.completed_at}\n mode=\"detailed\"\n />\n\n {/* Task Details */}\n <Card>\n <CardHeader>\n <CardTitle className={isRTL ? 'text-end' : 'text-start'}>\n {t('task_details', 'Task Details')}\n </CardTitle>\n </CardHeader>\n <CardContent className=\"space-y-4\">\n {/* Description */}\n {task.description && (\n <div>\n <div className=\"flex items-center gap-2 mb-2\">\n <FileText className=\"h-4 w-4 text-muted-foreground\" />\n <p className=\"text-sm font-medium\">{t('description', 'Description')}</p>\n </div>\n <p className={`text-sm text-muted-foreground whitespace-pre-wrap ${isRTL ? 'text-end' : 'text-start'}`}>\n {task.description}\n </p>\n </div>\n )}\n\n <Separator />\n\n {/* Assignee */}\n <div>\n <div className=\"flex items-center gap-2 mb-2\">\n <User className=\"h-4 w-4 text-muted-foreground\" />\n <p className=\"text-sm font-medium\">{t('assignee', 'Assignee')}</p>\n </div>\n <div className=\"ps-6\">\n <p className=\"text-sm text-foreground\">\n {(task as any).assignee_name || task.assignee_id || t('unassigned', 'Unassigned')}\n </p>\n {(task as any).assignee_email && (\n <a\n href={`mailto:${(task as any).assignee_email}`}\n className=\"text-xs text-primary hover:underline\"\n >\n {(task as any).assignee_email}\n </a>\n )}\n </div>\n </div>\n\n <Separator />\n\n {/* Workflow Stage */}\n <div className=\"flex items-center justify-between\">\n <div className=\"flex items-center gap-2\">\n <Clock className=\"h-4 w-4 text-muted-foreground\" />\n <p className=\"text-sm font-medium\">{t('workflow_stage', 'Workflow Stage')}</p>\n </div>\n <Badge variant=\"outline\">\n {t(`workflow_stage.${task.workflow_stage}`, task.workflow_stage)}\n </Badge>\n </div>\n\n <Separator />\n\n {/* Timestamps */}\n <div className=\"space-y-2\">\n <div className=\"flex items-center justify-between\">\n <div className=\"flex items-center gap-2\">\n <Calendar className=\"h-4 w-4 text-muted-foreground\" />\n <p className=\"text-sm font-medium\">{t('created', 'Created')}</p>\n </div>\n <p className=\"text-sm text-muted-foreground\">\n {new Date(task.created_at).toLocaleString(isRTL ? 'ar-SA' : 'en-US')}\n </p>\n </div>\n\n <div className=\"flex items-center justify-between\">\n <div className=\"flex items-center gap-2\">\n <Calendar className=\"h-4 w-4 text-muted-foreground\" />\n <p className=\"text-sm font-medium\">{t('updated', 'Last Updated')}</p>\n </div>\n <p className=\"text-sm text-muted-foreground\">\n {new Date(task.updated_at).toLocaleString(isRTL ? 'ar-SA' : 'en-US')}\n </p>\n </div>\n\n {task.completed_at && (\n <div className=\"flex items-center justify-between\">\n <div className=\"flex items-center gap-2\">\n <Calendar className=\"h-4 w-4 text-muted-foreground\" />\n <p className=\"text-sm font-medium\">{t('completed', 'Completed')}</p>\n </div>\n <p className=\"text-sm text-muted-foreground\">\n {new Date(task.completed_at).toLocaleString(isRTL ? 'ar-SA' : 'en-US')}\n </p>\n </div>\n )}\n </div>\n\n {/* Engagement Information - if task is linked to an engagement */}\n {(task as any).engagement && (\n <>\n <Separator />\n <div className=\"space-y-3\">\n {/* Section Header */}\n <div className=\"flex items-center gap-2\">\n <UserCheck className=\"h-4 w-4 text-muted-foreground\" />\n <p className=\"text-sm font-medium\">{t('engagement', 'Engagement')}</p>\n </div>\n\n {/* Engagement Title */}\n <div className=\"ps-6\">\n <p className=\"text-sm font-semibold text-foreground\">\n {(task as any).engagement.title}\n </p>\n </div>\n\n {/* Engagement Type & Date */}\n <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-3 ps-6\">\n <div>\n <p className=\"text-xs text-muted-foreground mb-1\">{t('type', 'Type')}</p>\n <Badge variant=\"outline\" className=\"capitalize\">\n {(task as any).engagement.engagement_type.replace(/_/g, ' ')}\n </Badge>\n </div>\n <div>\n <p className=\"text-xs text-muted-foreground mb-1\">{t('date', 'Date')}</p>\n <p className=\"text-sm\">\n {new Date((task as any).engagement.engagement_date).toLocaleDateString(\n isRTL ? 'ar-SA' : 'en-US',\n { year: 'numeric', month: 'long', day: 'numeric' }\n )}\n </p>\n </div>\n </div>\n\n {/* Location */}\n {(task as any).engagement.location && (\n <div className=\"ps-6\">\n <p className=\"text-xs text-muted-foreground mb-1\">{t('location', 'Location')}</p>\n <p className=\"text-sm text-foreground\">{(task as any).engagement.location}</p>\n </div>\n )}\n\n {/* Linked Dossier */}\n {(task as any).engagement.dossier && (\n <div className=\"ps-6\">\n <p className=\"text-xs text-muted-foreground mb-1\">\n {t('related_dossier', 'Related Dossier')}\n </p>\n <Button\n asChild\n variant=\"outline\"\n size=\"sm\"\n className=\"mt-1 h-9\"\n >\n <a href={`/dossiers/${(task as any).engagement.dossier.id}`}>\n <ExternalLink className={`h-3.5 w-3.5 ${isRTL ? 'ms-2' : 'me-2'}`} />\n {isRTL\n ? (task as any).engagement.dossier.name_ar\n : (task as any).engagement.dossier.name_en}\n </a>\n </Button>\n </div>\n )}\n </div>\n </>\n )}\n </CardContent>\n </Card>\n\n {/* Contributors Section (US2 - Task T048) - Temporarily disabled for migration */}\n {/* <Card>\n <CardHeader>\n <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3\">\n <CardTitle className={`flex items-center gap-2 ${isRTL ? 'flex-row-reverse' : ''}`}>\n <Users className=\"h-5 w-5\" />\n {t('contributors', 'Contributors')}\n {contributors.length > 0 && (\n <Badge variant=\"secondary\" className=\"ms-2\">\n {contributors.length}\n </Badge>\n )}\n </CardTitle>\n\n {/* Add Contributor Button - Only for task owners *\\/}\n {isTaskOwner && (\n <Button\n variant=\"outline\"\n size=\"sm\"\n onClick={() => setIsAddContributorOpen(true)}\n className=\"h-11 \"\n >\n <UserPlus className={`h-4 w-4 ${isRTL ? 'ml-2' : 'mr-2'}`} />\n {t('add_contributor', 'Add Contributor')}\n </Button>\n )}\n </div>\n </CardHeader>\n <CardContent>\n {isLoadingContributors ? (\n <p className=\"text-sm text-muted-foreground text-start\">\n {t('loading_contributors', 'Loading contributors...')}\n </p>\n ) : (\n <ContributorsList\n contributors={contributors}\n onRemove={isTaskOwner ? (contributorId) => removeContributor.mutate(contributorId) : undefined}\n showRemoveButton={isTaskOwner}\n maxDisplay={5}\n />\n )}\n </CardContent>\n </Card> */}\n\n {/* Linked Work Items Section (US4 - Task T070) */}\n <Card>\n <CardHeader>\n <CardTitle className={`flex items-center gap-2 ${isRTL ? 'flex-row-reverse' : ''}`}>\n <LinkIcon className=\"h-5 w-5\" />\n {t('linked_work_items', 'Linked Work Items')}\n {(() => {\n // Parse source JSONB to get all linked items\n const source = task.source as any;\n const totalLinked =\n (source?.dossier_ids?.length || 0) +\n (source?.position_ids?.length || 0) +\n (source?.ticket_ids?.length || 0) +\n (task.work_item_id && task.work_item_type !== 'generic' ? 1 : 0);\n\n return totalLinked > 0 ? (\n <Badge variant=\"secondary\" className=\"ms-2\">\n {totalLinked}\n </Badge>\n ) : null;\n })()}\n </CardTitle>\n </CardHeader>\n <CardContent className=\"space-y-4\">\n {/* Display linked items */}\n {(() => {\n const taskWithWorkItems = task as any;\n const workItemsMap = new Map<string, any>();\n\n // Add single work item if exists\n if (task.work_item_id && task.work_item_type && task.work_item_type !== 'generic') {\n const key = `${task.work_item_type}-${task.work_item_id}`;\n const workItemTitle = isRTL\n ? (taskWithWorkItems.work_item_title_ar || taskWithWorkItems.work_item_title_en)\n : (taskWithWorkItems.work_item_title_en || taskWithWorkItems.work_item_title_ar);\n\n workItemsMap.set(key, {\n type: task.work_item_type,\n id: task.work_item_id,\n title: workItemTitle || `${task.work_item_type} #${task.work_item_id.substring(0, 8)}`,\n });\n }\n\n // Add multiple work items from API (fetched with titles), deduplicating\n if (taskWithWorkItems.work_items && Array.isArray(taskWithWorkItems.work_items)) {\n taskWithWorkItems.work_items.forEach((item: any) => {\n // Skip invalid items\n if (!item || !item.type || !item.id) return;\n\n const key = `${item.type}-${item.id}`;\n\n // Skip if already added (primary work item or duplicate)\n if (workItemsMap.has(key)) return;\n\n const title = isRTL\n ? (item.title_ar || item.title_en)\n : (item.title_en || item.title_ar);\n\n workItemsMap.set(key, {\n type: item.type,\n id: item.id,\n title: title || `${t(`work_item.${item.type}`, item.type)} (${t('deleted', 'Deleted')})`,\n });\n });\n }\n\n // Convert to array and ensure no duplicates (defensive check)\n const workItems = Array.from(workItemsMap.values()).filter((item, index, self) =>\n index === self.findIndex((t) => t.type === item.type && t.id === item.id)\n );\n\n return workItems.length > 0 ? (\n <LinkedItemsList items={workItems} />\n ) : (\n <div className=\"rounded-lg border border-dashed p-6 text-center\">\n <p className=\"text-sm text-muted-foreground\">\n {t('no_linked_items', 'No work items linked to this task')}\n </p>\n </div>\n );\n })()}\n\n {/* Work Item Linker for editing (if task owner) */}\n {isTaskOwner && !isCompleted && (\n <div className=\"pt-2 border-t mt-4 pt-4\">\n <p className=\"text-sm text-muted-foreground mb-2\">\n {t('edit_linked_items', 'Edit linked work items (re-link if deleted)')}\n </p>\n <WorkItemLinker\n selectedItems={(() => {\n const taskWithWorkItems = task as any;\n const itemsMap = new Map<string, any>();\n\n // Add primary work item\n if (task.work_item_id && task.work_item_type && task.work_item_type !== 'generic') {\n const key = `${task.work_item_type}-${task.work_item_id}`;\n const workItemTitle = isRTL\n ? (taskWithWorkItems.work_item_title_ar || taskWithWorkItems.work_item_title_en)\n : (taskWithWorkItems.work_item_title_en || taskWithWorkItems.work_item_title_ar);\n\n itemsMap.set(key, {\n type: task.work_item_type,\n id: task.work_item_id,\n title: workItemTitle || `${task.work_item_type} #${task.work_item_id.substring(0, 8)}`,\n });\n }\n\n // Add items from source JSONB, deduplicating\n if (taskWithWorkItems.work_items && Array.isArray(taskWithWorkItems.work_items)) {\n taskWithWorkItems.work_items.forEach((item: any) => {\n // Skip invalid items\n if (!item || !item.type || !item.id) return;\n\n const key = `${item.type}-${item.id}`;\n\n // Skip if already added (primary work item or duplicate)\n if (itemsMap.has(key)) return;\n\n const title = isRTL\n ? (item.title_ar || item.title_en)\n : (item.title_en || item.title_ar);\n\n itemsMap.set(key, {\n type: item.type,\n id: item.id,\n title: title || `${t(`work_item.${item.type}`, item.type)} (${t('deleted', 'Deleted')})`,\n });\n });\n }\n\n return Array.from(itemsMap.values());\n })()}\n onItemsChange={async (newItems) => {\n // Separate primary work item from additional items\n const primaryItem = newItems[0];\n const additionalItems = newItems.slice(1);\n\n // Build source JSONB\n const source: any = {\n type: additionalItems.length > 0 ? 'multi' : 'single',\n };\n\n // Group additional items by type\n const dossierIds = additionalItems\n .filter((i) => i.type === 'dossier')\n .map((i) => i.id);\n const positionIds = additionalItems\n .filter((i) => i.type === 'position')\n .map((i) => i.id);\n const ticketIds = additionalItems\n .filter((i) => i.type === 'ticket')\n .map((i) => i.id);\n\n if (dossierIds.length > 0) source.dossier_ids = dossierIds;\n if (positionIds.length > 0) source.position_ids = positionIds;\n if (ticketIds.length > 0) source.ticket_ids = ticketIds;\n\n // Update task via mutation hook\n updateTask.mutate({\n taskId: task.id,\n data: {\n work_item_type: primaryItem?.type || 'generic',\n work_item_id: primaryItem?.id || null,\n source: Object.keys(source).length > 1 ? source : null,\n last_known_updated_at: task.updated_at, // For optimistic locking\n },\n });\n }}\n disabled={false}\n />\n </div>\n )}\n </CardContent>\n </Card>\n\n {/* Add Contributor Dialog - Temporarily disabled for migration */}\n {/* <AddContributorDialog\n open={isAddContributorOpen}\n onOpenChange={setIsAddContributorOpen}\n taskId={task.id}\n onSuccess={() => {\n setIsAddContributorOpen(false);\n }}\n /> */}\n </div>\n );\n}\n","/**\n * TaskDetailPage\n * Feature: 025-unified-tasks-model\n * User Story: US1 - View My Tasks with Clear Titles\n * Task: T036\n *\n * Fetches task with title and displays breadcrumb navigation\n */\n\nimport React from 'react'\nimport { useTranslation } from 'react-i18next'\nimport { useNavigate, useParams } from '@tanstack/react-router'\nimport { useTask } from '../hooks/use-tasks'\nimport { TaskDetail } from '../components/tasks/TaskDetail'\nimport { Alert, AlertDescription } from '../components/ui/alert'\nimport { Button } from '../components/ui/button'\nimport { Skeleton } from '../components/ui/skeleton'\nimport { AlertCircle, ChevronRight } from 'lucide-react'\n\nexport function TaskDetailPage() {\n  const { t, i18n } = useTranslation()\n  const isRTL = i18n.language === 'ar'\n  const navigate = useNavigate()\n  const { id } = useParams({ from: '/_protected/tasks/$id' })\n\n  const { data: task, isLoading, error } = useTask(id as string)\n\n  const handleEdit = () => {\n    // TODO: Navigate to edit page (to be implemented in future stories)\n  }\n\n  const handleDelete = async () => {\n    // Soft delete task (to be implemented in future stories)\n    if (confirm(t('confirm_delete_task', 'Are you sure you want to delete this task?'))) {\n      // TODO: Implement delete\n      // After deletion, navigate back to tasks list\n      // await deleteTask(task.id);\n      // navigate({ to: '/tasks' });\n    }\n  }\n\n  if (error) {\n    return (\n      <div className=\"container mx-auto px-4 py-6 sm:px-6 lg:px-8\">\n        <Alert variant=\"destructive\">\n          <AlertCircle className=\"size-4\" />\n          <AlertDescription>\n            {error.message || t('failed_to_load_task', 'Failed to load task. Please try again.')}\n          </AlertDescription>\n        </Alert>\n        <Button variant=\"outline\" onClick={() => navigate({ to: '/tasks' })} className=\"mt-4\">\n          {t('back_to_tasks', 'Back to Tasks')}\n        </Button>\n      </div>\n    )\n  }\n\n  return (\n    <div\n      className=\"container mx-auto space-y-6 px-4 py-6 sm:px-6 lg:px-8\"\n      dir={isRTL ? 'rtl' : 'ltr'}\n    >\n      {/* Loading State */}\n      {isLoading && (\n        <div className=\"space-y-6\">\n          <div className=\"space-y-4\">\n            <Skeleton className=\"h-12 w-3/4\" />\n            <div className=\"flex gap-2\">\n              <Skeleton className=\"h-6 w-20\" />\n              <Skeleton className=\"h-6 w-24\" />\n              <Skeleton className=\"h-6 w-20\" />\n            </div>\n          </div>\n          <Skeleton className=\"h-64 w-full\" />\n          <Skeleton className=\"h-48 w-full\" />\n        </div>\n      )}\n\n      {/* Task Detail */}\n      {!isLoading && task && (\n        <>\n          {/* Back Button - Mobile-first */}\n          <div>\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              onClick={() => navigate({ to: '/tasks' })}\n              className=\"mb-4\"\n            >\n              <ChevronRight\n                className={`size-4 ${isRTL ? '' : 'rotate-180'} ${isRTL ? 'ml-2' : 'mr-2'}`}\n              />\n              {t('back_to_tasks', 'Back to Tasks')}\n            </Button>\n          </div>\n\n          {/* Task Detail Component */}\n          <TaskDetail task={task} onEdit={handleEdit} onDelete={handleDelete} showActions={true} />\n        </>\n      )}\n    </div>\n  )\n}\n\nexport default TaskDetailPage\n","import { createFileRoute } from '@tanstack/react-router'\nimport { TaskDetailPage } from '../../../pages/TaskDetailPage'\n\nexport const Route = createFileRoute('/_protected/tasks/$id')({\n component: TaskDetailPage,\n\n // Loader to prefetch task data\n loader: async ({ params, context }) => {\n const { id } = params\n\n // Return task ID for the page to use\n // The actual data fetching will be done by the useTask hook\n // to leverage TanStack Query caching and real-time subscriptions\n return { taskId: id }\n },\n\n // Error handling for invalid routes\n errorComponent: ({ error }) => {\n return (\n <div className=\"flex flex-col items-center justify-center min-h-screen gap-4\">\n <h1 className=\"text-2xl font-bold text-red-600\">Error Loading Task</h1>\n <p className=\"text-gray-600\">{error.message}</p>\n </div>\n )\n },\n})\n"],"names":["tasksKeys","filters","id","engagementId","workItemType","workItemId","assigneeId","hours","useTask","taskId","useQuery","tasksAPI","useUpdateTask","options","t","useTranslation","toast","useToast","queryClient","useQueryClient","useMutation","data","failureCount","error","OptimisticLockConflictError","attemptIndex","previousTask","context","updatedTask","calculateSLAStatus","deadline","isCompleted","completedAt","now","deadlineDate","currentTime","deadlineTime","completedTime","completedOnTime","formatTimeDiff","timeDiffMs","isOverdue","assumedStartTime","totalSLATime","elapsedTime","percentElapsed","status","diffMs","absDiff","seconds","minutes","days","weeks","months","SLAIndicator","mode","className","i18n","isRTL","slaStatus","jsx","BadgeMode","DetailedMode","Icon","getStatusIcon","jsxs","cn","getStatusColors","getStatusBorderColors","Clock","CheckCircle2","AlertCircle","XCircle","WorkItemLinker","selectedItems","onItemsChange","disabled","isOpen","setIsOpen","useState","selectedType","setSelectedType","searchQuery","setSearchQuery","searchResults","setSearchResults","handleSearch","query","type","mockResults","item","handleAddItem","i","handleRemoveItem","itemId","itemType","getIcon","FileText","Briefcase","Ticket","Label","Button","X","Dialog","DialogTrigger","Plus","DialogContent","DialogHeader","DialogTitle","DialogDescription","Select","value","SelectTrigger","SelectValue","SelectContent","SelectItem","Input","e","result","DialogFooter","LinkedItemsList","items","emptyMessage","getLink","getTypeLabel","Link","Card","CardContent","ExternalLink","TaskDetail","task","onEdit","onDelete","onStatusChange","showActions","isTaskOwner","updateTask","getPriorityColor","priority","colors","getStatusColor","Edit","Trash2","Badge","LinkIcon","CardHeader","CardTitle","Separator","User","Calendar","Fragment","UserCheck","source","totalLinked","taskWithWorkItems","workItemsMap","key","workItemTitle","title","workItems","index","self","itemsMap","newItems","primaryItem","additionalItems","dossierIds","positionIds","ticketIds","TaskDetailPage","navigate","useNavigate","useParams","isLoading","handleEdit","handleDelete","Alert","AlertDescription","Skeleton","ChevronRight","SplitComponent"],"mappings":"+xBAwCO,MAAMA,EAAY,CACvB,IAAK,CAAC,OAAO,EACb,MAAO,IAAM,CAAC,GAAGA,EAAU,IAAK,MAAM,EACtC,KAAOC,GAAyB,CAAC,GAAGD,EAAU,MAAA,EAASC,CAAO,EAC9D,OAASC,GAAe,CAAC,GAAGF,EAAU,IAAK,SAAUE,CAAE,EACvD,QAAS,IAAM,CAAC,GAAGF,EAAU,IAAK,UAAU,EAC5C,iBAAkB,IAAM,CAAC,GAAGA,EAAU,IAAK,aAAa,EACxD,WAAaG,GAAyB,CAAC,GAAGH,EAAU,IAAK,aAAcG,CAAY,EACnF,SAAU,CAACC,EAAsBC,IAC/B,CAAC,GAAGL,EAAU,IAAK,YAAaI,EAAcC,CAAU,EAC1D,QAAUC,GAAwB,CAAC,GAAGN,EAAU,IAAK,UAAWM,GAAc,KAAK,EACnF,YAAa,CAACC,EAAeD,IAC3B,CAAC,GAAGN,EAAU,IAAK,cAAeO,EAAOD,GAAc,KAAK,CAChE,EAiBO,SAASE,GAAQC,EAAgB,CACtC,OAAOC,EAAS,CACd,SAAUV,EAAU,OAAOS,CAAM,EACjC,QAAS,IAAME,EAAS,QAAQF,CAAM,EACtC,QAAS,CAAC,CAACA,EACX,UAAW,IAAO,GAAK,EACvB,OAAQ,IAAO,GAAK,EAAA,CACrB,CACH,CAkIO,SAASG,GAAcC,EAE3B,CACD,KAAM,CAAE,EAAAC,CAAA,EAAMC,EAAA,EACR,CAAE,MAAAC,CAAA,EAAUC,GAAA,EACZC,EAAcC,EAAA,EAEpB,OAAOC,GAAY,CACjB,WAAY,CAAC,CAAE,OAAAX,EAAQ,KAAAY,KACrBV,EAAS,WAAWF,EAAQY,CAAI,EAGlC,MAAO,CAACC,EAAcC,IAChBA,aAAiBC,EACZF,EAAe,EAEjB,GAGT,WAAaG,GAEJ,KAAK,IAAI,IAAM,IAAM,KAAK,IAAI,EAAGA,CAAY,CAAC,EAGvD,SAAU,MAAO,CAAE,OAAAhB,EAAQ,KAAAY,KAAW,CAEpC,MAAMH,EAAY,cAAc,CAAE,SAAUlB,EAAU,OAAOS,CAAM,EAAG,EAGtE,MAAMiB,EAAeR,EAAY,aAAmBlB,EAAU,OAAOS,CAAM,CAAC,EAG5E,OAAIiB,GACFR,EAAY,aAAmBlB,EAAU,OAAOS,CAAM,EAAG,CACvD,GAAGiB,EACH,GAAGL,EACH,WAAY,IAAI,KAAA,EAAO,YAAA,CAAY,CACpC,EAII,CAAE,aAAAK,CAAA,CACX,EAEA,QAAS,CAACH,EAAO,CAAE,OAAAd,EAAQ,KAAAY,CAAA,EAAQM,IAAY,CAEzCA,GAAS,cACXT,EAAY,aAAalB,EAAU,OAAOS,CAAM,EAAGkB,EAAQ,YAAY,EAIrEJ,aAAiBC,EAMjBR,EAAM,CACJ,MAAOF,EAAE,gBAAgB,EACzB,YAAaA,EAAE,wBAAwB,EACvC,QAAS,SAAA,CACV,EAGHE,EAAM,CACJ,MAAOF,EAAE,qBAAqB,EAC9B,YAAaS,EAAM,QACnB,QAAS,aAAA,CACV,CAEL,EAEA,UAAYK,GAAgB,CAE1BV,EAAY,aAAalB,EAAU,OAAO4B,EAAY,EAAE,EAAGA,CAAW,EAGtEV,EAAY,kBAAkB,CAAE,SAAUlB,EAAU,MAAA,EAAS,EAC7DkB,EAAY,kBAAkB,CAAE,SAAUlB,EAAU,QAAA,EAAW,EAE3D4B,EAAY,eACdV,EAAY,kBAAkB,CAC5B,SAAUlB,EAAU,WAAW4B,EAAY,aAAa,CAAA,CACzD,EAGCA,EAAY,gBAAkBA,EAAY,cAC5CV,EAAY,kBAAkB,CAC5B,SAAUlB,EAAU,SAAS4B,EAAY,eAAgBA,EAAY,YAAY,CAAA,CAClF,EAGHZ,EAAM,CACJ,MAAOF,EAAE,eAAe,EACxB,YAAaA,EAAE,uBAAuB,CAAA,CACvC,CACH,CAAA,CACD,CACH,CCjPO,SAASe,GACdC,EACAC,EAAuB,GACvBC,EAA6B,KAC7BC,EAAY,IAAI,KACL,CAEX,GAAI,CAACH,EACH,MAAO,CACL,OAAQ,cACR,WAAY,GACZ,YAAAC,CAAA,EAIJ,MAAMG,EAAe,IAAI,KAAKJ,CAAQ,EAChCK,EAAcF,EAAI,QAAA,EAClBG,EAAeF,EAAa,QAAA,EAGlC,GAAIH,GAAeC,EAAa,CAE9B,MAAMK,EADgB,IAAI,KAAKL,CAAW,EACN,QAAA,EAE9BM,EAAkBD,GAAiBD,EAEzC,MAAO,CACL,OAAQE,EAAkB,oBAAsB,iBAChD,WAAY,CAACA,EACb,YAAa,GACb,WAAYF,EAAeC,EAC3B,cAAeC,EACX,aAAaC,EAAeF,EAAgBD,CAAY,CAAC,SACzD,aAAaG,EAAeF,EAAgBD,CAAY,CAAC,OAAA,CAEjE,CAGA,MAAMI,EAAaJ,EAAeD,EAC5BM,EAAYD,EAAa,EAIzBE,EAAmBN,EAAe,EAAI,GAAK,GAAK,GAAK,IACrDO,EAAeP,EAAeM,EAC9BE,EAAcT,EAAcO,EAC5BG,EAAiB,KAAK,IAAI,EAAG,KAAK,IAAI,IAAMD,EAAcD,EAAgB,GAAG,CAAC,EAGpF,IAAIG,EAEJ,OAAIL,EACFK,EAAS,WACAD,GAAkB,GAC3BC,EAAS,UAETA,EAAS,OAGJ,CACL,OAAAA,EACA,eAAAD,EACA,WAAAL,EACA,WAAYC,EACZ,YAAa,GACb,cAAeA,EACX,GAAGF,EAAe,KAAK,IAAIC,CAAU,CAAC,CAAC,WACvC,GAAGD,EAAeC,CAAU,CAAC,YAAA,CAErC,CAQO,SAASD,EAAeQ,EAAwB,CACrD,MAAMC,EAAU,KAAK,IAAID,CAAM,EAEzBE,EAAU,KAAK,MAAMD,EAAU,GAAI,EACnCE,EAAU,KAAK,MAAMD,EAAU,EAAE,EACjC1C,EAAQ,KAAK,MAAM2C,EAAU,EAAE,EAC/BC,EAAO,KAAK,MAAM5C,EAAQ,EAAE,EAC5B6C,EAAQ,KAAK,MAAMD,EAAO,CAAC,EAC3BE,EAAS,KAAK,MAAMF,EAAO,EAAE,EAEnC,OAAIE,EAAS,EACJ,GAAGA,CAAM,IAAIA,IAAW,EAAI,QAAU,QAAQ,GAEnDD,EAAQ,EACH,GAAGA,CAAK,IAAIA,IAAU,EAAI,OAAS,OAAO,GAE/CD,EAAO,EACF,GAAGA,CAAI,IAAIA,IAAS,EAAI,MAAQ,MAAM,GAE3C5C,EAAQ,EACH,GAAGA,CAAK,IAAIA,IAAU,EAAI,OAAS,OAAO,GAE/C2C,EAAU,EACL,GAAGA,CAAO,IAAIA,IAAY,EAAI,SAAW,SAAS,GAEpD,GAAGD,CAAO,IAAIA,IAAY,EAAI,SAAW,SAAS,EAC3D,CCzHO,SAASK,GAAa,CAC5B,SAAAxB,EACA,YAAAC,EAAc,GACd,YAAAC,EACA,KAAAuB,EAAO,QACP,UAAAC,CACD,EAAsB,CACrB,KAAM,CAAE,EAAA1C,EAAG,KAAA2C,CAAA,EAAS1C,EAAA,EACd2C,EAAQD,EAAK,WAAa,KAGhC,GAAI,CAAC3B,EACL,OAAO,KAGP,MAAM6B,EAAY9B,GAAmBC,EAAUC,EAAaC,CAAW,EAEvE,OAAOuB,IAAS,QAChBK,EAAAA,IAACC,GAAA,CAAU,OAAQF,EAAW,MAAAD,EAAc,UAAAF,CAAA,CAAsB,QAEjEM,GAAA,CAAa,OAAQH,EAAW,SAAA7B,EAAoB,MAAA4B,EAAc,UAAAF,EAAsB,CAE1F,CAKA,SAASK,GAAU,CAClB,OAAAf,EACA,MAAAY,EACA,UAAAF,CACD,EAIG,CACF,KAAM,CAAE,EAAA1C,CAAA,EAAMC,EAAA,EAERgD,EAAOC,EAAclB,EAAO,MAAM,EAExC,OACAmB,EAAAA,KAAC,MAAA,CACD,UAAWC,EAEX,4EACA,oBACA,2CACA,aAGAR,EAAQ,mBAAqB,WAG7BS,EAAgBrB,EAAO,MAAM,EAE7BU,CAAA,EAEA,KAAK,SACL,aAAY1C,EAAE,aAAagC,EAAO,MAAM,GAAI,CAAE,aAAcA,EAAO,OAAQ,EAE3E,SAAA,CAAAc,EAAAA,IAACG,EAAA,CAAK,UAAWG,EAAG,SAAUR,EAAQ,aAAe,EAAE,EAAG,cAAY,MAAA,CAAO,EAC7EE,EAAAA,IAAC,QAAK,UAAU,aAAc,WAAE,aAAad,EAAO,MAAM,EAAE,CAAA,CAAE,CAAA,CAAA,CAAA,CAG/D,CAKA,SAASgB,GAAa,CACrB,OAAAhB,EACA,SAAAhB,EACA,MAAA4B,EACA,UAAAF,CACD,EAKG,CACF,KAAM,CAAE,EAAA1C,CAAA,EAAMC,EAAA,EAERgD,EAAOC,EAAclB,EAAO,MAAM,EAExC,OACAmB,EAAAA,KAAC,MAAA,CACD,UAAWC,EAEX,4CACA,kBACA,iDAGA,aAGAE,GAAsBtB,EAAO,MAAM,EAEnCU,CAAA,EAEA,IAAKE,EAAQ,MAAQ,MACrB,KAAK,SACL,kBAAgB,iBAGhB,SAAA,CAAAO,OAAC,OAAI,UAAWC,EAAG,0BAA2BR,EAAQ,mBAAqB,UAAU,EACrF,SAAA,CAAAE,EAAAA,IAACG,EAAA,CACD,UAAWG,EAAG,mBAAoBR,EAAQ,aAAe,GAAIS,EAAgBrB,EAAO,MAAM,CAAC,EAC3F,cAAY,MAAA,CAAA,EAEZmB,EAAAA,KAAC,MAAA,CAAI,UAAU,gBACf,SAAA,CAAAL,EAAAA,IAAC,KAAA,CAAG,GAAG,iBAAiB,UAAU,qCACjC,WAAE,aAAad,EAAO,MAAM,EAAE,CAAA,CAC/B,QACC,IAAA,CAAE,UAAU,2CAA4C,SAAAhC,EAAE,oBAAoB,CAAA,CAAE,CAAA,CAAA,CACjF,CAAA,EACA,EAGAmD,EAAAA,KAAC,MAAA,CAAI,UAAU,2CACf,SAAA,CAAAA,OAAC,OAAI,UAAWC,EAAG,0BAA2BR,EAAQ,mBAAqB,UAAU,EACrF,SAAA,CAAAE,EAAAA,IAACS,EAAA,CAAM,UAAWH,EAAG,SAAUR,EAAQ,aAAe,EAAE,EAAG,cAAY,MAAA,CAAO,EAC9EE,EAAAA,IAAC,QACA,SAAA,IAAI,KAAK9B,CAAQ,EAAE,eAAe4B,EAAQ,QAAU,QAAS,CAC9D,UAAW,SACX,UAAW,OAAA,CACV,CAAA,CACD,CAAA,EACA,EAECZ,EAAO,eACRc,EAAAA,IAAC,KAAE,UAAU,2CAA4C,WAAO,aAAA,CAAc,CAAA,EAE9E,EAGC,CAACd,EAAO,OAAO,SAAS,WAAW,GAAKA,EAAO,iBAAmB,QACnEmB,EAAAA,KAAC,MAAA,CAAI,UAAU,qCACf,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,qDACf,SAAA,CAAAL,EAAAA,IAAC,OAAA,CAAM,SAAA9C,EAAE,oBAAoB,CAAA,CAAE,SAC9B,OAAA,CAAM,SAAA,CAAA,KAAK,MAAMgC,EAAO,cAAc,EAAE,GAAA,CAAA,CAAC,CAAA,EAC1C,EACAc,EAAAA,IAAC,MAAA,CAAI,UAAU,sDACf,SAAAA,EAAAA,IAAC,MAAA,CACD,UAAWM,EAAG,qCAAsCC,EAAgBrB,EAAO,MAAM,CAAC,EAClF,MAAO,CAAE,MAAO,GAAG,KAAK,IAAIA,EAAO,eAAgB,GAAG,CAAC,GAAA,EACvD,KAAK,cACL,gBAAe,KAAK,MAAMA,EAAO,cAAc,EAC/C,gBAAe,EACf,gBAAe,GAAA,CAAA,CACf,CACA,CAAA,CAAA,CACA,CAAA,CAAA,CAAA,CAID,CAKA,SAASkB,EAAclB,EAAgB,CACtC,OAAQA,EAAA,CACR,IAAK,OACL,OAAOwB,EACP,IAAK,UACL,OAAOC,EACP,IAAK,WACL,OAAOC,EACP,IAAK,oBACL,OAAOF,EACP,IAAK,iBACL,OAAOE,EACP,QACA,OAAOH,CAAA,CAER,CAKA,SAASF,EAAgBrB,EAAwB,CAChD,OAAQA,EAAA,CACR,IAAK,OACL,MAAO,oEACP,IAAK,UACL,MAAO,wEACP,IAAK,WACL,MAAO,4DACP,IAAK,oBACL,MAAO,gEACP,IAAK,iBACL,MAAO,gEACP,QACA,MAAO,+DAAA,CAER,CAKA,SAASsB,GAAsBtB,EAAwB,CACtD,OAAQA,EAAA,CACR,IAAK,OACL,MAAO,yCACP,IAAK,UACL,MAAO,2CACP,IAAK,WACL,MAAO,qCACP,IAAK,oBACL,MAAO,uCACP,IAAK,iBACL,MAAO,uCACP,QACA,MAAO,sCAAA,CAER,CClOO,SAAS2B,GAAe,CAC9B,cAAAC,EACA,cAAAC,EACA,SAAAC,EAAW,EACZ,EAAwB,CACvB,KAAM,CAAE,EAAA9D,EAAG,KAAA2C,CAAA,EAAS1C,EAAA,EACd2C,EAAQD,EAAK,WAAa,KAE1B,CAACoB,EAAQC,CAAS,EAAIC,EAAAA,SAAS,EAAK,EACpC,CAACC,EAAcC,CAAe,EAAIF,EAAAA,SAAuB,SAAS,EAClE,CAACG,EAAaC,CAAc,EAAIJ,EAAAA,SAAS,EAAE,EAC3C,CAACK,EAAeC,CAAgB,EAAIN,EAAAA,SAAqB,CAAA,CAAE,EAG3DO,EAAe,MAAOC,EAAeC,IAAuB,CAElE,MAAMC,EAA0B,CAChC,CAAE,KAAM,UAAW,GAAI,IAAK,MAAO,sCAAA,EACnC,CAAE,KAAM,UAAW,GAAI,IAAK,MAAO,+BAAA,EACnC,CAAE,KAAM,WAAY,GAAI,IAAK,MAAO,yBAAA,EACpC,CAAE,KAAM,SAAU,GAAI,IAAK,MAAO,YAAA,CAAa,EAC7C,OACDC,GACDA,EAAK,OAASF,GACdE,EAAK,MAAM,YAAA,EAAc,SAASH,EAAM,YAAA,CAAa,CAAA,EAGrDF,EAAiBI,CAAW,CAC5B,EAEME,EAAiBD,GAAmB,CACrChB,EAAc,KAAMkB,GAAMA,EAAE,KAAOF,EAAK,IAAME,EAAE,OAASF,EAAK,IAAI,GACvEf,EAAc,CAAC,GAAGD,EAAegB,CAAI,CAAC,EAEtCP,EAAe,EAAE,EACjBE,EAAiB,CAAA,CAAE,CACnB,EAEMQ,EAAmB,CAACC,EAAgBC,IAA2B,CACrEpB,EACAD,EAAc,OAAQkB,GAAM,EAAEA,EAAE,KAAOE,GAAUF,EAAE,OAASG,EAAS,CAAA,CAErE,EAEMC,EAAWR,GAAuB,CACxC,OAAQA,EAAA,CACR,IAAK,UACL,OAAO5B,EAAAA,IAACqC,EAAA,CAAS,UAAU,QAAA,CAAS,EACpC,IAAK,WACL,OAAOrC,EAAAA,IAACsC,EAAA,CAAU,UAAU,QAAA,CAAS,EACrC,IAAK,SACL,OAAOtC,EAAAA,IAACuC,EAAA,CAAO,UAAU,QAAA,CAAS,CAAA,CAElC,EAEA,cACC,MAAA,CAAI,UAAU,YAAY,IAAKzC,EAAQ,MAAQ,MAChD,SAAA,CAAAE,MAACwC,EAAA,CAAM,UAAU,uBAAwB,SAAAtF,EAAE,mBAAmB,EAAE,EAGhEmD,EAAAA,KAAC,MAAA,CAAI,UAAU,uBACd,SAAA,CAAAS,EAAc,IAAKgB,GACpBzB,EAAAA,KAAC,MAAA,CAED,UAAU,gEAET,SAAA,CAAA+B,EAAQN,EAAK,IAAI,EAClB9B,EAAAA,IAAC,OAAA,CAAK,UAAU,aAAc,WAAK,MAAM,EACzCK,EAAAA,KAACoC,EAAA,CACD,QAAQ,QACR,KAAK,OACL,UAAU,UACV,QAAS,IAAMR,EAAiBH,EAAK,GAAIA,EAAK,IAAI,EAClD,SAAAd,EAEA,SAAA,CAAAhB,EAAAA,IAAC0C,GAAA,CAAE,UAAU,QAAA,CAAS,QACrB,OAAA,CAAK,UAAU,UAAW,SAAAxF,EAAE,eAAe,CAAA,CAAE,CAAA,CAAA,CAAA,CAC9C,CAAA,EAdK,GAAG4E,EAAK,IAAI,IAAIA,EAAK,EAAE,EAAA,CAgB3B,EAEAhB,EAAc,SAAW,GAC1Bd,EAAAA,IAAC,KAAE,UAAU,2CACZ,SAAA9C,EAAE,qBAAqB,CAAA,CACxB,CAAA,EAEA,EAGAmD,EAAAA,KAACsC,GAAA,CAAO,KAAM1B,EAAQ,aAAcC,EACpC,SAAA,CAAAlB,EAAAA,IAAC4C,GAAA,CAAc,QAAO,GACtB,SAAAvC,EAAAA,KAACoC,EAAA,CACD,QAAQ,UACR,KAAK,KACL,UAAU,mBACV,SAAAzB,EAEA,SAAA,CAAAhB,MAAC6C,IAAK,UAAW,UAAU/C,EAAQ,OAAS,MAAM,GAAI,EACrD5C,EAAE,mBAAmB,CAAA,CAAA,CAAA,EAEtB,EAEAmD,EAAAA,KAACyC,GAAA,CAAc,UAAU,4CACzB,SAAA,CAAAzC,OAAC0C,GAAA,CACD,SAAA,CAAA/C,MAACgD,GAAA,CAAY,UAAU,gCACtB,SAAA9F,EAAE,qBAAqB,EACxB,QACC+F,GAAA,CAAkB,UAAU,kCAC5B,SAAA/F,EAAE,gCAAgC,CAAA,CACnC,CAAA,EACA,EAEAmD,EAAAA,KAAC,MAAA,CAAI,UAAU,iBAEf,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,YACf,SAAA,CAAAL,MAACwC,EAAA,CAAM,UAAU,uBAAwB,SAAAtF,EAAE,gBAAgB,EAAE,EAC7DmD,EAAAA,KAAC6C,GAAA,CACD,MAAO9B,EACP,cAAgB+B,GAAU9B,EAAgB8B,CAAqB,EAE/D,SAAA,CAAAnD,MAACoD,GAAA,CAAc,UAAU,SACzB,SAAApD,MAACqD,KAAY,EACb,SACCC,GAAA,CACD,SAAA,CAAAtD,EAAAA,IAACuD,GAAW,MAAM,UAClB,SAAAlD,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACf,SAAA,CAAAL,EAAAA,IAACqC,EAAA,CAAS,UAAU,QAAA,CAAS,EAC7BrC,EAAAA,IAAC,OAAA,CAAM,SAAA9C,EAAE,eAAe,CAAA,CAAE,CAAA,CAAA,CAC1B,CAAA,CACA,QACCqG,EAAA,CAAW,MAAM,WAClB,SAAAlD,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACf,SAAA,CAAAL,EAAAA,IAACsC,EAAA,CAAU,UAAU,QAAA,CAAS,EAC9BtC,EAAAA,IAAC,OAAA,CAAM,SAAA9C,EAAE,gBAAgB,CAAA,CAAE,CAAA,CAAA,CAC3B,CAAA,CACA,QACCqG,EAAA,CAAW,MAAM,SAClB,SAAAlD,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACf,SAAA,CAAAL,EAAAA,IAACuC,EAAA,CAAO,UAAU,QAAA,CAAS,EAC3BvC,EAAAA,IAAC,OAAA,CAAM,SAAA9C,EAAE,cAAc,CAAA,CAAE,CAAA,CAAA,CACzB,CAAA,CACA,CAAA,CAAA,CACA,CAAA,CAAA,CAAA,CACA,EACA,EAGAmD,EAAAA,KAAC,MAAA,CAAI,UAAU,YACf,SAAA,CAAAL,MAACwC,EAAA,CAAM,UAAU,uBAAwB,SAAAtF,EAAE,cAAc,EAAE,EAC3D8C,EAAAA,IAACwD,GAAA,CACD,KAAK,OACL,YAAatG,EAAE,yBAAyB,EACxC,MAAOoE,EACP,SAAWmC,GAAM,CACjBlC,EAAekC,EAAE,OAAO,KAAK,EACzBA,EAAE,OAAO,MAAM,QAAU,EAC7B/B,EAAa+B,EAAE,OAAO,MAAOrC,CAAY,EAEzCK,EAAiB,CAAA,CAAE,CAEnB,EACA,UAAU,YAAA,CAAA,CACV,EACA,EAGCD,EAAc,OAAS,GACxBxB,EAAAA,IAAC,MAAA,CAAI,UAAU,2DACd,SAAAwB,EAAc,IAAKkC,GACpB1D,EAAAA,IAACyC,EAAA,CAED,QAAQ,QACR,UAAU,mDACV,QAAS,IAAMV,EAAc2B,CAAM,EAEnC,SAAArD,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACd,SAAA,CAAA+B,EAAQsB,EAAO,IAAI,EACpB1D,EAAAA,IAAC,OAAA,CAAM,SAAA0D,EAAO,KAAA,CAAM,CAAA,CAAA,CACpB,CAAA,EARK,GAAGA,EAAO,IAAI,IAAIA,EAAO,EAAE,EAAA,CAU/B,EACD,EAGCpC,EAAY,QAAU,GAAKE,EAAc,SAAW,GACrDxB,EAAAA,IAAC,IAAA,CAAE,UAAU,2CACZ,SAAA9C,EAAE,iBAAiB,CAAA,CACpB,CAAA,EAEA,EAEA8C,EAAAA,IAAC2D,GAAA,CAAa,UAAU,qCACxB,SAAA3D,EAAAA,IAACyC,EAAA,CACD,QAAQ,UACR,QAAS,IAAMvB,EAAU,EAAK,EAC9B,UAAU,mBAET,WAAE,cAAc,CAAA,CAAA,CACjB,CACA,CAAA,CAAA,CACA,CAAA,CAAA,CACA,CAAA,EACA,CAED,CC/NO,SAAS0C,GAAgB,CAC/B,MAAAC,EACA,aAAAC,CACD,EAAyB,CACxB,KAAM,CAAE,EAAA5G,EAAG,KAAA2C,CAAA,EAAS1C,EAAA,EACd2C,EAAQD,EAAK,WAAa,KAE1BuC,EAAWR,GAAuB,CACxC,MAAMhC,EAAY,mBAClB,OAAQgC,EAAA,CACR,IAAK,UACL,OAAO5B,MAACqC,GAAS,UAAAzC,EAAsB,EACvC,IAAK,WACL,OAAOI,MAACsC,GAAU,UAAA1C,EAAsB,EACxC,IAAK,SACL,OAAOI,MAACuC,GAAO,UAAA3C,EAAsB,CAAA,CAErC,EAEMmE,EAAWjC,GAAmB,CACpC,OAAQA,EAAK,KAAA,CACb,IAAK,UACL,MAAO,aAAaA,EAAK,EAAE,GAC3B,IAAK,WACL,MAAO,cAAcA,EAAK,EAAE,GAC5B,IAAK,SACL,MAAO,mBAAmBA,EAAK,EAAE,EAAA,CAEjC,EAEMkC,EAAgBpC,GAAuB,CAC7C,OAAQA,EAAA,CACR,IAAK,UACL,OAAO1E,EAAE,eAAe,EACxB,IAAK,WACL,OAAOA,EAAE,gBAAgB,EACzB,IAAK,SACL,OAAOA,EAAE,cAAc,CAAA,CAEvB,EAEA,OAAI2G,EAAM,SAAW,EAErB7D,EAAAA,IAAC,MAAA,CACD,UAAU,kDACV,IAAKF,EAAQ,MAAQ,MAErB,eAAC,IAAA,CAAE,UAAU,gCACZ,SAAAgE,GAAgB5G,EAAE,qBAAqB,CAAA,CACxC,CAAA,CAAA,EAMA8C,EAAAA,IAAC,MAAA,CACD,UAAU,uDACV,IAAKF,EAAQ,MAAQ,MAEpB,SAAA+D,EAAM,IAAK/B,GACZ9B,EAAAA,IAACiE,GAAA,CAED,GAAIF,EAAQjC,CAAI,EAChB,UAAU,QAEV,eAACoC,EAAA,CAAK,UAAU,gEAChB,SAAA7D,EAAAA,KAAC8D,EAAA,CAAY,UAAU,0BAEvB,SAAA,CAAA9D,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACf,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACf,SAAA,CAAAL,MAAC,OAAI,UAAU,4BACd,SAAAoC,EAAQN,EAAK,IAAI,EAClB,QACC,OAAA,CAAK,UAAU,2CACf,SAAAkC,EAAalC,EAAK,IAAI,CAAA,CACvB,CAAA,EACA,EACA9B,EAAAA,IAACoE,EAAA,CAAa,UAAU,6DAAA,CAA8D,CAAA,EACtF,EAGApE,EAAAA,IAAC,KAAA,CAAG,UAAU,2DACb,WAAK,KAAA,CACN,CAAA,CAAA,CACA,CAAA,CACA,CAAA,EAxBK,GAAG8B,EAAK,IAAI,IAAIA,EAAK,EAAE,EAAA,CA0B3B,CAAA,CAAA,CAGF,CCvDO,SAASuC,GAAW,CAC1B,KAAAC,EACA,OAAAC,EACA,SAAAC,EACA,eAAAC,EACA,YAAAC,EAAc,GACd,YAAAC,EAAc,EACf,EAAoB,CACnB,KAAM,CAAE,EAAG,KAAA9E,CAAA,EAAS1C,EAAA,EACd2C,EAAQD,EAAK,WAAa,KAG1B+E,EAAa5H,GAAA,EAQb6H,EAAoBC,GAA6B,CACvD,MAAMC,EAAS,CACf,OAAQ,4DACR,KAAM,wEACN,OAAQ,gEACR,IAAK,+DAAA,EAEL,OAAOA,EAAOD,CAA+B,GAAKC,EAAO,MACzD,EAEMC,EAAkB9F,GAA2B,CACnD,MAAM6F,EAAS,CACf,QAAS,gEACT,YAAa,gEACb,OAAQ,wEACR,UAAW,oEACX,UAAW,2DAAA,EAEX,OAAOA,EAAO7F,CAA6B,GAAK6F,EAAO,OACvD,EAEM5G,EAAcmG,EAAK,SAAW,aAAeA,EAAK,SAAW,YAEnE,cACC,MAAA,CAAI,UAAU,YAAY,IAAKxE,EAAQ,MAAQ,MAEhD,SAAA,CAAAO,OAAC,MAAA,CACD,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,wDAEf,SAAA,CAAAL,EAAAA,IAAC,KAAA,CAAG,UAAW,qDAAqDF,EAAQ,WAAa,YAAY,GACpG,WAAK,KAAA,CACN,EAGC4E,GACDrE,EAAAA,KAAC,MAAA,CAAI,UAAU,aACd,SAAA,CAAAkE,GACDlE,EAAAA,KAACoC,EAAA,CAAO,QAAQ,UAAU,KAAK,KAAK,QAAS,IAAM8B,EAAOD,CAAI,EAC9D,SAAA,CAAAtE,MAACiF,IAAK,UAAW,WAAWnF,EAAQ,OAAS,MAAM,GAAI,EACtD,EAAE,OAAQ,MAAM,CAAA,EACjB,EAEC0E,GAAYF,EAAK,SAAW,oBAC5B7B,EAAA,CAAO,QAAQ,cAAc,KAAK,KAAK,QAAS,IAAM+B,EAASF,CAAI,EACpE,SAAA,CAAAtE,MAACkF,IAAO,UAAW,WAAWpF,EAAQ,OAAS,MAAM,GAAI,EACxD,EAAE,SAAU,QAAQ,CAAA,CAAA,CACrB,CAAA,CAAA,CAEA,CAAA,EAEA,EAGAO,EAAAA,KAAC,MAAA,CAAI,UAAU,uBACf,SAAA,CAAAL,EAAAA,IAACmF,EAAA,CAAM,UAAWN,EAAiBP,EAAK,QAAQ,EAC/C,SAAA,EAAE,YAAYA,EAAK,QAAQ,GAAIA,EAAK,QAAQ,EAC7C,EACAtE,EAAAA,IAACmF,EAAA,CAAM,UAAWH,EAAeV,EAAK,MAAM,EAC3C,SAAA,EAAE,UAAUA,EAAK,MAAM,GAAIA,EAAK,MAAM,EACvC,EACAtE,EAAAA,IAACmF,EAAA,CAAM,QAAQ,UACd,SAAA,EAAE,kBAAkBb,EAAK,cAAc,GAAIA,EAAK,cAAc,CAAA,CAC/D,EACCA,EAAK,gBACNjE,OAAC8E,EAAA,CAAM,QAAQ,UACf,SAAA,CAAAnF,MAACoF,GAAS,UAAW,WAAWtF,EAAQ,OAAS,MAAM,GAAI,EAC1D,EAAE,aAAawE,EAAK,cAAc,GAAIA,EAAK,cAAc,CAAA,CAAA,CAC1D,CAAA,CAAA,CAEA,CAAA,EACA,EAGAtE,EAAAA,IAACN,GAAA,CACD,SAAU4E,EAAK,aACf,YAAAnG,EACA,YAAamG,EAAK,aAClB,KAAK,UAAA,CAAA,SAIJJ,EAAA,CACD,SAAA,CAAAlE,EAAAA,IAACqF,EAAA,CACD,SAAArF,EAAAA,IAACsF,EAAA,CAAU,UAAWxF,EAAQ,WAAa,aAC1C,SAAA,EAAE,eAAgB,cAAc,CAAA,CACjC,EACA,EACAO,EAAAA,KAAC8D,EAAA,CAAY,UAAU,YAEtB,SAAA,CAAAG,EAAK,oBACL,MAAA,CACD,SAAA,CAAAjE,EAAAA,KAAC,MAAA,CAAI,UAAU,+BACf,SAAA,CAAAL,EAAAA,IAACqC,EAAA,CAAS,UAAU,+BAAA,CAAgC,QACnD,IAAA,CAAE,UAAU,sBAAuB,SAAA,EAAE,cAAe,aAAa,CAAA,CAAE,CAAA,EACpE,EACArC,EAAAA,IAAC,KAAE,UAAW,qDAAqDF,EAAQ,WAAa,YAAY,GACnG,SAAAwE,EAAK,WAAA,CACN,CAAA,EACA,QAGCiB,EAAA,EAAU,SAGV,MAAA,CACD,SAAA,CAAAlF,EAAAA,KAAC,MAAA,CAAI,UAAU,+BACf,SAAA,CAAAL,EAAAA,IAACwF,GAAA,CAAK,UAAU,+BAAA,CAAgC,QAC/C,IAAA,CAAE,UAAU,sBAAuB,SAAA,EAAE,WAAY,UAAU,CAAA,CAAE,CAAA,EAC9D,EACAnF,EAAAA,KAAC,MAAA,CAAI,UAAU,OACf,SAAA,CAAAL,EAAAA,IAAC,IAAA,CAAE,UAAU,0BACX,SAAAsE,EAAa,eAAiBA,EAAK,aAAe,EAAE,aAAc,YAAY,CAAA,CAChF,EACEA,EAAa,gBACftE,EAAAA,IAAC,IAAA,CACD,KAAM,UAAWsE,EAAa,cAAc,GAC5C,UAAU,uCAER,SAAAA,EAAa,cAAA,CAAA,CACf,CAAA,CAEA,CAAA,EACA,QAECiB,EAAA,EAAU,EAGXlF,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACf,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACf,SAAA,CAAAL,EAAAA,IAACS,EAAA,CAAM,UAAU,+BAAA,CAAgC,QAChD,IAAA,CAAE,UAAU,sBAAuB,SAAA,EAAE,iBAAkB,gBAAgB,CAAA,CAAE,CAAA,EAC1E,EACAT,EAAAA,IAACmF,EAAA,CAAM,QAAQ,UACd,SAAA,EAAE,kBAAkBb,EAAK,cAAc,GAAIA,EAAK,cAAc,CAAA,CAC/D,CAAA,EACA,QAECiB,EAAA,EAAU,EAGXlF,EAAAA,KAAC,MAAA,CAAI,UAAU,YACf,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACf,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACf,SAAA,CAAAL,EAAAA,IAACyF,EAAA,CAAS,UAAU,+BAAA,CAAgC,QACnD,IAAA,CAAE,UAAU,sBAAuB,SAAA,EAAE,UAAW,SAAS,CAAA,CAAE,CAAA,EAC5D,EACAzF,EAAAA,IAAC,IAAA,CAAE,UAAU,gCACZ,SAAA,IAAI,KAAKsE,EAAK,UAAU,EAAE,eAAexE,EAAQ,QAAU,OAAO,CAAA,CACnE,CAAA,EACA,EAEAO,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACf,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACf,SAAA,CAAAL,EAAAA,IAACyF,EAAA,CAAS,UAAU,+BAAA,CAAgC,QACnD,IAAA,CAAE,UAAU,sBAAuB,SAAA,EAAE,UAAW,cAAc,CAAA,CAAE,CAAA,EACjE,EACAzF,EAAAA,IAAC,IAAA,CAAE,UAAU,gCACZ,SAAA,IAAI,KAAKsE,EAAK,UAAU,EAAE,eAAexE,EAAQ,QAAU,OAAO,CAAA,CACnE,CAAA,EACA,EAECwE,EAAK,cACNjE,OAAC,MAAA,CAAI,UAAU,oCACf,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACf,SAAA,CAAAL,EAAAA,IAACyF,EAAA,CAAS,UAAU,+BAAA,CAAgC,QACnD,IAAA,CAAE,UAAU,sBAAuB,SAAA,EAAE,YAAa,WAAW,CAAA,CAAE,CAAA,EAChE,EACAzF,EAAAA,IAAC,IAAA,CAAE,UAAU,gCACZ,SAAA,IAAI,KAAKsE,EAAK,YAAY,EAAE,eAAexE,EAAQ,QAAU,OAAO,CAAA,CACrE,CAAA,CAAA,CACA,CAAA,EAEA,EAGEwE,EAAa,YACfjE,EAAAA,KAAAqF,EAAAA,SAAA,CACA,SAAA,CAAA1F,EAAAA,IAACuF,EAAA,EAAU,EACXlF,EAAAA,KAAC,MAAA,CAAI,UAAU,YAEf,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACf,SAAA,CAAAL,EAAAA,IAAC2F,GAAA,CAAU,UAAU,+BAAA,CAAgC,QACpD,IAAA,CAAE,UAAU,sBAAuB,SAAA,EAAE,aAAc,YAAY,CAAA,CAAE,CAAA,EAClE,EAGA3F,EAAAA,IAAC,MAAA,CAAI,UAAU,OACf,SAAAA,EAAAA,IAAC,IAAA,CAAE,UAAU,wCACX,SAAAsE,EAAa,WAAW,KAAA,CAC1B,EACA,EAGAjE,EAAAA,KAAC,MAAA,CAAI,UAAU,6CACf,SAAA,CAAAA,OAAC,MAAA,CACD,SAAA,CAAAL,MAAC,KAAE,UAAU,qCAAsC,SAAA,EAAE,OAAQ,MAAM,EAAE,EACrEA,EAAAA,IAACmF,EAAA,CAAM,QAAQ,UAAU,UAAU,aACjC,SAAAb,EAAa,WAAW,gBAAgB,QAAQ,KAAM,GAAG,CAAA,CAC3D,CAAA,EACA,SACC,MAAA,CACD,SAAA,CAAAtE,MAAC,KAAE,UAAU,qCAAsC,SAAA,EAAE,OAAQ,MAAM,EAAE,EACrEA,EAAAA,IAAC,KAAE,UAAU,UACZ,aAAI,KAAMsE,EAAa,WAAW,eAAe,EAAE,mBACpDxE,EAAQ,QAAU,QAClB,CAAE,KAAM,UAAW,MAAO,OAAQ,IAAK,SAAA,CAAU,CACjD,CACA,CAAA,CAAA,CACA,CAAA,EACA,EAGEwE,EAAa,WAAW,UAC1BjE,EAAAA,KAAC,MAAA,CAAI,UAAU,OACf,SAAA,CAAAL,MAAC,KAAE,UAAU,qCAAsC,SAAA,EAAE,WAAY,UAAU,EAAE,QAC5E,IAAA,CAAE,UAAU,0BAA4B,SAAAsE,EAAa,WAAW,QAAA,CAAS,CAAA,EAC1E,EAIEA,EAAa,WAAW,SAC1BjE,EAAAA,KAAC,MAAA,CAAI,UAAU,OACf,SAAA,CAAAL,MAAC,KAAE,UAAU,qCACZ,SAAA,EAAE,kBAAmB,iBAAiB,EACvC,EACAA,EAAAA,IAACyC,EAAA,CACD,QAAO,GACP,QAAQ,UACR,KAAK,KACL,UAAU,WAEV,SAAApC,EAAAA,KAAC,KAAE,KAAM,aAAciE,EAAa,WAAW,QAAQ,EAAE,GACzD,SAAA,CAAAtE,MAACoE,GAAa,UAAW,eAAetE,EAAQ,OAAS,MAAM,GAAI,EAClEA,EACEwE,EAAa,WAAW,QAAQ,QAChCA,EAAa,WAAW,QAAQ,OAAA,CAAA,CACnC,CAAA,CAAA,CACA,CAAA,CACA,CAAA,CAAA,CAEA,CAAA,CAAA,CACA,CAAA,CAAA,CAEA,CAAA,EACA,SA+CCJ,EAAA,CACD,SAAA,CAAAlE,EAAAA,IAACqF,EAAA,CACD,gBAACC,EAAA,CAAU,UAAW,2BAA2BxF,EAAQ,mBAAqB,EAAE,GAChF,SAAA,CAAAE,EAAAA,IAACoF,EAAA,CAAS,UAAU,SAAA,CAAU,EAC7B,EAAE,oBAAqB,mBAAmB,GACzC,IAAM,CAER,MAAMQ,EAAStB,EAAK,OACduB,GACLD,GAAQ,aAAa,QAAU,IAC/BA,GAAQ,cAAc,QAAU,IAChCA,GAAQ,YAAY,QAAU,IAC9BtB,EAAK,cAAgBA,EAAK,iBAAmB,UAAY,EAAI,GAE9D,OAAOuB,EAAc,EACrB7F,MAACmF,EAAA,CAAM,QAAQ,YAAY,UAAU,OACpC,SAAAU,CAAA,CACD,EACI,IACJ,GAAA,CAAG,CAAA,CACH,CAAA,CACA,EACAxF,EAAAA,KAAC8D,EAAA,CAAY,UAAU,YAErB,SAAA,EAAA,IAAM,CACR,MAAM2B,EAAoBxB,EACpByB,MAAmB,IAGzB,GAAIzB,EAAK,cAAgBA,EAAK,gBAAkBA,EAAK,iBAAmB,UAAW,CACnF,MAAM0B,EAAM,GAAG1B,EAAK,cAAc,IAAIA,EAAK,YAAY,GACjD2B,EAAgBnG,EACnBgG,EAAkB,oBAAsBA,EAAkB,mBAC1DA,EAAkB,oBAAsBA,EAAkB,mBAE7DC,EAAa,IAAIC,EAAK,CACtB,KAAM1B,EAAK,eACX,GAAIA,EAAK,aACT,MAAO2B,GAAiB,GAAG3B,EAAK,cAAc,KAAKA,EAAK,aAAa,UAAU,EAAG,CAAC,CAAC,EAAA,CACnF,CACD,CAGIwB,EAAkB,YAAc,MAAM,QAAQA,EAAkB,UAAU,GAC9EA,EAAkB,WAAW,QAAShE,GAAc,CAEpD,GAAI,CAACA,GAAQ,CAACA,EAAK,MAAQ,CAACA,EAAK,GAAI,OAErC,MAAMkE,EAAM,GAAGlE,EAAK,IAAI,IAAIA,EAAK,EAAE,GAGnC,GAAIiE,EAAa,IAAIC,CAAG,EAAG,OAE3B,MAAME,EAAQpG,EACXgC,EAAK,UAAYA,EAAK,SACtBA,EAAK,UAAYA,EAAK,SAEzBiE,EAAa,IAAIC,EAAK,CACtB,KAAMlE,EAAK,KACX,GAAIA,EAAK,GACT,MAAOoE,GAAS,GAAG,EAAE,aAAapE,EAAK,IAAI,GAAIA,EAAK,IAAI,CAAC,KAAK,EAAE,UAAW,SAAS,CAAC,GAAA,CACpF,CACD,CAAC,EAID,MAAMqE,EAAY,MAAM,KAAKJ,EAAa,OAAA,CAAQ,EAAE,OAAO,CAACjE,EAAMsE,EAAOC,IACzED,IAAUC,EAAK,UAAWnJ,GAAMA,EAAE,OAAS4E,EAAK,MAAQ5E,EAAE,KAAO4E,EAAK,EAAE,CAAA,EAGxE,OAAOqE,EAAU,OAAS,EAC1BnG,EAAAA,IAAC4D,IAAgB,MAAOuC,CAAA,CAAW,EAEnCnG,EAAAA,IAAC,MAAA,CAAI,UAAU,kDACf,SAAAA,EAAAA,IAAC,KAAE,UAAU,gCACZ,WAAE,kBAAmB,mCAAmC,EACzD,CAAA,CACA,CAEA,GAAA,EAGC2E,GAAe,CAACxG,GACjBkC,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACf,SAAA,CAAAL,MAAC,KAAE,UAAU,qCACZ,SAAA,EAAE,oBAAqB,6CAA6C,EACrE,EACAA,EAAAA,IAACa,GAAA,CACD,eAAgB,IAAM,CACtB,MAAMiF,EAAoBxB,EACpBgC,MAAe,IAGrB,GAAIhC,EAAK,cAAgBA,EAAK,gBAAkBA,EAAK,iBAAmB,UAAW,CACnF,MAAM0B,EAAM,GAAG1B,EAAK,cAAc,IAAIA,EAAK,YAAY,GACjD2B,EAAgBnG,EACnBgG,EAAkB,oBAAsBA,EAAkB,mBAC1DA,EAAkB,oBAAsBA,EAAkB,mBAE7DQ,EAAS,IAAIN,EAAK,CAClB,KAAM1B,EAAK,eACX,GAAIA,EAAK,aACT,MAAO2B,GAAiB,GAAG3B,EAAK,cAAc,KAAKA,EAAK,aAAa,UAAU,EAAG,CAAC,CAAC,EAAA,CACnF,CACD,CAGA,OAAIwB,EAAkB,YAAc,MAAM,QAAQA,EAAkB,UAAU,GAC9EA,EAAkB,WAAW,QAAShE,GAAc,CAEpD,GAAI,CAACA,GAAQ,CAACA,EAAK,MAAQ,CAACA,EAAK,GAAI,OAErC,MAAMkE,EAAM,GAAGlE,EAAK,IAAI,IAAIA,EAAK,EAAE,GAGnC,GAAIwE,EAAS,IAAIN,CAAG,EAAG,OAEvB,MAAME,EAAQpG,EACXgC,EAAK,UAAYA,EAAK,SACtBA,EAAK,UAAYA,EAAK,SAEzBwE,EAAS,IAAIN,EAAK,CAClB,KAAMlE,EAAK,KACX,GAAIA,EAAK,GACT,MAAOoE,GAAS,GAAG,EAAE,aAAapE,EAAK,IAAI,GAAIA,EAAK,IAAI,CAAC,KAAK,EAAE,UAAW,SAAS,CAAC,GAAA,CACpF,CACD,CAAC,EAGM,MAAM,KAAKwE,EAAS,OAAA,CAAQ,CACnC,GAAA,EACA,cAAe,MAAOC,GAAa,CAEnC,MAAMC,EAAcD,EAAS,CAAC,EACxBE,EAAkBF,EAAS,MAAM,CAAC,EAGlCX,EAAc,CACpB,KAAMa,EAAgB,OAAS,EAAI,QAAU,QAAA,EAIvCC,EAAaD,EAClB,OAAQzE,GAAMA,EAAE,OAAS,SAAS,EAClC,IAAKA,GAAMA,EAAE,EAAE,EACV2E,EAAcF,EACnB,OAAQzE,GAAMA,EAAE,OAAS,UAAU,EACnC,IAAKA,GAAMA,EAAE,EAAE,EACV4E,EAAYH,EACjB,OAAQzE,GAAMA,EAAE,OAAS,QAAQ,EACjC,IAAKA,GAAMA,EAAE,EAAE,EAEZ0E,EAAW,OAAS,IAAGd,EAAO,YAAcc,GAC5CC,EAAY,OAAS,IAAGf,EAAO,aAAee,GAC9CC,EAAU,OAAS,IAAGhB,EAAO,WAAagB,GAG9ChC,EAAW,OAAO,CAClB,OAAQN,EAAK,GACb,KAAM,CACN,eAAgBkC,GAAa,MAAQ,UACrC,aAAcA,GAAa,IAAM,KACjC,OAAQ,OAAO,KAAKZ,CAAM,EAAE,OAAS,EAAIA,EAAS,KAClD,sBAAuBtB,EAAK,UAAA,CAC5B,CACC,CACD,EACA,SAAU,EAAA,CAAA,CACV,CAAA,CACA,CAAA,CAAA,CAEA,CAAA,CAAA,CACA,CAAA,EAWA,CAED,CClhBO,SAASuC,IAAiB,CAC/B,KAAM,CAAE,EAAA3J,EAAG,KAAA2C,CAAA,EAAS1C,EAAA,EACd2C,EAAQD,EAAK,WAAa,KAC1BiH,EAAWC,GAAA,EACX,CAAE,GAAAzK,CAAA,EAAO0K,GAAU,CAAE,KAAM,wBAAyB,EAEpD,CAAE,KAAM1C,EAAM,UAAA2C,EAAW,MAAAtJ,CAAA,EAAUf,GAAQN,CAAY,EAEvD4K,EAAa,IAAM,CAEzB,EAEMC,EAAe,SAAY,CAE3B,QAAQjK,EAAE,sBAAuB,4CAA4C,CAAC,CAMpF,EAEA,OAAIS,EAEA0C,EAAAA,KAAC,MAAA,CAAI,UAAU,8CACb,SAAA,CAAAA,EAAAA,KAAC+G,GAAA,CAAM,QAAQ,cACb,SAAA,CAAApH,EAAAA,IAACW,EAAA,CAAY,UAAU,QAAA,CAAS,QAC/B0G,GAAA,CACE,SAAA1J,EAAM,SAAWT,EAAE,sBAAuB,wCAAwC,CAAA,CACrF,CAAA,EACF,QACCuF,EAAA,CAAO,QAAQ,UAAU,QAAS,IAAMqE,EAAS,CAAE,GAAI,QAAA,CAAU,EAAG,UAAU,OAC5E,SAAA5J,EAAE,gBAAiB,eAAe,CAAA,CACrC,CAAA,EACF,EAKFmD,EAAAA,KAAC,MAAA,CACC,UAAU,wDACV,IAAKP,EAAQ,MAAQ,MAGpB,SAAA,CAAAmH,GACC5G,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAL,EAAAA,IAACsH,EAAA,CAAS,UAAU,YAAA,CAAa,EACjCjH,EAAAA,KAAC,MAAA,CAAI,UAAU,aACb,SAAA,CAAAL,EAAAA,IAACsH,EAAA,CAAS,UAAU,UAAA,CAAW,EAC/BtH,EAAAA,IAACsH,EAAA,CAAS,UAAU,UAAA,CAAW,EAC/BtH,EAAAA,IAACsH,EAAA,CAAS,UAAU,UAAA,CAAW,CAAA,CAAA,CACjC,CAAA,EACF,EACAtH,EAAAA,IAACsH,EAAA,CAAS,UAAU,aAAA,CAAc,EAClCtH,EAAAA,IAACsH,EAAA,CAAS,UAAU,aAAA,CAAc,CAAA,EACpC,EAID,CAACL,GAAa3C,GACbjE,EAAAA,KAAAqF,EAAAA,SAAA,CAEE,SAAA,CAAA1F,MAAC,MAAA,CACC,SAAAK,EAAAA,KAACoC,EAAA,CACC,QAAQ,QACR,KAAK,KACL,QAAS,IAAMqE,EAAS,CAAE,GAAI,SAAU,EACxC,UAAU,OAEV,SAAA,CAAA9G,EAAAA,IAACuH,GAAA,CACC,UAAW,UAAUzH,EAAQ,GAAK,YAAY,IAAIA,EAAQ,OAAS,MAAM,EAAA,CAAA,EAE1E5C,EAAE,gBAAiB,eAAe,CAAA,CAAA,CAAA,EAEvC,EAGA8C,MAACqE,IAAW,KAAAC,EAAY,OAAQ4C,EAAY,SAAUC,EAAc,YAAa,EAAA,CAAM,CAAA,CAAA,CACzF,CAAA,CAAA,CAAA,CAIR,CCrG8D,MAAAK,GAArDX"}